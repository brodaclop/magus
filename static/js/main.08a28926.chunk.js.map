{"version":3,"sources":["engine/roll.tsx","engine/dobasmatrix.tsx","engine/harc.tsx","engine/kasztok.tsx","engine/karakter.tsx","components/DobasEredmeny.tsx","components/DobasInput.tsx","components/NumberInput.tsx","components/DobasMatrixDisplay.tsx","components/PointsTable.tsx","components/Selection.tsx","components/KarakterAlkotasBackground.tsx","pages/KarakterAlkotas.tsx","components/FegyverLista.tsx","components/IntegerInput.tsx","components/FegyverEditor.tsx","components/FegyverValaszto.tsx","components/HMEloszto.tsx","components/KepzettsegModal.tsx","components/KepzettsegLista.tsx","components/PancelLista.tsx","components/PancelEditor.tsx","components/PancelValaszto.tsx","components/Pajzsok.tsx","components/Jegyzetek.tsx","story/components/EditableText.tsx","components/Felszereles.tsx","components/KategoriaEditor.tsx","components/KarakterTabla.tsx","pages/Karakterlap.tsx","engine/pancel.tsx","hooks/dataconnector.tsx","components/CategoriesDropdown.tsx","components/DragAndDrop.tsx","components/KarakterImport.tsx","pages/Kocskadobo.tsx","components/KockaModal.tsx","static/magus.png","components/VarazslatLista.tsx","engine/varazslat.tsx","pages/Varazslatok.tsx","components/VarazslatokModal.tsx","components/PageHeader.tsx","components/SzituacioSelector.tsx","components/KombatCard.tsx","pages/Kombat.tsx","story/components/ContextMenu.tsx","story/components/SceneListContextMenu.tsx","story/utils/DomUtils.tsx","story/components/CommentEditorModal.tsx","story/components/CommentList.tsx","story/components/StoryEvent.tsx","story/utils/EditorUtils.tsx","story/components/editor/EditingButtons.tsx","story/components/EditableNode.tsx","story/utils/inlinerenderers/EventRenderer.tsx","story/utils/inlinerenderers/JumpRenderer.tsx","story/utils/inlinerenderers/LanguageRenderer.tsx","story/utils/inlinerenderers/ParagraphRenderer.tsx","story/utils/inlinerenderers/RewardRenderer.tsx","story/utils/inlinerenderers/RollRenderer.tsx","story/utils/inlinerenderers/SettingRenderer.tsx","story/utils/RenderUtils.tsx","story/components/editor/IconComponent.tsx","story/components/editor/EventRoleSelector.tsx","story/components/editor/EventEditor.tsx","story/components/EventEditorModal.tsx","story/components/timeline/Timeline.tsx","story/components/StoryContextMenu.tsx","story/utils/CommentUtils.tsx","story/components/StoryScene.tsx","story/pages/StoryPage.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["PATTERN","random","Math","rollDice","dice","ijasz","Array","numDice","keys","map","_","rollSingle","reduce","acc","curr","value","details","res","floor","die","ceil","div","rollKf","result","max","plus","kfMod","kf","roll","tries","abs","_roll","parseDiceRoll","diceString","Number","isNaN","replace","match","groups","undefined","formatDiceRoll","DobasMatrix","values","sum","add","name","dobas","forEach","key","toString","filter","indexOf","Object","a","b","getRolls","r","clearRolls","this","HARCERTEK_DISPLAY_NAMES","FEGYVER_KEPZETTSEG","ke","te","ve","ce","FEGYVERTELEN","harcertek","tamPerKor","sebzes","FEGYVEREK","lassu","lotav","SZITUACIOK","FegyverUtils","fegyver","toLowerCase","pajzs","KEPESSEG_NEV","ero","gy","ugy","ak","egs","sz","int","ae","asz","erz","FAJ_KEPESSEG","FOKASZTOK","KASZTOK","kepesseg","alapHarcertek","hm","kotelezo","szabad","epfp","ep","fp","fpPerSzint","harcos","lovag","tolvaj","pap","paplovag","findKepzettseg","kepzettseg","kepzettsegek","find","k","folottiResz","hatar","szintlepes","karakter","szint","r1","r2","kaszt","hmHarcertek","Set","akt","calculateSebesulesHatrany","calculateMGT","pancel","valasztottPancel","pancelok","nehez","mgt","calculateHarcertek","szituaciok","masodlagos","index","masodlagosFegyver","valasztottFegyver","fegyverek","findFegyver","tipus","ret","kepessegek","erobonusz","calculateKepessegHarcertek","fejvadasz","pajzsHasznalat","addKepzettseg","ketkezesHarc","addKetkezes","sebesules","DobasEredmeny","pointing","Label","size","color","basic","DobasInput","onChange","setDie","addPlus","ButtonGroup","fluid","labelPosition","Button","onClick","NumberInput","min","icons","style","whiteSpace","Icon","compact","margin","width","e","newValue","target","test","num","parseInt","DobasMatrixDisplay","matrix","keyMap","direction","title","editable","setValue","numberOnly","displayCell","constantRoll","rollString","includes","Table","Cell","collapsing","v","String","celled","striped","Header","Row","HeaderCell","disabled","Body","Footer","definition","PointsTable","points","p","label","Selection","selected","setSelected","options","structure","as","fk","Group","vertical","tag","o","n","i","active","KarakterAlkotasBackground","fajNevek","backgroundSelection","setBackgroundSelection","Input","placeholder","error","s","JSON","parse","stringify","faj","require","default","calculateKepessegek","fajok","newMatrix","KarakterAlkotas","save","useState","setMatrix","useEffect","Grid","relaxed","GridRow","columns","divided","GridColumn","floated","allowEmptyValue","stepAmount","minValue","maxValue","intValue","textAlign","secondary","primary","kar","version","id","v4","categories","createKarakter","FegyverLista","onSelectionChange","extraButton","fegyverLista","rec","selectable","colspan","IntegerInput","mandatory","convertToFormValues","lofegyver","convertFromFormValues","FegyverEditor","submit","cancel","form","setForm","Checkbox","fitted","toggle","checked","FegyverValaszto","saveFegyverek","selectedForDeletion","setSelectedForDeletion","editorOpen","setEditorOpen","listEditorOpen","setListEditorOpen","saveSelection","useCallback","kepzettsegSzint","addFegyverAndKepzettseg","saveDeletion","f","Modal","trigger","onOpen","onClose","open","Content","push","negative","sort","localeCompare","idx","fIdx","findIndex","kepzettsegName","kp","HMEloszto","complete","current","setCurrent","change","he","newCurrent","colSpan","padding","circular","icon","content","KepzettsegModal","modalOpen","setModalOpen","setKepzettseg","setSzint","setKp","marginBottom","marginLeft","newKepzettseg","compare","KepzettsegLista","splice","PancelLista","sfe","PancelEditor","PancelValaszto","savePancelok","some","every","Pajzsok","asztral","termeszetes","mental","statikus","dinamikus","Jegyzetek","borderRadius","height","jegyzetek","EditableText","forwardRef","ref","text","editedText","setEditedText","edited","setEdited","useImperativeHandle","edit","onSubmit","transparent","autoFocus","onBlur","Felszereles","rowRefs","felszereles","qty","q","KategoriaEditor","kategoriak","setKategoriak","ujKategoria","setUjKategoria","list","c","KarakterTabla","clone","remove","torlesKerdes","setTorlesKerdes","Confirm","onCancel","onConfirm","header","cancelButton","confirmButton","fileDownload","Karakterlap","pszi","mp","kepessegMatrix","masodlagosFegyverMutat","PANCELOK","PREFIX","STORY_KEY","CategoriesDropdown","currentCategory","setCurrentCategory","Dropdown","item","Menu","Item","DragAndDrop","state","drag","dropRef","React","createRef","dragCounter","handleDrag","preventDefault","stopPropagation","handleDragIn","dataTransfer","items","length","setState","handleDragOut","handleDrop","files","props","clearData","addEventListener","removeEventListener","display","position","dragPlaceholder","children","Component","KarakterImport","saveMese","l","mese","endsWith","Slider","DICE_ROLLS","PLUS","MERETEK","MOZGASOK","VISZONYOK","Kockadobo","input","setInput","setResult","useReducer","prev","elem","slice","HISTORY_LENGTH","history","addToHistory","tavolsag","meret","mozgas","viszonyok","lofegyverVedo","setLofegyverVedo","dob","setKocka","diceRoll","setPlus","className","floating","reverse","h","settings","step","KockaModal","kockaOpen","setKockaOpen","VarazslatLista","varazslatok","fieldLabels","action","toggleOpen","sorted","miscFields","misc","field","pont","varazslasIdeje","backgroundColor","border","dangerouslySetInnerHTML","__html","description","trim","split","line","join","VARAZSLAT_LABELS","me","idotartam","erosseg","hatotav","PSZI_LABELS","ALL_SPELLS","labels","Varazslatok","setTipus","setLabels","spells","spell","spellLabels","has","allSelectedLabels","flatMap","delete","VarazslatokModal","positive","MAX_KARAKTERS_PER_PAGE","PageHeader","karakterek","page","setPage","karakterStart","setKarakterStart","karakterPos","scrolled","canScrollLeft","canScrollRight","karaktersDisplayed","tabular","Image","src","logo","flexGrow","category","SzituacioSelector","setSzituaciok","szituacioOptions","nev","multiple","simple","renderLabel","KombatCard","dobasEredmeny","setDobasEredmeny","harcertekMatrix","sebzesRoll","rolls","Error","sumRolls","rollKe","rollTe","rollCe","rollSebzes","cellContents","Card","hatrany","headerColour","Description","singleLine","fegyverCsere","m","extra","Kombat","dobasEredmenyek","setDobasEredmenyek","refs","DobasButton","rollFn","uj","flexDirection","flexWrap","alignItems","one","two","oneKe","order","createContextFromEvent","left","clientX","top","clientY","right","bottom","getBoundingClientRect","ContextMenu","onClicked","event","contextRef","useRef","setOpen","close","onContextMenu","Popup","context","onItemClick","data","SceneListContextMenu","onSelected","findElements","root","elements","ch","concat","addChild","parent","referenceSibling","insert","newElement","type","$parent","addChildElement","child","insertIndex","referenceIndex","deleteChild","deleteIndex","attr","attributes","t","DomUtils","addText","previousSibling","childText","findById","found","findElementsByName","findReferences","str","xml2js","nativeType","addParent","parentKey","convertLegacyLinks","events","print","js2xml","CommentEditorModal","addComment","kommentModal","setKommentModal","editedKomment","setEditedKomment","CommentList","comments","deleteComment","renderer","hoverable","List","wide","renderElement","ROLE_ICONS","iconForRole","role","StoryEvent","commentUtils","onEdit","status","setActive","justifyContent","borderTop","borderBottom","onMouseEnter","onMouseLeave","listStyle","cursor","comment","createSelection","start","end","SelectionState","createEmpty","getLastBlock","getKey","merge","anchorOffset","focusOffset","addEntityToSelection","selection","console","log","entityKey","createEntity","getLastCreatedEntityKey","Modifier","applyEntity","addEntity","addBlock","block","ContentBlock","genKey","blockMap","getBlockMap","toOrderedMap","EditorUtils","processElement","contentsOnly","insertText","len","getLength","lastPos","getBlocksAsArray","getText","findEntityRanges","getEntityAt","textNode","substring","entity","getEntity","getType","getData","blockToElement","EditingButtons","editorState","setEditorState","editorPopup","setEditorPopup","editedValue","setEditedValue","addTag","attrs","getSelection","newContent","getCurrentContent","EditorState","search","scene","EditableNode","create","readOnly","setTimeout","onFinished","EventRenderer","switchToScene","JumpRenderer","LanguageRenderer","level","ParagraphRenderer","RewardRenderer","RollRenderer","SettingRenderer","window","STORY_TAG_ICONS","setting","reward","character","jump","StoryElement","contents","targetElem","targetIcon","StoryCard","TableRow","CharacterCard","NestedTableRow","elems","first","rest","rowSpan","structured","ItemCard","StoryCards","cards","CardGroup","itemsPerRow","raised","Meta","RenderUtils","switchScene","renderCards","IconComponent","offsetKey","contentState","fontWeight","data-offset-key","EventRowSelector","onRoleSelected","labeled","toElements","EventEditor","eventEdited","eventRole","setEventRole","eventDate","setEventDate","onEscape","ContentState","createFromBlockArray","inlineDecorator","CompositeDecorator","strategy","callback","_state","component","createWithContent","Segment","keyBindingFn","getDefaultKeyBinding","handleKeyCommand","EventEditorModal","editedEvent","onEditingFinished","anchor","Timeline","orderedEvents","date","heights","fill","unitHeight","TimelineUnit","crossbar","flexBasis","zIndex","pinned","boxShadow","StoryContextMenu","setEditedEvent","operation","ensureComments","story","ensureEventId","CommentUtils","eventId","lastComment","pop","findComments","StoryScene","contextMenu","setContextMenu","displayMode","setDisplayMode","StoryPage","saveStory","activeScene","setActiveScene","storyOb","scenes","sceneTabs","menuItem","render","Tab","Pane","characters","activeIndex","onTabChange","panes","App","operations","setOperations","fetch","localStorage","getItem","put","ob","setItem","all","startsWith","cat","load","info","maxEp","maxFp","exportMagus","importMagus","newNev","removeItem","listFajok","listFegyverek","CONFIG_PREFIX","listPancelok","loadStory","useDataConnector","saveKarakter","removeKarakter","ps","renderPage","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.08a28926.chunk.js","sourcesContent":["export interface DiceRoll {\n    tries: number;\n    numDice: number;\n    die: number;\n    plus: number;\n    div: number;\n    kf: boolean;\n}\n\nexport interface DiceRollResult {\n    value: number;\n    details: string;\n}\n\nconst PATTERN = /(?<numDice>\\d+)?k(?<die>\\d+)(?:\\/(?<div>\\d+))?(?<plus>[+-]\\d+)?(?:\\((?<tries>\\d+)x\\))?(?:\\+kf(?<kf>))?/;\n\nlet random = Math.random;\n\nconst _roll = (dice: DiceRoll, ijasz: boolean): DiceRollResult => {\n    let result = [...Array(dice.tries).keys()].map(_ => rollDice(dice, ijasz)).reduce((acc, curr) => ({ value: Math.max(acc.value, curr.value), details: `${acc.details ? acc.details + ' or ' : ''}(${curr.details})` }), { value: 0, details: '' });\n    result = {\n        value: result.value + dice.plus,\n        details: `${result.details}${dice.plus > 0 ? ' + ' + dice.plus : (dice.plus < 0 ? ' - ' + Math.abs(dice.plus) : '')}`\n    };\n    if (dice.kf) {\n        return rollKf(dice, result);\n    } else {\n        return result;\n    }\n\n}\n\nconst rollDice = (dice: DiceRoll, ijasz: boolean): DiceRollResult => {\n    return [...Array(dice.numDice).keys()].map(_ => rollSingle(dice, ijasz)).reduce((acc, curr) => ({ value: acc.value + curr, details: `${acc.details ? acc.details + '+' : ''}${curr}` }), { value: 0, details: '' });\n}\n\nconst rollSingle = (dice: DiceRoll, ijasz: boolean): number => {\n    let res = 0;\n    let curr = 0;\n    do {\n        curr = 1 + Math.floor(random() * dice.die);\n        res += Math.ceil(curr / dice.div);\n    } while (ijasz && curr === dice.die)\n    return res;\n}\n\nconst rollKf = (dice: DiceRoll, result: DiceRollResult): DiceRollResult => {\n    const max = dice.numDice * Math.floor(dice.die / dice.div) + dice.plus;\n    if (result.value === max) {\n        let kfMod;\n        const kf = roll('k100').value;\n        if (kf <= 20) {\n            kfMod = -roll('k6').value;\n        } else if (kf <= 50) {\n            kfMod = -1;\n        } else if (kf <= 75) {\n            kfMod = 0;\n        } else if (kf <= 95) {\n            kfMod = 1;\n        } else {\n            kfMod = 2;\n        }\n        return {\n            value: result.value + kfMod,\n            details: `${result.details} (kf: ${kf} / ${kfMod})`\n        }\n    } else {\n        return result;\n    }\n\n}\n\nexport const roll = (dice: DiceRoll | string, ijasz?: boolean): DiceRollResult => _roll(typeof dice === 'string' ? parseDiceRoll(dice) : dice, !!ijasz);\n\nexport const rollSource = (randomFn: () => number): void => { random = randomFn }\n\nexport const parseDiceRoll = (diceString: string = '0'): DiceRoll => {\n    if (!Number.isNaN(Number(diceString))) {\n        return {\n            numDice: 0,\n            die: 0,\n            plus: Number(diceString),\n            tries: 1,\n            div: 1,\n            kf: false\n        };\n    }\n    const res = diceString.replace(/\\s/g, '').match(PATTERN);\n    return {\n        numDice: Number(res?.groups?.numDice ?? 1),\n        die: Number(res?.groups?.die ?? 0),\n        plus: Number(res?.groups?.plus ?? 0),\n        tries: Number(res?.groups?.tries ?? 1),\n        div: Number(res?.groups?.div ?? 1),\n        kf: res?.groups?.kf !== undefined\n    }\n}\n\nexport const formatDiceRoll = (dice: DiceRoll): string => {\n    if (dice.die === 0) {\n        return dice.plus ? `${dice.plus}` : '-';\n    };\n    return `${dice.numDice === 1 ? '' : dice.numDice}k${dice.die}${dice.div > 1 ? '/' + dice.div : ''}${dice.plus ? (dice.plus > 0 ? '+' : '-') + Math.abs(dice.plus) : ''}${dice.tries > 1 ? '(' + dice.tries + 'x)' : ''}${dice.kf ? ' + kf' : ''}`;\n}\n\nexport const formatResult = (result: DiceRollResult): string => {\n    return `${result.value} (${result.details})`\n}\n\nexport const sumRolls = (rolls: Array<DiceRoll>): DiceRoll | null => {\n    try {\n        const ret: DiceRoll = parseDiceRoll();\n        rolls.forEach(r => {\n            if (r.tries > 1 || r.kf) {\n                throw new Error('can\\'t sum rolls with multiple tries or kf');\n            }\n            if (ret.die !== 0 && r.die !== 0 && r.die !== ret.die) {\n                throw new Error('can\\'t sum rolls with different dies');\n            }\n            if (ret.div !== 1 && r.div !== 1 && ret.div !== r.div) {\n                throw new Error('can\\'t sum rolls with different divisors');\n            }\n            if (r.die !== 0) {\n                ret.die = r.die;\n                ret.numDice += r.numDice;\n            }\n            if (r.plus !== 0) {\n                ret.plus += r.plus;\n            }\n            if (r.div > 1) {\n                ret.div = r.div;\n            }\n        })\n        return ret;\n    } catch (e) { }\n    return null;\n}","import { DiceRoll, DiceRollResult, parseDiceRoll, roll } from \"./roll\";\n\nexport interface Dobas {\n    roll: DiceRoll;\n    result?: DiceRollResult;\n}\n\nexport class DobasMatrix {\n    readonly values: Record<string, Record<string, Dobas>>;\n    readonly sum: Record<string, number>;\n\n    constructor(readonly keys: Array<string>) {\n        this.values = {};\n        this.sum = {};\n    }\n\n    add = (name: string, dobas: Record<string, string | number>): DobasMatrix => {\n        this.values[name] = {};\n        if (dobas) {\n            this.keys.forEach(key => {\n                this.values[name][key] = {\n                    roll: parseDiceRoll(dobas[key]?.toString())\n                }\n            });\n        }\n        return this;\n    };\n\n    roll = (keys?: Array<string>): DobasMatrix => {\n        this.keys.filter(key => !keys || keys.indexOf(key) !== -1).forEach(key => {\n            Object.keys(this.values).forEach(name => {\n                const dobas = this.values[name][key];\n                dobas.result = dobas ? roll(dobas.roll) : { value: 0, details: '' };\n                this.sum[key] = Object.values(this.values).map(value => value[key].result?.value).reduce((a, b) => (a ?? 0) + (b ?? 0), 0) ?? 0;\n            });\n        })\n        return this;\n    }\n\n    getRolls = (key: string): Array<DiceRoll> => {\n        return Object.values(this.values).map(r => r[key].roll).filter(roll => roll && (roll.die > 0 || roll.plus !== 0));\n    }\n\n    clearRolls = (): DobasMatrix => {\n        this.keys.forEach(key => {\n            Object.keys(this.values).forEach(name => {\n                const dobas = this.values[name][key];\n                delete dobas.result;\n            });\n        });\n        return this;\n    }\n}\n\n","//todo: ugras\n\nimport { Fegyver } from \"./karakter\";\n\nexport interface Harcertek {\n    ke: number;\n    te: number;\n    ve: number;\n    ce: number;\n}\n\nexport type fegyverTipus = 'kozelharc' | 'lofegyver' | 'pajzs' | 'ököl';\n\nexport const HARCERTEK_DISPLAY_NAMES = { 'ke': 'KÉ', 'te': 'TÉ', 've': 'VÉ', 'ce': 'CÉ', 'sebzes': 'Sebzés' };\n\nexport const FEGYVER_KEPZETTSEG: Record<string, Harcertek> = {\n    \"képzetlen\": {\n        ke: -10,\n        te: -25,\n        ve: -20,\n        ce: -30\n    },\n    \"képzetlen, fejvadász\": {\n        ke: -5,\n        te: -5,\n        ve: -10,\n        ce: -15\n    },\n    \"Af\": {\n        ke: 0,\n        te: 0,\n        ve: 0,\n        ce: 0\n    },\n    \"Mf\": {\n        ke: 5,\n        te: 10,\n        ve: 10,\n        ce: 10\n    }\n}\n\nexport const FEGYVERTELEN: Fegyver = {\n    name: 'fegyver nélkül',\n    harcertek: {\n        ke: 0,\n        te: 0,\n        ve: 0,\n        ce: 0,\n    },\n    tamPerKor: 0,\n    sebzes: '0'\n};\n\n\nexport const PUSZTA_KEZ_AF: Fegyver = {\n    name: 'Ököl',\n    harcertek: {\n        ke: 4,\n        te: 1,\n        ve: 10,\n        ce: 0,\n    },\n    tamPerKor: 2,\n    sebzes: '1k2'\n}\n\nexport const PUSZTA_KEZ_MF: Fegyver = {\n    name: 'Ököl',\n    harcertek: {\n        ke: 4,\n        te: 1,\n        ve: 10,\n        ce: 0,\n    },\n    tamPerKor: 2,\n    sebzes: '1k6'\n}\n\nexport const FEGYVEREK: Array<Fegyver> = [\n    {\n        name: 'Tőr',\n        harcertek: {\n            ke: 10,\n            te: 8,\n            ve: 2,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2\n    },\n    {\n        name: 'Tőr, dobó',\n        harcertek: {\n            ke: 10,\n            te: 11,\n            ve: 2,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2\n    },\n    {\n        name: 'Tüskés buzogány',\n        harcertek: {\n            ke: 7,\n            te: 12,\n            ve: 13,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1\n    },\n    {\n        name: 'Hajítóbárd',\n        harcertek: {\n            ke: 9,\n            te: 10,\n            ve: 4,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2\n    },\n    {\n        name: 'Dobóháló',\n        harcertek: {\n            ke: 1,\n            te: 8,\n            ve: 4,\n            ce: 0,\n        },\n        sebzes: '0',\n        tamPerKor: 3,\n        lassu: true\n    },\n    {\n        name: 'Buzogány, shadleki',\n        harcertek: {\n            ke: 8,\n            te: 13,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1\n    },\n    {\n        name: 'Csatabárd, egykezes',\n        harcertek: {\n            ke: 5,\n            te: 12,\n            ve: 11,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1\n    },\n    {\n        name: 'Csatabárd, kétkezes',\n        harcertek: {\n            ke: 0,\n            te: 8,\n            ve: 6,\n            ce: 0,\n        },\n        sebzes: '3k6',\n        tamPerKor: 2,\n        lassu: true\n    },\n    {\n        name: 'Csatacsákány',\n        harcertek: {\n            ke: 5,\n            te: 11,\n            ve: 8,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1\n    },\n    {\n        name: 'Kard, rövid',\n        harcertek: {\n            ke: 9,\n            te: 12,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1\n    },\n    {\n        name: 'Kard, hosszú',\n        harcertek: {\n            ke: 6,\n            te: 14,\n            ve: 16,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1\n    },\n    {\n        name: 'Kard, másfélkezes',\n        harcertek: {\n            ke: 4,\n            te: 13,\n            ve: 12,\n            ce: 0,\n        },\n        sebzes: '2k6',\n        tamPerKor: 1\n    },\n    {\n        name: 'Kard, lovagi',\n        harcertek: {\n            ke: 2,\n            te: 10,\n            ve: 7,\n            ce: 0,\n        },\n        sebzes: '2k6+2',\n        tamPerKor: 1\n    },\n    {\n        name: 'Kard, pallos',\n        harcertek: {\n            ke: 0,\n            te: 6,\n            ve: 2,\n            ce: 0,\n        },\n        sebzes: '3k6+2',\n        tamPerKor: 2,\n        lassu: true\n    },\n    {\n        name: 'Kard, szablya',\n        harcertek: {\n            ke: 7,\n            te: 15,\n            ve: 17,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, dzsenn szablya',\n        harcertek: {\n            ke: 9,\n            te: 20,\n            ve: 17,\n            ce: 0,\n        },\n        sebzes: '1k6+3',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, jatagán',\n        harcertek: {\n            ke: 7,\n            te: 14,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, handzsár',\n        harcertek: {\n            ke: 6,\n            te: 14,\n            ve: 15,\n            ce: 0,\n        },\n        sebzes: '1k6+3',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, fejvadász',\n        harcertek: {\n            ke: 8,\n            te: 16,\n            ve: 16,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, Slan',\n        harcertek: {\n            ke: 8,\n            te: 20,\n            ve: 12,\n            ce: 0,\n        },\n        sebzes: '1k10+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, kígyó',\n        harcertek: {\n            ke: 6,\n            te: 14,\n            ve: 15,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kés',\n        harcertek: {\n            ke: 10,\n            te: 4,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '1k5',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Mara-sequor',\n        harcertek: {\n            ke: 7,\n            te: 16,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '2k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Ramiera',\n        harcertek: {\n            ke: 8,\n            te: 17,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Sequor',\n        harcertek: {\n            ke: 8,\n            te: 16,\n            ve: 13,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Slan csillag',\n        harcertek: {\n            ke: 10,\n            te: 4,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '1k3',\n        tamPerKor: 3,\n    },\n    {\n        name: 'Tőr, Slan',\n        harcertek: {\n            ke: 9,\n            te: 14,\n            ve: 6,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Tőrkard',\n        harcertek: {\n            ke: 9,\n            te: 12,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Bot, hosszú',\n        harcertek: {\n            ke: 4,\n            te: 10,\n            ve: 16,\n            ce: 0,\n        },\n        sebzes: '1k5',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Bot, rövid',\n        harcertek: {\n            ke: 9,\n            te: 9,\n            ve: 17,\n            ce: 0,\n        },\n        sebzes: '1k3',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Bot, furkós',\n        harcertek: {\n            ke: 2,\n            te: 7,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Buzogány, egykezes',\n        harcertek: {\n            ke: 7,\n            te: 11,\n            ve: 12,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Buzogány, kétkezes',\n        harcertek: {\n            ke: 0,\n            te: 7,\n            ve: 6,\n            ce: 0,\n        },\n        sebzes: '3k6',\n        tamPerKor: 2,\n        lassu: true\n    },\n    {\n        name: 'Buzogány, tüskés',\n        harcertek: {\n            ke: 7,\n            te: 12,\n            ve: 13,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Buzogány, tollas',\n        harcertek: {\n            ke: 7,\n            te: 12,\n            ve: 13,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Buzogány, láncos',\n        harcertek: {\n            ke: 4,\n            te: 13,\n            ve: 11,\n            ce: 0,\n        },\n        sebzes: '1k6+3',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Cséphadaró',\n        harcertek: {\n            ke: 1,\n            te: 6,\n            ve: 5,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Harcikalapács',\n        harcertek: {\n            ke: 5,\n            te: 8,\n            ve: 10,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Alabárd',\n        harcertek: {\n            ke: 1,\n            te: 14,\n            ve: 15,\n            ce: 0,\n        },\n        sebzes: '2k6+2',\n        tamPerKor: 2,\n        lassu: true\n    },\n    {\n        name: 'Dárda',\n        harcertek: {\n            ke: 8,\n            te: 13,\n            ve: 5,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kopja, könnyű',\n        harcertek: {\n            ke: 2,\n            te: 11,\n            ve: 12,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kopja, lovas',\n        harcertek: {\n            ke: 1,\n            te: 15,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2,\n        lassu: true\n    },\n    {\n        name: 'Kopja, nehézlovas',\n        harcertek: {\n            ke: 0,\n            te: 16,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '2k10',\n        tamPerKor: 3,\n        lassu: true\n    },\n    {\n        name: 'Lándzsa',\n        harcertek: {\n            ke: 4,\n            te: 12,\n            ve: 12,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Szigony',\n        harcertek: {\n            ke: 4,\n            te: 15,\n            ve: 10,\n            ce: 0,\n        },\n        sebzes: '1k10+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Fúvócső',\n        harcertek: {\n            ke: 8,\n            te: 0,\n            ve: 0,\n            ce: 7,\n        },\n        lotav: 30,\n        sebzes: '0',\n        tamPerKor: 3,\n    },\n    {\n        name: 'Íj, rövid',\n        harcertek: {\n            ke: 5,\n            te: 0,\n            ve: 0,\n            ce: 4,\n        },\n        lotav: 90,\n        sebzes: '1k6',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Íj, hosszú',\n        harcertek: {\n            ke: 4,\n            te: 0,\n            ve: 0,\n            ce: 6,\n        },\n        lotav: 110,\n        sebzes: '1k6+1',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Íj, visszacsapó',\n        harcertek: {\n            ke: 3,\n            te: 0,\n            ve: 0,\n            ce: 8,\n        },\n        lotav: 180,\n        sebzes: '1k10',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Íj, elf',\n        harcertek: {\n            ke: 6,\n            te: 0,\n            ve: 0,\n            ce: 10,\n        },\n        lotav: 120,\n        sebzes: '2k6',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Nyílpuska, aquir',\n        harcertek: {\n            ke: 5,\n            te: 0,\n            ve: 0,\n            ce: 18,\n        },\n        lotav: 35,\n        sebzes: '1k10/2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Nyílpuska, kézi',\n        harcertek: {\n            ke: 3,\n            te: 0,\n            ve: 0,\n            ce: 14,\n        },\n        lotav: 30,\n        sebzes: '1k6/2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Nyílpuska, kahrei',\n        harcertek: {\n            ke: 9,\n            te: 0,\n            ve: 0,\n            ce: 13,\n        },\n        lotav: 30,\n        sebzes: '1k6/2',\n        tamPerKor: 3,\n    },\n    {\n        name: 'Nyílpuska, könnyű',\n        harcertek: {\n            ke: 2,\n            te: 0,\n            ve: 0,\n            ce: 16,\n        },\n        lotav: 50,\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Nyílpuska, nehéz',\n        harcertek: {\n            ke: 0,\n            te: 0,\n            ve: 0,\n            ce: 15,\n        },\n        lotav: 60,\n        sebzes: '1k6+1',\n        tamPerKor: 3,\n        lassu: true\n    },\n    {\n        name: 'Nyílpuska, shadoni páncéltörő',\n        harcertek: {\n            ke: 0,\n            te: 0,\n            ve: 0,\n            ce: 17,\n        },\n        lotav: 80,\n        sebzes: '2k10',\n        tamPerKor: 5,\n        lassu: true\n    },\n    {\n        name: 'Parittya',\n        harcertek: {\n            ke: 2,\n            te: 0,\n            ve: 0,\n            ce: 1,\n        },\n        lotav: 100,\n        sebzes: '1k10/2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Bola',\n        harcertek: {\n            ke: 2,\n            te: 10,\n            ve: 2,\n            ce: 0,\n        },\n        sebzes: '1k5',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Dobóháló',\n        harcertek: {\n            ke: 1,\n            te: 8,\n            ve: 4,\n            ce: 0,\n        },\n        sebzes: '0',\n        tamPerKor: 3,\n        lassu: true\n    },\n    {\n        name: 'Garott',\n        harcertek: {\n            ke: 0,\n            te: 5,\n            ve: -20,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Hárítótőr',\n        harcertek: {\n            ke: 8,\n            te: 4,\n            ve: 19,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Korbács',\n        harcertek: {\n            ke: 4,\n            te: 0,\n            ve: 6,\n            ce: 0,\n        },\n        sebzes: '1k3',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Lasszó',\n        harcertek: {\n            ke: 0,\n            te: 1,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '0',\n        tamPerKor: 3,\n        lassu: true\n    },\n    {\n        name: 'Ostor',\n        harcertek: {\n            ke: 3,\n            te: 6,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '1k2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Vasököl',\n        harcertek: {\n            ke: 9,\n            te: 2,\n            ve: 5,\n            ce: 0,\n        },\n        sebzes: '1k3',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Dzsambia',\n        harcertek: {\n            ke: 10,\n            te: 8,\n            ve: 4,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Mesterkard',\n        harcertek: {\n            ke: 7,\n            te: 16,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Predoci egyeneskard',\n        harcertek: {\n            ke: 7,\n            te: 16,\n            ve: 15,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Tahdzsi',\n        harcertek: {\n            ke: 9,\n            te: 11,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Béltépő',\n        harcertek: {\n            ke: 10,\n            te: 8,\n            ve: 2,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Lagoss',\n        harcertek: {\n            ke: 8,\n            te: 14,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+4',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Pugoss',\n        harcertek: {\n            ke: 12,\n            te: 6,\n            ve: 4,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2,\n    },\n];\n\nexport const SZITUACIOK: Record<string, Harcertek> = {\n    'hátulról': {\n        ke: 5,\n        te: 10,\n        ve: 0,\n        ce: 0\n    },\n    'félhátulról': {\n        ke: 2,\n        te: 5,\n        ve: 0,\n        ce: 0\n    },\n    'magasabbról': {\n        ke: 2,\n        te: 5,\n        ve: 0,\n        ce: 5\n    },\n    'alacsonyabbról': {\n        ke: -2,\n        te: -10,\n        ve: 0,\n        ce: -5\n    },\n    'meglepetésből': {\n        ke: 100,\n        te: 30,\n        ve: 0,\n        ce: 10\n    },\n    'mozgó lóról': {\n        ke: 5,\n        te: 10,\n        ve: 20,\n        ce: -20\n    },\n    'vakon': {\n        ke: -20,\n        te: -60,\n        ve: -70,\n        ce: -150\n    },\n    'félhomályban': {\n        ke: -10,\n        te: -30,\n        ve: -35,\n        ce: -70\n    },\n    'helyhez kötve': {\n        ke: -20,\n        te: -15,\n        ve: -5,\n        ce: 0\n    },\n    'kábultan': {\n        ke: -15,\n        te: -20,\n        ve: -25,\n        ce: -30\n    },\n    'bénultan': {\n        ke: -30,\n        te: -40,\n        ve: -35,\n        ce: -15\n    },\n    'félelemmel': {\n        ke: -10,\n        te: -15,\n        ve: 5,\n        ce: -20\n    },\n    'gyűlölettel': {\n        ke: 3,\n        te: 10,\n        ve: -20,\n        ce: -20\n    },\n    'roham': {\n        ke: 0,\n        te: 20,\n        ve: -25,\n        ce: -30\n    },\n    'védharc hátrálva': {\n        ke: 0,\n        te: 0,\n        ve: 40,\n        ce: 0\n    },\n    'védharc állva': {\n        ke: 0,\n        te: 0,\n        ve: 25,\n        ce: 0\n    },\n    'részleges védharc': {\n        ke: 0,\n        te: 0,\n        ve: 15,\n        ce: 0\n    },\n    'foglyul ejtésért': {\n        ke: -5,\n        te: -5,\n        ve: -15,\n        ce: 0\n    },\n}\n\nconst tipus = (fegyver?: Fegyver): fegyverTipus | undefined => {\n    if (!fegyver || fegyver.name === FEGYVERTELEN.name) {\n        return undefined;\n    }\n    if (fegyver.harcertek.ce > 0) {\n        return 'lofegyver';\n    }\n    if (fegyver.name.toLowerCase() === 'ököl') {\n        return 'ököl';\n    }\n    if (fegyver.pajzs) {\n        return 'pajzs';\n    }\n    return 'kozelharc';\n}\n\nconst kepzettseg = (fegyver: Fegyver, dobas?: boolean): string => {\n    if (fegyver.name.toLowerCase() === 'ököl') {\n        return 'Ökölharc';\n    }\n    if (dobas) {\n        return 'Fegyverdobás - ' + fegyver.name.toLowerCase();\n    } else {\n        return 'Fegyverhasználat - ' + fegyver.name.toLowerCase();\n    }\n}\n\nexport const FegyverUtils = {\n    tipus,\n    kepzettseg\n}\n\n","import { Harcertek } from \"./harc\";\nimport { DiceRollResult } from \"./roll\"\n\nexport interface KepessegDobas {\n    ero: string;\n    gy: string;\n    ugy: string;\n    ak: string;\n    egs: string;\n    sz: string;\n    int: string;\n    ae: string;\n    asz: string;\n    erz: string;\n}\n\nexport type KepessegDobasResult = Record<keyof KepessegDobas, DiceRollResult>;\n\nexport const KEPESSEG_NEV: Record<keyof KepessegDobas, string> = {\n    ero: 'Erő',\n    gy: 'Gyorsaság',\n    ugy: 'Ügyesség',\n    ak: 'Állóképesség',\n    egs: 'Egészség',\n    sz: 'Szépség',\n    int: 'Intelligencia',\n    ae: 'Akaraterő',\n    asz: 'Asztrál',\n    erz: 'Érzékelés'\n}\n\nexport const FAJ_KEPESSEG: Record<string, KepessegDobas> = {\n    \"ember\": {\n        ero: '0',\n        gy: '0',\n        ugy: '0',\n        ak: '0',\n        egs: '0',\n        sz: '0',\n        int: '0',\n        ae: '0',\n        asz: '0',\n        erz: '0'\n    },\n    \"elf\": {\n        ero: '-2',\n        gy: '1',\n        ugy: '1',\n        ak: '-1',\n        egs: '0',\n        sz: '1',\n        int: '0',\n        ae: '0',\n        asz: '0',\n        erz: '2'\n    },\n    \"félelf\": {\n        ero: '-1',\n        gy: '1',\n        ugy: '0',\n        ak: '0',\n        egs: '0',\n        sz: '0',\n        int: '0',\n        ae: '0',\n        asz: '0',\n        erz: '1'\n    },\n    \"törp\": {\n        ero: '1',\n        gy: '1',\n        ugy: '0',\n        ak: '1',\n        egs: '1',\n        sz: '-2',\n        int: '-1',\n        ae: '0',\n        asz: '-1',\n        erz: '0'\n    },\n    \"udvari ork\": {\n        ero: '2',\n        gy: '0',\n        ugy: '0',\n        ak: '1',\n        egs: '2',\n        sz: '-3',\n        int: '-1',\n        ae: '0',\n        asz: '-3',\n        erz: '1'\n    },\n    \"amund\": {\n        ero: '1',\n        gy: '0',\n        ugy: '0',\n        ak: '1',\n        egs: '0',\n        sz: '3',\n        int: '0',\n        ae: '0',\n        asz: '-1',\n        erz: '0'\n    },\n    \"dzsenn\": {\n        ero: '0',\n        gy: '0',\n        ugy: '0',\n        ak: '0',\n        egs: '0',\n        sz: '0',\n        int: '2',\n        ae: '0',\n        asz: '0',\n        erz: '0'\n    },\n    \"khál\": {\n        ero: '3',\n        gy: '2',\n        ugy: '1',\n        ak: '2',\n        egs: '3',\n        sz: '0',\n        int: '-1',\n        ae: '0',\n        asz: '-5',\n        erz: '3'\n    },\n    \"gnóm\": {\n        ero: '-1',\n        gy: '0',\n        ugy: '1',\n        ak: '0',\n        egs: '0',\n        sz: '0',\n        int: '1',\n        ae: '0',\n        asz: '0',\n        erz: '2'\n    },\n    \"goblin\": {\n        ero: '-2',\n        gy: '0',\n        ugy: '0',\n        ak: '1',\n        egs: '1',\n        sz: '-2',\n        int: '-1',\n        ae: '0',\n        asz: '-2',\n        erz: '2'\n    },\n\n}\n\nexport const FOKASZTOK: Record<string, Array<string>> = {\n    'harcos': ['harcos', 'gladiátor', 'fejvadász', 'lovag'],\n    'szerencsevadász': ['tolvaj', 'bárd'],\n    'pap': ['pap', 'paplovag'],\n    'harcművész': ['harcművész', 'kardművész'],\n    'varázsló': ['boszorkánymester', 'tűzvarázsló', 'varázsló'],\n    'egyéb': ['egyéb']\n};\n\nexport const KASZTOK: Record<string, Kaszt> = {\n    'egyéb': {\n        name: 'egyéb',\n        kepesseg: {\n            ero: '10',\n            gy: '10',\n            ugy: '10',\n            ak: '10',\n            egs: '10',\n            sz: '10',\n            int: '10',\n            ae: '10',\n            asz: '10',\n            erz: '10'\n        },\n        alapHarcertek: {\n            ke: 0,\n            te: 0,\n            ve: 0,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 0,\n                ve: 0,\n                ce: 0\n            },\n            szabad: 0\n        },\n        epfp: {\n            ep: 0,\n            fp: 0,\n            fpPerSzint: 'k6'\n        }\n    },\n    harcos: {\n        name: 'harcos',\n        kepesseg: {\n            ero: 'k6 + 12 + kf',\n            gy: '2k6 + 6 + kf',\n            ugy: '2k6 + 6 + kf',\n            ak: 'k10 + 8 + kf',\n            egs: 'k10+10',\n            sz: '3k6(2x)',\n            int: '3k6(2x)',\n            ae: '2k6+6',\n            asz: '3k6(2x)',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 9,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 5\n        },\n        epfp: {\n            ep: 7,\n            fp: 6,\n            fpPerSzint: 'k6+4'\n        }\n    },\n    lovag: {\n        name: 'lovag',\n        kepesseg: {\n            ero: 'k6 + 12 + kf',\n            gy: '3k6(2x)',\n            ugy: '3k6(2x)',\n            ak: 'k10 + 8 + kf',\n            egs: 'k10+10',\n            sz: '2k6+6+kf',\n            int: '2k6+6',\n            ae: 'k10+8',\n            asz: '3k6(2x)',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 5,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 5,\n                ve: 5,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 7,\n            fp: 6,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    'gladiátor': {\n        name: 'gladiátor',\n        kepesseg: {\n            ero: 'k6 + 12 + kf',\n            gy: '2k6 + 6 + kf',\n            ugy: '2k6 + 6 + kf',\n            ak: 'k6 + 12 + kf',\n            egs: 'k10+10',\n            sz: '2k6+6',\n            int: '3k6',\n            ae: '3k6',\n            asz: '3k6',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 9,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 4,\n                ve: 4,\n                ce: 0\n            },\n            szabad: 4\n        },\n        epfp: {\n            ep: 8,\n            fp: 7,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    'fejvadász': {\n        name: 'fejvadász',\n        kepesseg: {\n            ero: '2k6+6',\n            gy: 'k6+12+kf',\n            ugy: 'k10+8',\n            ak: 'k6 + 12 + kf',\n            egs: 'k10+10',\n            sz: '3k6',\n            int: '3k6(2x)',\n            ae: 'k10+8',\n            asz: '2k6+6',\n            erz: 'k6+12'\n        },\n        alapHarcertek: {\n            ke: 10,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 4,\n                ve: 4,\n                ce: 0\n            },\n            szabad: 3\n        },\n        epfp: {\n            ep: 6,\n            fp: 7,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    tolvaj: {\n        name: 'tolvaj',\n        kepesseg: {\n            ero: '3k6(2x)',\n            gy: 'k10 + 8 + kf',\n            ugy: 'k6 + 12 + kf',\n            ak: '3k6(2x)',\n            egs: '3k6(2x)',\n            sz: '2k6 + 6',\n            int: '2k6 + 6',\n            ae: '3k6',\n            asz: '3k6(2x)',\n            erz: 'k6+12'\n        },\n        alapHarcertek: {\n            ke: 8,\n            te: 17,\n            ve: 72,\n            ce: 10\n        },\n        hm: {\n            kotelezo: {\n                ke: 1,\n                te: 1,\n                ve: 1,\n                ce: 0\n            },\n            szabad: 4\n        },\n        epfp: {\n            ep: 4,\n            fp: 5,\n            fpPerSzint: 'k6+3'\n        }\n    },\n    'bárd': {\n        name: 'bárd',\n        kepesseg: {\n            ero: 'k10+8',\n            gy: 'k10+8+kf',\n            ugy: 'k10 + 8',\n            ak: '2k6+6',\n            egs: '2k6+6',\n            sz: 'k6+12+kf',\n            int: 'k10+8(2x)',\n            ae: '2k6+6',\n            asz: 'k10+8',\n            erz: 'k10+8'\n        },\n        alapHarcertek: {\n            ke: 10,\n            te: 20,\n            ve: 75,\n            ce: 10\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 2,\n                ve: 2,\n                ce: 0\n            },\n            szabad: 5\n        },\n        epfp: {\n            ep: 5,\n            fp: 6,\n            fpPerSzint: 'k6+3'\n        }\n    },\n    pap: {\n        name: 'pap',\n        kepesseg: {\n            ero: '2k6+6',\n            gy: '3k6(2x)',\n            ugy: '3k6(2x)',\n            ak: '2k6+6',\n            egs: 'k10+8',\n            sz: 'k10+10',\n            int: 'k10+8',\n            ae: 'k10+8+kf',\n            asz: 'k6+12',\n            erz: 'k10+8'\n        },\n        alapHarcertek: {\n            ke: 5,\n            te: 17,\n            ve: 72,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 6,\n            fp: 6,\n            fpPerSzint: 'k6+2'\n        }\n    },\n    paplovag: {\n        name: 'paplovag',\n        kepesseg: {\n            ero: 'k10+8+kf',\n            gy: '3k6(2x)',\n            ugy: '3k6(2x)',\n            ak: 'k10+8',\n            egs: 'k10+10',\n            sz: 'k10+8',\n            int: '2k6 + 6',\n            ae: 'k10+8',\n            asz: 'k10+8+kf',\n            erz: 'k10+8'\n        },\n        alapHarcertek: {\n            ke: 5,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 3\n        },\n        epfp: {\n            ep: 8,\n            fp: 7,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    'harcművész': {\n        name: 'harcművész',\n        kepesseg: {\n            ero: 'k10+8',\n            gy: 'k6+14',\n            ugy: 'k6+12',\n            ak: 'k6+12',\n            egs: 'k10+10',\n            sz: '3k6(2x)',\n            int: '3k6(2x)',\n            ae: 'k6+12',\n            asz: 'k10+8',\n            erz: 'k6+12'\n        },\n        alapHarcertek: {\n            ke: 10,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 4,\n            fp: 8,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    'kardművész': {\n        name: 'kardművész',\n        kepesseg: {\n            ero: 'k10+8',\n            gy: 'k6+12+kf',\n            ugy: 'k6+14',\n            ak: 'k10+8',\n            egs: 'k10+8',\n            sz: '3k6(2x)',\n            int: '2k6 + 6',\n            ae: 'k6+12',\n            asz: 'k10+8',\n            erz: 'k6+12'\n        },\n        alapHarcertek: {\n            ke: 10,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 4,\n            fp: 8,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    'boszorkánymester': {\n        name: 'boszorkánymester',\n        kepesseg: {\n            ero: '3k6(2x)',\n            gy: 'k10+8',\n            ugy: 'k6+12+kf',\n            ak: '3k6(2x)',\n            egs: '2k6+6',\n            sz: '3k6',\n            int: '2k6 + 6',\n            ae: '2k6+6',\n            asz: '2k6+6',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 7,\n            te: 17,\n            ve: 72,\n            ce: 5\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 1,\n                ve: 1,\n                ce: 0\n            },\n            szabad: 5\n        },\n        epfp: {\n            ep: 3,\n            fp: 4,\n            fpPerSzint: 'k6+1'\n        }\n    },\n    'tűzvarázsló': {\n        name: 'tűzvarázsló',\n        kepesseg: {\n            ero: '2k6+6',\n            gy: '3k6(2x)',\n            ugy: '3k6(2x)',\n            ak: '2k6+6',\n            egs: '2k6+6',\n            sz: '3k6',\n            int: '2k6 + 6',\n            ae: '2k6+6',\n            asz: '2k6+6',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 6,\n            te: 17,\n            ve: 72,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 5,\n            fp: 4,\n            fpPerSzint: 'k6+1'\n        }\n    },\n    'varázsló': {\n        name: 'varázsló',\n        kepesseg: {\n            ero: '3k6',\n            gy: '3k6(2x)',\n            ugy: '3k6(2x)',\n            ak: '3k6',\n            egs: '3k6(2x)',\n            sz: '3k6',\n            int: 'k6+12+kf',\n            ae: 'k6+12+kf',\n            asz: 'k6+12+kf',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 2,\n            te: 15,\n            ve: 70,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 1,\n                ve: 1,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 3,\n            fp: 2,\n            fpPerSzint: 'k6'\n        }\n    },\n}\n\nexport interface Kaszt {\n    name: string,\n    kepesseg: KepessegDobas,\n    alapHarcertek: Harcertek,\n    hm: { kotelezo: Harcertek, szabad: number },\n    epfp: { ep: number, fp: number, fpPerSzint: string }\n}\n\nexport function osszead<T>(r1: Record<keyof T, number>, r2: Record<keyof T, number>): Record<keyof T, number> {\n    const keys = [...new Set([...Object.keys(r1), ...Object.keys(r2)])];\n    return keys.reduce((acc, curr) => { acc[curr as keyof T] = r1[curr as keyof T] + r2[curr as keyof T]; return acc; }, {} as Record<keyof T, number>)\n}","import { DobasMatrix } from \"./dobasmatrix\";\nimport { FEGYVERTELEN, FegyverUtils, FEGYVER_KEPZETTSEG, Harcertek } from \"./harc\";\nimport { Kaszt, osszead } from \"./kasztok\";\nimport { Pancel } from \"./pancel\";\nimport { roll } from \"./roll\";\n\n\nexport interface KarakterKepesseg {\n    ero: number;\n    gy: number;\n    ugy: number;\n    ak: number;\n    egs: number;\n    sz: number;\n    int: number;\n    ae: number;\n    asz: number;\n}\n\nexport interface KarakterInfo {\n    id: string;\n    name: string;\n}\n\nexport interface KarakterInfo {\n    id: string;\n    categories: Array<string>;\n    name: string;\n}\n\nexport interface Points {\n    akt: number;\n    max: number;\n}\n\nexport interface KarakterV1 extends KarakterInfo {\n    version: 1;\n    faj: string;\n    kaszt: Kaszt;\n    szint: number;\n    kepessegek: KarakterKepesseg;\n    kepzettsegek?: Array<Kepzettseg>;\n    alapHarcertek: Harcertek;\n    hmHarcertek: Harcertek;\n    hm: number;\n    fegyverek: Array<Fegyver>;\n    pancelok?: Array<Pancel>;\n    valasztottPancel?: number;\n    valasztottFegyver?: number;\n    masodlagosFegyver?: number;\n    pszi?: Points,\n    mp?: Points,\n\n    maxFp: number;\n    maxEp: number;\n    fp: number;\n    ep: number;\n}\n\nexport interface Pajzs {\n    termeszetes: number;\n    statikus: number;\n    dinamikus: number;\n}\n\nexport interface Karakter extends KarakterInfo {\n    version: 2;\n    faj: string;\n    kaszt: Kaszt;\n    szint: number;\n    kepessegek: KarakterKepesseg;\n    kepzettsegek?: Array<Kepzettseg>;\n    alapHarcertek: Harcertek;\n    hmHarcertek: Harcertek;\n    hm: number;\n    fegyverek: Array<Fegyver>;\n    pancelok?: Array<Pancel>;\n    valasztottPancel?: number;\n    valasztottFegyver?: number;\n    masodlagosFegyver?: number;\n    pszi?: Points,\n    mp?: Points,\n    ep: Points,\n    fp: Points,\n    pajzs?: {\n        asztral: Pajzs;\n        mental: Pajzs;\n    };\n    jegyzetek?: string;\n    felszereles?: Array<FelszerelesItem>;\n    masodlagosFegyverMutat?: boolean;\n}\n\nexport interface FelszerelesItem {\n    name: string;\n    qty: number;\n}\n\nexport interface Fegyver {\n    name: string;\n    harcertek: Harcertek;\n    sebzes: string;\n    tamPerKor: number;\n    lassu?: boolean;\n    lotav?: number;\n    erobonusz?: number;\n    pajzs?: boolean;\n    mgt?: number;\n}\n\nexport interface Kepzettseg {\n    name: string;\n    target?: string;\n    szint: '1' | '2' | '3' | '4' | '5' | 'Af' | 'Mf' | number;\n    kp: number;\n}\n\nexport const findKepzettseg = ({ kepzettsegek }: Pick<Karakter, 'kepzettsegek'>, kepzettseg: string): Kepzettseg | undefined => {\n    return kepzettsegek?.find(k => k.name.toLowerCase() === kepzettseg.toLowerCase());\n}\n\nexport const folottiResz = (kepesseg?: number, hatar: number = 10) => {\n    return Math.max(0, ((kepesseg === undefined || Number.isNaN(kepesseg)) ? 0 : kepesseg) - hatar);\n}\n\nexport const szintlepes = (karakter: Karakter): Karakter => {\n    karakter.szint++;\n    const hm = karakter.kaszt.hm;\n    karakter.hm += hm.szabad;\n    karakter.hmHarcertek = osszead(karakter.hmHarcertek, hm.kotelezo);\n    karakter.fp.max += roll(karakter.kaszt.epfp.fpPerSzint).value;\n    karakter.fp.akt = karakter.fp.max;\n    return karakter;\n}\n\nconst calculateKepessegHarcertek = (karakter: Karakter, fegyver: Fegyver): Record<string, string | number> => {\n    const mgt = calculateMGT(karakter);\n    const ugy = folottiResz(karakter.kepessegek.ugy - mgt[0]);\n    const gy = folottiResz(karakter.kepessegek.gy - mgt[0]);\n    const erobonusz = fegyver.erobonusz ?? 16;\n    return {\n        ke: gy + ugy,\n        te: gy + ugy + folottiResz(karakter.kepessegek.ero),\n        ve: gy + ugy,\n        ce: ugy,\n        sebzes: erobonusz !== 0 ? folottiResz(karakter.kepessegek.ero, erobonusz) : 0\n    }\n}\n\nexport const calculateSebesulesHatrany = (karakter: Karakter): Harcertek | null => {\n    if (karakter.ep.max > 0 && karakter.ep.akt <= karakter.ep.max * 0.25) {\n        return {\n            ke: -15,\n            te: -20,\n            ve: -25,\n            ce: -30\n        }\n    } else if ((karakter.ep.max > 0 && karakter.ep.akt <= karakter.ep.max * 0.5) || (karakter.fp.akt > 0 && karakter.fp.akt < karakter.fp.max * 0.1)) {\n        return {\n            ke: -5,\n            te: -10,\n            ve: -10,\n            ce: -5\n        }\n    }\n    return null;\n}\n\nexport const calculateMGT = (karakter: Karakter): [number, boolean?] => {\n    const pancel = karakter.valasztottPancel !== undefined ? karakter.pancelok?.[karakter.valasztottPancel] : undefined;\n    if (!pancel) {\n        return [0]; // no pancel, no mgt\n    }\n    const nehezvertViselet = findKepzettseg(karakter, 'Nehézvértviselet')?.szint;\n    switch (nehezvertViselet) {\n        case 'Mf': return [0];\n        case 'Af': return [pancel.nehez ? pancel.mgt : 0];\n        default: return [pancel.mgt, pancel.nehez];\n    }\n}\n\nconst addKepzettseg = (ret: DobasMatrix, karakter: Karakter, fegyver: Fegyver) => {\n    const tipus = FegyverUtils.tipus(fegyver);\n    const fejvadasz = karakter.kaszt?.name === 'fejvadász';\n    const kepzettseg: Kepzettseg | undefined = karakter.kepzettsegek?.find(k => k.name === FegyverUtils.kepzettseg(fegyver));\n    const pajzsHasznalat = findKepzettseg(karakter, 'Pajzshasználat');\n\n    const mgt = calculateMGT(karakter);\n    if (mgt[1]) {\n        ret.add('Nehézvért', { ...FEGYVER_KEPZETTSEG['képzetlen'] });\n    } else if (!kepzettseg) {\n        if (tipus && !(tipus === 'pajzs' && pajzsHasznalat?.szint)) {\n            if (!fejvadasz) {\n                ret.add('képzetlen', { ...FEGYVER_KEPZETTSEG['képzetlen'] });\n            } else {\n                ret.add('képzetlen', { ...FEGYVER_KEPZETTSEG['képzetlen, fejvadász'] });\n            }\n        }\n    } else if (tipus !== 'ököl') { // ökölharcnál nincs bónusz\n        ret.add('Képzettség ' + kepzettseg.szint, { ...FEGYVER_KEPZETTSEG[kepzettseg.szint] });\n    }\n}\n\nconst addKetkezes = (ret: DobasMatrix, karakter: Karakter, masodlagos?: boolean) => {\n    if (karakter.valasztottFegyver === undefined || karakter.masodlagosFegyver === undefined) {\n        return;\n    }\n    const pajzsHasznalat = findKepzettseg(karakter, 'Pajzshasználat');\n    const ketkezesHarc = findKepzettseg(karakter, 'Kétkezes harc');\n    const masodlagosFegyver = karakter.fegyverek[karakter.masodlagosFegyver];\n    if (masodlagosFegyver?.pajzs && pajzsHasznalat) {\n        if (!masodlagos) {\n            ret.add('Pajzs', { ve: masodlagosFegyver.harcertek.ve });\n        }\n    } else {\n        switch (ketkezesHarc?.szint) {\n            case 'Mf': return;\n            case 'Af': {\n                if (masodlagos) {\n                    ret.add('kétkezes harc', { ke: -2, te: -5, ve: -5 });\n                }\n                return;\n            }\n            default: {\n                if (masodlagos) {\n                    ret.add('kétkezes harc', { ...FEGYVER_KEPZETTSEG['képzetlen'] });\n                } else {\n                    ret.add('kétkezes harc', { ke: -5, te: -10, ve: -10 });\n                }\n                return;\n            }\n        }\n    }\n}\n\nconst findFegyver = (karakter: Karakter, masodlagos?: boolean): Fegyver => {\n    const index = masodlagos ? karakter.masodlagosFegyver : karakter.valasztottFegyver;\n    if (index === undefined) {\n        return FEGYVERTELEN;\n    }\n    return karakter.fegyverek[index] ?? FEGYVERTELEN;\n}\n\nexport const calculateHarcertek = (karakter: Karakter, szituaciok?: Array<Harcertek & { name: string }>, masodlagos?: boolean): DobasMatrix => {\n    const fegyver = findFegyver(karakter, masodlagos);\n    const tipus = FegyverUtils.tipus(fegyver);\n    const ret: DobasMatrix = new DobasMatrix(!tipus ? ['ke', 'te', 've', 'ce', 'sebzes'] : (tipus === 'lofegyver' ? ['ke', 'ce', 've', 'sebzes'] : ['ke', 'te', 've', 'sebzes']));\n\n    ret.add('alap', karakter.alapHarcertek as unknown as Record<string, number>);\n\n    const fejvadasz = karakter.kaszt?.name === 'fejvadász';\n    if (fejvadasz && karakter.szint) {\n        ret.add('spec', { ke: Math.floor(karakter.szint / 2), sebzes: Math.floor(karakter.szint / 2) });\n    }\n\n    ret.add('hm', karakter.hmHarcertek as unknown as Record<string, number>)\n\n    if (tipus) {\n        ret.add(fegyver.name, { ...fegyver.harcertek, 'sebzes': fegyver.sebzes });\n    }\n\n    ret.add('kepessegek', calculateKepessegHarcertek(karakter, fegyver));\n\n    addKepzettseg(ret, karakter, fegyver);\n\n    addKetkezes(ret, karakter, masodlagos);\n\n    const sebesules = calculateSebesulesHatrany(karakter);\n    if (sebesules) {\n        ret.add('Sebesülés', { ...sebesules });\n    }\n\n    szituaciok?.forEach(sz => ret.add(sz.name, { ...sz }));\n\n    return ret;\n}","import React from 'react';\nimport { Label } from 'semantic-ui-react';\nimport { DiceRollResult } from '../engine/roll';\n\nexport const DobasEredmeny: React.FC<{ pointing?: 'left' | 'right', result?: DiceRollResult }> = ({ result, pointing }) => {\n    return <>\n        {result && <Label size='large' pointing={pointing} color='black'>{result?.value}</Label>}\n        {result && <Label basic><i>{result?.details}</i></Label>}\n    </>;\n}","import React from 'react';\r\nimport { Button, ButtonGroup, Label } from 'semantic-ui-react';\r\nimport { DiceRoll, formatDiceRoll } from '../engine/roll';\r\n\r\nexport const DobasInput: React.FC<{ value: DiceRoll, onChange: (dobas: DiceRoll) => unknown }> = ({ value, onChange }) => {\r\n\r\n    const setDie = (die: number) => {\r\n        if (value.die === die) {\r\n            value.numDice++;\r\n        } else {\r\n            value.die = die;\r\n            value.numDice = 1;\r\n        }\r\n        onChange(value);\r\n    }\r\n\r\n    const addPlus = (plus: number) => {\r\n        value.plus += plus;\r\n        onChange(value);\r\n    }\r\n\r\n    const toggleKf = () => {\r\n        value.kf = !value.kf;\r\n        onChange(value);\r\n    }\r\n\r\n    const toggle2x = () => {\r\n        value.tries = (value.tries > 1) ? 1 : 2;\r\n        onChange(value);\r\n    }\r\n\r\n    return <ButtonGroup fluid size='tiny' labelPosition='left'>\r\n        <Label basic>{formatDiceRoll(value)}</Label>\r\n        <Button color='olive' onClick={() => setDie(0)}>-</Button>\r\n        <Button color='olive' onClick={() => setDie(6)}>k6</Button>\r\n        <Button color='olive' onClick={() => setDie(10)}>k10</Button>\r\n        <Button onClick={() => addPlus(-1)}>-1</Button>\r\n        <Button onClick={() => addPlus(1)}>+1</Button>\r\n        <Button color='orange' onClick={() => toggleKf()}>+kf</Button>\r\n        <Button color='blue' onClick={() => toggle2x()}>2x</Button>\r\n    </ButtonGroup>\r\n}","import React from 'react';\r\nimport { Icon } from 'semantic-ui-react';\r\n\r\nexport const NumberInput: React.FC<{ value: number, onChange: (value: number) => unknown, min: number, max: number, icons?: boolean }> = ({ value, onChange, min, max, icons }) => {\r\n    return <span style={{ whiteSpace: 'nowrap' }}>\r\n        {icons && <button onClick={() => { onChange(Math.max(min, value - 1)) }} ><Icon compact name='arrow down' style={{ margin: '0' }} /></button>}\r\n        <input style={{ width: '3rem' }} value={value} onChange={(e) => {\r\n            const newValue = e.target.value;\r\n            if (/^-?\\d+$/.test(newValue) || newValue === '') {\r\n                let num = newValue !== '' ? parseInt(newValue) : 0;\r\n                if (min !== undefined && num < min) {\r\n                    num = min;\r\n                }\r\n                if (max !== undefined && num > max) {\r\n                    num = max;\r\n                }\r\n                onChange(num);\r\n            } else {\r\n                onChange(value);\r\n            }\r\n        }}>\r\n        </input>\r\n        {icons && <button onClick={() => { onChange(Math.min(max, value + 1)) }}><Icon compact name='arrow up' style={{ margin: '0' }} /></button>}\r\n    </span>\r\n}","import React from 'react';\nimport { SemanticCOLORS, Table } from 'semantic-ui-react';\nimport { DobasMatrix } from '../engine/dobasmatrix';\nimport { formatDiceRoll, parseDiceRoll } from '../engine/roll';\nimport { DobasEredmeny } from './DobasEredmeny';\nimport { DobasInput } from './DobasInput';\nimport { NumberInput } from './NumberInput';\n\ninterface DobasMatrixDisplayProps {\n    matrix: DobasMatrix,\n    keyMap: Record<string, string>,\n    direction: 'horizontal' | 'vertical',\n    title: string | React.ReactNode,\n    setValue?: (name: string, key: string, value: string) => unknown,\n    editable?: Array<string>,\n    numberOnly?: boolean,\n    color?: SemanticCOLORS\n}\n\nexport const DobasMatrixDisplay: React.FC<DobasMatrixDisplayProps> = ({ matrix, keyMap, direction, title, editable, setValue, numberOnly, color }) => {\n    const displayCell = (name: string, key: string) => {\n        const value = matrix.values[name][key];\n        const constantRoll = (value?.roll?.die ?? 0) === 0;\n        const rollString = value?.roll ? formatDiceRoll(value.roll) : '';\n        if (!editable?.includes(name)) {\n            return <Table.Cell key={name + '-' + key} collapsing>\n                {rollString}{!constantRoll && value?.result && <> = <DobasEredmeny result={value?.result} /></>}\n            </Table.Cell>;\n        } else {\n            return <Table.Cell key={name + '-' + key} collapsing>\n                {numberOnly ?\n                    <NumberInput value={value?.roll.plus ?? 0} onChange={v => setValue?.(name, key, String(v))} min={0} max={100000} />\n                    :\n                    <DobasInput value={value?.roll ?? parseDiceRoll('')} onChange={e => setValue?.(name, key, formatDiceRoll(e))} />\n                }\n            </Table.Cell>;\n        }\n    }\n\n    if (direction === 'horizontal') {\n        return <Table celled striped compact color={color}>\n            <Table.Header>\n                <Table.Row>\n                    <Table.HeaderCell key='title' disabled={false}>{title}</Table.HeaderCell>\n                    {matrix.keys.map(key => <Table.HeaderCell key={key}>{keyMap[key]}</Table.HeaderCell>)}\n                </Table.Row>\n            </Table.Header>\n            <Table.Body>\n                {Object.keys(matrix.values).map(name => {\n                    return <Table.Row key={name}>\n                        <Table.HeaderCell key={name}>{name}</Table.HeaderCell>\n                        {matrix.keys.map(key => displayCell(name, key))}\n                    </Table.Row>\n                })}\n                <tr key='footer'>\n                </tr>\n            </Table.Body>\n            <Table.Footer>\n                <Table.HeaderCell title='sum'>Összeg</Table.HeaderCell>\n                {matrix.keys.map(key => <Table.HeaderCell key={key} collapsing>{matrix.sum[key]}</Table.HeaderCell>)}\n            </Table.Footer>\n        </Table>\n    } else {\n        return <Table celled striped definition compact color={color}>\n            <Table.Header>\n                <Table.Row>\n                    <Table.HeaderCell key='title'>{title}</Table.HeaderCell>\n                    {Object.keys(matrix.values).map(name => <Table.HeaderCell key={name}>{name}</Table.HeaderCell>)}\n                    <Table.HeaderCell key='sum' collapsing>Összeg</Table.HeaderCell>\n                </Table.Row>\n            </Table.Header>\n            <Table.Body>\n                {matrix.keys.map(key => {\n                    return <Table.Row key={key}>\n                        <Table.HeaderCell key='title'>{keyMap[key]}</Table.HeaderCell>\n                        {Object.keys(matrix.values).map(name => displayCell(name, key))}\n                        <Table.HeaderCell key='sum'>{matrix.sum[key]}</Table.HeaderCell>\n                    </Table.Row>\n                })}\n            </Table.Body>\n        </Table>\n\n    }\n}","import React from 'react';\nimport { Table } from 'semantic-ui-react';\nimport { SemanticCOLORS } from 'semantic-ui-react/dist/commonjs/generic';\nimport { Points } from '../engine/karakter';\nimport { NumberInput } from './NumberInput';\n\n//const NumberInput: any = require('semantic-ui-react-numberinput').default;\n\ninterface Point extends Points {\n    name: string;\n    label: string;\n}\n\ninterface PointsTableProps {\n    points: Array<Point>,\n    onChange: (name: string, max: boolean, newValue: number) => unknown,\n    title?: string,\n    color?: SemanticCOLORS\n}\n\nexport const PointsTable: React.FC<PointsTableProps> = ({ points, onChange, title, color }) => {\n    return <Table striped celled definition fluid compact color={color}>\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell>{title ?? 'Pontok'}</Table.HeaderCell>\n                {points.map(p => <Table.HeaderCell collapsing>{p.label}</Table.HeaderCell>)}\n            </Table.Row>\n\n        </Table.Header>\n        <Table.Body>\n            <Table.Row>\n                <Table.HeaderCell>Max</Table.HeaderCell>\n                {points.map(p => <Table.Cell collapsing><NumberInput icons value={p.max} min={0} max={1000} onChange={(e: number) => onChange(p.name, true, e)} /></Table.Cell>)}\n            </Table.Row>\n            <Table.Row>\n                <Table.HeaderCell>Akt</Table.HeaderCell>\n                {points.map(p => <Table.Cell collapsing><NumberInput icons value={p.akt} min={0} max={p.max} onChange={(e: number) => onChange(p.name, false, Math.min(p.max, e))} /></Table.Cell>)}\n            </Table.Row>\n        </Table.Body>\n    </Table>\n\n}","import React from 'react';\nimport { Button, Label } from 'semantic-ui-react';\n\ninterface SelectionProps { label: JSX.Element | string, selected?: string, setSelected: (newValue: string | undefined) => unknown, options: Array<string>, structure?: Record<string, Array<string>> };\n\nexport const Selection: React.FC<SelectionProps> = ({ label, selected, setSelected, options, structure }) => {\n    if (!structure) {\n        return <Button labelPosition='left' as='div'>\n            <Label basic pointing='right'>\n                {label}\n            </Label>\n            {options.map(n => <Button active={selected === n} onClick={() => setSelected(n)}>{n}</Button>)}\n        </Button>\n    } else {\n        return <Button labelPosition='left' as='div'>\n            <Label basic pointing='right'>\n                {label}\n            </Label>\n            {Object.keys(structure).map(fk => <Button.Group as='div' vertical>\n                <Label tag color='yellow'>{fk}</Label>\n                {options.filter(o => structure[fk].includes(o)).map((n, i) => <Button compact active={selected === n} onClick={() => setSelected(n)}>{n}</Button>)}\n            </Button.Group>\n            )}\n        </Button>\n    }\n\n}","import React from 'react';\r\nimport { Input, Label } from 'semantic-ui-react';\r\nimport { KASZTOK, FOKASZTOK } from '../engine/kasztok';\r\nimport { BackgroundSelection } from '../pages/KarakterAlkotas';\r\nimport { Selection } from './Selection';\r\n\r\nexport const KarakterAlkotasBackground: React.FC<{ fajNevek: Array<string>, backgroundSelection: BackgroundSelection, setBackgroundSelection: (backgroundSelection: BackgroundSelection) => unknown }> = ({ fajNevek, backgroundSelection, setBackgroundSelection }) => {\r\n\r\n    const changeKasztSelection = (s: string | undefined) => {\r\n        const kaszt = (!!s && KASZTOK[s]) || KASZTOK['egyéb']\r\n        setBackgroundSelection({ ...backgroundSelection, kaszt: JSON.parse(JSON.stringify(kaszt)) });\r\n    };\r\n\r\n\r\n    return <div>\r\n        <div>\r\n            <Input fluid labelPosition='left' placeholder='Karakter neve...' error={!backgroundSelection.name} value={backgroundSelection.name} onChange={e => setBackgroundSelection({ ...backgroundSelection, name: e.target.value })}>\r\n                <Label pointing='right' basic>Név</Label>\r\n                <input />\r\n            </Input>\r\n        </div>\r\n        <div><Selection label='Kaszt' selected={backgroundSelection.kaszt?.name} setSelected={changeKasztSelection} options={Object.keys(KASZTOK)} structure={FOKASZTOK} /></div>\r\n        <div><Selection label='Faj' selected={backgroundSelection.faj} setSelected={faj => setBackgroundSelection({ ...backgroundSelection, faj })} options={fajNevek} /></div>\r\n        <div><Input labelPosition='left' value={backgroundSelection.szint} onChange={e => {\r\n            const value = e.target.value ? Math.max(0, Math.floor(Number(e.target.value))) : undefined;\r\n            setBackgroundSelection({ ...backgroundSelection, szint: value });\r\n        }}>\r\n            <Label pointing='right' basic>Szint</Label>\r\n            <input />\r\n        </Input>\r\n        </div>\r\n        <div>\r\n            <Input labelPosition='left' error={!backgroundSelection.kaszt?.name} value={backgroundSelection.kaszt?.name} onChange={e => {\r\n                if (backgroundSelection.kaszt) {\r\n                    setBackgroundSelection({ ...backgroundSelection, kaszt: { ...backgroundSelection.kaszt, name: e.target.value } });\r\n                }\r\n            }}>\r\n                <Label pointing='right' basic>Kaszt neve</Label>\r\n                <input />\r\n            </Input>\r\n        </div>\r\n    </div>\r\n\r\n}\r\n","import React, { useEffect, useState } from 'react';\nimport { Button, Grid, GridColumn, GridRow, Input, Label } from 'semantic-ui-react';\nimport { v4 } from 'uuid';\nimport { DobasMatrix } from '../engine/dobasmatrix';\nimport { HARCERTEK_DISPLAY_NAMES } from '../engine/harc';\nimport { calculateHarcertek, folottiResz, Karakter, KarakterKepesseg, szintlepes } from '../engine/karakter';\nimport { Kaszt, KepessegDobas, KEPESSEG_NEV } from '../engine/kasztok';\nimport { DobasMatrixDisplay } from '../components/DobasMatrixDisplay';\nimport { PointsTable } from '../components/PointsTable';\nimport { KarakterAlkotasBackground } from '../components/KarakterAlkotasBackground';\n\nconst NumberInput: any = require('semantic-ui-react-numberinput').default;\n\nexport interface BackgroundSelection {\n    name: string;\n    faj?: string;\n    kaszt?: Kaszt;\n    szint?: number;\n}\n\n\nconst calculateKepessegek = (fajok: Record<string, KepessegDobas>, { kaszt, faj }: { kaszt?: Kaszt, faj?: string }, roll?: boolean) => {\n    const newMatrix = new DobasMatrix(Object.keys(KEPESSEG_NEV));\n    if (kaszt) {\n        newMatrix.add('Kaszt: ' + kaszt.name, kaszt.kepesseg as unknown as Record<string, string>);\n    }\n    if (faj && fajok[faj]) {\n        newMatrix.add('Faj: ' + faj, fajok[faj] as unknown as Record<string, string>);\n    }\n    if (roll) {\n        newMatrix.roll();\n    }\n    return newMatrix;\n}\n\nconst createKarakter = ({ kaszt, faj, szint, name }: BackgroundSelection, kepessegek: DobasMatrix) => {\n    if (!kaszt || !kepessegek.sum || !faj) {\n        return null;\n    }\n    const epfp = kaszt.epfp;\n    const ep = epfp.ep + folottiResz(kepessegek.sum.egs);\n    const fp = epfp.fp + folottiResz(kepessegek.sum.ae) + folottiResz(kepessegek.sum.ak);\n    const karakter: Karakter = {\n        version: 2,\n        id: v4(),\n        name,\n        faj,\n        categories: [],\n        kepessegek: kepessegek.sum as unknown as KarakterKepesseg,\n        kaszt,\n        szint: 0,\n        hm: 0,\n        ep: { max: ep, akt: ep },\n        fp: { max: fp, akt: fp },\n        hmHarcertek: { ke: 0, te: 0, ve: 0, ce: 0 },\n        kepzettsegek: [],\n        alapHarcertek: kaszt.alapHarcertek,\n        fegyverek: []\n    };\n    [...Array(szint).keys()].forEach(() => szintlepes(karakter));\n    return karakter;\n};\n\n\n\nexport const KarakterAlkotas: React.FC<{ save: (karakter: Karakter) => unknown, fajok: Record<string, KepessegDobas> }> = ({ save, fajok }) => {\n    const [backgroundSelection, setBackgroundSelection] = useState<BackgroundSelection>({ szint: 1, name: '' });\n    const [matrix, setMatrix] = useState<DobasMatrix>(new DobasMatrix(Object.keys(KEPESSEG_NEV)));\n\n    useEffect(() => {\n        setMatrix(calculateKepessegek(fajok, { kaszt: backgroundSelection.kaszt, faj: backgroundSelection.faj }));\n    }, [fajok, backgroundSelection.faj, backgroundSelection.kaszt, setMatrix]);\n\n    const dob = () => {\n        setMatrix(calculateKepessegek(fajok, backgroundSelection, true));\n    };\n\n\n\n    const { kaszt } = backgroundSelection;\n    const karakter = kaszt ? {\n        kepessegek: matrix.sum as unknown as KarakterKepesseg,\n        alapHarcertek: kaszt.alapHarcertek,\n        hmHarcertek: kaszt.hm.kotelezo,\n        ep: { max: kaszt.epfp.ep + folottiResz(matrix.sum.egs), akt: kaszt.epfp.ep + folottiResz(matrix.sum.egs) },\n        fp: { max: kaszt.epfp.fp + folottiResz(matrix.sum.ae) + folottiResz(matrix.sum.ak), akt: kaszt.epfp.fp + folottiResz(matrix.sum.ae) + folottiResz(matrix.sum.ak) }\n    } : undefined;\n\n    return <Grid relaxed>\n        <GridRow columns={2} divided>\n            <GridColumn>\n                <GridRow>\n                    <KarakterAlkotasBackground backgroundSelection={backgroundSelection} setBackgroundSelection={setBackgroundSelection} fajNevek={Object.keys(fajok)} />\n                </GridRow>\n                {karakter && <>\n                    <div>\n                        <Button as='div' basic floated='left'>\n                            <Label basic>Elosztható HM:</Label>\n                            <NumberInput size='mini' allowEmptyValue value={backgroundSelection.kaszt?.hm.szabad} stepAmount={1} minValue={0} maxValue={1000} onChange={(e: string) => {\n                                if (backgroundSelection.kaszt) {\n                                    backgroundSelection.kaszt.hm.szabad = Number(e);\n                                    setBackgroundSelection({ ...backgroundSelection });\n                                }\n                            }} />\n                        </Button>\n                        <Button as='div' basic floated='right'>\n                            <Label basic>Szintenkénti FP:</Label>\n                            <Input disabled={!kaszt} value={kaszt?.epfp.fpPerSzint} onChange={e => {\n                                if (kaszt) {\n                                    kaszt.epfp.fpPerSzint = e.target.value;\n                                    setBackgroundSelection({ ...backgroundSelection, kaszt })\n                                }\n                            }} />\n\n                        </Button>\n                    </div>\n                    <div><DobasMatrixDisplay\n                        title='Harcértékek'\n                        editable={kaszt ? ['alap', 'hm'] : []}\n                        numberOnly\n                        setValue={(name, key, value) => {\n                            const intValue = Number(value);\n                            if (kaszt && !isNaN(intValue)) {\n                                if (name === 'alap') {\n                                    (kaszt.alapHarcertek as any)[key] = value;\n                                } else if (name === 'hm') {\n                                    (kaszt.hm.kotelezo as any)[key] = value;\n                                }\n                                setBackgroundSelection({ ...backgroundSelection, kaszt })\n                            }\n                        }}\n                        matrix={calculateHarcertek(karakter as Karakter).roll(['te', 've', 'ce', 'ke'])}\n                        direction='vertical'\n                        keyMap={HARCERTEK_DISPLAY_NAMES} />\n                    </div>\n                    <div>\n                        <PointsTable\n                            title='Életerő 0. szinten'\n                            points={[{ name: 'ep', label: 'ÉP', ...karakter.ep }, { name: 'fp', label: 'FP', ...karakter.fp }]}\n\n                            onChange={(name, max, value) => {\n                                if (kaszt && max) {\n                                    if (name === 'ep') {\n                                        kaszt.epfp.ep = value - folottiResz(matrix.sum.egs);\n                                    }\n                                    if (name === 'fp') {\n                                        kaszt.epfp.fp = value - folottiResz(matrix.sum.ae) - folottiResz(matrix.sum.ak);\n                                    }\n                                    setBackgroundSelection({ ...backgroundSelection, kaszt })\n                                }\n                            }}\n                        />\n                    </div>\n                </>\n                }\n            </GridColumn>\n            <GridColumn>\n                <DobasMatrixDisplay\n                    title='Képességek'\n                    matrix={matrix}\n                    keyMap={KEPESSEG_NEV}\n                    direction='vertical'\n                    editable={kaszt?.name ? ['Kaszt: ' + kaszt.name] : []}\n                    setValue={(name, key, value) => kaszt && setBackgroundSelection({ ...backgroundSelection, kaszt: { ...kaszt, kepesseg: { ...kaszt.kepesseg, [key]: value } } })} />\n            </GridColumn>\n        </GridRow>\n        <GridRow columns={1} textAlign='center'>\n            <GridColumn>\n                <Button disabled={!kaszt} secondary onClick={dob}>Dob</Button>\n                <Button disabled={!backgroundSelection.name || backgroundSelection.szint === undefined || !matrix.sum} primary onClick={() => { const kar = createKarakter(backgroundSelection, matrix); if (kar) { save(kar) } }}>Ment</Button>\n            </GridColumn>\n        </GridRow>\n    </Grid>\n}","import React from 'react';\nimport { SemanticCOLORS, Table } from 'semantic-ui-react';\nimport { Fegyver } from '../engine/karakter';\n\ninterface FegyverListaProps {\n    fegyverek: Array<Fegyver>,\n    selected?: number,\n    onSelectionChange?: (newSelection: number | undefined) => unknown,\n    title?: string;\n    extraButton?: JSX.Element;\n    color?: SemanticCOLORS;\n\n}\n\nexport const FegyverLista: React.FC<FegyverListaProps> = ({ fegyverek, selected, onSelectionChange, title, extraButton, color }) => {\n    const fegyverLista: Array<Record<string, string | number>> = fegyverek.map(fegyver => {\n        const rec: Record<string, string | number> = {};\n        rec.name = fegyver.name;\n        rec.ke = fegyver.harcertek.ke;\n        rec.te = fegyver.harcertek.te || '-';\n        rec.ve = fegyver.harcertek.ve;\n        rec.ce = fegyver.harcertek.ce || '-';\n        rec.sebzes = fegyver.sebzes;\n        rec.tamPerKor = fegyver.lassu ? '1/' + fegyver.tamPerKor : fegyver.tamPerKor;\n        rec.lotav = fegyver.lotav ?? '-';\n        return rec;\n    });\n\n    return <Table compact celled striped definition selectable={onSelectionChange !== undefined} color={color}>\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell>{title ?? 'Fegyver'}</Table.HeaderCell>\n                <Table.HeaderCell>KÉ</Table.HeaderCell>\n                <Table.HeaderCell>TÉ</Table.HeaderCell>\n                <Table.HeaderCell>VÉ</Table.HeaderCell>\n                <Table.HeaderCell>CÉ</Table.HeaderCell>\n                <Table.HeaderCell>Sebzés</Table.HeaderCell>\n                <Table.HeaderCell>Tám / kör</Table.HeaderCell>\n                <Table.HeaderCell>Lőtáv</Table.HeaderCell>\n            </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {fegyverLista.map((r, i) => <Table.Row key={i} active={selected === i} onClick={() => onSelectionChange?.(selected === i ? undefined : i)}>\n                <Table.Cell>{r.name}</Table.Cell>\n                <Table.Cell>{r.ke}</Table.Cell>\n                <Table.Cell>{r.te}</Table.Cell>\n                <Table.Cell>{r.ve}</Table.Cell>\n                <Table.Cell>{r.ce}</Table.Cell>\n                <Table.Cell>{r.sebzes}</Table.Cell>\n                <Table.Cell>{r.tamPerKor}</Table.Cell>\n                <Table.Cell>{r.lotav}</Table.Cell>\n            </Table.Row>\n            )}\n            {extraButton && <Table.Row key='__extra'>\n                <Table.Cell colspan={8}>{extraButton}</Table.Cell>\n            </Table.Row>}\n        </Table.Body>\n    </Table>\n}","import React from 'react'\r\nimport { Input, Label } from 'semantic-ui-react';\r\n\r\ninterface IntegerInputProps {\r\n    value?: number,\r\n    onChange: (value?: number) => unknown,\r\n    label?: string;\r\n    labelPosition?: 'left' | 'right';\r\n    mandatory?: boolean;\r\n    disabled?: boolean;\r\n}\r\n\r\n\r\nexport const IntegerInput: React.FC<IntegerInputProps> = ({ value, onChange, label, labelPosition = 'left', mandatory, disabled }) => {\r\n    return <Input disabled={disabled} labelPosition={labelPosition} error={mandatory && (value === undefined)} value={value ?? ''} onChange={e => {\r\n        const newValue = e.target.value ? Math.max(0, Math.floor(Number(e.target.value))) : undefined;\r\n        if (newValue === undefined || !Number.isNaN(newValue)) {\r\n            onChange(newValue);\r\n        }\r\n    }}>\r\n        {label && labelPosition === 'left' && <Label pointing='right' basic>{label}</Label>}\r\n        <input style={{ width: '5rem' }} />\r\n        {label && labelPosition === 'right' && <Label pointing='left' basic>{label}</Label>}\r\n    </Input>;\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { Button, Checkbox, Grid, GridColumn, GridRow, Input, Label } from 'semantic-ui-react';\r\nimport { Fegyver } from '../engine/karakter';\r\nimport { IntegerInput } from './IntegerInput';\r\n\r\ninterface FormValues {\r\n    name: string;\r\n    ke?: number;\r\n    te?: number;\r\n    ve?: number;\r\n    ce?: number;\r\n    lofegyver: boolean;\r\n    lotav?: number;\r\n    sebzes: string;\r\n    tamPerKor?: number;\r\n    erobonusz?: number;\r\n    lassu: boolean;\r\n    pajzs: boolean;\r\n    mgt?: number;\r\n}\r\n\r\nexport type FEGYVER_KEPZETTSEG = 'képzetlen' | 'Af' | 'Mf';\r\n\r\nconst convertToFormValues = (fegyver?: Fegyver): FormValues => {\r\n    return {\r\n        name: fegyver?.name ?? '',\r\n        ke: fegyver?.harcertek.ke,\r\n        te: fegyver?.harcertek.te,\r\n        ve: fegyver?.harcertek.ve,\r\n        ce: fegyver?.harcertek.ce,\r\n        lofegyver: (fegyver?.harcertek.ce ?? 0) > 0,\r\n        lotav: fegyver?.lotav,\r\n        sebzes: fegyver?.sebzes ?? '',\r\n        tamPerKor: fegyver?.tamPerKor,\r\n        erobonusz: fegyver?.erobonusz,\r\n        lassu: fegyver?.lassu ?? false,\r\n        pajzs: fegyver?.pajzs ?? false,\r\n        mgt: fegyver?.mgt ?? 0\r\n    }\r\n}\r\n\r\nconst convertFromFormValues = (fegyver: FormValues): Fegyver => {\r\n    return {\r\n        name: fegyver.name,\r\n        harcertek: {\r\n            ke: fegyver.ke ?? 0,\r\n            te: fegyver.te ?? 0,\r\n            ve: fegyver.ve ?? 0,\r\n            ce: fegyver.ce ?? 0\r\n        },\r\n        lotav: fegyver.lotav,\r\n        sebzes: fegyver.sebzes,\r\n        tamPerKor: fegyver.tamPerKor ?? 1,\r\n        erobonusz: fegyver.erobonusz,\r\n        lassu: fegyver.lassu,\r\n        pajzs: fegyver.pajzs,\r\n        mgt: fegyver.mgt\r\n    }\r\n}\r\n\r\nexport const FegyverEditor: React.FC<{ kepzettseg?: boolean, fegyver?: Fegyver, submit: (fegyver: Fegyver, kepzettseg?: FEGYVER_KEPZETTSEG) => unknown, cancel: () => unknown }> = ({ fegyver, submit, cancel, kepzettseg }) => {\r\n\r\n    const [form, setForm] = useState<FormValues>(convertToFormValues(fegyver));\r\n\r\n    useEffect(() => {\r\n        setForm(convertToFormValues(fegyver));\r\n    }, [fegyver]);\r\n\r\n    return <Grid columns={1} relaxed>\r\n        <GridRow>\r\n            <GridColumn>\r\n                <div>\r\n                    <Input fluid labelPosition='left' placeholder='Fegyver neve...' error={!form.name} value={form.name} onChange={e => setForm({ ...form, name: e.target.value })}>\r\n                        <Label pointing='right' basic>Név</Label>\r\n                        <input />\r\n                    </Input>\r\n                </div>\r\n                <div><IntegerInput value={form.ke} onChange={ke => setForm({ ...form, ke })} label='KÉ' /></div>\r\n                <div>\r\n                    <Label pointing='right' basic>Lőfegyver:</Label>\r\n                    <Checkbox fitted={true} toggle checked={form.lofegyver} onChange={() => setForm({ ...form, lofegyver: !form.lofegyver })}>\r\n                    </Checkbox>\r\n                </div>\r\n                {!form.lofegyver &&\r\n                    <div><IntegerInput value={form.te} onChange={te => setForm({ ...form, te })} label='TÉ' /></div>\r\n                }\r\n                {form.lofegyver &&\r\n                    <div><IntegerInput value={form.ce} onChange={ce => setForm({ ...form, ce })} label='CÉ' /></div>\r\n                }\r\n                <div><IntegerInput value={form.ve} onChange={ve => setForm({ ...form, ve })} label='VÉ' /></div>\r\n                <div>\r\n                    <Input fluid labelPosition='left' placeholder='Fegyver sebzése...' error={!form.sebzes} value={form.sebzes} onChange={e => setForm({ ...form, sebzes: e.target.value })}>\r\n                        <Label pointing='right' basic>Sebzés</Label>\r\n                        <input />\r\n                    </Input>\r\n                </div>\r\n                {form.lofegyver &&\r\n                    <div><IntegerInput value={form.lotav} onChange={lotav => setForm({ ...form, lotav })} label='Lőtáv' /></div>\r\n                }\r\n                <div>\r\n                    <Label pointing='right' basic>Lassú:</Label>\r\n                    <Checkbox fitted={true} toggle checked={form.lassu} onChange={() => setForm({ ...form, lassu: !form.lassu })}>\r\n                    </Checkbox>\r\n                </div>\r\n                <div><IntegerInput value={form.tamPerKor} onChange={tamPerKor => setForm({ ...form, tamPerKor })} label={`Támadás körönként: ${form.lassu ? '1 / ' : ''}`} /></div>\r\n                <div><IntegerInput value={form.erobonusz} onChange={erobonusz => setForm({ ...form, erobonusz })} label={`Minimum erő bónuszhoz:`} /></div>\r\n                <div>\r\n                    <Label pointing='right' basic>Pajzs:</Label>\r\n                    <Checkbox fitted={true} toggle checked={form.pajzs} onChange={() => setForm({ ...form, pajzs: !form.pajzs })}>\r\n                    </Checkbox>\r\n                </div>\r\n                <div><IntegerInput disabled={!form.pajzs} value={form.mgt} onChange={mgt => setForm({ ...form, mgt })} label='MGT' /></div>\r\n            </GridColumn>\r\n        </GridRow>\r\n        <GridRow textAlign='center'>\r\n            <GridColumn>\r\n                {!kepzettseg && <Button onClick={() => submit(convertFromFormValues(form))}>Ment</Button>}\r\n                {kepzettseg &&\r\n                    <Button as='div' labelPosition='left'>\r\n                        <Label pointing='right'>\r\n                            Használat szintje\r\n                    </Label>\r\n                        <Button onClick={() => submit(convertFromFormValues(form), 'képzetlen')}>Képzetlen</Button>\r\n                        <Button secondary onClick={() => submit(convertFromFormValues(form), 'Af')}>Af</Button>\r\n                        <Button primary onClick={() => submit(convertFromFormValues(form), 'Mf')}>Mf</Button>\r\n                    </Button>\r\n                }\r\n                <Button secondary basic onClick={cancel}>Mégse</Button>\r\n            </GridColumn>\r\n        </GridRow>\r\n    </Grid>;\r\n}","import React, { useCallback, useState } from 'react';\nimport { Button, Grid, GridColumn, GridRow, Header, Label, Modal } from 'semantic-ui-react';\nimport { Fegyver, Karakter, Kepzettseg } from '../engine/karakter';\nimport { FegyverEditor, FEGYVER_KEPZETTSEG } from './FegyverEditor';\nimport { FegyverLista } from './FegyverLista';\n\ninterface FegyverValasztoProps {\n    fegyverek: Array<Fegyver>,\n    karakter: Karakter,\n    save: (karakter: Karakter) => unknown,\n    saveFegyverek: (fegyverek: Array<Fegyver>) => unknown\n}\n\nexport const FegyverValaszto: React.FC<FegyverValasztoProps> = ({ karakter, save, fegyverek, saveFegyverek }) => {\n\n    const [selected, setSelected] = useState<number>();\n    const [selectedForDeletion, setSelectedForDeletion] = useState<number>();\n    const [editorOpen, setEditorOpen] = useState<boolean>(false);\n    const [listEditorOpen, setListEditorOpen] = useState<boolean>(false);\n\n    const saveSelection = useCallback((kepzettsegSzint: FEGYVER_KEPZETTSEG) => {\n        const fegyver = selected !== undefined ? fegyverek[selected] : undefined;\n        if (fegyver) {\n            addFegyverAndKepzettseg(karakter, fegyver, kepzettsegSzint);\n            save(karakter);\n        }\n    }, [karakter, save, selected, fegyverek]);\n\n    const saveDeletion = useCallback(() => {\n        if (selectedForDeletion !== undefined) {\n            karakter.fegyverek = karakter.fegyverek.filter((f, i) => i !== selectedForDeletion);\n            karakter.valasztottFegyver = 0;\n            save(karakter);\n        }\n    }, [karakter, save, selectedForDeletion]);\n\n\n    return <Grid columns={3} relaxed>\n        <GridRow columns='equal'>\n            <GridColumn>\n                <Header size='large'>Választható\n                    <Modal trigger={<Button floated='right' primary>{selected !== undefined ? 'Módosít' : 'Új'}</Button>}\n                        onOpen={() => setListEditorOpen(true)}\n                        onClose={() => setListEditorOpen(false)}\n                        open={listEditorOpen}>\n                        <Modal.Content>\n                            <FegyverEditor\n                                fegyver={selected !== undefined ? fegyverek[selected] : undefined}\n                                submit={f => {\n                                    if (selected === undefined) {\n                                        fegyverek.push(f);\n                                    } else {\n                                        fegyverek[selected] = f;\n                                    }\n                                    saveFegyverek(fegyverek);\n                                    setListEditorOpen(false);\n                                }}\n                                cancel={() => setListEditorOpen(false)} />\n                        </Modal.Content>\n                    </Modal>\n                    <Button floated='right' negative disabled={selected === undefined} onClick={() => {\n                        saveFegyverek(fegyverek.filter((f, i) => i !== selected));\n                    }}>Töröl</Button>\n                    <Button floated='right' as='div' labelPosition='left'>\n                        <Label pointing='right'>\n                            Képzettség\n                        </Label>\n                        <Button disabled={selected === undefined} onClick={() => saveSelection('képzetlen')}>Képzetlen</Button>\n                        <Button secondary disabled={selected === undefined} onClick={() => saveSelection('Af')}>Af</Button>\n                        <Button primary disabled={selected === undefined} onClick={() => saveSelection('Mf')}>Mf</Button>\n                    </Button>\n                </Header>\n                <FegyverLista fegyverek={fegyverek.sort((a, b) => a.name.localeCompare(b.name))} selected={selected} onSelectionChange={setSelected}></FegyverLista>\n            </GridColumn>\n            <GridColumn>\n                <Header size='large'>Viselt\n                    <Modal trigger={<Button floated='right' primary>{selectedForDeletion !== undefined ? 'Módosít' : 'Új'}</Button>} onOpen={() => setEditorOpen(true)} onClose={() => setEditorOpen(false)} open={editorOpen}>\n                        <Modal.Content>\n                            <FegyverEditor\n                                kepzettseg\n                                fegyver={selectedForDeletion !== undefined ? karakter.fegyverek[selectedForDeletion] : undefined}\n                                submit={(f, k) => { addFegyverAndKepzettseg(karakter, f, k ?? 'képzetlen', selectedForDeletion); save(karakter); setEditorOpen(false) }}\n                                cancel={() => setEditorOpen(false)} />\n                        </Modal.Content>\n                    </Modal>\n                    <Button floated='right' negative disabled={selectedForDeletion === undefined} onClick={saveDeletion}>Töröl</Button>\n                </Header>\n                <FegyverLista fegyverek={karakter.fegyverek} selected={selectedForDeletion} onSelectionChange={setSelectedForDeletion}></FegyverLista>\n            </GridColumn>\n        </GridRow>\n        <GridRow columns={1} textAlign='center'>\n            <GridColumn>\n                <div>\n                </div>\n            </GridColumn>\n        </GridRow>\n    </Grid>\n}\n\nfunction addFegyverAndKepzettseg(karakter: Karakter, fegyver: Fegyver, kepzettsegSzint: FEGYVER_KEPZETTSEG, idx?: number) {\n    const fIdx = idx ?? karakter.fegyverek.findIndex(f => f.name === fegyver.name);\n    if (fIdx === -1) {\n        karakter.fegyverek.push({ ...fegyver });\n    } else {\n        karakter.fegyverek[fIdx] = fegyver;\n    }\n    karakter.valasztottFegyver = karakter.fegyverek.findIndex(f => f.name === fegyver.name);\n    const kepzettsegName = `Fegyverhasználat - ${fegyver.name.toLowerCase()}`;\n    karakter.kepzettsegek = (karakter.kepzettsegek ?? []).filter(k => k.name !== kepzettsegName);\n    if (kepzettsegSzint !== 'képzetlen') {\n        const kepzettseg: Kepzettseg = {\n            name: kepzettsegName,\n            szint: kepzettsegSzint as any,\n            kp: 0\n        };\n        karakter.kepzettsegek.push(kepzettseg);\n    }\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { Button, Table } from 'semantic-ui-react';\nimport { Harcertek, HARCERTEK_DISPLAY_NAMES } from '../engine/harc';\nimport { NumberInput } from './NumberInput';\n\ninterface State {\n    harcertek: Harcertek,\n    hm: number\n};\n\nexport const HMEloszto: React.FC<{ harcertek: Harcertek, hm: number, complete: (harcertek: Harcertek, hm: number) => unknown }> = ({ harcertek, hm, complete }) => {\n    const [current, setCurrent] = useState<State>({ harcertek: { ...harcertek }, hm: hm } as State);\n\n    useEffect(() => {\n        setCurrent({ harcertek: { ...harcertek }, hm });\n    }, [harcertek, hm, setCurrent]);\n\n\n    const change = useCallback((he: ('ke' | 'te' | 've' | 'ce'), newValue: number) => {\n        const newCurrent: State = { ...current };\n        newCurrent.harcertek[he] = newValue;\n        newCurrent.hm = hm - (Object.keys(newCurrent.harcertek) as Array<any>).reduce((acc, curr: ('ke' | 'te' | 've' | 'ce')) => acc + (newCurrent.harcertek[curr] - harcertek[curr]), 0);\n        setCurrent(newCurrent);\n    }, [current, setCurrent, harcertek, hm]);\n\n    return <Table definition striped compact color='orange'>\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell>HM:</Table.HeaderCell>\n                <Table.Cell colSpan={2} style={!current.hm ? { padding: '0' } : {}} textAlign={current.hm ? 'left' : 'center'}>\n                    {current.hm ? current.hm : <Button compact color='green' circular icon='check' content='Eloszt' onClick={() => complete(current.harcertek, current.hm)} />}\n                </Table.Cell>\n            </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {(Object.keys(harcertek) as Array<any>).map((he: ('ke' | 'te' | 've' | 'ce')) => <Table.Row>\n                <Table.Cell>{HARCERTEK_DISPLAY_NAMES[he]}:</Table.Cell>\n                <Table.Cell collapsing><i>{harcertek[he]}</i></Table.Cell>\n                <Table.Cell collapsing><NumberInput icons value={current.harcertek[he]} min={harcertek[he]} max={(current.harcertek[he] ?? 0) + current.hm} onChange={e => change(he, e ?? 0)} /></Table.Cell>\n            </Table.Row>)}\n        </Table.Body>\n    </Table>\n}","import React, { useState } from 'react';\r\nimport { Modal, Button, Grid, GridColumn, Input, Label } from 'semantic-ui-react';\r\nimport { Karakter, Kepzettseg } from '../engine/karakter';\r\nimport { IntegerInput } from './IntegerInput';\r\n\r\nexport const KepzettsegModal: React.FC<{ karakter: Karakter; save: () => unknown }> = ({ karakter, save }) => {\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    const [kepzettseg, setKepzettseg] = useState<string>();\r\n    const [szint, setSzint] = useState<number | '1' | '2' | '3' | '4' | '5' | 'Af' | 'Mf'>();\r\n    const [kp, setKp] = useState<number>();\r\n\r\n    const saveKepzettseg = () => {\r\n        karakter.kepzettsegek = karakter.kepzettsegek ?? [];\r\n        if (kepzettseg && szint !== undefined) {\r\n            const curr = karakter.kepzettsegek.findIndex(k => k.name === kepzettseg);\r\n            const newKepzettseg: Kepzettseg = {\r\n                name: kepzettseg,\r\n                szint,\r\n                kp: kp ?? 0\r\n            }\r\n            if (curr !== -1) {\r\n                karakter.kepzettsegek[curr] = newKepzettseg;\r\n            } else {\r\n                karakter.kepzettsegek.push(newKepzettseg);\r\n            }\r\n            save();\r\n            setSzint(undefined);\r\n            setKp(undefined);\r\n            setKepzettseg('');\r\n        }\r\n    }\r\n\r\n    return <Modal trigger={<Button fluid circular icon='plus' content='Hozzáad' />} onOpen={() => setModalOpen(true)} onClose={() => setModalOpen(false)} open={modalOpen}>\r\n        <Modal.Content>\r\n            <div style={{ marginBottom: '0.5rem' }}>\r\n                <Input fluid labelPosition='left' placeholder='Képzettség...' error={!kepzettseg} value={kepzettseg} onChange={e => setKepzettseg(e.target.value)}>\r\n                    <Label pointing='right' basic>Képzettség</Label>\r\n                    <input />\r\n                    <Button circular color='olive' style={{ marginLeft: '1rem' }} onClick={() => setKepzettseg('Nehézvértviselet')}>Nehézvértviselet</Button>\r\n                    <Button circular color='olive' style={{ marginLeft: '1rem' }} onClick={() => setKepzettseg('Kétkezes harc')}>Kétkezes harc</Button>\r\n                    <Button circular color='olive' style={{ marginLeft: '1rem' }} onClick={() => setKepzettseg('Pajzshasználat')}>Pajzshasználat</Button>\r\n                </Input>\r\n            </div>\r\n            <div style={{ marginBottom: '0.5rem' }}>\r\n                <Grid columns={4}>\r\n                    <GridColumn width={3}>\r\n                        <Button as='div' labelPosition='left'>\r\n                            <Label pointing='right'>\r\n                                Szint\r\n                    </Label>\r\n                            <Button color={szint === 'Af' ? 'black' : 'olive'} onClick={() => setSzint('Af')}>Af</Button>\r\n                            <Button color={szint === 'Mf' ? 'black' : 'olive'} onClick={() => setSzint('Mf')}>Mf</Button>\r\n                        </Button>\r\n                    </GridColumn>\r\n                    <GridColumn width={6} textAlign='center'>\r\n                        {['1', '2', '3', '4', '5'].map(i => <Button color={szint === i ? 'black' : 'olive'} circular onClick={() => setSzint(i as any)}>{i}</Button>)}\r\n                    </GridColumn>\r\n                    <GridColumn width={3} textAlign='left'>\r\n                        <IntegerInput labelPosition='right' label='Százalék' value={typeof szint === 'number' ? szint : undefined} onChange={v => setSzint(v)} />\r\n                    </GridColumn>\r\n                    <GridColumn width={4} textAlign='right'>\r\n                        <IntegerInput labelPosition='right' label='Elköltött KP' value={kp} onChange={v => setKp(v)} />\r\n                    </GridColumn>\r\n                </Grid>\r\n            </div>\r\n            <div style={{ marginBottom: '0.5rem' }}>\r\n                <Button disabled={!kepzettseg || szint === undefined} onClick={saveKepzettseg}>Ment</Button>\r\n            </div>\r\n        </Modal.Content>\r\n    </Modal>\r\n}","import React from 'react';\nimport { Icon, Table } from 'semantic-ui-react';\nimport { Karakter, Kepzettseg } from '../engine/karakter';\nimport { KepzettsegModal } from './KepzettsegModal';\n\n\nconst compare = (a: Kepzettseg, b: Kepzettseg): number => {\n    if (typeof a.szint === 'number' && typeof b.szint !== 'number') {\n        return 1;\n    }\n    if (typeof b.szint === 'number' && typeof a.szint !== 'number') {\n        return -1;\n    }\n    return a.name.localeCompare(b.name);\n}\n\nexport const KepzettsegLista: React.FC<{ karakter: Karakter, save: () => unknown }> = ({ karakter, save }) => {\n    return <Table striped celled compact color='pink'>\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell>Képzettség</Table.HeaderCell>\n                <Table.HeaderCell collapsing>Szint</Table.HeaderCell>\n                <Table.HeaderCell collapsing>KP</Table.HeaderCell>\n                <Table.HeaderCell collapsing></Table.HeaderCell>\n            </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {karakter.kepzettsegek?.sort(compare).map((r, i) => <Table.Row>\n                <Table.Cell>{r.name}</Table.Cell>\n                <Table.Cell collapsing>{r.szint}</Table.Cell>\n                <Table.Cell collapsing>{r.kp ? r.kp : '-'}</Table.Cell>\n                <Table.Cell collapsing><Icon name='delete' onClick={() => { karakter.kepzettsegek?.splice(i, 1); save() }} /></Table.Cell>\n            </Table.Row>\n            )}\n            <Table.Row key='__new'>\n                <Table.Cell colspan={4}><KepzettsegModal karakter={karakter} save={save} /></Table.Cell>\n            </Table.Row>\n        </Table.Body>\n    </Table>\n\n}","import React from 'react';\nimport { Icon, SemanticCOLORS, Table } from 'semantic-ui-react';\nimport { Pancel } from '../engine/pancel';\n\ninterface PancelListaProps {\n    pancelok?: Array<Pancel>,\n    selected?: number,\n    onSelectionChange?: (newSelection: number | undefined) => unknown\n    extraButton?: JSX.Element;\n    color?: SemanticCOLORS\n}\n\nexport const PancelLista: React.FC<PancelListaProps> = ({ pancelok, selected, onSelectionChange, extraButton, color }) => {\n\n    return <Table compact celled striped definition selectable={onSelectionChange !== undefined} color={color}>\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell>Páncél</Table.HeaderCell>\n                <Table.HeaderCell>SFÉ</Table.HeaderCell>\n                <Table.HeaderCell>MGT</Table.HeaderCell>\n                <Table.HeaderCell>Nehéz</Table.HeaderCell>\n            </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {pancelok?.map((r, i) => <Table.Row key={i} active={selected === i} onClick={() => onSelectionChange?.(selected === i ? undefined : i)}>\n                <Table.Cell>{r.name}</Table.Cell>\n                <Table.Cell>{r.sfe}</Table.Cell>\n                <Table.Cell>{r.mgt}</Table.Cell>\n                <Table.Cell>{r.nehez && <Icon compact color='green' name='check' />}</Table.Cell>\n            </Table.Row>\n            )}\n            {extraButton && <Table.Row key='__extra'>\n                <Table.Cell colspan={4}>{extraButton}</Table.Cell>\n            </Table.Row>}\n        </Table.Body>\n    </Table>\n}","import React, { useEffect, useState } from 'react';\r\nimport { Button, Checkbox, Grid, GridColumn, GridRow, Input, Label } from 'semantic-ui-react';\r\nimport { Pancel } from '../engine/pancel';\r\nimport { IntegerInput } from './IntegerInput';\r\n\r\n\r\n\r\nexport const PancelEditor: React.FC<{ pancel?: Pancel, submit: (pancel: Pancel) => unknown, cancel: () => unknown }> = ({ pancel, submit, cancel }) => {\r\n\r\n    const [form, setForm] = useState<Pancel>(pancel ?? { name: '', mgt: 0, sfe: 0, nehez: false });\r\n\r\n    useEffect(() => {\r\n        setForm(pancel ?? { name: '', mgt: 0, sfe: 0, nehez: false });\r\n    }, [pancel]);\r\n\r\n    return <Grid columns={1} relaxed>\r\n        <GridRow>\r\n            <GridColumn>\r\n                <div>\r\n                    <Input fluid labelPosition='left' placeholder='Fegyver neve...' error={!form.name} value={form.name} onChange={e => setForm({ ...form, name: e.target.value })}>\r\n                        <Label pointing='right' basic>Név</Label>\r\n                        <input />\r\n                    </Input>\r\n                </div>\r\n                <div><IntegerInput value={form.sfe} onChange={sfe => setForm({ ...form, sfe: sfe ?? 0 })} label='SFÉ' /></div>\r\n                <div><IntegerInput value={form.mgt} onChange={mgt => setForm({ ...form, mgt: mgt ?? 0 })} label='MGT' /></div>\r\n                <div>\r\n                    <Label pointing='right' basic>Nehéz:</Label>\r\n                    <Checkbox fitted={true} toggle checked={form.nehez} onChange={() => setForm({ ...form, nehez: !form.nehez })}>\r\n                    </Checkbox>\r\n                </div>\r\n            </GridColumn>\r\n        </GridRow>\r\n        <GridRow textAlign='center'>\r\n            <GridColumn>\r\n                {!!form.name && <Button onClick={() => submit(form)}>Ment</Button>}\r\n                <Button secondary basic onClick={cancel}>Mégse</Button>\r\n            </GridColumn>\r\n        </GridRow>\r\n    </Grid>;\r\n}","import React, { useCallback, useState } from 'react';\r\nimport { Button, Grid, GridColumn, GridRow, Header, Modal } from 'semantic-ui-react';\r\nimport { Karakter } from '../engine/karakter';\r\nimport { Pancel } from '../engine/pancel';\r\nimport { PancelEditor } from './PancelEditor';\r\nimport { PancelLista } from './PancelLista';\r\n\r\ninterface PancelValasztoProps {\r\n    pancelok: Array<Pancel>,\r\n    karakter: Karakter,\r\n    save: (karakter: Karakter) => unknown,\r\n    savePancelok: (pancelok: Array<Pancel>) => unknown\r\n}\r\n\r\nexport const PancelValaszto: React.FC<PancelValasztoProps> = ({ karakter, save, pancelok, savePancelok }) => {\r\n\r\n    const [selected, setSelected] = useState<number>();\r\n    const [selectedForDeletion, setSelectedForDeletion] = useState<number>();\r\n    const [editorOpen, setEditorOpen] = useState<boolean>(false);\r\n    const [listEditorOpen, setListEditorOpen] = useState<boolean>(false);\r\n\r\n    const saveDeletion = useCallback(() => {\r\n        if (selectedForDeletion !== undefined) {\r\n            karakter.pancelok = karakter.pancelok?.filter((f, i) => i !== selectedForDeletion);\r\n            karakter.valasztottPancel = undefined;\r\n            save(karakter);\r\n        }\r\n    }, [karakter, save, selectedForDeletion]);\r\n\r\n    return <Grid columns={3} relaxed>\r\n        <GridRow columns='equal'>\r\n            <GridColumn>\r\n                <Header size='large'>Választható\r\n                    <Button floated='right' secondary disabled={selected === undefined || (karakter.pancelok ?? []).some(p => p.name === pancelok[selected].name)} onClick={() => {\r\n                        karakter.pancelok = karakter.pancelok ?? [];\r\n                        if (selected && karakter.pancelok.every(p => p.name !== pancelok[selected].name)) {\r\n                            karakter.pancelok.push(pancelok[selected]);\r\n                            save(karakter);\r\n                        }\r\n                    }}>Választ</Button>\r\n                    <Modal trigger={<Button floated='right' primary>{selected !== undefined ? 'Módosít' : 'Új'}</Button>}\r\n                        onOpen={() => setListEditorOpen(true)}\r\n                        onClose={() => setListEditorOpen(false)}\r\n                        open={listEditorOpen}>\r\n                        <Modal.Content>\r\n                            <PancelEditor\r\n                                pancel={selected !== undefined ? pancelok[selected] : undefined}\r\n                                submit={f => {\r\n                                    if (selected === undefined) {\r\n                                        pancelok.push(f);\r\n                                    } else {\r\n                                        pancelok[selected] = f;\r\n                                    }\r\n                                    savePancelok(pancelok);\r\n                                    setListEditorOpen(false);\r\n                                }}\r\n                                cancel={() => setListEditorOpen(false)} />\r\n                        </Modal.Content>\r\n                    </Modal>\r\n                    <Button floated='right' negative disabled={selected === undefined} onClick={() => {\r\n                        savePancelok(pancelok.filter((f, i) => i !== selected));\r\n                    }}>Töröl</Button>\r\n                </Header>\r\n                <PancelLista pancelok={pancelok.sort((a, b) => a.name.localeCompare(b.name))} selected={selected} onSelectionChange={setSelected} />\r\n            </GridColumn>\r\n            <GridColumn>\r\n                <Header size='large'>Viselt\r\n                    <Modal trigger={<Button floated='right' primary>{selectedForDeletion !== undefined ? 'Módosít' : 'Új'}</Button>} onOpen={() => setEditorOpen(true)} onClose={() => setEditorOpen(false)} open={editorOpen}>\r\n                        <Modal.Content>\r\n                            <PancelEditor\r\n                                pancel={selectedForDeletion !== undefined ? karakter.pancelok?.[selectedForDeletion] : undefined}\r\n                                submit={p => {\r\n                                    karakter.pancelok = karakter.pancelok ?? [];\r\n                                    if (selectedForDeletion !== undefined) {\r\n                                        karakter.pancelok[selectedForDeletion] = p;\r\n                                    } else {\r\n                                        karakter.pancelok.push(p);\r\n                                    }\r\n                                    save(karakter);\r\n                                    setEditorOpen(false)\r\n                                }}\r\n                                cancel={() => setEditorOpen(false)} />\r\n                        </Modal.Content>\r\n                    </Modal>\r\n                    <Button floated='right' negative disabled={selectedForDeletion === undefined} onClick={saveDeletion}>Töröl</Button>\r\n                </Header>\r\n                <PancelLista pancelok={karakter.pancelok} selected={selectedForDeletion} onSelectionChange={setSelectedForDeletion}></PancelLista>\r\n            </GridColumn>\r\n        </GridRow>\r\n        <GridRow columns={1} textAlign='center'>\r\n            <GridColumn>\r\n                <div>\r\n                </div>\r\n            </GridColumn>\r\n        </GridRow>\r\n    </Grid>\r\n}\r\n","import React from 'react';\nimport { Table } from 'semantic-ui-react';\nimport { Pajzs } from '../engine/karakter';\nimport { NumberInput } from './NumberInput';\n\n\n\n\n\nexport const Pajzsok: React.FC<{ pajzs: { asztral: Pajzs, mental: Pajzs }, onChange: (pajzs: { asztral: Pajzs, mental: Pajzs }) => unknown }> = ({ pajzs, onChange }) => {\n    return <Table striped celled definition fluid compact color='red'>\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell>Pajzsok</Table.HeaderCell>\n                <Table.HeaderCell collapsing>Asztrál</Table.HeaderCell>\n                <Table.HeaderCell collapsing>Mentál</Table.HeaderCell>\n            </Table.Row>\n\n        </Table.Header>\n        <Table.Body>\n            <Table.Row>\n                <Table.HeaderCell>Természetes</Table.HeaderCell>\n                <Table.Cell collapsing><NumberInput icons value={pajzs.asztral.termeszetes} min={0} max={1000} onChange={(e: number) => { pajzs.asztral.termeszetes = e; onChange(pajzs) }} /></Table.Cell>\n                <Table.Cell collapsing><NumberInput icons value={pajzs.mental.termeszetes} min={0} max={1000} onChange={(e: number) => { pajzs.mental.termeszetes = e; onChange(pajzs) }} /></Table.Cell>\n            </Table.Row>\n            <Table.Row>\n                <Table.HeaderCell>Statikus</Table.HeaderCell>\n                <Table.Cell collapsing><NumberInput icons value={pajzs.asztral.statikus} min={0} max={1000} onChange={(e: number) => { pajzs.asztral.statikus = e; onChange(pajzs) }} /></Table.Cell>\n                <Table.Cell collapsing><NumberInput icons value={pajzs.mental.statikus} min={0} max={1000} onChange={(e: number) => { pajzs.mental.statikus = e; onChange(pajzs) }} /></Table.Cell>\n            </Table.Row>\n            <Table.Row>\n                <Table.HeaderCell>Dinamikus</Table.HeaderCell>\n                <Table.Cell collapsing><NumberInput icons value={pajzs.asztral.dinamikus} min={0} max={1000} onChange={(e: number) => { pajzs.asztral.dinamikus = e; onChange(pajzs) }} /></Table.Cell>\n                <Table.Cell collapsing><NumberInput icons value={pajzs.mental.dinamikus} min={0} max={1000} onChange={(e: number) => { pajzs.mental.dinamikus = e; onChange(pajzs) }} /></Table.Cell>\n            </Table.Row>\n            <Table.Row>\n                <Table.HeaderCell>Összeg</Table.HeaderCell>\n                <Table.Cell collapsing><b>{pajzs.asztral.termeszetes + pajzs.asztral.statikus + pajzs.asztral.dinamikus}</b></Table.Cell>\n                <Table.Cell collapsing><b>{pajzs.mental.termeszetes + pajzs.mental.statikus + pajzs.mental.dinamikus}</b></Table.Cell>\n            </Table.Row>\n        </Table.Body>\n    </Table>\n\n}","import React from 'react';\r\nimport { Table } from 'semantic-ui-react';\r\nimport { Karakter } from '../engine/karakter';\r\n\r\nexport const Jegyzetek: React.FC<{ karakter: Karakter, save: () => unknown }> = ({ karakter, save }) => <Table celled fluid compact color='yellow'>\r\n    <Table.Header>\r\n        <Table.Row>\r\n            <Table.HeaderCell>Jegyzetek</Table.HeaderCell>\r\n        </Table.Row>\r\n\r\n    </Table.Header>\r\n    <Table.Body>\r\n        <Table.Row>\r\n            <Table.Cell style={{ padding: '0' }}>\r\n                <textarea style={{ borderRadius: '0.25em', height: '10em', width: '100%' }} value={karakter.jegyzetek ?? ''} onChange={e => { karakter.jegyzetek = e.target.value; save(); }} />\r\n            </Table.Cell>\r\n        </Table.Row>\r\n    </Table.Body>\r\n</Table>;\r\n","import React, { forwardRef, useEffect, useImperativeHandle, useState } from 'react';\r\nimport { Input } from 'semantic-ui-react';\r\n\r\nexport interface EditableTextProps {\r\n    text?: string;\r\n    onChange: (text: string) => unknown;\r\n}\r\n\r\nexport const EditableText = forwardRef<any, EditableTextProps>(({ text, onChange }, ref) => {\r\n    const [editedText, setEditedText] = useState<string>('');\r\n    const [edited, setEdited] = useState<boolean>(false);\r\n    useImperativeHandle(ref, () => ({\r\n        edit: () => setEdited(true)\r\n    }));\r\n    useEffect(() => {\r\n        setEditedText(text ?? '');\r\n    }, [text]);\r\n    if (edited) {\r\n        return <form onSubmit={() => { setEdited(false); onChange(editedText) }}><Input transparent autoFocus value={editedText} onChange={(e, { value }) => { setEditedText(value) }} onBlur={() => { setEdited(false); onChange(editedText) }} /></form>\r\n    } else {\r\n        return <span onClick={() => setEdited(true)}>{text ?? ''}</span>;\r\n    }\r\n});\r\n","import React from 'react';\r\nimport { Button, Icon, Table } from 'semantic-ui-react';\r\nimport { Karakter } from '../engine/karakter';\r\nimport { EditableText } from '../story/components/EditableText';\r\nimport { NumberInput } from './NumberInput';\r\n\r\nexport const Felszereles: React.FC<{ karakter: Karakter, save: () => unknown }> = ({ karakter, save }) => {\r\n\r\n    const rowRefs: Record<string, { current: any }> = {};\r\n\r\n    return <Table celled fluid compact color='blue'>\r\n        <Table.Header>\r\n            <Table.Row>\r\n                <Table.HeaderCell>Felszerelés</Table.HeaderCell>\r\n                <Table.HeaderCell>Mennyiség</Table.HeaderCell>\r\n                <Table.HeaderCell />\r\n            </Table.Row>\r\n        </Table.Header>\r\n        <Table.Body>\r\n            {karakter.felszereles?.map((f, i) => <Table.Row key={f.name}>\r\n                <Table.Cell onClick={() => rowRefs[f.name].current.edit()}>\r\n                    <EditableText ref={ref => rowRefs[f.name] = { current: ref }} text={f.name} onChange={v => { f.name = v; save() }} />\r\n                </Table.Cell>\r\n                <Table.Cell collapsing>\r\n                    <NumberInput min={0} max={10000} value={f.qty} onChange={q => { f.qty = q; save() }} icons />\r\n                </Table.Cell>\r\n                <Table.Cell collapsing>\r\n                    <Icon name='delete' onClick={() => { karakter.felszereles?.splice(i, 1); save() }} />\r\n                </Table.Cell>\r\n            </Table.Row>\r\n            )}\r\n            <Table.Row>\r\n                <Table.Cell colSpan={3} >\r\n                    <Button fluid circular icon='plus' content='Hozzáad' onClick={() => { karakter.felszereles = [...(karakter.felszereles ?? []), { name: '', qty: 1 }]; save(); }} />\r\n                </Table.Cell>\r\n\r\n            </Table.Row>\r\n\r\n        </Table.Body>\r\n    </Table>;\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Modal, Button, Input, Grid, GridColumn } from 'semantic-ui-react';\r\n\r\nexport const KategoriaEditor: React.FC<{ categories: Array<string>, save: (value: string) => unknown }> = ({ categories, save }) => {\r\n    const [kategoriak, setKategoriak] = useState(false);\r\n    const [ujKategoria, setUjKategoria] = useState('');\r\n\r\n    return <Modal trigger={<Button floated='right' size='tiny' circular compact color='orange'>+</Button>} onOpen={() => setKategoriak(true)} onClose={() => setKategoriak(false)} open={kategoriak} size='mini' title='Új kategória'>\r\n        <Modal.Header>Új kategória</Modal.Header>\r\n        <Modal.Content>\r\n            <Grid columns={2} fluid relaxed>\r\n                <GridColumn>\r\n                    <Input list='categories' value={ujKategoria} onChange={e => setUjKategoria(e.target.value)} />\r\n                    <datalist id='categories'>\r\n                        {categories.map(c => <option value={c}>{c}</option>)}\r\n                    </datalist>\r\n                </GridColumn>\r\n                <GridColumn>\r\n                    <Button fluid primary onClick={() => { save(ujKategoria); setKategoriak(false); }}>Hozzáad</Button>\r\n                </GridColumn>\r\n            </Grid>\r\n        </Modal.Content>\r\n    </Modal>\r\n\r\n}","import fileDownload from 'js-file-download';\r\nimport React, { useState } from 'react';\r\nimport { Button, Confirm, Icon, Label, Table } from 'semantic-ui-react';\r\nimport { Karakter, szintlepes } from '../engine/karakter';\r\nimport { EditableText } from '../story/components/EditableText';\r\nimport { KategoriaEditor } from './KategoriaEditor';\r\n\r\ninterface KarakterTablaProps {\r\n    karakter: Karakter;\r\n    save: (karakter: Karakter) => unknown;\r\n    categories: Array<string>;\r\n    clone: (karakter: Karakter) => Karakter;\r\n    remove: () => unknown\r\n\r\n}\r\n\r\nexport const KarakterTabla: React.FC<KarakterTablaProps> = ({ karakter, save, categories, clone, remove }) => {\r\n\r\n    const [torlesKerdes, setTorlesKerdes] = useState(false);\r\n\r\n    const exportKarakter = () => {\r\n        fileDownload(JSON.stringify(karakter), `${karakter.name}.json`, 'text/json');\r\n    }\r\n\r\n\r\n    return <Table striped definition compact>\r\n        <Table.Row><Table.Cell>Név:</Table.Cell><Table.Cell><EditableText text={karakter.name} onChange={n => { karakter.name = n; save(karakter); }} /> </Table.Cell></Table.Row>\r\n        <Table.Row><Table.Cell>Faj:</Table.Cell><Table.Cell>{karakter.faj}</Table.Cell></Table.Row>\r\n        <Table.Row><Table.Cell>Kaszt:</Table.Cell><Table.Cell>{karakter.kaszt.name}</Table.Cell></Table.Row>\r\n        <Table.Row><Table.Cell>Szint:</Table.Cell>\r\n            <Table.Cell>\r\n                <Button as='div' labelPosition='left'>\r\n                    <Label pointing='right'>\r\n                        {karakter.szint}\r\n                    </Label>\r\n                    <Button secondary compact onClick={() => { save(szintlepes(karakter)) }}>Szintlépés</Button>\r\n                </Button>\r\n            </Table.Cell>\r\n        </Table.Row>\r\n        <Table.Row>\r\n            <Table.Cell>Kategóriák\r\n        <       KategoriaEditor categories={categories} save={value => { karakter.categories = [...new Set([...karakter.categories, value])]; save(karakter) }} />\r\n            </Table.Cell>\r\n            <Table.Cell>\r\n                {karakter.categories.map(c => <Label tag>{c} <Icon name='delete' onClick={() => { karakter.categories = karakter.categories.filter(value => value !== c); save(karakter) }} /></Label>)}\r\n            </Table.Cell>\r\n        </Table.Row>\r\n        <Table.Row>\r\n            <Table.Cell colSpan={2}>\r\n                <Button onClick={() => setTorlesKerdes(true)} color='red' compact circular>Karakter törlése</Button>\r\n                <Confirm\r\n                    open={torlesKerdes}\r\n                    onCancel={() => setTorlesKerdes(false)}\r\n                    onConfirm={() => { setTorlesKerdes(false); remove() }}\r\n                    header='Karakter törlése'\r\n                    content='Tuti?'\r\n                    cancelButton='Nem'\r\n                    confirmButton='De' />\r\n                <Button onClick={exportKarakter} color='green' circular compact>Export</Button>\r\n                <Button onClick={() => clone(karakter)} color='green' circular compact>Klón</Button>\r\n            </Table.Cell>\r\n        </Table.Row>\r\n    </Table>;\r\n}","import React from 'react';\nimport { Button, Grid, GridColumn, GridRow, Modal } from 'semantic-ui-react';\nimport { DobasMatrixDisplay } from '../components/DobasMatrixDisplay';\nimport { PointsTable } from '../components/PointsTable';\nimport { FegyverLista } from '../components/FegyverLista';\nimport { FegyverValaszto } from '../components/FegyverValaszto';\nimport { HMEloszto } from '../components/HMEloszto';\nimport { KepzettsegLista } from '../components/KepzettsegLista';\nimport { DobasMatrix } from '../engine/dobasmatrix';\nimport { HARCERTEK_DISPLAY_NAMES } from '../engine/harc';\nimport { calculateHarcertek, calculateMGT, Fegyver, folottiResz, Karakter, KarakterKepesseg } from '../engine/karakter';\nimport { KEPESSEG_NEV } from '../engine/kasztok';\nimport { PancelLista } from '../components/PancelLista';\nimport { PancelValaszto } from '../components/PancelValaszto';\nimport { Pancel } from '../engine/pancel';\nimport { Pajzsok } from '../components/Pajzsok';\nimport { Jegyzetek } from '../components/Jegyzetek';\nimport { Felszereles } from '../components/Felszereles';\nimport { KarakterTabla } from '../components/KarakterTabla';\n\ninterface KarakterlapProps {\n    categories: Array<string>,\n    karakter: Karakter,\n    fegyverek: Array<Fegyver>,\n    pancelok: Array<Pancel>,\n    savePancelok: (pancelok: Array<Pancel>) => unknown,\n    save: (karakter: Karakter) => unknown,\n    clone: (karakter: Karakter) => Karakter;\n\n    saveFegyverek: (fegyverek: Array<Fegyver>) => unknown,\n    remove: () => unknown\n}\n\nexport const Karakterlap: React.FC<KarakterlapProps> = ({ karakter, save, remove, categories, fegyverek, saveFegyverek, pancelok, savePancelok, clone }) => {\n\n    const points = [\n        { name: 'ep', label: 'ÉP', ...karakter.ep },\n        { name: 'fp', label: 'FP', ...karakter.fp }];\n    if (karakter.pszi) {\n        points.push({ name: 'pszi', label: 'ΨP', ...karakter.pszi })\n    }\n    if (karakter.mp) {\n        points.push({ name: 'mp', label: 'MP', ...karakter.mp })\n    }\n\n    const mgt = calculateMGT(karakter);\n    const kepessegMatrix = new DobasMatrix(Object.keys(KEPESSEG_NEV)).add('alap', karakter.kepessegek as any);\n    if (mgt[0] > 0) {\n        kepessegMatrix.add('mgt', { gy: -mgt[0], ugy: -mgt[0] });\n    }\n    kepessegMatrix.roll();\n\n\n\n    return <Grid relaxed>\n        <GridColumn width={4} >\n            <KarakterTabla karakter={karakter} categories={categories} save={save} clone={clone} remove={remove} />\n            {karakter.hm > 0 && <div><HMEloszto harcertek={karakter.hmHarcertek} hm={karakter.hm} complete={(he, hm) => {\n                karakter.hmHarcertek = he;\n                karakter.hm = hm;\n                save(karakter);\n            }} /> </div>}\n            <PointsTable color='olive'\n                points={points}\n                onChange={(name, max, value) => {\n                    (karakter as any)[name][max ? 'max' : 'akt'] = value;\n                    save(karakter);\n                }}\n            />\n            <Pajzsok\n                pajzs={karakter.pajzs ?? {\n                    asztral: { termeszetes: folottiResz(karakter.kepessegek.asz, 10), statikus: 0, dinamikus: 0 },\n                    mental: { termeszetes: folottiResz(karakter.kepessegek.ae, 10), statikus: 0, dinamikus: 0 }\n                }}\n                onChange={pajzs => { karakter.pajzs = pajzs; save(karakter); }}\n            />\n            <DobasMatrixDisplay\n                color='purple'\n                title='Képességek'\n                matrix={kepessegMatrix}\n                direction='vertical'\n                editable={['alap']}\n                numberOnly\n                keyMap={KEPESSEG_NEV}\n                setValue={(_, key, value) => { karakter.kepessegek[key as keyof KarakterKepesseg] = Number(value); save(karakter); }} />\n        </GridColumn>\n        <GridColumn width={12} >\n            <Grid columns={2}>\n                <GridRow>\n                    <GridColumn>\n                        <DobasMatrixDisplay color='orange' title='Harcértékek' matrix={calculateHarcertek(karakter).roll(['te', 've', 'ce', 'ke'])} direction='vertical' keyMap={HARCERTEK_DISPLAY_NAMES} />\n                        <FegyverLista color='green' fegyverek={karakter.fegyverek} selected={karakter.valasztottFegyver} onSelectionChange={f => { karakter.valasztottFegyver = f; save(karakter) }}\n                            extraButton={<Modal trigger={<Button fluid circular icon='edit' content='Fegyverlista szerkesztése' />} size='fullscreen'>\n                                <Modal.Header>Fegyverek</Modal.Header>\n                                <Modal.Content>\n                                    <FegyverValaszto saveFegyverek={saveFegyverek} fegyverek={fegyverek} karakter={karakter} save={k => { save(k); }} />\n                                </Modal.Content>\n                            </Modal>} />\n                        <PancelLista color='teal' pancelok={karakter.pancelok} selected={karakter.valasztottPancel} onSelectionChange={f => { karakter.valasztottPancel = f; save(karakter) }}\n                            extraButton={<Modal trigger={<Button fluid circular icon='edit' content='Páncéllista szerkesztése' />} size='fullscreen'>\n                                <Modal.Header>Páncélok</Modal.Header>\n                                <Modal.Content>\n                                    <PancelValaszto savePancelok={savePancelok} pancelok={pancelok} karakter={karakter} save={save} />\n                                </Modal.Content>\n                            </Modal>\n                            } />\n                        <KepzettsegLista karakter={karakter} save={() => save(karakter)} />\n                    </GridColumn>\n                    <GridColumn>\n                        {(karakter.masodlagosFegyverMutat ?? true) && <>\n                            {karakter.masodlagosFegyver !== undefined && <div><DobasMatrixDisplay color='orange' title='Másodlagos harcértékek' matrix={calculateHarcertek(karakter, undefined, true).roll(['te', 've', 'ce', 'ke'])} direction='vertical' keyMap={HARCERTEK_DISPLAY_NAMES} /></div>}\n                            <FegyverLista color='green' title='Másodlagos fegyver' fegyverek={karakter.fegyverek} selected={karakter.masodlagosFegyver} onSelectionChange={f => { karakter.masodlagosFegyver = f; save(karakter) }}\n                                extraButton={<Modal trigger={<Button fluid circular icon='edit' content='Fegyverlista szerkesztése' />} size='fullscreen'>\n                                    <Modal.Header>Fegyverek</Modal.Header>\n                                    <Modal.Content>\n                                        <FegyverValaszto saveFegyverek={saveFegyverek} fegyverek={fegyverek} karakter={karakter} save={k => { save(k); }} />\n                                    </Modal.Content>\n                                </Modal>} />\n                        </>}\n                        <Button fluid circular icon={(karakter.masodlagosFegyverMutat ?? true) ? 'eye slash' : 'eye'} content='Másodlagos fegyver' onClick={() => {\n                            karakter.masodlagosFegyverMutat = !(karakter.masodlagosFegyverMutat ?? true);\n                            save(karakter);\n                        }} />\n                        <Felszereles karakter={karakter} save={() => save(karakter)} />\n                        <Jegyzetek karakter={karakter} save={() => save(karakter)} />\n                    </GridColumn>\n                </GridRow>\n            </Grid>\n        </GridColumn>\n    </Grid>\n}","\r\nexport interface Pancel {\r\n    name: string;\r\n    sfe: number;\r\n    mgt: number;\r\n    nehez?: boolean;\r\n}\r\n\r\nexport const PANCELOK: Array<Pancel> = [\r\n    { name: 'posztó', sfe: 1, mgt: 0 },\r\n    { name: 'kivert bőr', sfe: 1, mgt: 0 },\r\n    { name: 'keményített bőr', sfe: 2, mgt: 2 },\r\n    { name: 'gyűrűs', sfe: 1, mgt: 1 },\r\n    { name: 'brigantin', sfe: 3, mgt: 2 },\r\n    { name: 'láncing', sfe: 2, mgt: 1 },\r\n    { name: 'sodronying', sfe: 3, mgt: 1 },\r\n    { name: 'pikkelyvért', sfe: 3, mgt: 2 },\r\n    { name: 'lemezvértezet', sfe: 3, mgt: 3, nehez: true },\r\n    { name: 'mellvért', sfe: 4, mgt: 4, nehez: true },\r\n    { name: 'félvértezet', sfe: 5, mgt: 6, nehez: true },\r\n    { name: 'teljes vértezet', sfe: 6, mgt: 8, nehez: true }\r\n]","import { useState } from \"react\";\nimport { v4 } from \"uuid\";\nimport { FEGYVEREK } from \"../engine/harc\";\nimport { Fegyver, Karakter, KarakterInfo, KarakterV1 } from \"../engine/karakter\";\nimport { FAJ_KEPESSEG, KepessegDobas } from \"../engine/kasztok\";\nimport { Pancel, PANCELOK } from \"../engine/pancel\";\n\nconst PREFIX = 'magus.';\nconst CONFIG_PREFIX = 'magus-config.';\nconst STORY_KEY = 'magus-story';\n\ninterface DataConnector {\n    categories: () => Array<string>;\n    list: (category?: string) => Array<KarakterInfo>;\n    load: (info: KarakterInfo) => Karakter;\n    save: (karakter: Karakter) => void;\n    clone: (karakter: Karakter) => Karakter;\n    remove: (info: KarakterInfo) => void;\n    listFajok: () => Record<string, KepessegDobas>;\n    listFegyverek: () => Array<Fegyver>;\n    saveFegyverek: (fegyverek: Array<Fegyver>) => void;\n    listPancelok: () => Array<Pancel>;\n    savePancelok: (pancelok: Array<Pancel>) => void;\n    loadStory: () => string,\n    saveStory: (story: string) => unknown;\n    key?: number;\n}\n\nexport function useDataConnector(): DataConnector {\n\n    const [operations, setOperations] = useState(0);\n\n    function fetch<T>(name: string): T {\n        const s = window.localStorage.getItem(name);\n        return s ? JSON.parse(s) : null;\n    };\n\n    function put(name: string, ob: any) {\n        window.localStorage.setItem(name, JSON.stringify(ob));\n        setOperations(operations + 1);\n    }\n\n    const categories = (): Array<string> => {\n        return [...new Set(list().flatMap(info => info.categories))];\n    }\n\n    const list = (category?: string): Array<KarakterInfo> => {\n        const all: Array<KarakterInfo> = [...Array(window.localStorage.length)].map((_, i) => window.localStorage.key(i) ?? '').filter(key => key.startsWith(PREFIX)).map(key => fetch(key));\n        if (!category) {\n            return all.sort((a, b) => a.name.localeCompare(b.name));\n        }\n        return all.filter(k => k.categories.some(cat => cat === category)).sort((a, b) => a.name.localeCompare(b.name));\n    };\n\n    const load = (info: KarakterInfo): Karakter => {\n        const karakter: Karakter | KarakterV1 = fetch(PREFIX + info.id);\n        if (karakter.version === 2) {\n            return karakter;\n        }\n        //Convert v1 to v2\n        (karakter as any).version = 2;\n        (karakter as any).ep = { max: karakter.maxEp, akt: karakter.ep };\n        (karakter as any).fp = { max: karakter.maxFp, akt: karakter.fp };\n        return karakter as unknown as Karakter;\n    };\n\n    const save = (karakter: Karakter): void => {\n        put(PREFIX + karakter.id, karakter);\n    };\n\n    const clone = (karakter: Karakter): Karakter => {\n        const karakterek = list();\n        let newNev: string;\n        let i = 2;\n        do {\n            newNev = `${karakter.name} (${i})`;\n            i++;\n            // eslint-disable-next-line no-loop-func\n        } while (karakterek.some(k => k.name === newNev));\n\n        const ret = { ...karakter, id: v4(), name: newNev };\n        save(ret);\n        return ret;\n    }\n\n    const remove = (info: KarakterInfo) => {\n        window.localStorage.removeItem(PREFIX + info.id);\n    }\n\n    (window as any).exportMagus = () => {\n        const ret: Record<string, any> = {};\n        list('').forEach(key => {\n            ret[key.id] = load(key);\n        })\n        console.log('export', JSON.stringify(ret));\n    }\n\n    (window as any).importMagus = (content: string) => {\n        const all = JSON.parse(content);\n        Object.keys(all).forEach(key => save(all[key]));\n        console.log('import complete');\n    }\n\n\n    return {\n        categories,\n        list,\n        load,\n        save,\n        clone,\n        remove,\n        listFajok: () => FAJ_KEPESSEG,\n        listFegyverek: () => {\n            let ret = fetch<Array<Fegyver>>(CONFIG_PREFIX + 'fegyverek');\n            if (!ret) {\n                put(CONFIG_PREFIX + 'fegyverek', FEGYVEREK);\n                ret = FEGYVEREK;\n            }\n            return ret;\n        },\n        saveFegyverek: fegyverek => put(CONFIG_PREFIX + 'fegyverek', fegyverek),\n        listPancelok: () => {\n            let ret = fetch<Array<Pancel>>(CONFIG_PREFIX + 'pancelok');\n            if (!ret) {\n                put(CONFIG_PREFIX + 'pancelok', PANCELOK);\n                ret = PANCELOK;\n            }\n            return ret;\n        },\n        savePancelok: pancelok => put(CONFIG_PREFIX + 'pancelok', pancelok),\n        loadStory: () => fetch(STORY_KEY) ?? '<story/>',\n        saveStory: (story: string) => put(STORY_KEY, story),\n        key: operations\n    }\n}","import React from 'react';\r\nimport { Dropdown } from 'semantic-ui-react';\r\n\r\ninterface CategoriesDropdownProps {\r\n    categories: Array<string>;\r\n    currentCategory: string;\r\n    setCurrentCategory: (category: string) => unknown\r\n}\r\n\r\nexport const CategoriesDropdown: React.FC<CategoriesDropdownProps> = ({ currentCategory, setCurrentCategory, categories }) => {\r\n    return <Dropdown item text={`Karakterek: ${currentCategory || 'Összes'}`}>\r\n        <Dropdown.Menu>\r\n            <Dropdown.Item key='__all' onClick={() => setCurrentCategory('')}>Összes</Dropdown.Item>\r\n            {categories.map(k => <Dropdown.Item key={k} onClick={() => setCurrentCategory(k)}>{k}</Dropdown.Item>)}\r\n        </Dropdown.Menu>\r\n    </Dropdown>\r\n}","import React, { Component, ReactNode } from 'react'\r\n\r\nexport interface DragAndDropProps {\r\n    handleDrop: (files: FileList) => unknown;\r\n    dragPlaceholder: ReactNode\r\n}\r\n\r\nclass DragAndDrop extends Component<DragAndDropProps, {}> {\r\n    state = {\r\n        drag: false\r\n    }\r\n    dropRef = React.createRef<HTMLDivElement>();\r\n    dragCounter = 0;\r\n\r\n    handleDrag = (e: Event) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n    }\r\n\r\n    handleDragIn = (e: DragEvent) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        this.dragCounter++\r\n        if (e.dataTransfer?.items && e.dataTransfer.items.length > 0) {\r\n            this.setState({ drag: true })\r\n        }\r\n    }\r\n    handleDragOut = (e: DragEvent) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        this.dragCounter--\r\n        if (this.dragCounter === 0) {\r\n            this.setState({ drag: false })\r\n        }\r\n    }\r\n    handleDrop = (e: DragEvent) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        this.setState({ drag: false })\r\n        if (e.dataTransfer?.files && e.dataTransfer.files.length > 0) {\r\n            this.props.handleDrop(e.dataTransfer.files)\r\n            e.dataTransfer.clearData()\r\n            this.dragCounter = 0\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        let div = this.dropRef.current;\r\n        if (div) {\r\n            div.addEventListener('dragenter', this.handleDragIn)\r\n            div.addEventListener('dragleave', this.handleDragOut)\r\n            div.addEventListener('dragover', this.handleDrag)\r\n            div.addEventListener('drop', this.handleDrop)\r\n        }\r\n    }\r\n    componentWillUnmount() {\r\n        let div = this.dropRef.current;\r\n        if (div) {\r\n            div.removeEventListener('dragenter', this.handleDragIn)\r\n            div.removeEventListener('dragleave', this.handleDragOut)\r\n            div.removeEventListener('dragover', this.handleDrag)\r\n            div.removeEventListener('drop', this.handleDrop)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div\r\n                style={{ display: 'inline-block', position: 'relative' }}\r\n                ref={this.dropRef}\r\n            >\r\n                {this.state.drag ? this.props.dragPlaceholder : this.props.children}\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default DragAndDrop","import React from 'react';\r\nimport { Button, Icon } from 'semantic-ui-react';\r\nimport { Karakter } from '../engine/karakter';\r\nimport DragAndDrop from './DragAndDrop';\r\n\r\nexport const KarakterImport: React.FC<{ save: (karakter: Karakter) => unknown, saveMese: (story: string) => unknown }> = ({ save, saveMese }) => {\r\n    return <DragAndDrop\r\n        dragPlaceholder={<Button circular as='div' color='green'><Icon name='upload' />Import</Button>}\r\n        handleDrop={async l => {\r\n            const text = await l.item(0)?.text();\r\n            const mese = l.item(0)?.name.endsWith('.xml');\r\n            if (text) {\r\n                if (mese) {\r\n                    saveMese(text);\r\n                } else {\r\n                    save(JSON.parse(text));\r\n                }\r\n            }\r\n        }}>\r\n        <Button circular basic as='div' color='green'><Icon name='upload' />Import</Button>\r\n    </DragAndDrop>\r\n\r\n}","import React, { useCallback, useReducer, useState } from 'react';\nimport { DiceRollResult, formatDiceRoll, parseDiceRoll, roll } from '../engine/roll';\nimport { DobasEredmeny } from '../components/DobasEredmeny';\nimport { Button, Dropdown, Grid, GridColumn, GridRow, Header, Input, Label } from 'semantic-ui-react';\nimport { IntegerInput } from '../components/IntegerInput';\nconst { Slider } = require('react-semantic-ui-range');\n\nconst DICE_ROLLS = [2, 3, 5, 6, 10, 100];\nconst PLUS = [1, 2, 3, 5, 10];\nconst HISTORY_LENGTH = 10;\n\nconst MERETEK: Record<string, number> = {\n    'óriás': -30,\n    'ló': -15,\n    'ember': 0,\n    'kutya': 20,\n    'dinnya': 35,\n    'alma': 50,\n    'fémpénz': 65\n}\n\nconst MOZGASOK: Record<string, number> = {\n    'mozdulatlan': 0,\n    'kiszámíthatóan mozgó': 20,\n    'kiszámíthatatlanul mozgó': 35,\n    'kitérésre összpontosító': 50\n\n}\n\nconst VISZONYOK: Record<string, number> = {\n    'napsütés, szélcsend': 0,\n    'szemerkélő eső, szellő': 10,\n    'gyenge eső/szél': 30,\n    'gyenge köd, eső, erős szél': 50,\n    'sűrű köd, zivatar, viharos szél': 70,\n    'egészen sűrű köd, felhőszakadás, orkán': 100,\n\n}\n\n\ninterface LofegyverVedo {\n    tavolsag: number,\n    meret: string;\n    mozgas: string;\n    viszonyok: string;\n}\n\nexport const Kockadobo: React.FC<{}> = () => {\n    const [input, setInput] = useState('');\n    const [result, setResult] = useState({} as DiceRollResult);\n    const [history, addToHistory] = useReducer((prev: Array<string>, elem: string) => {\n        if (prev[0] === elem) {\n            return prev;\n        }\n        return [elem, ...prev.slice(0, HISTORY_LENGTH - 1)];\n    }, []);\n    const [lofegyverVedo, setLofegyverVedo] = useState<LofegyverVedo>({ tavolsag: 0, meret: 'ember', mozgas: 'mozdulatlan', viszonyok: 'napsütés, szélcsend' });\n\n    const dob = useCallback((ijasz?: boolean) => {\n        setResult(roll(input, ijasz));\n        addToHistory(input);\n    }, [input, setResult, addToHistory]);\n\n    const setKocka = useCallback((k: number) => {\n        const diceRoll = parseDiceRoll(input);\n        if (diceRoll.die === k) {\n            diceRoll.numDice++;\n        } else {\n            diceRoll.die = k;\n            diceRoll.numDice = 1;\n        }\n        setInput(formatDiceRoll(diceRoll));\n    }, [input, setInput]);\n\n    const setPlus = useCallback((k: number) => {\n        const diceRoll = parseDiceRoll(input);\n        if (k === 0) {\n            diceRoll.plus = 0;\n        } else {\n            diceRoll.plus += k;\n        }\n        setInput(formatDiceRoll(diceRoll));\n    }, [input, setInput]);\n\n\n    return <Grid columns={1} divided='vertically'>\n        <GridRow>\n            <GridColumn>\n                <Header>Kockadobás</Header>\n                <div>\n                    <Input labelPosition='right' value={input} onChange={e => setInput(e.target.value)}>\n                        <Label basic pointing='right'>Dobás</Label>\n                        <input />\n                        <DobasEredmeny pointing='left' result={result} />\n                        <Button.Group color='teal'>\n                            <Button primary disabled={!input} onClick={() => dob()}>Dob</Button>\n                            <Dropdown\n                                className='button icon'\n                                floating\n                                trigger={<></>}\n                            >\n                                <Dropdown.Menu>\n                                    <Button primary onClick={() => dob(true)}>Íjász szabállyal</Button>\n                                </Dropdown.Menu>\n                            </Dropdown>\n                        </Button.Group>\n\n                    </Input>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Kocka</Label>\n                        {DICE_ROLLS.map(r => <Button onClick={() => setKocka(r)}>k{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Osztó</Label>\n                        {[1, 2, 3].map(r => <Button onClick={() => {\n                            const diceRoll = parseDiceRoll(input);\n                            diceRoll.div = r;\n                            setInput(formatDiceRoll(diceRoll))\n                        }}>/{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Plusz</Label>\n                        {[...PLUS].reverse().map(r => <Button onClick={() => setPlus(-r)}>-{r}</Button>)}\n                        <Button secondary onClick={() => setPlus(0)}>0</Button>\n                        {PLUS.map(r => <Button onClick={() => setPlus(r)}>+{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Ó, újra</Label>\n                        {history.map(h => <Button color='olive' onClick={() => setInput(h)}>{h}</Button>)}\n                    </Button>\n                </div>\n            </GridColumn>\n        </GridRow>\n        <GridRow>\n            <GridColumn>\n                <Header>Célzás védő érték</Header>\n                <div>\n                    <Slider value={lofegyverVedo.tavolsag} settings={{ min: 0, max: 100, step: 1, onChange: (v: number) => setLofegyverVedo({ ...lofegyverVedo, tavolsag: v }) }} />\n                    <IntegerInput label='Távolság' value={lofegyverVedo.tavolsag} onChange={v => setLofegyverVedo({ ...lofegyverVedo, tavolsag: Math.min(v ?? 0, 100) })} />\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Méret</Label>\n                        {Object.keys(MERETEK).map(r => <Button active={lofegyverVedo.meret === r} onClick={() => setLofegyverVedo({ ...lofegyverVedo, meret: r })}>{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Mozgás</Label>\n                        {Object.keys(MOZGASOK).map(r => <Button active={lofegyverVedo.mozgas === r} onClick={() => setLofegyverVedo({ ...lofegyverVedo, mozgas: r })}>{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Viszonyok</Label>\n                        {Object.keys(VISZONYOK).map(r => <Button active={lofegyverVedo.viszonyok === r} onClick={() => setLofegyverVedo({ ...lofegyverVedo, viszonyok: r })}>{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Védő érték</Label>\n                        <Label color='black' size='large'>{30 + lofegyverVedo.tavolsag + MERETEK[lofegyverVedo.meret] + MOZGASOK[lofegyverVedo.mozgas] + VISZONYOK[lofegyverVedo.viszonyok]}</Label>\n                    </Button>\n                </div>\n            </GridColumn>\n        </GridRow>\n    </Grid>\n}","import React, { useState } from 'react';\r\nimport { Modal, Button } from 'semantic-ui-react';\r\nimport { Kockadobo } from '../pages/Kocskadobo';\r\n\r\nexport const KockaModal: React.FC<{}> = () => {\r\n    const [kockaOpen, setKockaOpen] = useState(false);\r\n    return <Modal trigger={<Button primary>Kocka</Button>} onOpen={() => setKockaOpen(true)} onClose={() => setKockaOpen(false)} open={kockaOpen}>\r\n        <Modal.Content>\r\n            <Kockadobo />\r\n        </Modal.Content>\r\n    </Modal>\r\n}","export default __webpack_public_path__ + \"static/media/magus.810aa1ee.png\";","import React, { useReducer } from 'react';\r\nimport { Table } from 'semantic-ui-react';\r\nimport { Varazslat } from '../engine/varazslat';\r\n\r\ninterface VarazslatListaProps {\r\n    varazslatok: Array<Varazslat>;\r\n    fieldLabels: Record<string, string>;\r\n}\r\n\r\nexport const VarazslatLista: React.FC<VarazslatListaProps> = ({ varazslatok, fieldLabels }) => {\r\n\r\n    const [open, toggleOpen] = useReducer((prev: Record<string, boolean>, action: string) => ({ ...prev, [action]: !prev[action] }), {})\r\n\r\n    const sorted = varazslatok.sort((a, b) => {\r\n        return a.name.localeCompare(b.name);\r\n    });\r\n\r\n    const cleanupDescription = (text: string) => {\r\n        return text.trim().split('\\n\\n').map(line => `<p>${line.replace(/\\s+/g, ' ').trim()}</p>`).join('');\r\n    }\r\n\r\n    const miscFields: Set<string> = varazslatok.reduce((acc, curr) => {\r\n        if (curr.misc) {\r\n            Object.keys(curr.misc).forEach(field => acc.add(field));\r\n        }\r\n        return acc;\r\n    }, new Set<string>());\r\n\r\n    return <Table compact celled striped definition>\r\n        <Table.Header>\r\n            <Table.Row>\r\n                <Table.HeaderCell>{fieldLabels.name ?? '???'}</Table.HeaderCell>\r\n                <Table.HeaderCell>{fieldLabels.pont ?? '???'}</Table.HeaderCell>\r\n                <Table.HeaderCell>{fieldLabels.varazslasIdeje ?? '???'}</Table.HeaderCell>\r\n                {[...miscFields].map(field => <Table.HeaderCell>{fieldLabels[field] ?? '???'}</Table.HeaderCell>)}\r\n            </Table.Row>\r\n        </Table.Header>\r\n        <Table.Body>\r\n            {sorted.map(v => <><Table.Row onClick={() => toggleOpen(v.name)}>\r\n                <Table.Cell>{v.name}</Table.Cell>\r\n                <Table.Cell>{v.pont}</Table.Cell>\r\n                <Table.Cell>{v.varazslasIdeje}</Table.Cell>\r\n                {[...miscFields].map(field => <Table.Cell>{(v.misc as any)?.[field]}</Table.Cell>)}\r\n            </Table.Row>\r\n                {open[v.name] && <Table.Row>\r\n                    <Table.Cell colspan={3 + miscFields.size}>\r\n                        <div style={{ backgroundColor: 'burlywood', borderRadius: '0.5em', padding: '0.5em', width: '100%', border: '1px solid black' }} dangerouslySetInnerHTML={{ __html: cleanupDescription(v.description) }} />\r\n                    </Table.Cell>\r\n                </Table.Row>}\r\n            </>\r\n            )}\r\n        </Table.Body>\r\n    </Table>\r\n\r\n}","export interface Varazslat {\r\n    name: string;\r\n    pont: string;\r\n    misc?: {\r\n        erosseg?: string;\r\n        sebzes?: string;\r\n        idotartam?: string;\r\n        me?: string;\r\n        hatotav?: string;\r\n    };\r\n    varazslasIdeje: string;\r\n    labels: Array<string>;\r\n    description: string;\r\n}\r\n\r\nexport const PSZI_PYARRONI: Array<Varazslat> = [\r\n    {\r\n        name: 'Emlékfelidézés',\r\n        pont: '1',\r\n        misc: {\r\n            me: 'M',\r\n            idotartam: 'Lásd a leírásban',\r\n        },\r\n        varazslasIdeje: '2 kör',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description:\r\n            `A diszciplína helyszínek, szövegek, vagy események meg­jegyzésében, illetve régi - egyébként már elfelejtett - emlékek felidézésében nyújt segítséget. Ha a Ψ-alkalmazó valamit szeretne úgy az elméjébe vésni, hogy arra később - minden részletében ­visszaemlékezzen, akkor rövid (két körig] tartó meditációval  mintegy beleégeti a kívánt dolgot az agyába.\r\n\r\nEzek után az emlék még három éven át tökéletesen tisztán él  benne, s minden különösebb erőfeszítés (vagy diszciplína alkalmazása) nélkül felidézhető. Az emlék  há­rom év múltán ugyanúgy halványodni kezd, mint egy nem efféle beégetéssel szerzett kép.\r\n\r\nHa a Ψ-alkalmazó olyan emléket kíván felidézni, melyet nem a fenti módon tárol agyában, akkor a  diszcip­lína használatával erre is mód nyílik. Az így felidézett emlék 10 körig tökéletesen éles lesz, ám  utána semmivé válik, s csak a diszciplína újbóli alkalmazásával kerül elő megint.\r\n        \r\nMesterfokú alkalmazás esetén nem csak saját ma­gunkban idézhetünk fel emléket, hanem másokban is.`\r\n    },\r\n    {\r\n        name: 'Ébredés',\r\n        pont: '-',\r\n        misc: {\r\n            me: 'M',\r\n        },\r\n        varazslasIdeje: '1 kör',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `A Ψ-alkalmazó képes beprogramozni magát arra, hogy egy  meghatározott időben minden külső befolyás nél­kül felébredjen. Az  önszuggesztiónak vagy arra kell irá­nyulnia, hogy mennyi idő  múlva szakadjon ki az álomból, vagy egy külső jelhez kell  kapcsolódnia. Mivel az érzék­szervek alvás alatt is működnek ­noha normális esetben a gyenge ingereket a tudat figyelmen  kívül hagyja - a disz­ciplína alkalmazója olyasféle jeleket határozhat  meg ébre­dési pontnak, mint hajnali kakasszó, az Éjközép teljes  sö­tétje, lova ideges horkantása, stb.\r\n        \r\n        A diszciplína nem működik, ha a karakter elájult, ká­bítószeres  álomba merült, vagy valamely mentális támadás hatására  kapcsolt ki tudata. Az alkalmazáshoz legalább egy Ψp-tal kell  rendelkeznie.`\r\n    },\r\n    {\r\n        name: 'Érzékélesítés',\r\n        pont: '2/érzék',\r\n        misc: {\r\n            me: 'M',\r\n            idotartam: '1 kör',\r\n        },\r\n        varazslasIdeje: '2 kör',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `A Pszi-energiák lehetőséget nyújtanak arra, hogy fel­haszná­lásukkal az alapvető öt érzékszerv hatásfokát növel­jük vagy  csökkentsük. A diszciplína arra ad módot, hogy a látást, hallást,  szaglást, tapintást és ízlelést akaratunk szerint befolyásoljuk.\r\n        \r\n        A Látás befolyásolásával nemcsak élesíthetjük a szemet (esetleg  elhomályosíthatjuk), hanem lehetőségünk nyílik a Megzavarására  is. A látás élesítésével legfeljebb megkétszereződik a látótávolság,  tompításával azonban vakság is okozható.\r\n        \r\n        Megzavarás esetén a szem nem tud kellőképpen fó­kuszálni,  így felléphet kettőslátás, esetleg a távolság, vagy egy közeledő  tárgy, lény sebességének felmérése okozhat problémát. A valóságtól  való eltérés 10% és 60% között mozoghat. (Kiszámítása: 1 K6,  majd az eredmény megszor­zandó 10-zel.)\r\n        \r\n        A Hallás élesítése kétszeresére növeli a hallótávolsá­got, míg  tompítása akár süketséghez is vezethet.\r\n        \r\n        Megzavarásakor a hangok távolságát, esetleg irányát véti el  a befolyásolt lény. Az eltérés és a kiszámítás módja megegyezik  a Látás befolyásolásánál leírtakkal.\r\n        \r\n        A Szaglás, a Tapintás, és az Ízlelés felerősítése meg­kétszerezi  ezen érzékszervek hatásfokát. Tompításuk az ér­zékek teljes  kikapcsolásával is járhat. Megzavarásukkal el­érhetjük, hogy más  szag, anyagi minőség (esetleg hőmér­séklet), vagy íz érződjék. A  Megzavarás mértékének el­döntése a Kalandmester feladata.\r\n        \r\n        FIGYELEM!\r\n        A diszciplína nem alkalmas arra, hogy bármely ér­zékszerv  befolyásolásával valós kárt okozzon. Pl.: Nem le­het a hőérzetet  annyira fokozni, ami Fp veszteséggel jár.\r\n        A diszciplína végrehajtása érzékszervenkét 2 Ψp-ba kerül, és  hatását 1 körig fejti ki. 4 Ψp-ért két érzékszervet lehet befolyásolni  1 körig, vagy egy érzékszervet 2 körig, stb.`\r\n    },\r\n    {\r\n        name: 'Fájdalomcsillapítás',\r\n        pont: '1/Fp',\r\n        misc: {\r\n            me: 'A',\r\n            idotartam: 'végleges',\r\n        },\r\n        varazslasIdeje: '1 kör',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `A diszciplína segítségével az agy fájdalomközpont­jára gyako­rolhatunk hatást. Lehetőség nyílik fájdalomérzet tompítására vagy  keltésére. Miután nem gyógyít vagy okoz valódi sebesüléseket, az  Életerő Pontokra nincs befolyással. Csak Fp-ot adhatunk vissza,  vagy vehetünk el. Az Fp-ok teljes elvonásával - 0 Fp-ra kínzás ­elérhetjük, hogy az áldo­zat elájuljon, ám igazi seb ekkor sem  keletkezik rajta. Ma­ximum Fp fölé sem önmagunkat, sem másokat  nem juttat­hatunk, bármennyi Ψp-ot is áldoznánk rá. Asztráltesttel  nem rendelkező lényekre a diszciplína nem működik.`\r\n    },\r\n    {\r\n        name: 'Hatodik Érzék',\r\n        pont: '5',\r\n        misc: {\r\n            idotartam: '60 kör',\r\n        },\r\n        varazslasIdeje: '5 szegmens',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `A Hatodik Érzék az agy azon különleges képességét használja  fel, mely lehetővé teszi, hogy az idő szövedékén átszűrődő  eseménymozaikokat összerendezve megérezze a közeljövőben  bekövetkező történések irányát.\r\n        \r\n        A diszciplína alkalmazója megérzésekhez juthat az időtartam  alatt. Ezek a megérzések semmiféle pontossággal nem bírnak,  csupán egy hamarosan bekövetkező eseményre figyelmeztetik a  karaktert. A megérzések lehetnek jó, vagy rossz előjelűek.\r\n        \r\n        Rossz előérzetet kelt minden olyan történés, mely ártalmas  lehet, vagy gonosz szándékkal cselekedték.\r\n\r\n        Jó előérzethez juthat a diszciplína alkalmazója, ha az idő­tartam alatt semmiféle baj nem történik vele, illetve a rá váró  események a javára válnak.\r\n\r\n        A Hatodik Érzéknek két alkalmazási módja lehetsé­ges. Az  első esetben a karakter csupán általánosságban kí­váncsi az  időtartam alatt bekövetkező események rá vonat­kozó előjelére.  Ennek tipikus példája, ha a karakter egy sö­tét barlang szájánál  megtorpanva alkalmazza a diszciplínát. Amennyiben a barlang­ban ellenséges lények lapulnak, akik valamilyen módon a  biztonságára törnek a diszciplína hatá­sának időtartama alatt,  akkor a karaktert Rossz Előérzet fogja el. Nem tudja az okát, sőt,  a leselkedő veszedelem mértékét és pontos irányát sem ismeri,  csupán arról szerez tudomást, hogy valami vár rá. Belépve a  barlangba fokozó­dik Rossz Előérzete - ahogy az időben egyre  közeledik az ártalmas esemény -, majd a baj közvetlen megtörténte  előtt egy pillanattal megérzi irányát is. Ha ez egy támadás volt,  már nem érte a diszciplína alkalmazóját váratlanul, s ebben az  esetben az ellenséges akció nem minősül Meglepetésnek.\r\n\r\n        A Hatodik Érzék másik alkalmazási módja, ha a ka­rakter  arra kíváncsi, hogy egy általa végrehajtott cselek­mény milyen  hatással jár rá nézve. Ilyenkor a diszciplína alkalmazása után  megkérdezheti Kalandmesterét, hogy mi­lyen előérzetei vannak,  érdemes-e megtenni, amire készül. A válasz minden esetben csak  annyi, hogy jó vagy rossz ér­zések ébrednek benne. Indoklás sosincs.  Jellemző helyzet, amikor karakter egy sírt kíván kibontani.  Végrehajtja a diszciplínát, s megkérdezi a Kalandmesterét érzeteiről.  Ha a sírban élőhalott fekszik, a karakternek Rossz Előérzetei  tá­madnak. Ha a sírban semmi sincs (legfeljebb egy porladó tetem),  vagy a koporsó mélyén kincs hever, a karakterben )ó Előérzetek  ébrednek.\r\n\r\n        A diszciplína 5 Ψp-ért 60 körig (azaz tíz percig) en­gedi efféle  korlátozott módon a jövő titkainak felfedését. 10 Ψp felhasználásával  az időtartam megduplázódik, stb.\r\n\r\n        A Hatodik Érzék csak alapfokon működik, mester­foka nincs. `\r\n    },\r\n    {\r\n        name: 'Képességjavítás',\r\n        pont: 'lásd a leírásban',\r\n        misc: {\r\n            me: 'M',\r\n            idotartam: '6 kör',\r\n        },\r\n        varazslasIdeje: '2 kör',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `Olykor - különleges veszélyhelyzetekben - az emberi fizikum  látszólag csodákra képes. Egy vadállattól megré­mült gyermek  hihetetlen gyorsasággal képes felkúszni egy sudár, ág nélküli fa  törzsén, s miután a veszély elmúlt, nemcsak azon csodálkozik,  hogy miképp sikerült ez neki, hanem gyakorta lemászni sem tud  magától. Ez jellemző példája a Ψ akaratlan megnyilvánulásának,  hiszen ilyenkor az agy szabadít fel a testben olyan erőforrásokat,  melyek egyébként nem hozzáférhetőek.\r\n        \r\n        A diszciplína ugyanezt képes végrehajtani, termé­szetesen a  tudat teljes irányítása alatt. A Ψ erők segítségével a fizikai képességek  - kivéve a Szépséget - megváltoztat­hatóak. A változtatás időleges,  s a diszciplína hatásának el­múltával visszatérnek az eredeti értékek.  Ugyanakkor lehe­tetlent nem szabad elvárnunk a Ψ-től sem: egyik  képessé­günket sem emelhetjük 20 fölé.\r\n        \r\n        FIGYELEM!  \r\n        Bármely képesség nullára - vagy nulla alá - csök­kentése azonnali  halálhoz vezet.\r\n\r\n        A Képességjavítás az egyik legkedveltebb Általános Disz­ciplína. Gyakorta használják a Méregellenállás - az Egészség tíz  feletti része - megnövelésére. Valójában igen hasznos minden  olyan esetben, amikor Képességpróbára kényszerülünk, hiszen  az adott pillanatban valóban erőseb­bek, gyorsabbak, egész­ségesebbek vagy ügyesebbek le­szünk. Nem szabad elfelejteni,  hogy ha harc folyamán megnöveljük egészségünket - és egy  csapást csak az így nyert Ép-okkal éltünk túl -,amint a disz­ciplína hatása elmú­lik, a nyert Ép-k is semmivé lesznek, s ebbe  akár bele is halhatunk.\r\n\r\n        Ha Rontással az ellenfelünk Egészségét annyira le­csökken­tettük, hogy ettől elveszíti maradék Ép-jait, akkor meghal. Hiába  jönnének vissza az Ép-ok a diszciplína hatá­sának megszűntével,  a lélek nem költözik vissza a halott testbe.\r\n\r\n        <table>\r\n            <tr>\r\n                <td>+/- módosítás az eredeti képesség­hez képest</td>\r\n                <td>1</td>\r\n                <td>2</td>\r\n                <td>3</td>\r\n                <td>4</td>\r\n                <td>5</td>\r\n                <td>6</td>\r\n            </tr>\r\n            <tr>\r\n                <td>Szükséges Ψp</td>\r\n                <td>1</td>\r\n                <td>2</td>\r\n                <td>4</td>\r\n                <td>8</td>\r\n                <td>16</td>\r\n                <td>32</td>\r\n            </tr>\r\n        </table>\r\n\r\n        A táblázatban feltüntetett Ψp értékek a diszciplína alap idő­tartamára (6 kör) vonatkoznak. A felhasznált Ψp-ok megdup­lázásával a hatás időtartamának megduplázását ér­hetjük el,  megtriplázásával a hatás ideje megháromszorozó­dik, és így tovább.        \r\n        `\r\n    },\r\n    {\r\n        name: 'Roham',\r\n        pont: '1/+2TÉ',\r\n        misc: {\r\n            me: 'A',\r\n            idotartam: '1 támadás',\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `A diszciplína alkalmazója egyetlen csapásra össz­pontosítva,  teste és elméje minden tartalékát kiadja egy lerohanásszerű  támadásban. Az alkalmazó mély, torok­hangú kiáltás kíséretében  hajtja végre a rohamot.\r\n        \r\n        A diszciplína felemészti az alkalmazó összes aktuális Ψp-ját,  beleértve a Dinamikus Pajzsban tároltakat is. Ez azt jelenti, hogy  a támadó kénytelen felhasználni minden Ψp-ot, amivel rendelkezik,  s az ebből nyert energia hozzáadó­dik a Támadó Értékéhez.  1 Ψp +2 TÉ-t jelent. (Azaz 5 Ψp felhasználása esetén + 10 van a  TÉ-n.)\r\n\r\n        Amennyiben az ellenfél nem ugyanezt a diszciplínát alkalmazza,  a kezdeményezés automatikusan a Roham al­kalmazóját illeti,  kezdeményező dobás nélkül.\r\n\r\n        Megfékezés esetén a diszciplína végrehajtója ezzel a mód­szerrel megakasztja, megzavarja támadóját, az elveszíti kezde­ményezését és a fenti módon kiszámított érték levonó­dik a Támadó  Értékéből.\r\n\r\n        Ez a diszciplína olykor igen hasznos lehet, ám nem szabad  figyelmen kívül hagynunk veszélyét: agyunk feltöl­tődéséig képtelenek  leszünk bármiféle Ψ-alkalmazásra és elménket is csak a Statikus  Pajzs védi.\r\n        `\r\n    },\r\n    {\r\n        name: 'Telekinézis',\r\n        pont: '2/1kg',\r\n        misc: {\r\n            idotartam: '1 kör',\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `Agyi energiáink segítségével kisebb tárgyakat moz­gathatunk  látótávolságon belül. Elfordíthatunk a zárban egy kulcsot, a tőlünk  távol heverő fegyvert magunkhoz húzhat­juk, vagy észrevétlen  elcsenhetünk az ékszerészmúhelyből némi drágaságot. A diszciplína  alkalmazása taglejtéseket nem igényel, pusztán a mozgatni kívánt  tárgyon kell tartani tekintetünket. Amint elfordulunk, vagy valami  eltakarja a tárgyat, az mozdulatlanná válik, esetleg - ha a levegőben  volt - lepottyan. A Telekinézis csak lassú mozgatásra alkal­mas  - egy futó ember sebességénél nagyobbat nem érhetünk el vele ­ezért ilyen módon fegyvert dobni, vagy sebesülést okozni szinte  lehetetlen.\r\n        \r\n        A diszciplína kifejti hatását mágikus tárgyakra is.\r\n\r\n        2 Ψp felhasználásával 1 kg súlyú tárgy mozgatható 1 körig. 4  Ψp rááldozásával mozgathatunk 1 kg-os tárgyat 2 körig, vagy 2  kg-ot 1 körig, stb.\r\n        `\r\n    },\r\n    {\r\n        name: 'Telepátia',\r\n        pont: 'lásd a leírást',\r\n        misc: {\r\n            me: 'M',\r\n            idotartam: 'lásd a leírást',\r\n        },\r\n        varazslasIdeje: '3 kör',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `\r\n        Az egyik legősibb Ψ-alkalmazás, más néven Gondo­latátvitel.  Az Általános Diszciplínák azon kivétele, mely igazán csak  mesterfokon használható. Segítségével gondo­lati úton lehet  beszélgetni, vagy a Ψ-alkalmazó által felidé­zett képeket közölni.  A Telepátia csak Ψ képzettséggel ren­delkezők között működik.  Alapfokon a Ψ-alkalmazó nem tud beszélgetést kezdeményezni,  sőt válaszolni sem, csupán a hozzá intézett gondolati üzenetet  képes venni.\r\n\r\n        A diszciplína mesterfokú alkalmazása ad módot arra, hogy a  Gondolatátvitelt megindítsa, és - két mesterfokú al­kalmazó ese­tében - válaszoljon a kérdésekre.\r\n\r\n        A Telepátia alkalmazásához a Gondolatátvitel meg­kezdőjének  tökéletesen ismernie kell a gondolatokat fogadó személyt - ebben  az esetben a távolság nem számít -, vagy látnia kell azt.\r\n\r\n        Amennyiben a Telepátiában résztvevők látják egy­mást, csupán  2 Ψp-ba kerül az 1 körig tartó gondolatátvitel. Ha nem látják  egymást 1 szegmensenként kerül 1 Ψp-ba. A Ψp-ok növelésével  egyenlő arányban növelhető a diszcip­lína időtartama is.\r\n\r\n        Egyszerre legfeljebb két elme kapcsolható össze Te­lepátiával,  tehát a gondolati úton történő beszélgetésbe nem lehet harmadik  részről sem beleszólni, sem azt lehallgatni.\r\n\r\n        Az egyetlen olyan diszciplína, mely megtalálja a módját,  hogy hatása átszivárogjon a Statikus Pajzson, noha a Dinami­kus Pajzs ezt is feltartóztatja. Ha egy efféle pajzsot vise­lőnek küldenek Telepátiával üzenetet, az csak azt fogja érzé­kelni, hogy kapcsolatot keresnek vele, ám a beszélgetés csu­pán a fogadó Dinamikus Pajzsának lebomlása után jöhet létre.\r\n\r\n        A Telepátia mindig csak annak a Ψ-alkalmazónak ke­rül Ψp­-ba, aki a gondolati közlést kezdeményezte.\r\n        `\r\n    },\r\n    {\r\n        name: 'Testhőmérséklet n/cs',\r\n        pont: '1/5 °C',\r\n        misc: {\r\n            me: 'M',\r\n            idotartam: '1 óra',\r\n        },\r\n        varazslasIdeje: '6 kör',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `A diszciplína alkalmazója képes saját - mesterfokon más ­testének hőmérsékletét növelni vagy csökkenteni. Így lehetősége  nyílik a vizes ruhát megszárítani magán, vagy egy lángoló házból  kimenekülni égési sérülések nélkül. Minden felhasznált Ψp 5 fokkal  képes megváltoztatni a testhőmérsékletet.\r\n        \r\n        Az ötven fok fölé növelt testhő hat kör múltán ájulást eredményez,  hosszabb távon halállal jár. A húsz fokra csökkentett hőmérséklet  Tetszhalálhoz vezet - ilyen formán még egy felkészületlen szervezet  is képes életben maradni néhány hónapig -, a húsz fok alá  csökkentett testkő mara­dandó egészségkárosodással jár, míg a  negyedórát megha­ladó öt fok alatti állapot visszafordíthatatlan  folyamattá vá­lik, és az áldozat meghal.\r\n\r\n        A diszciplína lehetőséget ad arra, hogy 1Ψp-ért 5 fokkal eltérő  hőmérsékletet 1 óráig fenntartsa, 2Ψp-ért az 5 fokos befolyásolást  2 óráig, vagy a 10 fokos változtatást 1 órán keresztül biztosítsa,  stb.\r\n        `\r\n    },\r\n    {\r\n        name: 'Pszi-lökés',\r\n        pont: '1/1 kg',\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `\r\n        Más nevén Energialökés. A mágiához legközelebb álló, alapvető  diszciplína. Használata során a Ψ-alkalmazó kis mennyiségű mágikus  energiát gyűjt magába, ám mivel tárolására nem készíti fel a  módszer, azonnal ki is áramlik belőle. A Ψ-lökés irányítható, gyenge szél fuvallat formájá­ban nyilvánul meg. Taszító ereje felhasznált  Ψp-onként 1 kg. Apróbb dolgok felborítására, arréb lökésére  szokták használni, olykor-kellő erővel alkalmazva - tárgyak vagy emberek egyensúlyi helyzetét lehet megszüntetni  vele.\r\n        `\r\n    },\r\n    {\r\n        name: 'Pszi-ostrom',\r\n        pont: 'min 1',\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `\r\n        A tudat védelmére felépített Ψ-pajzsok megsemmi­sítésére szolgáló  diszciplína, mely csak mesterfokon alkal­mazható. Két különböző  típusa létezik: a Ψ-rombolás és Ψ-bontás.\r\n        \r\n        A Ψ-rombolással a Statikus Pajzsokat lehet meg­szüntetni. A  Statikus Pajzsok nem bonthatóak Ψp-onként - egyszerre kell  lerombolni őket. Ez a következőképp törté­nik:\r\n        \r\n        A diszciplína alkalmazója meghatározza, hogy a Ψ-romboláshoz  hány Ψp-ot kiván felhasználni. Ennyi lesz a Rombolás erősítése.  Ha ez nagyobb (egyenlő), mint a Stati­kus Pajzs erősítése, akkor a  Statikus Pajzs megszűnik, s a pajzshoz felhasznált energia semmivé  válik. Amennyiben a Ψ-romboláshoz valaki kevesebb Ψp-ot használ,  mint amennyiből a Statikus Pajzsot felépítették (legyen az asztrális  vagy mentális), akkor a pajzs teljes erősítéssel megmarad, míg a  Romboláshoz felhasznált Ψp-ok elvesz­nek. A Ψ-rombolás nem árt  a Dinamikus Pajzsoknak.\r\n        \r\n        A Dinamikus Pajzsok kiiktatására a Ψ-bontás szol­gál.  Segítségével akár Ψp-onként is bontható a Dinamikus Pajzs.  Ilyenkor a Bontáshoz felhasznált Ψp-ok mennyiségé­vel meg­egyező Ψp bomlik le a Dinamikus Pajzsból. Ψ-bon­tással nem  támadható a Statikus Pajzs.\r\n        \r\n        Egy 10 Ψp erősségű Statikus Pajzs, csak egy, leg­alább 10 Ψp  erősségű (vagy nagyobb) Ψ-rombolással sem­misíthető meg.  Ekkor a pajzs viselője (a pajzs építéséhez felhasznált, ám az  aktuális Ψp-jaiba nem beleszámító) és a Rombolás alkalmazója  (a Romboláshoz felhasznált) Ψp-jalt is elveszíti. Ha a Ψ-rom­\r\n        \r\n        boláshoz kevesebb, mint 10 Ψp-ot használtak, a Statikus Pajzs  teljes erősítéssel megmarad, míg a Romboláshoz igénybe vett  Ψp-ok elvesznek.\r\n        \r\n        Egy l0 Ψp nagyságú Dinamikus Pajzs lebontható 1, 2 vagy 3  Ψp-onként, de Felhasználtató egyszerre 10 vagy több Ψp is. A Dinamikus Pajzs mindig elveszít annyit az erősségéből, ahány  Ψp erősségű a Bontás. Persze, ha már nincs pajzs, a Romboláshoz  vagy Bontáshoz felhasznált Ψp-ok elvesznek, hiszen ugyanúgy  levonódnak az aktuális Ψp számából, mintha lett volna pajzs.\r\n        \r\n        A Ψ alapfokú alkalmazói nem érzékelik, ha egy elmét pajzsok  védenek. Mesterfokon már gyenge (Ψp-ot nem igénylő) kon­centrációval megállapítható, ha a tudatot övezi valamiféle vé­delem. Azt azonban, hogy Statikus vagy Dinamikus Pajzsok  működnek, csak a Kyr metódus alkalmazói tudhatják (lásd Kyr  Diszciplínák, Auraérzékelés).\r\n        \r\n        A Ψ-ostrom folytatója következtethet a pajzsok típusaira, hiszen  pontosan érzékeli, ha az Ostrom valamely fajtája sikerrel jár, vagy  ha a felhasznált energiák nem ütköznek ellenállásba.        \r\n        `\r\n    },\r\n    {\r\n        name: 'Pszi-pajzs, Dinamikus',\r\n        pont: 'min 1',\r\n        misc: {\r\n            idotartam: 'lásd a leírást'\r\n        },\r\n        varazslasIdeje: '30 kör',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `\r\n        A Statikus Pajzsokra építhető egyetlen újabb védelmi réteg,  az úgynevezett Dinamikus Pajzs. A 30 körig tartó meditáció után  a Dinamikus Pajzs megmarad mindaddig, amíg az alkalmazó  meg nem szünteti, vagy Ψ-ostrommal le nem bontják. Felépítése után - ellentétben a Statikus Pajz­zsal - bármikor további Ψp-ok  adhatóak hozzá (azaz erősíthető), vagy vonhatóak el belőle. Ez  minden alkalom­mal 1 körig tartó, rövid, meditatív koncentrációt  igényel. Erőssége minden esetben megegyezik az éppen benne  tárolt Ψp-ok mennyiségével, ám az aktuális Ψp-ok számánál  so­sem lehet több. A Dinamikus Pajzsokban tartott Ψp-ok  be­leszámítanak a karakter aktuális Ψp-jaiba, azaz az asztrális  és mentális Dinamikus Pajzsban működő Ψp-ok és a disz­ciplínákra  Felhasználható pontok összessége a Karakter max. Ψp-ja.\r\n\r\n        Fenntartása folytonos, gyenge koncentrációt igényel, amire a  Ψ-alkalmazó szinte bármely esetben képes - kivéve, ha alszik,  eszméletlen, vagy bármely egyéb okból öntudat­lan. Ha az elmét  valamilyen erős sokk éri, akárcsak egy pillanatra is, vagy a tudatot  megbénítják, a Dinamikus Pajzs rögtön lebomlik.\r\n\r\n        A Dinamikus Pajzsnak éppen úgy két formája létezik, mint  a Statikusnak (asztrális és mentális), és erőssége is ép­pen úgy  adódik hozzá a ME-hoz. Előnye a Statikus Pajzs­hoz képest,  hogy a benne tárolt Ψ-energia bármikor hozzá­férhető, s fel­használható egyéb diszciplínák alkalmazásához vagy Ψ-ostrom  folytatásához. Hátránya, hogy a Dinamikus Pajzs lebontásával  a támadó nem csak közelebb jutott az elméhez, hanem az  alkalmazót, a diszciplínákra felhasznál­ható Ψp-jai nagyrészétől  (a Dinamikus Pajzsban tároltaktól) is megfosztotta.\r\n\r\n        Dinamikus Pajzs más elméje köré nem építhető.\r\n        `\r\n    },\r\n    {\r\n        name: 'Pszi-pajzs, Statikus',\r\n        pont: 'min 1',\r\n        misc: {\r\n            idotartam: 'lásd a leírást'\r\n        },\r\n        varazslasIdeje: '90 kör',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `\r\n        A Ψ pajzsok hivatottak megvédeni az  elmét a mági­kus és Pszi befolyások ellen. A  alkalmazó agyi energiáiból erőteret épít tudata köré, melyen a tudati támadások  fenna­kadhatnak. A Statikus Prajzs egyfajta  állandó védelem, ami mindaddig óvja a  tudatot, amíg azt az alkalmazó meg nem  szünteti, vagy valaki le nem Rombolja.\r\n\r\n        A Statikus Pajzs erőssége annyi, ahány  Ψp-ból épí­tették. Gyakorlati hatása ab­ban nyilvánul meg, hogy a pajzs erősségét  hozzáadjuk a Tudatalatti Mágiaellenál­ láshoz és így dobjuk az ME-t. Két különböző típusú Statikus  Pajzs létezik: asztrális és mentális. Az Asztrális Pajzs az asztrális  támadások ME-ához adódik hozzá, míg a Mentális Pajzs a mentális  ME-hoz.\r\n\r\n        A Statikus Pajzs, miután felépült, többé nem befolyá­solható: Ψp-okot sem elvonni, sem hozzáadni nem lehetsé­ges.  Védő hatását akkor is kifejti, ha a Ψ-alkalmazó alszik, esz­méletlen, vagy bármely egyéb okból öntudatlan, hiszen immár  az elmétől függetlenül működik. Lebontani is csak újabb  kilencven körön át tartó meditációval lehet vagy Ψ-ostrommal  (lásd Általános Diszciplínák, Ψ-ostrom).\r\n\r\n        A Statikus Pajzshoz felhasznált Ψp-ok a későbbiek­ben nem  számítanak bele az aktuális Ψp-ok számába. Ez azt jelenti, hogy  az alkalmazó megteheti, hogy egy békés napon az összes Ψp-ját  Statikus Pajzsok emelésére fordítja, majd pihenés után ismét  maximális Ψp-jaira támaszkodhat - noha tudatát már védik) a  Statikus Pajzsfok). Minden elme köré legfeljebb egy asztrális és egy  mentális Statikus Pajzs épít­hető.\r\n\r\n        Statikus Ψ-pajzs, mesterfokú alkalmazással bárki el­méje köré  (nemcsak ember, de lélekkel rendelkező állat) építhető, ám a  más elme köré épített pajzs, akárki építette is (harcművész,  kardművész vagy varázsló), bárki által alkal­mazott Ψ-ostrommal  lerombolható.\r\n`\r\n    },\r\n    {\r\n        name: 'Membrán',\r\n        pont: '10',\r\n        misc: {\r\n            idotartam: 'végleges'\r\n        },\r\n        varazslasIdeje: '5 perc',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `\r\n        A membrán a Statikus Ψ-pajzs egy változata. Éppúgy körbevehető vele az elme, működtetésére többé nem kell Ψ-pontot áldozni, s lerombolni is csak ahhoz hasonlóan, Ψ-ostrommal lehet.\r\n\r\n        A Membrán nem védi az elmét, hanem figyelmezteti a rá irányuló passzív Ψ-tevékenységre. A membrán felépítője megérzi, ha huzamosabb ideig figyelik, s azt is meg tudja határozni, merről. Azonnal tudomására jut, ha Asztrál vagy Mentál Szemmel rápillantanak. Természetesen akkor is nyomban riaszt, ha asztrál vagy mentál varázslattal próbálnak hatni a viselőjére. Ha a Ψ-használó nem a saját, hanem más elméjét övezi Membránnal, bármilyen távol tartózkodjék is, tudomására jut, ha a viselőre a fent említett mágikus módszerekkel hatnak.\r\n\r\n        A membrán magától soha nem vész el, csak felépítője képes lebontani, vagy 10 E erősségű Ψ-ostrom.\r\n`\r\n    },\r\n    {\r\n        name: 'Csettintés',\r\n        pont: 'lásd a leírásban',\r\n        misc: {\r\n            idotartam: 'egyszeri'\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `\r\n        A diszciplina alapvető képessége minden Ψ-használónak. Oly kevés mentális energia használódik el alkalmazásakor, hogy Ψ-pontban nem mérhető, ezért a Csettintésre nem kell Ψ-pontot áldozni. Egyszerre egyvalakivel szemben használható, mindössze annyi történik, hogy az illető tudomást szerez a diszciplina alkalmazójáról. A hatás hasonló ahhoz, mint amikor egy csendes teremben valaki csettint. A \"csettintést\" csak a kiszemelt \"áldozat\" hallja, nem tudja, kitől származik, de tudja, milyen irányban keresse őt. Tapasztalatlan emberek első reakciója feltétlenül az, hogy az alkalmazó irányába, netán rápillantanak.\r\n        A Csettintés csak azzal szemben használható, akit az alkalmazó lát.\r\n`\r\n    },\r\n    {\r\n        name: 'Összpontosítás',\r\n        pont: '1/Ψ-használati szint',\r\n        misc: {\r\n            idotartam: '1 kör'\r\n        },\r\n        varazslasIdeje: '2 szegmens',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `\r\n        A diszciplina legtöbb 1 kör időtartamig egyetlen adott feladat megoldására elegendő misztikus, belső erővel ruházza fel alkalmazóját. Az illető ezáltal képes lesz olyan próbatételek sikeres végrehajtására, melyekre egyébként álmában sem lenne alkalmas. 1 Ψ-pont felhasználásával +1-gyel, százalékos próba esetén +5%-kal növelheti az esélyeit. Egyszerre legtöbb annyi Ψ-pontot képes felhasználni ilyen célra, amennyi a Ψ-használati Szintje.\r\n\r\n        Mivel az 1 teljes körig tartó összpontosítás után az első tevékenység maga a próbatétel kell legyen, a diszciplina aligha használható közelharcban. Annál inkább lesből leadott, célzott lövésben (+5 CÉ/Ψ-pont azaz Ψ-használati Szint).\r\n\r\n        A diszciplina különlegessége, hogy egyes Ψ-t nem ismerő íjászok is alkalmazzák, esetükben Ψ-pont felhasználása nélkül, +5 CÉ/Tapasztalati Szint mértékben.\r\n`\r\n    },\r\n    {\r\n        name: 'Abszolút Látás',\r\n        pont: '8',\r\n        misc: {\r\n            idotartam: 'végleges'\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `\r\n        A diszciplina alkalmazója nem anyagi testének tökéletlen látószervén, a szemen keresztül lát, hanem sokkal kifinomultabb lelki szemét használja. Ezáltal egyszerre nem csak egy irányba nézhet, hanem teljes körben - jobbra, balra, előre, hátra, fel és le - lát egyidejűleg; mi több, mindent élesen, hisz nem szükséges szemét a kérdéses távolságra fókuszálnia.\r\n\r\n        Az Abszolút látás egyetlen hátránya a rövid látótávolság: csak 20 méter sugarú körön belül használható, azon túl minden teljes sötétbe borul. Az érintett területen azonban tökéletesek a látási viszonyok, függetlenül a fényviszonyoktól - azaz teljes sötétségben is minden látható. Az Abszolút látással sem pillanthatóak meg ellenben a láthatatlan tárgyak, a rejtőző emberek vagy takarásban lévő dolgok; ahogyan a mágikus sötétség is gátat szab használatának.\r\n\r\n        Hátulütője is akad: az érintett területen belül a Szimbólumok, a Mágikus tekintet - és az összes látáson alapuló mágikus befolyás - azonnal kifejti hatását az alkalmazóra.\r\n\r\n        Az Abszolút látás megértéséhez elvont gondolkodás szükséges, hiszen nehéz felfogni a fókuszálás nélküli teljes körívű látást a százhúsz fokos látótérhez szokott emberi elmének. Éppen ezért - az átállás miatt- igényel sok mentális energiát (Pszi-pontot) a diszciplina alkalmazása.\r\n\r\n        Maga az Abszolút látás - a normál látáshoz hasonlóan - nem igényel Pszi-pontot, csak az átállás: a lelki szemre való átkapcsolás. Azaz az Abszolút látás bármeddig használható, míg csak alkalmazója vissza nem kíván térni a szokványos módszerhez; ekkor újra a diszciplinához kénytelen fordulni, hogy normál látását visszanyerje.\r\n\r\n        Az Abszolút látás során a szem a semmibe réved, a szembéjak gyakorta le is csukódnak, így a hirtelen felvillanó éles fény - legyen bár mágikus - sem tehet kárt az alkalmazó látásában.\r\n\r\n        Az Abszolút látás diszciplina magas mentális felkészültéset igényel, ezért - dacára annak, hogy az alkalmazó önmagára vonatkoztatva használja - alkalmazása Mesterfokú Pszi képzettséget igényel. Mivel az Abszolút látásban a szem nem játszik szerepet, a diszciplinát vakok és bekötött szeműek is alkalmazhatják. Harcban megszünteti a hátulról vagy félhátulról támadók előnyeit, s így kizárólag a \"Harc több ellenfél ellen\" módosítói érvényesülnek.\r\n`\r\n    },\r\n    {\r\n        name: 'Szinesztézia',\r\n        pont: 'lásd a leírásban',\r\n        misc: {\r\n            idotartam: 'egyszeri'\r\n        },\r\n        varazslasIdeje: '2 szegmens',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `\r\n        A diszciplina alkalmazója képes Érzékközpontjában a látáshoz kapcsolni a más érzékszervein keresztül észlelt ingereket. Ily módon színes fénynyalábok formájában megpillanthatja a hangokat és a szagokat, s könnyűszerrel felismerheti forrásukat. Varázslók a Szinesztézia által a leplezetlen mágiát is megpillantják, mivel az derengő auraként világít a mágikus tárgy, személy, hely körül. Hatodik érzékkel együtt alkalmazva a diszciplina hasonló aurával leplezi le az alkalmazóját veszélyeztető tárgyat, ill. személyt.\r\n\r\n        Nem szükségszerű, hogy éppen a látás legyen a kedvezményezett érzékszerv, ez csak az emberi és hozzá hasonló fajok esetében természetes, mivel ők leginkább a látásukra hagyatkoznak. Elviekben más érzékszerv használata is elképzelhető, bár ezt - úgy tudni - egyetlen pszi-mester sem oktatja és ismeri.\r\n\r\n        A Szinesztézia alkalmazásakor minden érzékszerv ingerei más színben és erősségüktől függően egyre világosabb árnyalatban (egyre nagyobb fényerővel) jelennek meg. Általánosan a következő színek használatosak.\r\n\r\n        <table>\r\n            <tr>\r\n                <td>Érzékszerv</td>\r\n                <td>Szín</td>\r\n                <td>Ψ-pont</td>\r\n            </tr>\r\n            <tr>\r\n                <td>hallás</td>\r\n                <td>sárga</td>\r\n                <td>1</td>\r\n            </tr>\r\n            <tr>\r\n                <td>szaglás</td>\r\n                <td>zöld</td>\r\n                <td>1</td>\r\n            </tr>\r\n            <tr>\r\n                <td>mágia</td>\r\n                <td>kék</td>\r\n                <td>2</td>\r\n            </tr>\r\n            <tr>\r\n                <td>hatodik érzék</td>\r\n                <td>vörös</td>\r\n                <td>3</td>\r\n            </tr>\r\n        </table>\r\n\r\n        A Ψ-pont rovat megmutatja, mennyi Pszi energiát emészt fel az adott érzékszerv látáshoz kapcsolása 1 körre. Több érzék együttes átkapcsolásakor az értékek összeadódnak, az időtartam növelésekor pedig körönként többszöröződnek.\r\n`\r\n    },\r\n    {\r\n        name: 'Érzék-tisztítás',\r\n        pont: '1/érzékszerv',\r\n        misc: {\r\n            idotartam: 'végleges'\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['pszi', 'pszi-pyarroni'],\r\n        description: `\r\n        A diszciplina alkalmazója 1 Ψ-pontért megtisztíthatja egyik érzékszervét, melyet a korábbi nagy erejű ingerek eltompítottak. Verőfényről a barlang sötétjébe lépve azonnal \"hozzászoktatja\" szemét a megváltozott fényviszonyokhoz; a fülsértő ricsajt követő csendben is kifinomultan hallgatózhat; egyetlen röpke pillanat alatt száműzheti orrából a korábbi bűz vagy illatfelhő szaglást bénító utóhatásait.\r\n`\r\n    },\r\n\r\n]\r\n\r\nexport const PSZI_SLAN: Array<Varazslat> = [\r\n    {\r\n        name: 'Aranyharang',\r\n        pont: '1/1 SFE',\r\n        misc: {\r\n            idotartam: '2 kör'\r\n        },\r\n        varazslasIdeje: '1 kör',\r\n        labels: ['pszi', 'pszi-slan'],\r\n        description: `\r\n        A tudat test feletti tökéletes uralma nyilvánul meg ebben a  diszciplinában. Segítségével az alkalmazó képessé válik testét  élő páncéllá alakítani. Ezt izomzata átrendezésével, és Ψ-energáinak  erős kisugárzásával éri el. Az Aranyharang éppen olyan Sebzés  Felfogó Értéket ad alkalmazójának, mint bármilyen páncél - az így  nyert SFÉ megegyezik a felhasznált Ψp-ok számával. A diszciplína  az egyik legnehezebben elsajátítható és legveszedelmesebb Ψ­alkalmazási módszer. Éppen ezért az alkalmazó nem használhatja  korlátlanul: maximális mértéke megegyezik az alkalmazó Tapasztalati  Szintjével. Ez a gyakorlatban azt jelenti, hogy az Aranyharang  SFÉ-je sosem lehet nagyobb a diszciplínát használó Tapasztalati  Szintjénél (azaz egy 4. szintű Slan legfeljebb 4-es SFÉ-jű  Aranyharangot képes csinálni).\r\n        \r\n        1 Ψp-ért 1-es SFÉ nyerhető 2 körre, 2 Ψp-ért 2-es SFÉ 2 körre,  vagy 1-es SFÉ 4 körre, stb.`\r\n    },\r\n    {\r\n        name: 'Belső idő',\r\n        pont: '10',\r\n        misc: {\r\n            idotartam: '1 szegmens'\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['pszi', 'pszi-slan'],\r\n        description: `\r\n        A Slan Pszi mentális alkalmazásának tökélyre vitele. A diszciplína  alkalmazója képes saját belső idejét annyira lelassítani, hogy minden  - a valóságban -1 szegmensnyi időt egy teljes körnek érzékel. Ez  lehetőséget nyújt az alkalmazónak, hogy az eseményeket jobban  végiggondolva mérlegeljen, s hogy az eltelt valós idő helyett a saját  belső ideje szerint alkalmazzon Ψ diszciplínákat. Mindemellett a  Slan-út Belső Ideje nemcsak a gondolati folyamatokat gyorsítja fel,  hanem a diszciplína használójának testét is, így az alkalmazónak  minden szempontból egy teljes köre van cselekedni-akár harcolni is  -, míg a külvilág számára csupán 1 szegmens telik el.\r\n        \r\n        A külső szemlélő érzékei szinte követhetetlen gyorsaságúnak  találják a diszciplína alkalmazóját- az Időtartam alatt a Kezdeményezés  minden esetben a Belső Idővel felgyorsított Slant illeti meg. A  használat során az alkalmazó képes kitérni a mágikus lövedékek  elől, a rálőtt nyílvesszőket akár puszta kézzel is megfoghatja, és  lehetetlen meglepetésszerű támadást intézni ellene.\r\n        \r\n        10 Ψp felhasználásával a valós idő 1 szegmense lassítható le,  20 Ψp-ért már két szegmens, stb.        `\r\n    },\r\n    {\r\n        name: 'Chi-harc',\r\n        pont: '1/kör',\r\n        misc: {\r\n            idotartam: 'lásd a leírást'\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['pszi', 'pszi-slan'],\r\n        description: `\r\n        A Chi-harc nem más, mint a harc- vagy kardművész azon  tudása, mely segítségével a belső energiáit harc közben a teste  szolgálatába állíthatja. Ettől lesz több minden egyéb puszta­kezes verekedőnél és fegyverhasználónál - ez a harc művészete.  Az alkalmazás közben mozdulatai csiszoltabbá, pontosabbá  válnak, saját belső ideje lelassul. Ütéseiben nemcsak izomzatának  ereje és testének súlya nyilvánul meg, hanem felszabadított  tudati energiái is. A harcművész puszta keze - ha úgy kívánja  - a legélesebb karddal lesz egyenértékű, vagy buzogányként  zúz. A kardművész eggyé válik fegyverével, mintegy saját  végtajaként érzékeli azt.\r\n        \r\n        A Chi-harc folyamán nem lehet meglepni az alkalmazót, és  lehetetlen olyan módon harcolni, hogy az ellenfél csak ártalmatlanná  váljon (lásd Harc, Harc az ellenfél ártalmatlanná tételéérte. Használat  során az alkalmazó vonásai összpontosításról árulkodnak, arca  kifejezéstelen kőmaszknak hat, tekintete maga elé mered, hiszen  nem csak a szemére, hanem érzékeinek együttesére hagyatkozik.  Mondják, a Slan-ek az effajta állapotot a Sárkány ébredésének  nevezik.\r\n        \r\n        A Chi-harc hatékonyságát az alábbi táblázat mutatja.\r\n\r\n        <table>\r\n            <tr>\r\n                <td>TSz</td>\r\n                <td>Tám/kör</td>\r\n                <td>Időtartam</td>\r\n                <td>TÉ,VÉ</td>\r\n                <td>KÉ</td>\r\n                <td>Sp</td>\r\n            </tr>\r\n            <tr>\r\n<td>1.</td>\r\n<td>1</td>\r\n<td>1 kör</td>\r\n<td>+10</td>\r\n<td>+2</td>\r\n<td>+1</td>\r\n            </tr>\r\n            <tr>\r\n<td>3.</td>\r\n<td>2</td>\r\n<td>1 kör</td>\r\n<td>+15</td>\r\n<td>+4</td>\r\n<td>+3</td>\r\n            </tr>\r\n            <tr>\r\n<td>5.</td>\r\n<td>3</td>\r\n<td>2 kör</td>\r\n<td>+20</td>\r\n<td>+6</td>\r\n<td>+5</td>\r\n            </tr>\r\n            <tr>\r\n<td>7.</td>\r\n<td>4</td>\r\n<td>2 kör</td>\r\n<td>+25</td>\r\n<td>+8</td>\r\n<td>+7</td>\r\n            </tr>\r\n            <tr>\r\n<td>9.</td>\r\n<td>5</td>\r\n<td>3 kör</td>\r\n<td>+30</td>\r\n<td>+10</td>\r\n<td>+9</td>\r\n            </tr>\r\n            <tr>\r\n<td>11.</td>\r\n<td>6</td>\r\n<td>Korlátlan</td>\r\n<td>+50</td>\r\n<td>+12</td>\r\n<td>+11</td>\r\n                        </tr>\r\n        </table>\r\n\r\n        Minden további Tapasztalati Szinten a Sebzés + 1-gyel nő, azaz 1-2. szinten 1 Ψp felhasználásával a diszciplína alkalmazója  1 körig képes a Chi-harcra; miáltal Támadó Értéke, Védő Értéke 10­zel növekszik, Kezdeményező Értékéhez +2 adódik, míg sebzéséhez  + 1. További Ψp-ok rááldozásával csak az Időtartamot lehet  elnyújtani, a TÉ, VÉ, KÉ és a Sebzés nem növelhető. Ezen értékek  csak a táblázatban feltüntetett mértékben változnak.        \r\n        `\r\n    },\r\n    {\r\n        name: 'Érzékelhetetlenség',\r\n        pont: '8',\r\n        misc: {\r\n            idotartam: '1 kör'\r\n        },\r\n        varazslasIdeje: '1 kör',\r\n        labels: ['pszi', 'pszi-slan'],\r\n        description: `\r\n        A diszciplína alkalmazója mozdulatlanná dermedve képes  érzékelhetetlenné válni. Ebben az állapotában még a legélesebb érzékszervek (pl.: látás,  hallás, szaglás, stb.) szá­mára sem fedezhető fel, és  kikerül a Hatodik Érzék ha­tósugarából is. Az Érzé­kelhetetlenség folyamán  semmilyen tevékenység (mozgás, harc, Ψ-alkalmazás, vagy kommunikáció) nem végez­hető.\r\n\r\n        A Kyr metódus Auraérzékelése előtt is rejtve marad, csupán  olyan Láthatatlansági észleléssel fedezhető fel, mely legalább 4-es  erősitésű.\r\n\r\n        Nyolc Ψp felhasználásával 1 körig alkalmazható a diszciplína,  16Ψp-ért 2 körig, stb.\r\n    `\r\n    },\r\n    {\r\n        name: 'Halálos ujj',\r\n        pont: '3/1 ÉP',\r\n        misc: {\r\n            idotartam: '24 óra'\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['pszi', 'pszi-slan'],\r\n        description: `\r\n        A Pszi energiák koncentrált, romboló kisugárzásának mód­szere Yadegori Chunin nevéhez fűződik. Yadegori ellentétben a  híresztelésekkel kardművész volt, noha a pusztakezes harc­művészet nagymestereként tartják számon. Ennek oka, hogy  közel tíz évet töltött az Oltalmazó Keleti Szél kolostorában,  ahol Enoszukéról magával hozott tudását tanította a szer­zeteseknek. Hamar híressé vált, s elterjedt róla, hogy egyetlen  érintésével képes ölni. A Gyémántok évének nyolcadik havában  Yi Chien Mu császári herceg, máig ismeretlen okból párviadalra  hívta ki. Yadegori többször visszautasította a kihívást, ám egy  ízben a herceg meditáció közben zavarta meg, s tisztelet­lenségével addig provokálta, míg az enoszukei mester- anélkül,  hogy egy szót szólt volna - odalépett a herceghez és muta­tóujjával megbökte. Yi Chien Mu azonnal kiszenvedett. Az  esetnek hamar híre ment, így Yadegori kénytelen volt menekülni.  Azonban mielőtt elhagyta volna a kolostort, megtanította a  rendfőnököt arra a diszciplínára, melynek segítségével megölte  a császári herceget. A Halálos ujjat - nevezik Yadegori érintésének  is - sokáig titkos tanításként kezelték, csak nem rég jutott el  Tiadlanba, ahol is a legtöbb Slan iskola átvette és tanítani  kezdte. ­\r\n\r\n        A diszciplínát a legveszélyesebb Ψ-alkalmazásnak tarják.  Használatával időzített belső sérülések okozhatók. Az alkalma­zónak meg kell érinteni valamelyik mutatóujjával ellenfelét. Ez  harci szituációban sikeres támadást igényel. Az okozott sérülés  az alkalmazó akarata szerinti - de huszonnégy órán belül eső ­időpontban keletkezik, gyógyítása nem lehetséges. A disziplína  minden esetben Ép veszteséget okoz, s a páncélok Sebzés Felfogó  Értéke nem vonódik le belőle, sőt az Aranyharang sem jelent  védelmet hatása ellen.\r\n\r\n        Nehézsége okán nem alkalmazható korlátlanul: minden  Tapasztalati Szinten csak 1 Ép sérülés okozható, mely 3 Ψp  felhasználásába kerül. Második TSz-en már 6 Ψp rááldozásával 2  Ép veszteség érhető el, stb.\r\n            `\r\n    },\r\n    {\r\n        name: 'Jelentéktelenség',\r\n        pont: '6',\r\n        misc: {\r\n            idotartam: '1 kör'\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['pszi', 'pszi-slan'],\r\n        description: `\r\n        A Slan-ek életük nagy részét- míg ki nem kerülnek a kolostorból vagy iskolából - csöndes önmagukba zárkózással, nyugalmas  elmélyedéssel töltik. A szinte észrevétlen jelenlét, háttérbe húzódó  viselkedés az effajta életmód egyik alapkövetelménye. Mindezt tökélyre  fejlesztve, és a Ψ-energiákat is segítségül hívva, a Slan-út alkalmazói  elérték, hogy a teljes jelentéktelenség aurájába burkolózhassanak.\r\n        \r\n        A diszciplína használatakor az alkalmazó nem tűnik fel a  legéberebb őrnek, a legfigyelmesebb szemlélődőnek sem. A rá­irányított tekintet lesiklik róla, jelentéktelen, figyelmet nem érdemlő  senkinek hat. A tudatos érzékelések persze felfedezik (Aura­érzékelés, Láthatatlanság Érzékelés, Hatodik Érzék) és lelepleződik  akkor is, ha a figyelmes szemlélő sikeres Intelligencia Próbát  dob. Ha azonban az alkalmazó már elhagyta a helyszínt - ahol  a diszciplína segítségével sikerült észrevétlennek maradnia - hiába  járt le a jelentéktelenség időtartama, nem ébred gyanú senkiben.\r\n        \r\n        Közönséges példája ennek, ha az alkalmazó úgy kíván halálos  ellenségeinek táborán végighaladni - esetleg kikémlelni azt -,  hogy járása-kelése észrevétlen maradjon. Ilyenkor a diszciplína  segítségével jelentéktelenné válik, s az őrök meg a táborlakók ­sikeres Intelligencia Próba, vagy tudatos érzékelés híján - nem  figyelnek föl rá: maguk közé tartozónak tekintik. Miután a tábort  elhagyta, senkinek sem jut eszébe, hogy idegen járt közöttük.  Távozása éppúgy jelentőség nélkül való, mint jelenléte. A diszciplína  alkalmazása közben szólni, beszédbe elegyedni nem lehet - ez  azonnali lelepleződéssel jár -, miképpen a harcba bocsátkozás is  megszünteti a jelentéktelenséget.\r\n        \r\n        A diszciplína értelmetlen alkalmazása szintén balul üthet ki:  magányos emberhez odamenni, vagy hegyi óriások falujába  besétálni - azaz bármi olyat tenni, amikor nincs mód a környezetben  tartózkodókkal való azonosulásra - nem vezethet sikerhez.\r\n        \r\n        A Jelentéktelenség 6 Ψp-ért 1 körig tartható fenn, 12 Ψp-ért 2  körig, stb.            \r\n        `\r\n    },\r\n    {\r\n        name: 'Levitáció',\r\n        pont: '1',\r\n        misc: {\r\n            idotartam: '1 óra'\r\n        },\r\n        varazslasIdeje: '1 kör',\r\n        labels: ['pszi', 'pszi-slan'],\r\n        description: `\r\n        Meglehetősen kevés gyakorlati alkalmazhatósággal bíró  diszciplína, ám a Slanek szertartásainak elengedhetetlen kelléke.  Az emberi test súlyának teljes leküzdésére szolgál, alkalma­zásával föld feletti lebegésre nyílik mód. 1 Ψp felhasználásával 1  órán keresztül lehet I méter magasságban lebegni, 2 Ψp-ért már  két órán keresztül tartható fenn a diszciplína hatása. A Levitáció  magassága nem növelhető, ám az alkalmazó bármekkora súly­amennyiben a teste korlátai elbírják- felemelésére képes. A diszciplína  használata közben a Slan teste sebezhetetlenné válik bármely ­nem mágikus - fegyverrel szemben. A diszciplína folyamatos  koncentrációt igényel, közben fizikai támadás, egyéb diszciplína  vagy varázslat használata nem lehetséges.\r\n        `\r\n    },\r\n    {\r\n        name: 'Statikus Ψ-pajzs',\r\n        pont: 'min 1',\r\n        misc: {\r\n            idotartam: 'lásd a leírást'\r\n        },\r\n        varazslasIdeje: '90 kör',\r\n        labels: ['pszi', 'pszi-slan'],\r\n        description: `\r\n        A Slan-út alkalmazói által gerjesztett Statikus Pajzs felépítésében  gyökeresen különbözik a Pyarroni módszer segítségével létre­hozottól, ám működésében és alkalmazásában teljesen megegyezik  azzal. A pontos leírást lásd az Általános Diszciplínák, Statikus Ψ­pajzs diszciplína tárgyalásánál.\r\n        \r\n        A valódi különbség a végeredményben mutatkozik meg: a Slan­ út Statikus Ψ-pajzsát senki nem képes lerombolni, csak maga az  alkalmazó szüntetheti meg és építheti újra. Efféle pajzsot a Slan  csak saját elméje köré képes felhúzni.\r\n        `\r\n    },\r\n    {\r\n        name: 'Testsúly változtatás',\r\n        pont: 'lásd a leírást',\r\n        misc: {\r\n            idotartam: '3 kör'\r\n        },\r\n        varazslasIdeje: '1 kör',\r\n        labels: ['pszi', 'pszi-slan'],\r\n        description: `\r\n        A diszciplína használatával a Ψ-alkalmazó képes saját test­súlyát megnövelni, avagy lecsökkenteni. Ezáltal képessé válik több  emelet magasra felugrani, a havon futni anélkül, hogy mély nyomot  hagyna, esetleg gyorsabban úszni. A diszciplínával nem változtatható  meg az alkalmazó által hordott vagy viselt tárgyak súlya.\r\n        \r\n        Az alábbi táblázatból kiderül, hogy a testsúly különböző mér­tékű megváltoztatása mennyi Ψp-ba kerül. A felhasznált Ψp-ok  növelésével a diszciplína Időtartama is meghosszabbítható.        \r\n        \r\n        <table>\r\n        <tr>\r\n            <td colspan=\"9\">\r\n            +/- módosítás az eredethez képest            \r\n            </td>\r\n        </tr>\r\n           <tr>\r\n<td>Súly</td>\r\n<td>1 kg</td>\r\n<td>3 kg</td>\r\n<td>5 kg</td>\r\n<td>9 kg</td>\r\n<td>13 kg</td>\r\n<td>31 kg</td>\r\n<td>2x kg</td>\r\n<td>3x kg</td>\r\n           </tr>\r\n           <tr>\r\n<td>Ψp</td>\r\n<td>1</td>\r\n<td>2</td>\r\n<td>4</td>\r\n<td>7</td>\r\n<td>10</td>\r\n<td>20</td>\r\n<td>30</td>\r\n<td>35</td>\r\n           </tr>\r\n        </table>\r\n        \r\n        Háromszorosnál jobban növelni, vagy harmadánál kevesebbre  csökkenteni a testsúlyt bármennyi Ψp rááldozásával sem lehet.\r\n        `\r\n    },\r\n    {\r\n        name: 'Tetszhalál',\r\n        pont: '6',\r\n        misc: {\r\n            idotartam: '1 óra'\r\n        },\r\n        varazslasIdeje: '10 kör',\r\n        labels: ['pszi', 'pszi-slan'],\r\n        description: `\r\n        Az alkalmazás segítségével lehető­ség nyílik a test élettani folyamatainak  felfüggesztésére. Ilyenkor az alkalmazó  semmiféle életjelet nem ad, nincs szüksége  táplálékra vagy folyadékra, de még levegőre  sem. Mozdulatlanná válik-olyan ez, akár  a halál dermedtsége - és kihűl, a tudati  Folyamatok megszűnnek, így lebomlik a  Dinamikus Pszi-pajzs, csupán a Statikus  marad meg. Ezzel szemben az Asztrál- és  a Mentáltest nem alszik, így az alkalmazó  továbbra sem lehet alanya a Természeti  Anyag Mágiájának. Az alkalmazónak előre  el kell döntenie a Tetszhalál időtartamát,  mert nincs rá mód, hogy az időtartam  lejárta előtt félbeszakítsák a diszciplínát.  Tetszhalál állapotában semmiféle fájdalom (FP) nem okozható, és a testet ért (ÉP) sérülések feleződnek. Az  egyetlen olyan diszciplína ez, melynek alkalmazása során  valóban regenerálódik a test. Minden Tetszhalálban töltött óra  alatt 1 ÉP regenerálódik - azaz gyógyul magától -, és 10 FP.  Maximuma fölé sem az ÉP, sem az FP nem emelkedhet. A  szervezetbe került mérgek hatóideje háromszorosára lassul,  ráadásul sebzésük is harmadolódik.\r\n\r\n        A Tetszhalál felfedezésére csak a Kyr Metódus Auraérzékelésével  lehetséges.\r\n\r\n        A Ψp-ok megduplázásával az időtartam megkétszereződik,  triplázásával megháromszorozódik, stb.\r\n        `\r\n    },\r\n    {\r\n        name: 'Kiáltás',\r\n        pont: '5/támadás',\r\n        misc: {\r\n            idotartam: 'egysszeri'\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['pszi', 'pszi-slan'],\r\n        description: `\r\n        A diszciplina segítségével a harcművész szellemi energiájával támadásának erejét fokozhatja. A Kiáltás kíséretében végrehajtott támadás rombolóerejét tekintve tökéletes, Sebzésének meghatározásakor nincs szükség kockadobásra, minden esetben a lehetséges maximumot sebzi. Ez persze függ a támadó fegyvertől, az alkalmazó Tapasztalati Szintjétől és még sok egyébtől.\r\n\r\n        A belső energiákat elnyújtott kiáltás szabadítja fel - innen kapta nevét a diszciplina. Kiáltás híján a várt hatás is elmarad. Mindig egyetlen támadást befolyásol, csak annak sebzését növeli. A felhasznált Ψ-pont akkor is elveszik, ha a támadás sikertelen. A diszciplinát a harcművész egy kör alatt legtöbb annyiszor használhatja, ahányadik Tapasztalai Szintű - természetesen minden újabb \"megerősített\" támadás további 5 Ψ-pontba kerül.\r\n\r\n        A Kiáltás Chi-harcban is alkalmazható.\r\n    `\r\n    },\r\n    {\r\n        name: 'Kitérés',\r\n        pont: '4/kör',\r\n        misc: {\r\n            idotartam: '1 kör'\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['pszi', 'pszi-slan'],\r\n        description: `\r\n        A diszciplina alkalmazásakor a slan belső ritmus diktálta táncba kezd. Egyfajta intuitív révület ez, mely alatt előre látja a ráváró veszedelmeket, ezért nagy biztonsággal képes kitérni előlük. A Kitérés időtartama alatt a hajított fegyverek és célzott lövedékek elméletileg nem találhatják el, a gyakorlatban a véletlen néha mást eredményez: a 00-ás dobások eredményesek ellene is. A diszciplinát 2 Ψ-pontért 1 körig képes alkalmazni, s ez idő alatt nem támadhat, nem végezhet más Ψ-tevékenységet. Egy adott körben minden slan legtöbb annyi lövedék elől képes kitérni, amennyi a Ψ-használati Szintje.\r\n        `\r\n    },\r\n\r\n]\r\n\r\nexport const PSZI_KYR: Array<Varazslat> = [\r\n    {\r\n        name: 'Energiagyűjtés',\r\n        pont: 'lásd a leírásban',\r\n        varazslasIdeje: 'lásd a leírásban',\r\n        labels: ['pszi', 'pszi-kyr'],\r\n        description: `\r\n        A Kyr metódus legalapvetőbb diszciplínája, a varázslók  tudományának alapja. Segítségével a varázsló elméjébe gyűjtheti  a világegyetemet átható mágikus energiát (Mana-pont), az  energiát, melyhól a varázslatait létrehozza. Természetesen egy­szerre maximum annyit, amennyit befogadni képes. Erről a  mennyiségről a Tapasztalati Szint függvényében a max. Mana­pont tudósít. Az Energiagyűjtés leegyszerűsítve nem más, mint a  Ψ-pontok Mana-pontokra váltása - a váltószám az Energiagyűjtésre alkalmazott módszertől függ. Itt csak a három alapvető módszert  ismeretetjük: a Meditációs-formula, a Kivonás és a Kisajtolás.\r\n\r\n        A Meditációs Formula (1 Ψp = 10 Mp) alkalmazásához a  varázslónak Meditációs Varázskörben kell tartózkodnia (ennek  elkészítése 18 Mana-pontba kerül és 30 percbe telik) és ott 1 óra  hosszan transzállapotban meditálnia (lásd Transz diszciplína).  Már ebből is látszik, hogy ennél a módszernél jelentős elő­készületekre van szükség, s a varázsló másfél óra hosszan helyhez  van kötve. Mégis, a varázslók, ha idejük és körülményeik engedik,  ehhez az energiagyűjtési módszerhez folyamodnak, mert így  juthatnak a legtöbb mágikus energiához (Mp) a legkevesebb Ψ­pontért.\r\n\r\n        Ha a meditáció bármely okból félbeszakad, az Energiagyűjtés  sikertelen lesz, s a felhasznált Ψ-pontok is elvesznek. Mi több, a  varázsló elméjéből elillan a már korábban begyűjtött energia is,  azaz Mana-pontjainak száma nullára zuhan.\r\n\r\n        Ha az 1 órás meditáció zavartalanul véget ér, azzal a varázsló  sikerrel gyűjtötte elméjébe a kívánt mennyiségű mágikus energiát.  Tízszer annyi Mana-pontot kap, ahány Ψ-pontot a diszciplína  alkalmazásásra fordított; tehát a Meditációs formula alkal­mazásával 1 Ψ-pontért l0 Mana-pont jár.\r\n\r\n        Kivonáshoz (1 Ψp = 3 Mp) a varázslók olyankor folya­modnak, ha kifogytak az elméjükben tárolt energiából, és  sürgősen utánpótlásra van szükségük. A sietségért cserébe a  kisebb hatékonysággal fizetnek - a módszer a Ψ-pontok  valóságos pazarlása! Ellenben csak 2 körig tart, és sem Transz,  sem Meditációs Varázskör nem kell hozzá; azaz semmiféle  előkészületet nem igényel, mindössze némi összpontosítást.  Közben a varázsló sétálhat, léptethet a lován, de nem harcolhat,  varázsolhat, s nem alkalmazhat más diszciplínát.\r\n\r\n        A módszer alkalmazásakor a varázsló kivonja környezetéből a  többletenergiákat, mindenhonnan csak keveset és csak a felesleget  - nem árt senkinek és semminek. Kivonással háromszor annyi  Mana-pontthoz jut, mint amennyit a diszciplínára áldozott; tehát  1 Ψ-pontért 3 Mana-pontot.\r\n        \r\n        A Kisajtolás (1 Ψp = 5 Mp) természetéből fakadóan feketemágia!  Alkalmazásakor a varázsló nem a felesleget vonja el a környezetétől,  hanem kisajtót abból annyi energiát, amennyit csak képes. A folyamat  eredményeként a varázsló Zónájában (20 m sugarú gömb) a növények  elszáradnak (csak 20 Mp felett) és az élőlények kínzó fájdalmat  éreznek egész testükben. A fájdalom nem jár sebbel, de Fp-vesztést  okoz a varázsló Zónájában tartozkodó összes lénynek. A veszteség  minden megkezdett 20 Mp után K6 Fp (pl: 20 Mp = K6 Fp; 25 Mp  = 2K6 Fp; 70 Mp = 4K6 Fp). Az áldozat ilymódon Ép-t soha nem  veszíthet!\r\n\r\n        A Kisajtolás 5 szegmens alatt elvégezhető, és ötször annyi Mp­ot eredményez, mint amennyit a varázsló a diszciplínára elhasznált,  vagyis 1 Ψ-pontért 5 Mp jár.\r\n\r\n        A leírtak kivételével a Kisajtolás módszere teljesen azonos a  Kivonással.\r\n        `\r\n    },\r\n    {\r\n        name: 'Transz',\r\n        pont: '1',\r\n        misc: {\r\n            idotartam: 'korlátlan'\r\n        },\r\n        varazslasIdeje: '10 perc',\r\n        labels: ['pszi', 'pszi-kyr'],\r\n        description: `\r\n        A diszciplína segítségével a végrehajtó transzállapotba kerülhet.  Hogy ez megtörténjék, tíz percig mozdulatlan meditál, teljes  szellemiségével a transz elérésére összpontosít. Ez idő alatt nem végezhet fizikai vagy szellemi tevékenységet, mozdulatlanul áll,  vagy ül, netán fekszik.\r\n        \r\n        Transzban lassú mozdulatokkal képes mozogni, akár egy sétáló  lovat is megülni, vagy gyalogolni, mágikus jeleket rajzolni, beszélni,  írni; de nem képes fürge mozdulatokra, közelharcra, a transztól  eltérő összpontosításra. Maga a végrehajtó bármikor visszatérhet  normális tudatállapotba; más azonban csak nehezen képes  kizökkenteni. A transzban levő emberhez hiába beszélnek, rázzák,  öntik nyakon vízzel; a transz csak Fp vagy Ép vesztést okozó  „zavarás\" hatására szakad félbe.\r\n        \r\n        A transzállapot feltétlenül szükséges egyes mágikus tanok  gyakorlásánál (pl: jelmágia), s a varázslók ilyenkor ezen diszciplínához  folyamodnak Egyetlen Ψ-pont felhasználásával a végrehajtó korlátian  időtartamra transzba kerülhet. Természetesen léteznek más  módszerek is a transzállapot elérésére, mint például a koplalás, a  kántálás vagy a törzsi tánc- ám ezek a javasasszonyok, boszorkányok,  sámánok fegyvertárába tartoznak.\r\n        \r\n        Transzállapotban az ember testi funkciói lelassulnak, így jóval  (ötször) hosszabb időt képes kibírni evés, ivás vagy levegővétel  nélkül.\r\n        `\r\n    },\r\n    {\r\n        name: 'Láthatatlanság Észlelése',\r\n        pont: '5 (erősíthető)',\r\n        misc: {\r\n            idotartam: '5 kör',\r\n            erosseg: '1'\r\n        },\r\n        varazslasIdeje: '2 szegmens',\r\n        labels: ['pszi', 'pszi-kyr'],\r\n        description: `\r\n        A diszciplína végrehajtója öt körön keresztül látja a mágikusan  láthatatlanná tett tágyakat és élőlényeket. Természetesen csak  azokat, melyeknél a diszciplína erőssége meghaladja a láthatatlanság  Erősségét (E). Hasonlóképp a Leplezett varázslatok esetében: az  alkalmazó megpillanthatja a láthatatlanná tett mágikus hatásokat,  varázslatokat.\r\n        \r\n        Alapesetben a diszciplína erőssége (E)1, de ez dupla vagy tripla  mennyiségű Ψ-pont felhasználásával a végtelenségig többszörözhető.  Ugyanez igaz az 5 körös időtartamra is.        \r\n        `\r\n    },\r\n    {\r\n        name: 'Asztrál Szem',\r\n        pont: '3',\r\n        misc: {\r\n            me: 'A',\r\n            idotartam: 'azonnali',\r\n            erosseg: '3'\r\n        },\r\n        varazslasIdeje: '3 szegmens',\r\n        labels: ['pszi', 'pszi-kyr'],\r\n        description: `\r\n        A diszciplína mások érzelmeinek, indu­latainak kifürkészésére alkalmas. Segítségével  át lehet „látni\" az Asztrál Pajzson is.  Bármilyen erősítésű Asztrál Szemmel tekin­tünk is valakire, egyet mindenképpen és  biztosan megtudhatunk: az illető érzelmi  kiegyensúlyozottságának mértékét, másként  szólva, Asztrálját (lásd Képességek). Ezen  túl az áldozat jogosult Asztrális Mágia­ellenállásra.\r\n\r\n        Abban az esetben, ha Mágiaellenállása  sikeres, az alkalmazó csak a legnyilvánvalóbb  érzelmeiről szerez tudomást - melyek álta­lában már puszta emberismerettel is felfe­dezhetőek. Kimagaslóan erős érzelmekről van  itt szó: ilyen a heves szerelem, a vak gyűlölet, a szamuráj hűsége vagy éppen a fellángoló szexuális vágy.  Mindezeknek is csak a létére derül fény; a céljukra, arra hogy az illető kinek vagy minek az irányában érez, arra nem. Erre a diszciplína  alkalmazója legfeljebb következtethet: például kitalálhatja, hogy a  pap vak hűsége istene felé irányul.\r\n\r\n        Ha az áldozat elvéti Asztrális Mágiaellenállását, világossá válik  az érzelmek célja is, mitöbb, a kevésbé nyilvánvaló érzelmek is  napvilágra kerülnek. Persze az Asztrál Szem egyszeri használata  nem egyenlő az áldozat teljes érzelmi életének feltérképezésével.  Segítségével megpillantható öt nyilvánvaló, három átlagos vagy  egy titkolt ércelem. Legutóbbiról akkor beszélünk, ha valaki őszpontosít  arra, hogy lelke mélyén elrejtsen egy érzelmet illetve indulatot ­egyszerre legfeljebb kettővel teheti.\r\n\r\n        A Szem alkalmazója vagy a KM-re bízza, hogy mesélje el, mi  az, amit lát, vagy célirányosan kérdezhet is. Felteheti a kérdést,  hogy a diszciplína áldozata miként érez meghatározott személyek  vagy eszmék irányában. Kérheti az öt legnyilvánvalóbb érzelem  felsorolását, vagy tudakozódhat egy esetleges titkolt érzelem felől.  A választól függetlenül, a kérdezést annyiszor ismételheti meg,  ahányszor a felsorolt feltételek lehetővé teszik.\r\n\r\n        A diszciplína egyszerre egyetlen személy ellen alkalmazható, és  a feltüntetett 3 szegmens alatt a teljes információcsere lezajlik. Ez  idő alatt az alkalmazó meditatív tudatállapotban kell legyen.\r\n\r\n        A diszciplína másik használati módja, mikor az alkalmazó az  Asztrál Szem tekintetével nem egy valakit vesz alaposan szemügyre,  hanem a 3 szegmens alatt gyorsan körbepásztáz. Ilyenkor  megtudhatja a közelében tartózkodó - legfeljebb tíz - személy  Asztrál Képességének értékét, de az érzelmeiket és azok célját  nem fürkészheti ki.\r\n\r\n        Az alkalmazásra szánt minden egyes további Ψ-pont-a feltüntetett  3-on felül - nem 1-gyel, hanem 3-mal növeli a diszciplína Erősségét.  \r\n\r\n        Az Asztrál Szem használatáról a diszciplína áldozata ill. áldozatai  nem szereznek tudomást!\r\n        `\r\n    },\r\n    {\r\n        name: 'Mentál Szem',\r\n        pont: '5 (erősíthető)',\r\n        misc: {\r\n            me: 'M',\r\n            idotartam: 'azonnali',\r\n            erosseg: '5'\r\n        },\r\n        varazslasIdeje: '5 szegmens',\r\n        labels: ['pszi', 'pszi-kyr'],\r\n        description: `\r\n        A Mentál Szem egyetlenegy személy gondolati életének minőségéről  ad felvilágosítást. Segítségével át lehet \"látni\" a Mentál Pajzson,  bár ilyenkor nem égbekiáltó az eredmény- de nem is lebecsülendő.\r\n        \r\n        A Mentál Szem használata ellen a kiszemelt áldozat mentális  Mágiaellenállásra jogosult. Ha ez sikeres, az alkalmazó csak  annyit tud meg róla, hogy figyelemre méltó elme-e, netán átlagos  gondolkodó, vagy éppen afféle „ostoba tuskó\". Továbbá azt,  ha valakitől, vagy valakihez Mentál-fonál vezet. Hogy kitől  kihez, az csak akkor deríthető ki, ha az alkalmazó mindkét  áldozatot szemügyre veszi Mentál Szemével.\r\n        \r\n        Ha az áldozat elvéti Mágiaellenállását, az alkalmazó  számszerűen tudomást szerez Intelligencia és Akaraterő  Képességéről, valamint Kasztjáról és plusz-mínusz 1 eltéréssel  a Tapasztalati Szintjéről és Ψ-használatának szintjéről.\r\n        \r\n        A diszciplína egyszerre egyetlen személy ellen alkalmazható, és  a feltüntetett 5 szegmens alatt a teljes információcsere lezajlik.  Ezalatt az alkalmazó meditatív tudatállapotban kell legyen.\r\n        \r\n        A diszciplína másik használati módja, mikor az alkalmazó a  Mentál Szemmel nem egy valakit vesz alaposan szemügyre, hanem  az 5 szegmens alatt gyorsan körbepásztáz. Ilyenkor legfeljebb  tíz, közelében tartózkodó személyről tudhatja meg azt, amit a  Mágia-ellenállás elvétésének esetében írtunk le, de mást nem  fürkészhet ki.\r\n        \r\n        Az alkalmazásra szánt minden egyes további Ψ-pont-a feltüntetett  5-ön felül - nem 1-gyel, hanem 2-vel növeli a diszciplína Erősségét.\r\n        \r\n        A Mentál Szem használatáról a diszciplína áldozata ill. áldozatai  nem szereznek tudomást!        \r\n        `\r\n    },\r\n    {\r\n        name: 'Auraérzékelés',\r\n        pont: '7 (erősíthető)',\r\n        misc: {\r\n            me: 'A+M',\r\n            idotartam: 'lásd a leírást',\r\n            erosseg: '7'\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['pszi', 'pszi-kyr'],\r\n        description: `\r\n        Minden kifejlett lélekkel bíró teremtmény kisugároz magából  Személyes Aurát. Ez azon túl, hogy megvédi a lélek uralta testet  a mágia bizonyos formáitól, messzemenően jellemző az illetőre.  Egy varázsló képes arra, hogy különleges érzékeivel szemügyre  vegye az Aurát. Ha már máskor is „látta\" és megjegyezte, az  Aura alapján felismeri a lelket, bármely testben lakozik is. Képes  észlelni a szembeötlő természetellenességet is, mint mikor emberi  lélek állatban lakozik, vagy fordítva. Továbbá meg tudja állapítani,  hogy az illető milyen fajhoz tartozik.\r\n        \r\n        Mivel azonban az Asztrál és Mentál Pajzsok az Aura körül  épülnek fel, mindezen információt csak akkor szerezheti meg,  ha „átlát\" a Pajzsokon. Ezt csak úgy érheti el, hogy az Auraérzékelést  annyira felerősíti, hogy áldozata elvétse külön-külön, mind Asztrál,  mind Mentál Mágiaellenállását.\r\n        \r\n        Mindaddig, míg ez nem történik meg, a diszciplína csak a  pajzsok erősségéről szolgáltat adatokat. Nem számszerűen,  hanem a következő táblázat szerint elárulja, milyen nagyság­rendű az illető statikus Asztrál és Mentál Pajzsa, valamint  dinamikus Asztrál és Mentál Pajzsa.\r\n        \r\n        <table>\r\n            <tr>\r\n                <td>Pajzs E-je</td>\r\n                <td>Nagyságrend</td>\r\n            </tr>\r\n            <tr>\r\n                <td>0</td>\r\n                <td>Nincs</td>\r\n                </tr>\r\n                <tr>\r\n                <td>1-9</td>\r\n                <td>Gyenge</td>\r\n                </tr>\r\n                <tr>\r\n                <td>10-21</td>\r\n                <td>Mérsékelt</td>\r\n                </tr>\r\n                <tr>\r\n                <td>22-34</td>\r\n                <td>Közepes</td>\r\n                </tr>\r\n                <tr>\r\n                <td>35-50</td>\r\n                <td>Erős</td>\r\n                </tr>\r\n                <tr>\r\n                <td>51-</td>\r\n                <td>Nagyon erős</td>\r\n                </tr>\r\n        </table>\r\n\r\n        A diszciplínát előszegettel használják alakjukat megváltoztatott  személyek felismerésére, netán vélt azonosság vagy ennek  ellenkezőjének tisztázására, mivel az Aura elváltoztatására nincs  mód!\r\n\r\n        Az Auraérzékelésre szánt minden további 1Ψ-pont - a leírt 7-en  felül - nem 1-gyel, hanem 2-vel növeli a diszciplína erősségét.\r\n        `\r\n    },\r\n    {\r\n        name: 'Mágikus Tekintet',\r\n        pont: '4 (erősíthető)',\r\n        misc: {\r\n            me: 'AE-próba',\r\n            idotartam: 'lásd a leírást',\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['pszi', 'pszi-kyr'],\r\n        description: `\r\n        A diszciplína az Energiagyűjtés mellett a Kyr metódus másik  csúcspontját jelenti. Kifejezetten újkeletű, bár évek alatt széles  körben elterjedt; kifejlesztése egy Ynev-szerte csak a Smaragd Uraként  ismert pyarroni mágus nevéhez fűződik. Alapja az okkult tan,  miszerint az anyagi porhüvelyben a szem a legrövidebb út a lélek  felé. Épp ezért az alkalmazónak minden esetben a kiszemelt áldozat  szemébe kell néznie.\r\n\r\n        Bárki, aki a diszciplína alkalmazójának szemébe néz, akaraterő­próbát köteles dobni, amit ha elvét, többé nem képes tekintetét a varázslóétól elszakítani. Bármit tehet, hátrálhat, akár rá is  támadhat az alkalmazóra, de nem cselekedhet semmi olyat,  minek eredményeként kiszabadulna a Mágikus Tekintet bék­lyójából. Vagyis nem helyezhet semmit az összekapcsolódó  tekintetek útjába, nem fordulhat el, nem léphet takarásba. A  kapcsolat megtartása minden célja előtt való! A Mágikus  Tekintettől csak akkor szabadulhat, ha az alkalmazó, tekin­tetének elfordításával szabadon engedi, illetőleg, ha harmadik  személy akár csak egy szemvillanásra is akadályt gördít a két  pillantás kereszttüzébe.\r\n\r\n        Ha az áldozat kiszabadult, a diszciplína időtartama azonnal  lejár, egyébként percekig, órákig, de elméletileg akár a vég­telenségig is tarthat.\r\n\r\n        A varázsló az ellen a személy  ellen, aki Mágikus Tekintetének  rabja, magasabb hatásfokon ké­pes Asztrál- és Mentálmágiát alkal­mazni. Ami természetesen felté­telezi, hogy a varázslat ideje alatt  az áldozat nem szabadul. Hogy az  említett magasabb hatásfok mit  jelent, az a következő táblázatból  derül ki        \r\n\r\n        <table>\r\n            <tr>\r\n                <td>TSZ</td>\r\n                <td>+E</td>\r\n            </tr>\r\n            <tr>\r\n<td>1. </td>\r\n<td>+ 4 E  </td>\r\n</tr>\r\n<tr>\r\n<td>2. </td>\r\n<td>+ 5 E  </td>\r\n</tr>\r\n<tr>\r\n<td>3. </td>\r\n<td>+ 6 E  </td>\r\n</tr>\r\n<tr>\r\n<td>4. </td>\r\n<td>+ 7 E  </td>\r\n</tr>\r\n<tr>\r\n<td>5. </td>\r\n<td>+ 9 E  </td>\r\n</tr>\r\n<tr>\r\n<td>6. </td>\r\n<td>+ 10 E  </td>\r\n</tr>\r\n<tr>\r\n<td>7. </td>\r\n<td>+ 11 E  </td>\r\n</tr>\r\n<tr>\r\n<td>8. </td>\r\n<td>+ 12 E  </td>\r\n</tr>\r\n<tr>\r\n<td>9. </td>\r\n<td>+ 13 E</td>\r\n</tr>\r\n<tr>\r\n<td>10</td>\r\n<td>+ 15 E  </td>\r\n</tr>\r\n<tr>\r\n<td>11. </td>\r\n<td>+ 16 E  </td>\r\n</tr>\r\n<tr>\r\n<td>12. </td>\r\n<td>+ 17 E  </td>\r\n</tr>\r\n<tr>\r\n<td>13. </td>\r\n<td>+ 18 E  </td>\r\n</tr>\r\n<tr>\r\n<td>14. </td>\r\n<td>+ 19 E  </td>\r\n</tr>\r\n<tr>\r\n<td>15. </td>\r\n<td>+ 21 E</td>\r\n</tr>\r\n        </table>\r\n\r\n        A varázslat Erősségéhez (E)  hozzáadandó az adott Tapasz­talati Szinten, a +E rovatban  feltüntetett E érték. (Például: 4.  TSZ-en, ha a varázslat E-je 13,  Mágikus Tekintet rabságában az  erősség 20-nak minősül.)\r\n        A varázslat létrejöttével - de  még időtartamának lejártával  sem - az áldozat nem szabadul  a Mágikus Tekintet bilincséből.  Ez csak a fent említett esetekben  történhet, addig a varázsló any­nyiszor varázsol rá a leírt ked­vezménnyel, ahányszor csak jó­nak látja, illetve ameddig Mana­pontjai el nem fogynak.\r\n           `\r\n    },\r\n    {\r\n        name: 'Ψ-ostrom',\r\n        pont: '1 (erősíthető)',\r\n        misc: {\r\n            idotartam: 'lásd a leírást',\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['pszi', 'pszi-kyr'],\r\n        description: `\r\n        Mindenben azonos az Általános Diszciplínáknál leírt Ψ-ostromhoz,  ám ezzel 1 Ψ-pontért 2Ψ-pont bontható le a dinamikus, és 2 E  rombolható le a statikus pajzsokból.        \r\n        `\r\n    },\r\n    {\r\n        name: 'Pszeudó',\r\n        pont: '5 + a Pszeudó',\r\n        misc: {\r\n            idotartam: 'egyszeri',\r\n        },\r\n        varazslasIdeje: '5 szegmens',\r\n        labels: ['pszi', 'pszi-kyr'],\r\n        description: `\r\n        Baromi hosszú leírás egy olyan diszciplinához, amit amúgy se használ soha senki.\r\n        `\r\n    },\r\n]\r\n\r\nexport const BARD_VARAZSLATOK: Array<Varazslat> = [\r\n    {\r\n        name: 'Álom dala',\r\n        pont: '12/célpont',\r\n        misc: {\r\n            erosseg: '6',\r\n            idotartam: 'lásd leírás',\r\n            hatotav: '10 láb',\r\n            me: 'M'\r\n        },\r\n        varazslasIdeje: '3 kör',\r\n        labels: ['magia', 'bárd', 'bárd-dalmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Bájolás dala',\r\n        pont: '5/lény',\r\n        misc: {\r\n            erosseg: '6',\r\n            idotartam: '2 óra',\r\n            hatotav: '10 láb',\r\n            me: 'A'\r\n        },\r\n        varazslasIdeje: '1 perc',\r\n        labels: ['magia', 'bárd', 'bárd-dalmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Bátorság dala',\r\n        pont: '7',\r\n        misc: {\r\n            erosseg: '5',\r\n            idotartam: 'dal hossza',\r\n            hatotav: 'lásd leírás',\r\n        },\r\n        varazslasIdeje: '1 kör',\r\n        labels: ['magia', 'bárd', 'bárd-dalmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Bénítás dala',\r\n        pont: '8/célpont',\r\n        misc: {\r\n            erosseg: '7',\r\n            idotartam: 'k6 kör',\r\n            hatotav: '10 láb',\r\n            me: 'M'\r\n        },\r\n        varazslasIdeje: '2+k6 kör',\r\n        labels: ['magia', 'bárd', 'bárd-dalmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Ellentétek dala',\r\n        pont: '35',\r\n        misc: {\r\n            erosseg: '25',\r\n            idotartam: 'végleges',\r\n            hatotav: '10 láb',\r\n            me: 'A'\r\n        },\r\n        varazslasIdeje: '1 perc',\r\n        labels: ['magia', 'bárd', 'bárd-dalmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Emlékek dala',\r\n        pont: '25',\r\n        misc: {\r\n            erosseg: '12',\r\n            idotartam: 'végleges',\r\n            hatotav: '10 láb',\r\n            me: 'M'\r\n        },\r\n        varazslasIdeje: '3 perc',\r\n        labels: ['magia', 'bárd', 'bárd-dalmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Feledés dala',\r\n        pont: '20',\r\n        misc: {\r\n            erosseg: '12',\r\n            idotartam: 'egyszeri',\r\n            hatotav: '10 láb',\r\n            me: 'M'\r\n        },\r\n        varazslasIdeje: '3 perc',\r\n        labels: ['magia', 'bárd', 'bárd-dalmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Félelem dala',\r\n        pont: '4/lény',\r\n        misc: {\r\n            erosseg: '6',\r\n            idotartam: 'dal hossza',\r\n            hatotav: '10 láb',\r\n            me: 'A'\r\n        },\r\n        varazslasIdeje: '1 perc',\r\n        labels: ['magia', 'bárd', 'bárd-dalmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Halál dala',\r\n        pont: '45/lény',\r\n        misc: {\r\n            erosseg: '15',\r\n            idotartam: 'végleges',\r\n            hatotav: '10 láb',\r\n            me: 'A'\r\n        },\r\n        varazslasIdeje: '1 kör',\r\n        labels: ['magia', 'bárd', 'bárd-dalmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Kínok dala',\r\n        pont: '4/kör',\r\n        misc: {\r\n            erosseg: '25',\r\n            idotartam: 'dal hossza',\r\n            hatotav: 'hallótáv',\r\n            me: 'M'\r\n        },\r\n        varazslasIdeje: '1 kör',\r\n        labels: ['magia', 'bárd', 'bárd-dalmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Nyugalom dala',\r\n        pont: '1/célpont',\r\n        misc: {\r\n            erosseg: '5',\r\n            idotartam: 'k6 kör',\r\n            hatotav: '10 láb',\r\n            me: 'A'\r\n        },\r\n        varazslasIdeje: '1 perc',\r\n        labels: ['magia', 'bárd', 'bárd-dalmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Zavarodottság dala',\r\n        pont: '6/célpont',\r\n        misc: {\r\n            erosseg: '4',\r\n            idotartam: 'k6 kör',\r\n            hatotav: '10 láb',\r\n            me: 'M'\r\n        },\r\n        varazslasIdeje: '1 perc',\r\n        labels: ['magia', 'bárd', 'bárd-dalmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Beszélő múlt',\r\n        pont: '19',\r\n        misc: {\r\n            erosseg: '1',\r\n            idotartam: '15 perc',\r\n            hatotav: '20 láb',\r\n        },\r\n        varazslasIdeje: '1 perc',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Bűvhangszer',\r\n        pont: '4',\r\n        misc: {\r\n            erosseg: '1',\r\n            idotartam: '10 perc/szint',\r\n            hatotav: 'bárd hangszere',\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Csend',\r\n        pont: '10',\r\n        misc: {\r\n            erosseg: '8',\r\n            idotartam: '1 kör/szint',\r\n            hatotav: '8 láb',\r\n        },\r\n        varazslasIdeje: '1 kör',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Dalegyesítés',\r\n        pont: '18',\r\n        misc: {\r\n            erosseg: '5',\r\n            idotartam: 'lásd leírás',\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Hamis beszéd',\r\n        pont: '7',\r\n        misc: {\r\n            erosseg: '2',\r\n            idotartam: 'perc/szint',\r\n            hatotav: '15 láb',\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Hangcsapás',\r\n        pont: '3',\r\n        misc: {\r\n            erosseg: '1',\r\n            idotartam: '1 szegmens',\r\n            hatotav: '50 láb',\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Hangidézés',\r\n        pont: '8',\r\n        misc: {\r\n            erosseg: '1',\r\n            idotartam: '2 perc/szint',\r\n            hatotav: '10 láb',\r\n        },\r\n        varazslasIdeje: '5 kör',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Hangkivetítés',\r\n        pont: '6',\r\n        misc: {\r\n            erosseg: '1',\r\n            idotartam: '1 óra',\r\n            hatotav: '50 láb',\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Hangorkán',\r\n        pont: '22',\r\n        misc: {\r\n            erosseg: '4',\r\n            idotartam: '1 szegmens',\r\n            me: 'állóképesség',\r\n            hatotav: '12 láb',\r\n        },\r\n        varazslasIdeje: '4 szegmens',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Hangtanulmány',\r\n        pont: '2',\r\n        misc: {\r\n            erosseg: '1',\r\n            idotartam: 'végleges',\r\n            hatotav: '5 láb',\r\n        },\r\n        varazslasIdeje: '3 perc',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Hangteremtés',\r\n        pont: '2',\r\n        misc: {\r\n            erosseg: '1',\r\n            idotartam: '5 perc/szint',\r\n            hatotav: '12 láb',\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Hangutánzás',\r\n        pont: '4',\r\n        misc: {\r\n            erosseg: '1',\r\n            idotartam: '15 perc/szomt',\r\n            hatotav: '35 láb',\r\n        },\r\n        varazslasIdeje: '3 szegmens',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Mágia dala',\r\n        pont: '10',\r\n        misc: {\r\n            erosseg: '5',\r\n            idotartam: 'lásd leírás',\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Mágikus hang',\r\n        pont: '8',\r\n        misc: {\r\n            erosseg: '1',\r\n            idotartam: 'végleges',\r\n            hatotav: 'érintés',\r\n        },\r\n        varazslasIdeje: '1 kör',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Nyelvzagyválás',\r\n        pont: '6',\r\n        misc: {\r\n            erosseg: '5',\r\n            idotartam: 'perc/szint',\r\n            hatotav: '15 láb',\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Rejtett üzenet',\r\n        pont: '5',\r\n        misc: {\r\n            erosseg: '1',\r\n            idotartam: 'egyszeri',\r\n            hatotav: 'hallótáv',\r\n        },\r\n        varazslasIdeje: 'lásd leírás',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Távoli üzenet',\r\n        pont: '25',\r\n        misc: {\r\n            erosseg: '25',\r\n            idotartam: 'egyszeri',\r\n            hatotav: 'korlátlan',\r\n        },\r\n        varazslasIdeje: '2 perc',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Távolság dala',\r\n        pont: '10/szorzó',\r\n        misc: {\r\n            erosseg: '5',\r\n            idotartam: 'lásd leírás',\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Zajkeltés',\r\n        pont: '1',\r\n        misc: {\r\n            erosseg: '1',\r\n            idotartam: '1 kör',\r\n            hatotav: '15 kör',\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['magia', 'bárd', 'bárd-hangmágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Alakváltás',\r\n        pont: '15',\r\n        misc: {\r\n            erosseg: '1',\r\n            idotartam: '2 perc/szint',\r\n            me: 'lásd leírás'\r\n        },\r\n        varazslasIdeje: '1 kör',\r\n        labels: ['magia', 'bárd', 'bárd-fénymágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Aura',\r\n        pont: '3',\r\n        misc: {\r\n            erosseg: '1',\r\n            idotartam: '10 kör',\r\n            hatotav: '10 láb'\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['magia', 'bárd', 'bárd-fénymágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Bűvharc',\r\n        pont: '16',\r\n        misc: {\r\n            erosseg: '1',\r\n            idotartam: 'kör/szint',\r\n            hatotav: 'lásd leírás'\r\n        },\r\n        varazslasIdeje: '1 szegmens',\r\n        labels: ['magia', 'bárd', 'bárd-fénymágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Délibáb',\r\n        pont: '12',\r\n        misc: {\r\n            erosseg: '3',\r\n            idotartam: '1 óra',\r\n            hatotav: '5 mérföld'\r\n        },\r\n        varazslasIdeje: '1 perc',\r\n        labels: ['magia', 'bárd', 'bárd-fénymágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Éjszakai látás',\r\n        pont: '9',\r\n        misc: {\r\n            erosseg: '5',\r\n            idotartam: '10 perc/szint',\r\n        },\r\n        varazslasIdeje: '1 kör',\r\n        labels: ['magia', 'bárd', 'bárd-fénymágia'],\r\n        description: ``\r\n    },\r\n    {\r\n        name: 'Élő történelem',\r\n        pont: '21',\r\n        misc: {\r\n            erosseg: '1',\r\n            idotartam: '1 perc/szint',\r\n            hatotav: '15 láb'\r\n        },\r\n        varazslasIdeje: '1 perc',\r\n        labels: ['magia', 'bárd', 'bárd-fénymágia'],\r\n        description: ``\r\n    },\r\n\r\n\r\n];\r\n\r\nexport const VARAZSLAT_LABELS: Record<string, string> = {\r\n    name: 'Varázslatok',\r\n    pont: 'MP',\r\n    me: 'ME',\r\n    idotartam: 'Időtartam',\r\n    erosseg: 'E',\r\n    hatotav: 'Hatótáv',\r\n    varazslasIdeje: 'Varázslás ideje'\r\n}\r\n\r\nexport const PSZI_LABELS: Record<string, string> = {\r\n    name: 'Diszciplinák',\r\n    pont: 'ΨP',\r\n    me: 'ME',\r\n    idotartam: 'Időtartam',\r\n    varazslasIdeje: 'Meditáció ideje'\r\n}","import React, { useState } from 'react';\r\nimport { Button, ButtonGroup } from 'semantic-ui-react';\r\nimport { VarazslatLista } from '../components/VarazslatLista';\r\nimport { PSZI_PYARRONI, PSZI_SLAN, PSZI_KYR, PSZI_LABELS, VARAZSLAT_LABELS, BARD_VARAZSLATOK } from '../engine/varazslat';\r\n\r\nconst ALL_SPELLS = [...PSZI_PYARRONI, ...PSZI_SLAN, ...PSZI_KYR, ...BARD_VARAZSLATOK];\r\n\r\nexport const Varazslatok: React.FC<{}> = () => {\r\n    const [tipus, setTipus] = useState<'pszi' | 'magia'>('pszi');\r\n    const [labels, setLabels] = useState<Set<string>>(new Set());\r\n\r\n\r\n\r\n    const spells = ALL_SPELLS.filter(spell => {\r\n        const spellLabels = spell.labels;\r\n        if (!spellLabels.includes(tipus)) {\r\n            return false;\r\n        }\r\n        if (labels.size === 0) {\r\n            return true;\r\n        }\r\n        return spellLabels.some(l => labels.has(l));\r\n    })\r\n\r\n\r\n    const allSelectedLabels = [...new Set(ALL_SPELLS.filter(spell => spell.labels.includes(tipus)).flatMap(s => s.labels))].filter(l => l !== 'pszi' && l !== 'magia').sort();\r\n\r\n    return <>\r\n\r\n        <ButtonGroup compact>\r\n            <Button compact content='Pszi' primary={tipus === 'pszi'} onClick={() => {\r\n                if (tipus !== 'pszi') {\r\n                    setTipus('pszi');\r\n                    setLabels(new Set());\r\n                }\r\n            }} />\r\n            <Button compact content='Mágia' primary={tipus === 'magia'} onClick={() => {\r\n                if (tipus !== 'magia') {\r\n                    setTipus('magia');\r\n                    setLabels(new Set());\r\n                }\r\n            }} />\r\n            {allSelectedLabels.map(l => <Button compact primary={labels.has(l)} onClick={() => { labels.has(l) ? labels.delete(l) : labels.add(l); setLabels(new Set(labels)); }} content={l} />)}\r\n        </ButtonGroup>\r\n        <VarazslatLista varazslatok={spells} fieldLabels={tipus === 'pszi' ? PSZI_LABELS : VARAZSLAT_LABELS} />\r\n    </>\r\n\r\n}","import React from 'react';\r\nimport { Modal, Button } from 'semantic-ui-react';\r\nimport { Varazslatok } from '../pages/Varazslatok';\r\n\r\nexport const VarazslatokModal: React.FC<{}> = () => {\r\n    return <Modal trigger={<Button positive>Mágia</Button>}>\r\n        <Modal.Content>\r\n            <Varazslatok />\r\n        </Modal.Content>\r\n    </Modal>\r\n}","import React, { useEffect, useState } from 'react';\nimport { Icon, Menu, Image, Button } from 'semantic-ui-react';\nimport { Karakter, KarakterInfo } from '../engine/karakter';\nimport { CategoriesDropdown } from './CategoriesDropdown';\nimport { KarakterImport } from './KarakterImport';\nimport { KockaModal } from './KockaModal';\n\nimport logo from '../static/magus.png';\nimport { PageSelection } from '../App';\nimport { VarazslatokModal } from './VarazslatokModal';\n\n\ninterface PageHeaderProps {\n    categories: Array<string>;\n    currentCategory: string;\n    setCurrentCategory: (category: string) => unknown;\n    karakter?: KarakterInfo;\n    karakterek: Array<KarakterInfo>;\n    page: PageSelection;\n    setPage: (pageSelection: PageSelection) => unknown;\n    save: (karakter: Karakter) => unknown;\n    saveMese: (story: string) => unknown;\n}\n\nconst MAX_KARAKTERS_PER_PAGE = 10;\n\nexport const PageHeader: React.FC<PageHeaderProps> = ({ categories, currentCategory, setCurrentCategory, karakter, karakterek, page, setPage, save, saveMese }) => {\n    const [karakterStart, setKarakterStart] = useState(0);\n\n    const karakterPos = karakterek.findIndex(k => k.id === karakter?.id);\n\n    //adjust scrolling\n    useEffect(() => {\n        if (karakterPos > -1) {\n            if (karakterPos < karakterStart) {\n                setKarakterStart(karakterPos);\n            }\n            if (karakterPos >= karakterStart + MAX_KARAKTERS_PER_PAGE) {\n                setKarakterStart(karakterPos - MAX_KARAKTERS_PER_PAGE + 1);\n            }\n        }\n    }, [karakterPos, karakterStart, setKarakterStart]);\n\n    const scrolled = karakterek.length > MAX_KARAKTERS_PER_PAGE;\n    const canScrollLeft = karakterStart > 0 && (karakterPos === -1 || karakterPos < karakterStart + MAX_KARAKTERS_PER_PAGE - 1);\n    const canScrollRight = (karakterStart + MAX_KARAKTERS_PER_PAGE < karakterek.length) && (karakterPos === -1 || karakterPos > karakterStart);\n    const karaktersDisplayed = karakterek.slice(karakterStart, karakterStart + MAX_KARAKTERS_PER_PAGE);\n\n    return <Menu tabular>\n        <Menu.Item key='header' header>\n            <Image src={logo} size='mini' onClick={() => setPage({ page: page.page === 'story' ? 'home' : 'story' })} />\n        </Menu.Item>\n        <CategoriesDropdown categories={categories} currentCategory={currentCategory} setCurrentCategory={setCurrentCategory} />\n        {scrolled &&\n            <Menu.Item key='scroll_left' disabled={!canScrollLeft} onClick={() => setKarakterStart(karakterStart - 1)}>\n                <Icon name='triangle left' />\n            </Menu.Item>\n        }\n        {karaktersDisplayed.map(k =>\n            <Menu.Item key={k.id} style={{ flexGrow: 1 }} active={k.id === karakter?.id} name={k.name} onClick={() => k.id === karakter?.id ? setPage({ page: 'home' }) : setPage({ page: 'karakterlap', karakter: k })} />\n        )}\n        <Menu.Item key='new' active={page.page === 'karakteralkoto'} onClick={() => setPage({ page: 'karakteralkoto' })}>\n            <Icon name='plus' />\n        </Menu.Item>\n        {scrolled &&\n            <Menu.Item key='scroll_right' disabled={!canScrollRight} onClick={() => setKarakterStart(karakterStart + 1)}>\n                <Icon name='triangle right' />\n            </Menu.Item>\n        }\n        <Menu.Item key='floated' position='right'>\n            <KarakterImport save={save} saveMese={saveMese} />\n            <VarazslatokModal />\n            <Button negative onClick={() => setPage({ page: 'kombat', category: currentCategory })}>Kombat</Button>\n            <KockaModal />\n        </Menu.Item>\n    </Menu>\n}","import React from 'react';\r\nimport { Dropdown, DropdownItemProps } from 'semantic-ui-react';\r\nimport { SZITUACIOK } from '../engine/harc';\r\n\r\nexport const SzituacioSelector: React.FC<{ szituaciok: Array<string>, setSzituaciok: (value: Array<string>) => unknown }> = ({ szituaciok, setSzituaciok }) => {\r\n\r\n    const szituacioOptions: Array<DropdownItemProps> = Object.keys(SZITUACIOK).sort().map(nev => ({\r\n        id: nev,\r\n        key: nev,\r\n        value: nev,\r\n        text: nev\r\n    }));\r\n\r\n    const renderLabel = (label: any) => ({\r\n        color: 'blue',\r\n        content: `${label.text}`,\r\n    })\r\n\r\n    return <>\r\n        <Dropdown multiple simple className='icon' icon=''\r\n            renderLabel={renderLabel}\r\n            text='Harci szituáció'\r\n            onChange={(e, v) => { setSzituaciok([...v.value as Array<string>]) }}\r\n            options={szituacioOptions}\r\n            value={szituaciok}>\r\n        </Dropdown>\r\n    </>\r\n}","import React, { forwardRef, useImperativeHandle, useState } from 'react';\r\nimport { Button, Card, Dropdown, DropdownItemProps, Table } from 'semantic-ui-react';\r\nimport { FEGYVERTELEN, FegyverUtils, HARCERTEK_DISPLAY_NAMES, SZITUACIOK } from '../engine/harc';\r\nimport { calculateHarcertek, calculateSebesulesHatrany, Karakter } from '../engine/karakter';\r\nimport { DiceRollResult, formatDiceRoll, parseDiceRoll, roll, sumRolls } from '../engine/roll';\r\nimport { DobasEredmeny } from './DobasEredmeny';\r\nimport { PointsTable } from './PointsTable';\r\nimport { SzituacioSelector } from './SzituacioSelector';\r\n\r\nexport interface KombatCardProps {\r\n    karakter: Karakter,\r\n    save: (karakter: Karakter) => unknown,\r\n    dobasEredmeny: Record<string, DiceRollResult>,\r\n    setDobasEredmeny(value: Record<string, DiceRollResult>): unknown,\r\n}\r\n\r\n\r\nexport const KombatCard: React.ForwardRefExoticComponent<KombatCardProps & React.RefAttributes<unknown>> = forwardRef(({ karakter, save, dobasEredmeny, setDobasEredmeny }, ref) => {\r\n    const [szituaciok, setSzituaciok] = useState<Array<string>>([]);\r\n\r\n    const fegyver = karakter.valasztottFegyver !== undefined ? karakter.fegyverek[karakter.valasztottFegyver] : FEGYVERTELEN;\r\n    const harcertekMatrix = calculateHarcertek(karakter, szituaciok.map(sz => ({ ...SZITUACIOK[sz], name: sz }))).roll(['ke', 'te', 'ce', 've']);\r\n    const sebzesRoll = sumRolls(harcertekMatrix.getRolls('sebzes')) ?? parseDiceRoll();\r\n\r\n    useImperativeHandle(ref, () => ({\r\n        rollKe: () => {\r\n            return roll('1k10+' + harcertekMatrix.sum.ke);\r\n        },\r\n        rollTe: () => {\r\n            return roll('1k100+' + harcertekMatrix.sum.te);\r\n        },\r\n        rollCe: () => {\r\n            return roll('1k100+' + harcertekMatrix.sum.ce);\r\n        },\r\n        rollSebzes: () => {\r\n            return roll(sebzesRoll, FegyverUtils.tipus(fegyver) === 'lofegyver');\r\n        },\r\n    }), [harcertekMatrix, sebzesRoll, fegyver]);\r\n\r\n\r\n    const fegyverCsere = (v?: number) => {\r\n        karakter.valasztottFegyver = v === undefined ? undefined : Number(v);\r\n        save(karakter);\r\n    };\r\n\r\n    const options: Array<DropdownItemProps> = [\r\n        {\r\n            id: -1,\r\n            value: undefined,\r\n            text: 'fegyver nélkül'\r\n        }\r\n    ];\r\n    karakter.fegyverek.forEach((f, i) => options.push({ id: i, value: i, text: f.name }));\r\n\r\n    const cellContents = (name: string) => {\r\n        switch (name) {\r\n            case 'sebzes': return <><Button compact circular color='orange' onClick={() => {\r\n                setDobasEredmeny({ ...dobasEredmeny, 'sebzes': roll(sebzesRoll, FegyverUtils.tipus(fegyver) === 'lofegyver') });\r\n            }}>{formatDiceRoll(sebzesRoll)}</Button><DobasEredmeny result={dobasEredmeny.sebzes} /></>\r\n            case 'ke': return <><Button compact circular color='olive' onClick={() => setDobasEredmeny({ ...dobasEredmeny, 'ke': roll('1k10+' + harcertekMatrix.sum[name]) })}>{harcertekMatrix.sum[name]}</Button><DobasEredmeny result={dobasEredmeny.ke} /></>\r\n            case 'ce':\r\n            case 'te': return <><Button compact circular color='purple' onClick={() => setDobasEredmeny({ ...dobasEredmeny, [name]: roll('1k100+' + harcertekMatrix.sum[name]) })}>{harcertekMatrix.sum[name]}</Button><DobasEredmeny result={dobasEredmeny[name]} /></>\r\n            case 've': return harcertekMatrix.sum[name];\r\n        }\r\n    }\r\n\r\n    const headerColour = () => {\r\n        const down = karakter.ep.akt <= 0 || karakter.fp.akt <= 0;\r\n        if (down) {\r\n            return 'darkgrey';\r\n        }\r\n        const hatrany = calculateSebesulesHatrany(karakter);\r\n        if (!hatrany) {\r\n            return 'white';\r\n        }\r\n        if (hatrany.te === -10) {\r\n            return 'bisque';\r\n        }\r\n        if (hatrany.te === -20) {\r\n            return 'coral';\r\n        }\r\n    }\r\n\r\n    return <Card fluid style={{ backgroundColor: headerColour(), filter: 'drop-shadow(5px 5px 3px #333)' }}>\r\n        <Card.Content>\r\n            <Card.Header >{karakter.name}</Card.Header>\r\n            <Card.Description>\r\n                <PointsTable\r\n                    points={[{ name: 'ep', label: 'ÉP', ...karakter.ep }, { name: 'fp', label: 'FP', ...karakter.fp }]}\r\n                    onChange={(name, max, value) => {\r\n                        (karakter as any)[name][max ? 'max' : 'akt'] = value;\r\n                        save(karakter);\r\n                    }}\r\n                />\r\n                <Table columns={2} singleLine compact>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell>SFÉ</Table.HeaderCell>\r\n                        <Table.Cell>{karakter.valasztottPancel ? karakter.pancelok?.[karakter.valasztottPancel].sfe : '-'}</Table.Cell>\r\n                    </Table.Row>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell>Asztrál ME</Table.HeaderCell>\r\n                        <Table.Cell>{karakter.pajzs ? karakter.pajzs.asztral.termeszetes + karakter.pajzs.asztral.statikus + karakter.pajzs.asztral.dinamikus : '-'}</Table.Cell>\r\n                    </Table.Row>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell>Mentál ME</Table.HeaderCell>\r\n                        <Table.Cell>{karakter.pajzs ? karakter.pajzs.mental.termeszetes + karakter.pajzs.mental.statikus + karakter.pajzs.mental.dinamikus : '-'}</Table.Cell>\r\n                    </Table.Row>\r\n                </Table>\r\n                <Table columns={2} singleLine compact>\r\n                    <Table.Header>\r\n                        <Table.HeaderCell colSpan={2}>\r\n                            <Dropdown disabled={false} compact\r\n                                text={fegyver.name}\r\n                                onChange={(e, v) => fegyverCsere(v.value !== undefined ? Number(v.value) : undefined)}\r\n                                options={options}\r\n                                value={karakter.valasztottFegyver}>\r\n                            </Dropdown>\r\n                        </Table.HeaderCell>\r\n                    </Table.Header>\r\n                    {harcertekMatrix.keys.map(m => <Table.Row>\r\n                        <Table.HeaderCell>{(HARCERTEK_DISPLAY_NAMES as any)[m]}</Table.HeaderCell>\r\n                        <Table.Cell>{cellContents(m)}</Table.Cell>\r\n                    </Table.Row>\r\n                    )}\r\n                    {fegyver.name !== FEGYVERTELEN.name &&\r\n                        <Table.Row>\r\n                            <Table.HeaderCell>Tám/kör</Table.HeaderCell>\r\n                            <Table.Cell>{`${fegyver.lassu ? '1/' : ''}${fegyver.tamPerKor}`}</Table.Cell>\r\n                        </Table.Row>\r\n                    }\r\n                </Table>\r\n            </Card.Description>\r\n        </Card.Content>\r\n        <Card.Content extra textAlign='center'>\r\n            <SzituacioSelector szituaciok={szituaciok} setSzituaciok={setSzituaciok} />\r\n        </Card.Content>\r\n    </Card >\r\n});","import React, { useState } from 'react';\r\nimport { Button, ButtonGroup } from 'semantic-ui-react';\r\nimport { SemanticCOLORS } from 'semantic-ui-react/dist/commonjs/generic';\r\nimport { KombatCard } from '../components/KombatCard';\r\nimport { Karakter } from '../engine/karakter';\r\nimport { DiceRollResult } from '../engine/roll';\r\n\r\n\r\n\r\nexport const Kombat: React.FC<{ karakterek: Array<Karakter>; save: (karakter: Karakter) => unknown }> = ({ karakterek, save }) => {\r\n\r\n    const [dobasEredmenyek, setDobasEredmenyek] = useState<Record<string, Record<string, DiceRollResult>>>(karakterek.reduce((acc, curr) => { acc[curr.id] = {}; return acc; }, {} as Record<string, any>));\r\n    const [refs] = useState<Record<string, { current: any }>>({});\r\n\r\n    const DobasButton: React.FC<{\r\n        color: SemanticCOLORS,\r\n        label: string,\r\n        rollFn: string,\r\n        value: string\r\n    }> = ({ color, label, rollFn, value }) => <Button color={color} onClick={() => {\r\n        const uj = { ...dobasEredmenyek };\r\n        Object.keys(refs).forEach(id => {\r\n            uj[id][value] = refs[id]?.current?.[rollFn]();\r\n        });\r\n        setDobasEredmenyek(uj);\r\n    }}>{label}</Button>\r\n\r\n\r\n    const kezdemenySort = (one: Karakter, two: Karakter): number => {\r\n\r\n        const oneKe = dobasEredmenyek[one.id].ke?.value ?? 0;\r\n        const twoKe = dobasEredmenyek[two.id].ke?.value ?? 0;\r\n        return twoKe - oneKe;\r\n    }\r\n\r\n    return <>\r\n        <div style={{ textAlign: 'center' }}>\r\n            <ButtonGroup>\r\n                <DobasButton\r\n                    color='olive'\r\n                    label='Kezdemény'\r\n                    rollFn='rollKe'\r\n                    value='ke' />\r\n                <DobasButton\r\n                    color='purple'\r\n                    label='Támadó'\r\n                    rollFn='rollTe'\r\n                    value='te' />\r\n                <DobasButton\r\n                    color='purple'\r\n                    label='Célzó'\r\n                    rollFn='rollCe'\r\n                    value='ce' />\r\n                <DobasButton\r\n                    color='orange'\r\n                    label='Sebzés'\r\n                    rollFn='rollSebzes'\r\n                    value='sebzes' />\r\n                <Button color='red' onClick={() => {\r\n                    setDobasEredmenyek(karakterek.reduce((acc, curr) => { acc[curr.id] = {}; return acc; }, {} as Record<string, any>));\r\n                }}>Dobások törlése\r\n            </Button>\r\n            </ButtonGroup>\r\n        </div>\r\n        <div style={{ display: 'flex', flexDirection: 'row', flexWrap: 'wrap', alignItems: 'stretch' }}>\r\n            {karakterek.sort(kezdemenySort).reverse().map((k, i) => <div style={{ order: karakterek.length - i, margin: '1em' }}>\r\n                <KombatCard\r\n                    ref={ref => refs[k.id] = { current: ref }}\r\n                    key={k.id}\r\n                    karakter={k}\r\n                    save={save}\r\n                    dobasEredmeny={dobasEredmenyek[k.id]}\r\n                    setDobasEredmeny={e => setDobasEredmenyek({ ...dobasEredmenyek, [k.id]: e })} />\r\n            </div>\r\n            )}\r\n        </div>\r\n    </>\r\n}\r\n\r\n","import React from 'react';\r\nimport { Menu, Popup, StrictMenuItemProps } from 'semantic-ui-react';\r\n\r\nfunction createContextFromEvent(e: React.MouseEvent): HTMLElement {\r\n    const left = e.clientX\r\n    const top = e.clientY\r\n    const right = left + 1\r\n    const bottom = top + 1\r\n\r\n    return {\r\n        getBoundingClientRect: () => ({\r\n            left,\r\n            top,\r\n            right,\r\n            bottom,\r\n\r\n            height: 0,\r\n            width: 0,\r\n        }),\r\n    } as HTMLElement\r\n}\r\n\r\nexport interface ContextMenuProps {\r\n    items: Array<StrictMenuItemProps>,\r\n    onClicked: (target: StrictMenuItemProps) => unknown;\r\n    onClose: () => unknown;\r\n    event?: React.MouseEvent;\r\n}\r\n\r\n\r\nexport const ContextMenu: React.FC<ContextMenuProps> = ({ children, items, onClicked, onClose, event }) => {\r\n    const contextRef = React.useRef<HTMLElement | null>(null);\r\n    const [open, setOpen] = React.useState(false)\r\n\r\n    const close = () => {\r\n        setOpen(false);\r\n        onClose();\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {!event && <div\r\n                onContextMenu={(e: React.MouseEvent) => {\r\n                    e.preventDefault()\r\n\r\n                    contextRef.current = createContextFromEvent(e)\r\n                    setOpen(true)\r\n                }}\r\n            >\r\n                {children}\r\n            </div>}\r\n\r\n            <Popup\r\n                basic\r\n                context={event ? { current: createContextFromEvent(event) } : contextRef}\r\n                onClose={close}\r\n                open={open || !!event}\r\n            >\r\n                <Menu\r\n                    items={items}\r\n                    onItemClick={(_, data) => { close(); onClicked(data) }}\r\n                    secondary\r\n                    vertical\r\n                />\r\n            </Popup>\r\n        </>\r\n    )\r\n}","import React from 'react';\r\nimport { ContextMenu } from './ContextMenu';\r\n\r\nexport interface ScheneListContextMenuProps {\r\n    onSelected: (selection: 'insertBefore' | 'insertAfter' | 'delete') => unknown\r\n}\r\n\r\nexport const SceneListContextMenu: React.FC<ScheneListContextMenuProps> = ({ onSelected, children }) => (\r\n    <ContextMenu onClose={() => { }} items={[\r\n        { name: 'insertBefore', content: 'Új elem', icon: 'left arrow' },\r\n        { name: 'delete', content: 'Töröl', icon: 'delete' },\r\n        { name: 'insertAfter', content: 'Új elem', icon: 'right arrow' },\r\n    ]}\r\n        onClicked={item => {\r\n            onSelected(item.name as any);\r\n        }}>\r\n        {children}\r\n    </ContextMenu>\r\n);","import { xml2js, Element, js2xml } from 'xml-js';\r\n\r\nexport interface DOMElement extends Element {\r\n    $parent: DOMElement;\r\n    elements?: Array<DOMElement>;\r\n}\r\n\r\nconst findElements = (root: DOMElement, filter: (ob: DOMElement) => boolean): Array<DOMElement> => {\r\n    let ret: Array<DOMElement> = [];\r\n    if (filter(root)) {\r\n        ret.push(root);\r\n    }\r\n    const children = root.elements?.map(elem => findElements(elem, filter));\r\n    children?.forEach(ch => {\r\n        ret = ret.concat(ch);\r\n    })\r\n    return ret;\r\n}\r\n\r\nconst findElementsByName = (root: DOMElement, name: string): Array<DOMElement> => {\r\n    return findElements(root, e => e.name === name);\r\n}\r\n\r\nconst findById = (root: DOMElement, name: string, id: string): DOMElement | null => {\r\n    const found = findElements(root, e => e.name === name && DomUtils.attr(e, 'id') === id);\r\n    return found.length > 0 ? found[0] : null;\r\n}\r\n\r\nconst findReferences = (root: DOMElement, target: DOMElement): Array<DOMElement> => {\r\n    const id = DomUtils.attr(target, 'id');\r\n    if (!id) {\r\n        return [];\r\n    }\r\n    return findElements(root, e => DomUtils.attr(e, 'ref') === id);\r\n}\r\n\r\n\r\nconst children = (elem: DOMElement, name: string): Array<DOMElement> => {\r\n    return elem.elements?.filter(e => e.name === name) ?? [];\r\n}\r\n\r\nconst addChild = (parent: DOMElement, name: string, referenceSibling?: DOMElement, insert: 'after' | 'before' = 'after'): DOMElement => {\r\n    const newElement: DOMElement = { type: 'element', name, $parent: parent };\r\n    return addChildElement(parent, newElement, referenceSibling, insert);\r\n}\r\n\r\n\r\nconst addChildElement = (parent: DOMElement, child: DOMElement, referenceSibling?: DOMElement, insert: 'after' | 'before' = 'after'): DOMElement => {\r\n    parent.elements = parent.elements ?? [];\r\n    let insertIndex = 0;\r\n    if (referenceSibling) {\r\n        const referenceIndex = parent.elements.indexOf(referenceSibling);\r\n        insertIndex = insert === 'after' ? referenceIndex + 1 : referenceIndex;\r\n    } else {\r\n        insertIndex = insert === 'after' ? parent.elements.length : 0;\r\n    }\r\n    parent.elements.splice(insertIndex, 0, child);\r\n    child.$parent = parent;\r\n\r\n    return child;\r\n}\r\n\r\nconst deleteChild = (parent: DOMElement, child: DOMElement) => {\r\n    parent.elements = parent.elements ?? [];\r\n    const deleteIndex = parent.elements.indexOf(child);\r\n    if (deleteIndex !== -1) {\r\n        parent.elements.splice(deleteIndex, 1);\r\n    }\r\n}\r\n\r\nconst addText = (parent: DOMElement, text: string, previousSibling?: DOMElement): DOMElement => {\r\n    parent.elements = parent.elements ?? [];\r\n    const insertIndex = previousSibling ? parent.elements.indexOf(previousSibling) + 1 : 0;\r\n    const newElement: DOMElement = { type: 'text', text, $parent: parent };\r\n    parent.elements.splice(insertIndex, 0, newElement);\r\n    return newElement;\r\n}\r\n\r\n\r\nconst child = (elem: DOMElement, name: string): DOMElement | null => {\r\n    const c = children(elem, name);\r\n    return c.length > 0 ? c[0] : null;\r\n}\r\n\r\nconst childText = (elem: Element, name: string): string => {\r\n    const ret = elem.elements?.find(e => e.name === name);\r\n    return text(ret);\r\n}\r\n\r\nconst attr = (elem: Element, name: string, value?: string | null): string => {\r\n    if (value !== undefined) {\r\n        elem.attributes = elem.attributes ?? {};\r\n        if (value !== null) {\r\n            elem.attributes[name] = value;\r\n        } else {\r\n            delete elem.attributes[name];\r\n        }\r\n    }\r\n    return (elem.attributes?.[name] ?? '').toString();\r\n}\r\n\r\n\r\nconst text = (elem?: Element): string => {\r\n    return elem?.elements?.map(t => t.text).join(' ') ?? '';\r\n}\r\n\r\nconst parse = (str: string): DOMElement => {\r\n    return xml2js(str, { compact: false, nativeType: true, trim: false, addParent: true, parentKey: '$parent' }) as DOMElement;\r\n}\r\n\r\nconst convertLegacyLinks = (elem: DOMElement) => {\r\n    if (elem.name === 'link') {\r\n        const [type, ref] = DomUtils.attr(elem, 'target').split(':');\r\n        elem.name = type;\r\n        elem.attributes = { ref }\r\n    }\r\n    if (elem.name === 'setting' && elem.$parent.name === 'scene') { //wrap legacy scene <setting> into a background event instead\r\n        const events = child(elem.$parent, 'events') || addChild(elem.$parent, 'events');\r\n        const event = addChild(events, 'event', undefined, 'before');\r\n        attr(event, 'role', 'background');\r\n        deleteChild(elem.$parent, elem);\r\n        addChildElement(event, elem);\r\n    }\r\n    elem.elements?.forEach(e => convertLegacyLinks(e));\r\n}\r\n\r\nconst print = (root: Element): string => {\r\n    return js2xml(root, { compact: false, parentKey: '$parent' });\r\n}\r\n\r\n\r\nexport const DomUtils = {\r\n    addChild,\r\n    addChildElement,\r\n    addText,\r\n    attr,\r\n    text,\r\n    child,\r\n    childText,\r\n    children,\r\n    deleteChild,\r\n    findById,\r\n    findElementsByName,\r\n    findReferences,\r\n    findElements,\r\n    parse,\r\n    convertLegacyLinks,\r\n    print\r\n};","import React, { useState } from 'react';\r\nimport { Button, Icon, Input, Label, Modal } from 'semantic-ui-react';\r\n\r\nexport interface CommentEditorModalProps {\r\n    addComment: (comment: string) => unknown\r\n}\r\n\r\nexport const CommentEditorModal: React.FC<CommentEditorModalProps> = ({ addComment }) => {\r\n    const [kommentModal, setKommentModal] = useState(false);\r\n    const [editedKomment, setEditedKomment] = useState('');\r\n\r\n    return <Modal trigger={<Icon name='comment' />} onOpen={() => setKommentModal(true)} onClose={() => setKommentModal(false)} open={kommentModal}>\r\n        <Modal.Content>\r\n            <Input fluid labelPosition='left' placeholder='Komment...' error={!editedKomment} value={editedKomment} onChange={e => setEditedKomment(e.target.value)}>\r\n                <Label pointing='right' basic>Komment</Label>\r\n                <input />\r\n                <Button floated='right' disabled={!editedKomment} onClick={() => {\r\n                    addComment(editedKomment);\r\n                    setEditedKomment('');\r\n                    setKommentModal(false);\r\n                }}>Ment</Button>\r\n            </Input>\r\n\r\n        </Modal.Content>\r\n    </Modal>\r\n}\r\n","import React from 'react';\r\nimport { List, Popup } from 'semantic-ui-react';\r\nimport { DOMElement } from '../utils/DomUtils';\r\nimport { Renderer } from '../utils/RenderUtils';\r\n\r\nexport interface CommentListProps {\r\n    comments?: Array<DOMElement>;\r\n    deleteComment: (comment: DOMElement) => unknown;\r\n    renderer: Renderer\r\n}\r\n\r\nexport const CommentList: React.FC<CommentListProps> = ({ comments, deleteComment, renderer }) => (\r\n    <>\r\n        {comments && comments.length ? <Popup hoverable trigger={<List.Description>{comments.length}&nbsp;komment</List.Description>} wide>\r\n            <List>\r\n                {comments.map(c => <List.Item><List.Icon name='delete' onClick={() => deleteComment(c)} /><List.Content>{renderer.renderElement(c)}</List.Content></List.Item>)}\r\n            </List>\r\n        </Popup>\r\n            : ''\r\n        }\r\n    </>\r\n)","import React, { useState } from 'react';\r\nimport { Icon, SemanticICONS } from 'semantic-ui-react';\r\nimport { CommentUtils } from '../utils/CommentUtils';\r\nimport { DOMElement, DomUtils } from '../utils/DomUtils';\r\nimport { Renderer } from '../utils/RenderUtils';\r\nimport { CommentEditorModal } from './CommentEditorModal';\r\nimport { CommentList } from './CommentList';\r\n\r\nexport const ROLE_ICONS: Record<string, SemanticICONS> = {\r\n    'normal': 'angle right',\r\n    'entrance': 'sign-in',\r\n    'exit': 'sign-out',\r\n    'info': 'info circle',\r\n    'background': 'film',\r\n    'speech': 'comment alternate outline',\r\n    'warning': 'warning'\r\n\r\n}\r\n\r\nconst iconForRole = (role: string): SemanticICONS => {\r\n    return ROLE_ICONS[role] ?? 'square full';\r\n}\r\n\r\nexport interface EditedEvent {\r\n    operation?: 'insertAfter' | 'insertBefore' | 'delete' | 'edit';\r\n}\r\n\r\nexport interface StoryEventProps {\r\n    event: DOMElement,\r\n    renderer: Renderer,\r\n    onClick: () => unknown,\r\n    commentUtils: CommentUtils,\r\n    onChange: () => unknown;\r\n    onContextMenu: (event: React.MouseEvent) => unknown,\r\n    onEdit: () => unknown;\r\n};\r\n\r\nexport const StoryEvent: React.FC<StoryEventProps> = ({ event, renderer, onClick, commentUtils, onChange, onContextMenu, onEdit }) => {\r\n    const role = DomUtils.attr(event, 'role').toString() || 'normal';\r\n    const status = DomUtils.attr(event, 'status');\r\n    const [active, setActive] = useState(false);\r\n\r\n    return <div onContextMenu={e => {\r\n        onContextMenu(e);\r\n        e.preventDefault();\r\n    }} style={\r\n        {\r\n            backgroundColor: status === 'completed' ? '#eefeee' : undefined,\r\n            display: 'flex',\r\n            alignItems: 'start',\r\n            width: '100%',\r\n            justifyContent: 'space-between',\r\n            padding: '1em',\r\n            borderTop: '1px solid #444',\r\n            borderBottom: '1px solid #444',\r\n        }}\r\n        onMouseEnter={() => !active && setActive(true)}\r\n        onMouseLeave={() => active && setActive(false)}\r\n    >\r\n        <div>\r\n            <ul style={{ listStyle: 'none', margin: '0' }}>\r\n                <li><Icon name={iconForRole(role)} /></li>\r\n                {active && <li style={{ cursor: 'pointer' }}><Icon name='edit' onClick={onEdit} /></li>}\r\n            </ul>\r\n        </div>\r\n        <div style={{ flexGrow: 1 }}>\r\n\r\n            {renderer.renderElement(event)}\r\n        </div>\r\n        <div style={{ textAlign: 'right' }}>\r\n            <CommentEditorModal addComment={content => { commentUtils.add(content); onChange(); }} />\r\n            <Icon name='checkmark' color={status === 'completed' ? 'green' : undefined} onClick={onClick} />\r\n            <CommentList comments={commentUtils.list()} deleteComment={comment => { commentUtils.remove(comment); onChange() }} renderer={renderer} />\r\n        </div>\r\n    </div>\r\n}\r\n","import { ContentBlock, ContentState, genKey, Modifier, SelectionState } from \"draft-js\";\r\nimport { DOMElement } from \"./DomUtils\";\r\n\r\nconst lastPos = (state: ContentState): SelectionState => {\r\n    const len = state.getLastBlock().getLength();\r\n    return createSelection(state, len, len);\r\n}\r\n\r\nconst createSelection = (state: ContentState, start: number, end: number) => {\r\n    let selection = SelectionState.createEmpty(state.getLastBlock().getKey());\r\n    return selection.merge({ anchorOffset: start, focusOffset: end });\r\n}\r\n\r\nconst addEntityToSelection = (state: ContentState, type: string, data: any, selection: SelectionState) => {\r\n    console.log('adding entity', type, data, selection);\r\n    let ret = state;\r\n    ret = ret.createEntity(type, 'MUTABLE', data);\r\n    const entityKey = ret.getLastCreatedEntityKey();\r\n    console.log(entityKey);\r\n    ret = Modifier.applyEntity(ret, selection, entityKey);\r\n    return ret;\r\n\r\n}\r\n\r\nconst addEntity = (state: ContentState, type: string, data: any, start: number, end: number): ContentState => {\r\n    return addEntityToSelection(state, type, data, createSelection(state, start, end));\r\n}\r\n\r\nconst addBlock = (state: ContentState): ContentState => {\r\n    console.log('creating new block');\r\n    const block = new ContentBlock({\r\n        key: genKey(),\r\n        type: 'paragraph',\r\n        text: '',\r\n    });\r\n    const blockMap = state.getBlockMap().merge({ [block.getKey()]: block }).toOrderedMap();\r\n    return state.merge({ blockMap }) as ContentState;\r\n}\r\n\r\nconst processElement = (elem: DOMElement, state: ContentState, contentsOnly: boolean, block?: ContentBlock): ContentState => {\r\n    console.log('processing', elem, contentsOnly, block);\r\n    let ret = state;\r\n    if (elem.type === 'text') {\r\n        console.log('adding text', elem.text);\r\n        if (!block) {\r\n            ret = addBlock(ret);\r\n        }\r\n        return Modifier.insertText(ret, lastPos(ret), elem.text as string);\r\n    } else if (elem.elements) {\r\n        if ((elem.name === 'p' || !block) && !contentsOnly) {\r\n            ret = addBlock(ret);\r\n        }\r\n        elem.elements.forEach(e => {\r\n            console.log('adding', e, elem);\r\n            const start = ret.getLastBlock()?.getLength() ?? 0;\r\n            ret = processElement(e, ret, false, ret.getLastBlock());\r\n            const end = ret.getLastBlock().getLength();;\r\n            if (e.name && e.name !== 'p') {\r\n                ret = addEntity(ret, e.name, e.attributes, start, end);\r\n            }\r\n        });\r\n        return ret;\r\n    }\r\n    return ret;\r\n}\r\n\r\nconst blockToElement = ($parent: DOMElement, state: ContentState, block: ContentBlock): DOMElement => {\r\n    const ret: DOMElement = {\r\n        type: 'element',\r\n        name: 'p',\r\n        $parent,\r\n        elements: []\r\n    };\r\n    const text = block.getText();\r\n    block.findEntityRanges(() => true, (start, end) => {\r\n        const entityKey = block.getEntityAt(start);\r\n        const textNode: DOMElement = {\r\n            type: 'text',\r\n            text: text.substring(start, end),\r\n            $parent\r\n        };\r\n        if (entityKey) {\r\n            const entity = state.getEntity(entityKey);\r\n            ret.elements?.push({\r\n                type: 'element',\r\n                name: entity.getType(),\r\n                attributes: entity.getData(),\r\n                elements: [textNode],\r\n                $parent: ret\r\n            });\r\n        } else {\r\n            ret.elements?.push(textNode);\r\n        }\r\n    });\r\n    return ret;\r\n}\r\n\r\nconst toElements = (state: ContentState, $parent: DOMElement): Array<DOMElement> => {\r\n    const ret = state.getBlocksAsArray().map(block => blockToElement($parent, state, block));\r\n    if (ret.length === 1) {\r\n        return ret[0].elements ?? [];\r\n    }\r\n    return ret;\r\n}\r\n\r\nexport const EditorUtils = {\r\n    processElement,\r\n    toElements,\r\n    addEntity,\r\n    addEntityToSelection\r\n}","import { EditorState, Modifier } from 'draft-js';\r\nimport React, { useState } from 'react';\r\nimport { Button, Dropdown, Input, Label, Modal } from 'semantic-ui-react';\r\nimport { DOMElement, DomUtils } from '../../utils/DomUtils';\r\nimport { EditorUtils } from '../../utils/EditorUtils';\r\n\r\nconst { addEntityToSelection } = EditorUtils;\r\n\r\n\r\nexport const EditingButtons: React.FC<{ editorState: EditorState; setEditorState(s: EditorState): unknown, root: DOMElement }> = ({ editorState, setEditorState, root }) => {\r\n\r\n    const [editorPopup, setEditorPopup] = useState<string>();\r\n    const [editedValue, setEditedValue] = useState<Record<string, string>>({});\r\n\r\n    function addTag(name: string, attrs?: Record<string, string>) {\r\n        const selection = editorState.getSelection();\r\n        const newContent = addEntityToSelection(editorState.getCurrentContent(), name, attrs, selection);\r\n        setEditorState(EditorState.push(editorState, newContent, 'apply-entity'));\r\n    }\r\n\r\n    function findTargets(type: string): Array<{ key: string, text: string, value: string }> {\r\n        return DomUtils.findElementsByName(root, type).filter(e => DomUtils.attr(e, 'id')).map(e => ({ key: DomUtils.attr(e, 'id'), value: DomUtils.attr(e, 'id'), text: DomUtils.childText(e, 'name') }));\r\n    }\r\n\r\n    function findScenes(): Array<{ key: string, text: string, value: string }> {\r\n        return DomUtils.findElementsByName(root, 'scene').map(e => ({ key: DomUtils.attr(e, 'id'), value: DomUtils.attr(e, 'id'), text: DomUtils.attr(e, 'title') }));\r\n    }\r\n\r\n    return <>\r\n        <Modal open={editorPopup !== undefined} onClose={() => setEditorPopup(undefined)}>\r\n            <Modal.Content>\r\n                {editorPopup === 'roll' && <>\r\n                    <Input labelPosition='left' value={editedValue.details ?? ''} onChange={e => setEditedValue({ details: e.target.value })}>\r\n                        <Label pointing='right' basic>Dobás</Label>\r\n                        <input />\r\n                    </Input>\r\n                    <Button primary onClick={() => {\r\n                        addTag('roll', editedValue);\r\n                        setEditedValue({});\r\n                        setEditorPopup(undefined)\r\n                    }\r\n                    }>OK</Button>\r\n                </>}\r\n                {(editorPopup === 'character' || editorPopup === 'item') && <>\r\n                    <Dropdown\r\n                        fluid\r\n                        search\r\n                        selection\r\n                        value={editedValue.ref}\r\n                        options={findTargets(editorPopup)}\r\n                        onChange={(e, data) => setEditedValue({ ref: data.value?.toString() ?? '' })} />\r\n                    <Button primary onClick={() => {\r\n                        addTag(editorPopup, editedValue);\r\n                        setEditedValue({});\r\n                        setEditorPopup(undefined)\r\n                    }\r\n                    }>OK</Button>\r\n                </>}\r\n                {(editorPopup === 'jump') && <>\r\n                    <Dropdown\r\n                        fluid\r\n                        search\r\n                        selection\r\n                        value={editedValue.ref}\r\n                        options={findScenes()}\r\n                        onChange={(e, data) => setEditedValue({ scene: data.value?.toString() ?? '' })} />\r\n                    <Button primary onClick={() => {\r\n                        addTag(editorPopup, editedValue);\r\n                        setEditedValue({});\r\n                        setEditorPopup(undefined)\r\n                    }\r\n                    }>OK</Button>\r\n                </>}\r\n                {editorPopup === 'setting' && <>\r\n                    <div>\r\n                        <Input labelPosition='left' value={editedValue.map ?? ''} onChange={e => setEditedValue({ ...editedValue, map: e.target.value })}>\r\n                            <Label pointing='right' basic>Térkép link</Label>\r\n                            <input />\r\n                        </Input>\r\n                    </div>\r\n                    <div>\r\n                        <Input labelPosition='left' value={editedValue.description ?? ''} onChange={e => setEditedValue({ ...editedValue, description: e.target.value })}>\r\n                            <Label pointing='right' basic>Leírás link</Label>\r\n                            <input />\r\n                        </Input>\r\n                    </div>\r\n                    <Button primary onClick={() => {\r\n                        addTag('setting', editedValue);\r\n                        setEditedValue({});\r\n                        setEditorPopup(undefined)\r\n                    }\r\n                    }>OK</Button>\r\n                </>}\r\n            </Modal.Content>\r\n        </Modal>\r\n        <Button onClick={() => addTag('reward')} icon='trophy'></Button>\r\n        <Button onClick={() => setEditorPopup('roll')} icon='cube'></Button>\r\n        <Button onClick={() => setEditorPopup('setting')} icon='map marker alternate'></Button>\r\n        <Button onClick={() => setEditorPopup('character')} icon='user outline'></Button>\r\n        <Button onClick={() => setEditorPopup('item')} icon='gift'></Button>\r\n        <Button onClick={() => setEditorPopup('jump')} icon='paper plane outline'></Button>\r\n        <Button floated='right' onClick={() => {\r\n            const newContent = Modifier.applyEntity(editorState.getCurrentContent(), editorState.getSelection(), null);\r\n\r\n            setEditorState(EditorState.push(editorState, newContent, 'apply-entity'));\r\n        }} icon='remove circle'></Button>\r\n\r\n    </>;\r\n}","import React, { useState } from 'react';\r\nimport { Button } from 'semantic-ui-react';\r\nimport { DOMElement, DomUtils } from '../utils/DomUtils';\r\nimport { EventEditor } from './editor/EventEditor';\r\n\r\nexport interface EditableTextProps {\r\n    elem?: DOMElement | null;\r\n    root: DOMElement;\r\n    onChange: (elemt: DOMElement) => unknown;\r\n    create: () => unknown;\r\n    readOnly: boolean;\r\n}\r\n\r\nexport const EditableNode: React.FC<EditableTextProps> = ({ elem, root, onChange, children, create, readOnly }) => {\r\n    const [edited, setEdited] = useState<boolean>(false);\r\n\r\n    if (!readOnly) {\r\n        if (!elem) {\r\n            return <Button size='mini' onClick={() => { create(); setTimeout(() => setEdited(true), 0) }}>Create</Button>\r\n        }\r\n\r\n        if (!edited && !DomUtils.text(elem)) {\r\n            return <Button size='mini' onClick={() => setEdited(true)}>Edit</Button>\r\n        }\r\n        if (edited) {\r\n            return <EventEditor elem={elem} root={root} onFinished={res => { if (res) { onChange(elem); } setEdited(false) }} />\r\n        }\r\n    }\r\n    return <div onClick={() => setEdited(true)}>{children}</div>;\r\n\r\n}","import { DomUtils } from '../DomUtils';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const EventRenderer: RendererComponent = ({ children, elem, switchToScene }) => {\r\n    const role = DomUtils.attr(elem, 'role').toString() || 'normal';\r\n\r\n    if (role === 'background') {\r\n        return <i>{children}</i>;\r\n    } else if (role === 'speech') {\r\n        return <blockquote>{children}</blockquote>;\r\n    } else {\r\n        return <>{children}</>;\r\n    }\r\n}","import { Icon } from 'semantic-ui-react';\r\nimport { DomUtils } from '../DomUtils';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const JumpRenderer: RendererComponent = ({ children, elem, switchToScene }) => <><Icon name='paper plane outline' fitted /> <em style={{ cursor: 'pointer' }} onClick={() => switchToScene(DomUtils.attr(elem, 'scene'))}>{children}</em></>;","import { DomUtils } from '../DomUtils';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const LanguageRenderer: RendererComponent = ({ children, elem }) => {\r\n    const level = DomUtils.attr(elem, 'level');\r\n    return <>{children} { level ? <em>({level})</em> : ''}</>;\r\n}","import { RendererComponent } from '../RenderUtils';\r\n\r\nexport const ParagraphRenderer: RendererComponent = ({ children }) => (<p>{children}</p>);","import React from 'react';\r\nimport { Icon } from 'semantic-ui-react';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const RewardRenderer: RendererComponent = ({ children }) => <><Icon name='trophy' fitted /> <strong>{children}</strong></>;","import React from 'react';\r\nimport { Icon, Popup } from 'semantic-ui-react';\r\nimport { DomUtils } from '../DomUtils';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const RollRenderer: RendererComponent = ({ children, elem }) => {\r\n    const details = DomUtils.attr(elem, 'details');\r\n    if (details) {\r\n        return <Popup hoverable trigger={<span><Icon name='cube' fitted /> <strong>{children}</strong></span>} wide>\r\n            <Popup.Content>\r\n                {details}\r\n            </Popup.Content>\r\n        </Popup>\r\n    } else {\r\n        return <><Icon name='cube' fitted /> <strong>{children}</strong></>;\r\n    }\r\n}","import { Icon } from 'semantic-ui-react';\r\nimport { DomUtils } from '../DomUtils';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const SettingRenderer: RendererComponent = ({ children, elem }) => {\r\n    const map = DomUtils.attr(elem, 'map');\r\n    const description = DomUtils.attr(elem, 'description');\r\n\r\n    return <>\r\n        <Icon title={map ? 'Térkép' : undefined} style={map ? { cursor: 'pointer' } : {}} name='map marker alternate' onClick={() => map && window.open(map as string, '_blank')} />\r\n        <strong title={description ? 'Leírás' : undefined} style={description ? { cursor: 'pointer' } : {}} onClick={() => description && window.open(description as string, '_blank')}>{children}</strong>\r\n    </>\r\n}","import React, { ReactNode } from 'react';\r\nimport { Button, Card, CardGroup, Icon, Popup, SemanticICONS, Table } from 'semantic-ui-react';\r\nimport { EditableNode } from '../components/EditableNode';\r\nimport { DOMElement, DomUtils } from './DomUtils';\r\nimport { EventRenderer } from './inlinerenderers/EventRenderer';\r\nimport { JumpRenderer } from './inlinerenderers/JumpRenderer';\r\nimport { LanguageRenderer } from './inlinerenderers/LanguageRenderer';\r\nimport { ParagraphRenderer } from './inlinerenderers/ParagraphRenderer';\r\nimport { RewardRenderer } from './inlinerenderers/RewardRenderer';\r\nimport { RollRenderer } from './inlinerenderers/RollRenderer';\r\nimport { SettingRenderer } from './inlinerenderers/SettingRenderer';\r\n\r\nexport const STORY_TAG_ICONS: Record<string, SemanticICONS> = {\r\n    setting: 'map marker alternate',\r\n    roll: 'cube',\r\n    reward: 'trophy',\r\n    character: 'user outline',\r\n    item: 'gift',\r\n    jump: 'paper plane outline',\r\n    '': 'question'\r\n}\r\n\r\nexport type RendererComponent = React.FC<{ elem: DOMElement; switchToScene: (id: string) => unknown }>;\r\n\r\n\r\n\r\nconst StoryElement: React.FC<{ elem: DOMElement | null, root: DOMElement, switchToScene: (id: string) => unknown }> = ({ elem, root, switchToScene }) => {\r\n    if (!elem) {\r\n        return <></>;\r\n    }\r\n    if (elem.type === 'text') {\r\n        return <>{elem.text}</>;\r\n    }\r\n    const contents = <>\r\n        {elem.elements?.map(e => <StoryElement elem={e} root={root} switchToScene={switchToScene} />)}\r\n    </>;\r\n    switch (elem.name) {\r\n        case 'p': return <ParagraphRenderer switchToScene={switchToScene} elem={elem}>{contents}</ParagraphRenderer>\r\n        case 'setting': return <SettingRenderer switchToScene={switchToScene} elem={elem}>{contents}</SettingRenderer>\r\n        case 'roll': return <RollRenderer switchToScene={switchToScene} elem={elem}>{contents}</RollRenderer>\r\n        case 'reward': return <RewardRenderer switchToScene={switchToScene} elem={elem}>{contents}</RewardRenderer>\r\n        case 'jump': return <JumpRenderer switchToScene={switchToScene} elem={elem}>{contents}</JumpRenderer>\r\n        case 'langauge': return <LanguageRenderer switchToScene={switchToScene} elem={elem}>{contents}</LanguageRenderer>\r\n        case 'event': return <EventRenderer switchToScene={switchToScene} elem={elem}>{contents}</EventRenderer>\r\n        case 'character':\r\n        case 'item':\r\n            {\r\n                const target = DomUtils.attr(elem, 'ref').toString();\r\n                const targetElem = DomUtils.findById(root, elem.name, target);\r\n                if (targetElem) {\r\n                    const targetIcon: SemanticICONS = targetElem.name === 'character' ? 'user outline' : 'gift';\r\n                    return <Popup hoverable trigger={<span><Icon name={targetIcon} fitted /> <strong>{contents}</strong></span>} wide>\r\n                        <Popup.Content>\r\n                            <StoryCard tag={targetElem} root={root} switchToScene={switchToScene} readOnly={true} save={() => { throw new Error('edit not implemented') }} />\r\n                        </Popup.Content>\r\n                    </Popup>\r\n                }\r\n                return contents;\r\n            } case 'language': {\r\n                const level = DomUtils.attr(elem, 'level');\r\n                return <>{contents} { level ? <em>({level})</em> : ''}</>;\r\n            }\r\n        default: {\r\n            return contents;\r\n        }\r\n    }\r\n}\r\n\r\nconst StoryCard: React.FC<{ tag: DOMElement, root: DOMElement, switchToScene: (id: string) => unknown, save: () => unknown, readOnly: boolean }> = ({ tag, root, switchToScene, save, readOnly }) => {\r\n    if (tag.name === 'character') {\r\n        return <CharacterCard save={save} elem={tag} root={root} switchToScene={switchToScene} readOnly={readOnly} />\r\n    }\r\n    if (tag.name === 'item') {\r\n        return <ItemCard save={save} elem={tag} root={root} switchToScene={switchToScene} readOnly={readOnly} />\r\n    }\r\n    return null;\r\n}\r\n\r\nconst TableRow: React.FC<{ label: string, elem: DOMElement | null, root: DOMElement, switchToScene: (id: string) => unknown, save: () => unknown, create: () => unknown, readOnly: boolean }> = ({ label, elem, root, switchToScene, save, create, readOnly }) => {\r\n    return <Table.Row>\r\n        <Table.Cell>{label}</Table.Cell>\r\n        <Table.Cell><EditableNode readOnly={readOnly} elem={elem} root={root} onChange={save} create={create}><StoryElement elem={elem} root={root} switchToScene={switchToScene} /></EditableNode> </Table.Cell>\r\n    </Table.Row>;\r\n}\r\n\r\n\r\n\r\nconst CharacterCard: React.FC<{ elem: DOMElement, root: DOMElement, switchToScene: (id: string) => unknown, save: () => unknown, readOnly: boolean }> = ({ elem, root, switchToScene, save, readOnly }) => {\r\n\r\n    const NestedTableRow: React.FC<{ name: string, parent: DOMElement, label: string }> = ({ name, parent, label }) => {\r\n        const elems = DomUtils.findElementsByName(parent, name);\r\n        const [first, ...rest] = elems;\r\n        return <>\r\n            <Table.Row key={`${name}-first`}>\r\n                <Table.Cell rowSpan={elems.length + 1}>{label}</Table.Cell>\r\n                <Table.Cell>\r\n                    <EditableNode readOnly={readOnly} elem={first} root={root} onChange={save} create={() => { DomUtils.addChild(parent, name); save() }}>\r\n                        <Button size='tiny' basic floated='right' icon='delete' onClick={() => { DomUtils.deleteChild(parent, first); save(); }} />\r\n                        <StoryElement elem={first} root={root} switchToScene={switchToScene} />\r\n                    </EditableNode>\r\n                </Table.Cell>\r\n            </Table.Row>\r\n            {rest.map((r, i) => <Table.Row key={`${name}-${i}`}><Table.Cell>\r\n                <EditableNode readOnly={readOnly} elem={r} root={root} onChange={save} create={() => { throw new Error('not applicable') }}>\r\n                    {!readOnly && <Button size='tiny' basic floated='right' icon='delete' onClick={() => { DomUtils.deleteChild(parent, r); save(); }} />}\r\n                    <StoryElement elem={r} root={root} switchToScene={switchToScene} />\r\n                </EditableNode>\r\n\r\n            </Table.Cell></Table.Row>)}\r\n            {first && !readOnly && <Table.Row key={`${name}-plus`}><Table.Cell><Button basic size='tiny' onClick={() => { DomUtils.addChild(parent, name); save() }} icon='plus' /></Table.Cell></Table.Row>}\r\n        </>;\r\n    }\r\n\r\n    const Row: React.FC<{ label: string, name: string }> = ({ label, name }) => <TableRow\r\n        key={name}\r\n        save={save}\r\n        label={label}\r\n        readOnly={readOnly}\r\n        elem={DomUtils.child(elem, name)}\r\n        create={() => { DomUtils.addChild(elem, name); save() }}\r\n        root={root}\r\n        switchToScene={switchToScene} />\r\n\r\n    return <Table definition striped columns={2} structured>\r\n        <Table.Body>\r\n            <Row label='Név' name='name' />\r\n            <Row label='Faj' name='race' />\r\n            <Row label='Jellem' name='alignment' />\r\n            <Row label='Kaszt' name='class' />\r\n            <Row label='Szülőföld' name='origin' />\r\n            <NestedTableRow parent={elem} name='language' label='Nyelvek' />\r\n            <Row label='Kinézet' name='looks' />\r\n            <Row label='Viselkedés' name='behaviour' />\r\n            <NestedTableRow parent={elem} name='loot' label='Felszerelés' />\r\n        </Table.Body>\r\n    </Table>;\r\n}\r\n\r\n\r\nconst ItemCard: React.FC<{ elem: DOMElement, root: DOMElement, switchToScene: (id: string) => unknown, save: () => unknown, readOnly: boolean }> = ({ elem, root, switchToScene, save, readOnly }) => {\r\n\r\n    const Row: React.FC<{ label: string, name: string }> = ({ label, name }) => <TableRow\r\n        key={name}\r\n        save={save}\r\n        label={label}\r\n        readOnly={readOnly}\r\n        elem={DomUtils.child(elem, name)}\r\n        create={() => { DomUtils.addChild(elem, name); save() }}\r\n        root={root}\r\n        switchToScene={switchToScene} />\r\n\r\n\r\n    return <Table definition striped columns={2}>\r\n        <Table.Body>\r\n            <Row label='Név' name='name' />\r\n            <Row label='Érték' name='value' />\r\n            <Table.Row>\r\n                <Table.Cell colSpan={2}>\r\n                    <EditableNode\r\n                        readOnly={readOnly}\r\n                        elem={DomUtils.child(elem, 'description')}\r\n                        root={root}\r\n                        onChange={save}\r\n                        create={() => { DomUtils.addChild(elem, 'description'); save() }}>\r\n                        <StoryElement elem={DomUtils.child(elem, 'description')} root={root} switchToScene={switchToScene} />\r\n                    </EditableNode>\r\n                </Table.Cell>\r\n            </Table.Row>\r\n        </Table.Body>\r\n    </Table>;\r\n}\r\n\r\nconst StoryCards: React.FC<{ root: DOMElement, name: string, switchToScene: (id: string) => unknown, save: () => unknown }> = ({ root, name, switchToScene, save }) => {\r\n    const cards = DomUtils.findElementsByName(root, name).filter(e => !e.attributes?.ref);\r\n    return <CardGroup itemsPerRow={5}>\r\n        {cards.map(c => <Card raised key={DomUtils.attr(c, 'id')}>\r\n            <Card.Content>\r\n                <Card.Header>{DomUtils.childText(c, 'name')}\r\n                    <Button floated='right' icon='delete' color='red'\r\n                        disabled={DomUtils.findReferences(root, c).length > 0}\r\n                        onClick={() => {\r\n                            DomUtils.deleteChild(c.$parent, c);\r\n                            save();\r\n                        }} />\r\n                </Card.Header>\r\n                <Card.Meta>\r\n                    <StoryCard readOnly={false} save={save} tag={c} root={root} switchToScene={switchToScene} />\r\n                </Card.Meta>\r\n            </Card.Content>\r\n        </Card>\r\n        )}\r\n    </CardGroup>\r\n}\r\n\r\nexport interface Renderer {\r\n    renderElement: (elem: DOMElement) => ReactNode\r\n    renderCards: (name: string, save: () => unknown) => ReactNode\r\n}\r\n\r\nconst createRenderer = (root: DOMElement, switchScene: (id: string) => unknown): Renderer => {\r\n    return {\r\n        renderElement: elem => <StoryElement elem={elem} root={root} switchToScene={switchScene} />,\r\n        renderCards: (name, save) => <StoryCards save={save} root={root} name={name} switchToScene={switchScene} />\r\n    }\r\n}\r\n\r\nexport const RenderUtils = {\r\n    createRenderer\r\n}","import { ContentState } from 'draft-js';\r\nimport React from 'react';\r\nimport { Icon, SemanticICONS } from 'semantic-ui-react';\r\nimport { STORY_TAG_ICONS } from '../../utils/RenderUtils';\r\n\r\nexport type DraftDecoratorComponentProps = {\r\n    contentState: ContentState,\r\n    decoratedText: string,\r\n    end: number,\r\n    // Many folks mistakenly assume that there will always be an 'entityKey'\r\n    // passed to a DecoratorComponent.\r\n    // To find the `entityKey`, Draft calls\r\n    // `contentBlock.getEntityKeyAt(leafNode)` and in many cases the leafNode does\r\n    // not have an entityKey. In those cases the entityKey will be null or\r\n    // undefined. That's why `getEntityKeyAt()` is typed to return `?string`.\r\n    // See https://github.com/facebook/draft-js/blob/2da3dcb1c4c106d1b2a0f07b3d0275b8d724e777/src/model/immutable/BlockNode.js#L51\r\n    entityKey?: string,\r\n    offsetKey: string,\r\n    start: number,\r\n};\r\n\r\n\r\n\r\nexport const IconComponent: React.FC<DraftDecoratorComponentProps> = ({ offsetKey, children, contentState, entityKey }) => {\r\n    const entity = entityKey ? contentState.getEntity(entityKey) : null;\r\n    const icon: SemanticICONS = STORY_TAG_ICONS[entity?.getType() ?? ''];\r\n    return <>\r\n        <span\r\n            style={{ fontWeight: 'bold' }}\r\n            data-offset-key={offsetKey}\r\n        >\r\n            <Icon name={icon} fitted />\r\n            {children}\r\n        </span>\r\n    </>;\r\n};","import React from 'react';\r\nimport { Dropdown, DropdownItemProps, Label } from 'semantic-ui-react';\r\nimport { ROLE_ICONS } from '../StoryEvent';\r\n\r\nconst options: Array<DropdownItemProps> = Object.keys(ROLE_ICONS).map(role => ({\r\n    key: role,\r\n    value: role,\r\n    text: role,\r\n    icon: ROLE_ICONS[role]\r\n}));\r\n\r\nexport const EventRowSelector: React.FC<{ role?: string, onRoleSelected(role?: string): unknown }> = ({ role, onRoleSelected }) => (\r\n    <>\r\n        <Label pointing='right'>\r\n            Event role:\r\n        </Label>\r\n        <Dropdown\r\n            placeholder='Select Role'\r\n            labeled\r\n            selection\r\n            value={role}\r\n            onChange={(e, { value }) => { onRoleSelected(value as string) }}\r\n            options={options}\r\n        >\r\n        </Dropdown>\r\n    </>\r\n)","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { CompositeDecorator, ContentState, Editor, EditorState, getDefaultKeyBinding } from 'draft-js';\r\nimport 'draft-js/dist/Draft.css';\r\nimport { Button, Label, Segment } from 'semantic-ui-react';\r\nimport { EditorUtils } from '../../utils/EditorUtils';\r\nimport { EditingButtons } from './EditingButtons';\r\nimport { IconComponent } from './IconComponent';\r\nimport { DOMElement, DomUtils } from '../../utils/DomUtils';\r\nimport { EventRowSelector } from './EventRoleSelector';\r\nimport { NumberInput } from '../../../components/NumberInput';\r\n\r\nconst { processElement, toElements } = EditorUtils;\r\n\r\n\r\ninterface EventEditorProps { elem: DOMElement, onFinished(save: boolean): unknown, root: DOMElement, eventEdited?: boolean };\r\n\r\nexport const EventEditor: React.FC<EventEditorProps> = ({ elem, onFinished, root, eventEdited }) => {\r\n    const [editorState, setEditorState] = useState(\r\n        () => EditorState.createEmpty(),\r\n    );\r\n    const [eventRole, setEventRole] = useState<string | undefined>(eventEdited ? DomUtils.attr(elem, 'role') : undefined);\r\n    const [eventDate, setEventDate] = useState<string | undefined>(eventEdited ? DomUtils.attr(elem, 'date') : undefined);\r\n\r\n    const onEscape = useCallback(() => {\r\n        onFinished(false);\r\n    }, [onFinished]);\r\n\r\n    useEffect(() => {\r\n        const state = processElement(elem, ContentState.createFromBlockArray([]), true);\r\n        const inlineDecorator = new CompositeDecorator([\r\n            {\r\n                strategy: (block, callback, _state) => {\r\n                    block.findEntityRanges(c => !!c.getEntity(), callback);\r\n                },\r\n                component: IconComponent\r\n            }\r\n        ]);\r\n        setEditorState(EditorState.createWithContent(state, inlineDecorator));\r\n    }, [elem, eventEdited]);\r\n\r\n\r\n    return <>\r\n        {eventEdited && <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n            <span>\r\n                <EventRowSelector role={eventRole} onRoleSelected={setEventRole} />\r\n            </span>\r\n            <span>\r\n                <NumberInput icons={false} min={-100000} max={100000} value={Number(eventDate || 0)} onChange={v => setEventDate(String(v))} />\r\n                <Label pointing='left'>Nap</Label>\r\n            </span>\r\n        </div>\r\n        }\r\n        <EditingButtons editorState={editorState} setEditorState={setEditorState} root={root} />\r\n        <Segment>\r\n            <Editor editorState={editorState} onChange={setEditorState} keyBindingFn={e => {\r\n                if (e.key === 'Escape') {\r\n                    return 'my-escape';\r\n                }\r\n                return getDefaultKeyBinding(e);\r\n            }}\r\n                handleKeyCommand={c => {\r\n                    if (c === 'my-escape') {\r\n                        onEscape();\r\n                        return 'handled';\r\n                    }\r\n                    return 'not-handled';\r\n                }}\r\n\r\n            />\r\n        </Segment>\r\n        <Button floated='left' primary onClick={() => {\r\n            if (eventEdited) {\r\n                DomUtils.attr(elem, 'role', eventRole);\r\n                if (eventDate !== undefined) {\r\n                    DomUtils.attr(elem, 'date', eventDate.toString());\r\n                }\r\n            }\r\n            elem.elements = toElements(editorState.getCurrentContent(), elem);\r\n            console.log('edited', DomUtils.print(elem))\r\n            onFinished(true);\r\n        }\r\n        }>Save</Button>\r\n        <Button floated='right' circular color='red' basic content='Cancel' onClick={() => onFinished(false)} />\r\n    </>;\r\n}\r\n","import React from 'react';\r\nimport { Modal } from 'semantic-ui-react';\r\nimport { DOMElement, DomUtils } from '../utils/DomUtils';\r\nimport { EventEditor } from './editor/EventEditor';\r\nimport { EventEditingState } from './StoryScene';\r\n\r\nexport interface EventEditorModalProps {\r\n    onEditingFinished: (save: boolean) => unknown;\r\n    editedEvent?: EventEditingState;\r\n    root: DOMElement;\r\n}\r\n\r\nexport const EventEditorModal: React.FC<EventEditorModalProps> = ({ editedEvent, onEditingFinished, root }) => {\r\n    return <Modal style={{ padding: '1em' }} open={editedEvent !== undefined} onClose={() => onEditingFinished(false)}>\r\n        <Modal.Content>\r\n            <div>\r\n                {editedEvent && <EventEditor elem={editedEvent.elem} onFinished={save => {\r\n                    if (save && editedEvent.insert) {\r\n                        DomUtils.addChildElement(editedEvent.elem.$parent as DOMElement, editedEvent.elem, editedEvent.anchor as DOMElement, editedEvent.insert);\r\n                    }\r\n                    onEditingFinished(save);\r\n                }\r\n                } root={root} eventEdited />}\r\n            </div>\r\n        </Modal.Content>\r\n    </Modal>;\r\n}","import React from 'react';\r\nimport { Popup } from 'semantic-ui-react';\r\n\r\nexport interface TimelineEvent {\r\n    date: number;\r\n    content: JSX.Element;\r\n}\r\n\r\nexport const Timeline: React.FC<{ events: Array<TimelineEvent>; width: number }> = ({ events, width }) => {\r\n\r\n    if (events.length < 2) {\r\n        return null;\r\n    }\r\n\r\n    const orderedEvents = events.sort((a, b) => a.date - b.date);\r\n\r\n\r\n    const heights = [...Array(orderedEvents.length - 1).fill(0).map((_, i) => orderedEvents[i + 1].date - orderedEvents[i].date), 0];\r\n\r\n    const unitHeight = 100 / heights.reduce((acc, curr) => acc + curr, 0);\r\n\r\n    const TimelineUnit: React.FC<{ height: number, event: TimelineEvent, position: 'left' | 'right' }> = ({ height, event, position }) => {\r\n        const crossbar = () => <div style={{ backgroundColor: 'black', position: 'relative', top: 0, left: '-10px', width: `${20 + width}px`, height: '1px' }}>\r\n            &nbsp;\r\n            </div>\r\n        return <div style={{ flexBasis: `${height}%`, width: `${width}px`, backgroundColor: 'black' }}>\r\n            <Popup style={{ zIndex: 0 }} trigger={crossbar()} open={true} position={position === 'left' ? 'left center' : 'right center'} pinned wide>\r\n                {event.content}\r\n            </Popup>\r\n            <Popup style={{ border: 'none', boxShadow: 'none', zIndex: 0 }} trigger={crossbar()} open={true} position={position === 'left' ? 'right center' : 'left center'} pinned basic>\r\n                {event.date}\r\n            </Popup>\r\n        </div>\r\n    }\r\n\r\n\r\n    return <div style={{ height: '1000px', alignItems: 'center', display: 'flex', flexDirection: 'column', flexWrap: 'nowrap' }}>\r\n        {heights.map((height, i) => <TimelineUnit height={height * unitHeight} event={orderedEvents[i]} position={i % 2 ? 'left' : 'right'} />)}\r\n    </div>\r\n}","import React from 'react';\r\nimport { ContextMenu } from './ContextMenu';\r\nimport { EditedEvent } from './StoryEvent';\r\n\r\nexport interface StoryContextMenuProps {\r\n    setEditedEvent: (editedEvent: EditedEvent) => unknown;\r\n    onClose: () => unknown;\r\n    event: React.MouseEvent;\r\n}\r\n\r\nexport const StoryContextMenu: React.FC<StoryContextMenuProps> = ({ setEditedEvent, children, onClose, event }) => (\r\n\r\n\r\n    <ContextMenu onClose={onClose} event={event} items={[\r\n        { name: 'insertBefore', content: 'Új elem', icon: 'up arrow' },\r\n        { name: 'edit', content: 'Szerkeszt', icon: 'edit' },\r\n        { name: 'delete', content: 'Töröl', icon: 'delete' },\r\n        { name: 'insertAfter', content: 'Új elem', icon: 'down arrow' },\r\n    ]}\r\n        onClicked={item => {\r\n            setEditedEvent({ operation: item.name as any });\r\n        }}>\r\n        {children}\r\n    </ContextMenu>\r\n);","import { v4 } from 'uuid';\r\nimport { DOMElement, DomUtils } from './DomUtils';\r\n\r\nconst { attr, child, addChild, deleteChild, children, addText, findElementsByName } = DomUtils;\r\n\r\nconst ensureComments = (root: DOMElement) => {\r\n    const story = child(root, 'story');\r\n    if (!story) {\r\n        throw new Error('story is missing');\r\n    }\r\n    return child(story, 'comments') || addChild(story, 'comments');\r\n}\r\n\r\nconst addComment = (event: DOMElement, root: DOMElement, contents: string) => {\r\n    const eventId = ensureEventId(event);\r\n    const comments = ensureComments(root);\r\n    const lastComment = children(comments, 'comment').pop();\r\n    const comment = addChild(comments, 'comment', lastComment);\r\n    attr(comment, 'event', eventId);\r\n    addText(comment, contents);\r\n}\r\n\r\nconst deleteComment = (comment: DOMElement, root: DOMElement) => {\r\n    const comments = ensureComments(root);\r\n    deleteChild(comments, comment);\r\n}\r\n\r\n\r\nconst findComments = (event: DOMElement, root: DOMElement): Array<DOMElement> => {\r\n    const eventId = attr(event, 'id');\r\n    const allComments = findElementsByName(root, 'comment');\r\n    return allComments.filter(c => attr(c, 'event') === eventId);\r\n}\r\n\r\n\r\nconst ensureEventId = (event: DOMElement) => {\r\n    let id = attr(event, 'id') || v4();\r\n    attr(event, 'id', id);\r\n    return id;\r\n\r\n}\r\n\r\nexport class CommentUtils {\r\n    constructor(private readonly root: DOMElement, private readonly event: DOMElement) { }\r\n\r\n    public add = (contents: string) => addComment(this.event, this.root, contents);\r\n    public remove = (comment: DOMElement) => deleteComment(comment, this.root);\r\n    public list = (): Array<DOMElement> => findComments(this.event, this.root);\r\n\r\n}","import React, { useState } from 'react';\r\nimport { Button } from 'semantic-ui-react';\r\nimport { DOMElement, DomUtils } from '../utils/DomUtils';\r\nimport { Renderer } from '../utils/RenderUtils';\r\nimport { StoryEvent } from './StoryEvent';\r\nimport { EventEditorModal } from './EventEditorModal';\r\nimport { Timeline } from './timeline/Timeline';\r\nimport { StoryContextMenu } from './StoryContextMenu';\r\nimport { CommentUtils } from '../utils/CommentUtils';\r\n\r\nconst { attr, children } = DomUtils;\r\n\r\nexport interface EventEditingState {\r\n    insert?: 'after' | 'before',\r\n    anchor?: DOMElement,\r\n    elem: DOMElement\r\n}\r\n\r\n\r\n\r\nexport const StoryScene: React.FC<{ scene: DOMElement, renderer: Renderer, onChange: () => unknown, root: DOMElement }> = ({ scene, renderer, onChange, root }) => {\r\n    const events = children(scene, 'events')[0];\r\n    const [editedEvent, setEditedEvent] = useState<EventEditingState>();\r\n    const [contextMenu, setContextMenu] = useState<{ elem: DOMElement, event: React.MouseEvent }>();\r\n    const [displayMode, setDisplayMode] = useState<'list' | 'timeline'>('list');\r\n\r\n    return <>\r\n        {contextMenu && <StoryContextMenu setEditedEvent={event => {\r\n            if (event.operation === 'insertAfter' || event.operation === 'insertBefore') {\r\n                setEditedEvent({\r\n                    insert: event.operation === 'insertAfter' ? 'after' : 'before', elem: {\r\n                        type: 'element',\r\n                        name: 'event',\r\n                        $parent: contextMenu.elem.$parent\r\n                    }, anchor: contextMenu.elem\r\n                });\r\n            } else if (event.operation === 'delete') {\r\n                DomUtils.deleteChild(contextMenu.elem.$parent, contextMenu.elem);\r\n                onChange();\r\n            } else {\r\n                setEditedEvent({ elem: contextMenu.elem });\r\n            }\r\n        }\r\n        }\r\n            onClose={() => setContextMenu(undefined)}\r\n            event={contextMenu.event}\r\n        />}\r\n        <EventEditorModal\r\n            editedEvent={editedEvent}\r\n            onEditingFinished={() => { setEditedEvent(undefined); onChange(); }}\r\n            root={root}\r\n        />\r\n        <div>\r\n            {displayMode === 'list' && events?.elements?.map(e => <StoryEvent\r\n                event={e}\r\n                renderer={renderer}\r\n                onContextMenu={event => setContextMenu({ elem: e, event })}\r\n                onEdit={() => setEditedEvent({ elem: e })}\r\n                onClick={() => {\r\n                    const status = attr(e, 'status');\r\n                    attr(e, 'status', status ? null : 'completed');\r\n                    onChange();\r\n                }}\r\n                commentUtils={new CommentUtils(root, e)}\r\n                onChange={onChange}\r\n            />)}\r\n            {displayMode === 'timeline' && <Timeline width={5} events={events?.elements?.filter(e => attr(e, 'date') !== '').map(e => ({ date: Number(attr(e, 'date')), content: <>{renderer.renderElement(e)}</> })) ?? []} />}\r\n\r\n            <div style={{ backgroundColor: 'gainsboro' }}>\r\n                <Button icon='plus' onClick={() => {\r\n                    setEditedEvent({\r\n                        insert: 'after',\r\n                        elem: {\r\n                            type: 'element',\r\n                            name: 'event',\r\n                            $parent: events\r\n                        }\r\n                    });\r\n\r\n                }} content='Új elem' />\r\n                {displayMode === 'list' && <Button icon='calendar' onClick={() => setDisplayMode('timeline')} content='Idővonal' />}\r\n                {displayMode === 'timeline' && <Button icon='list' onClick={() => setDisplayMode('list')} content='Lista' />}\r\n            </div>\r\n        </div>\r\n\r\n    </>\r\n}\r\n\r\n","import fileDownload from 'js-file-download';\r\nimport React, { useState } from 'react';\r\nimport { Button, Header, Icon, Menu, Tab } from 'semantic-ui-react';\r\nimport { v4 } from 'uuid';\r\nimport { EditableText } from '../components/EditableText';\r\nimport { SceneListContextMenu } from '../components/SceneListContextMenu';\r\nimport { StoryScene } from '../components/StoryScene';\r\nimport { DOMElement, DomUtils } from '../utils/DomUtils';\r\nimport { RenderUtils } from '../utils/RenderUtils';\r\n\r\nconst { attr, findElementsByName, parse, print, convertLegacyLinks } = DomUtils;\r\n\r\nexport const StoryPage: React.FC<{ story: string, saveStory: (story: string) => unknown }> = ({ story, saveStory }) => {\r\n    const [activeScene, setActiveScene] = useState<string>();\r\n    const storyOb = parse(story);\r\n    convertLegacyLinks(storyOb);\r\n    const scenes = findElementsByName(storyOb, 'scene');\r\n    const findSceneById = (id?: string) => {\r\n        return scenes.findIndex(s => attr(s, 'id') === id);\r\n    }\r\n\r\n    const save = () => {\r\n        saveStory(print(storyOb))\r\n    }\r\n\r\n    const renderer = RenderUtils.createRenderer(storyOb, id => setActiveScene(id));\r\n    const sceneTabs = scenes.map(s => {\r\n        return {\r\n            menuItem: <Menu.Item key={attr(s, 'id')}><SceneListContextMenu onSelected={item => {\r\n                if (item === 'delete') {\r\n                    DomUtils.deleteChild(s.$parent, s);\r\n                } else {\r\n                    const scene = DomUtils.addChild(s.$parent, 'scene', s, item === 'insertAfter' ? 'after' : 'before');\r\n                    DomUtils.attr(scene, 'id', v4());\r\n                    DomUtils.attr(scene, 'title', 'Új jelenet');\r\n                    DomUtils.addChild(scene, 'events');\r\n                    setTimeout(() => setActiveScene(DomUtils.attr(scene, 'id')), 0); //workaround for Tab overwriting activeIndex straight away\r\n                }\r\n                save();\r\n            }}>\r\n                {activeScene === DomUtils.attr(s, 'id') ? <EditableText text={attr(s, 'title')} onChange={title => {\r\n                    DomUtils.attr(s, 'title', title);\r\n                    save();\r\n                }} /> : attr(s, 'title')}\r\n            </SceneListContextMenu></Menu.Item>,\r\n            render: () => <Tab.Pane>\r\n                <StoryScene\r\n                    scene={s}\r\n                    renderer={renderer}\r\n                    onChange={save}\r\n                    root={storyOb} />\r\n            </Tab.Pane>\r\n        }\r\n    });\r\n    sceneTabs.push({\r\n        menuItem: <Menu.Item key='__add'><Icon name='plus' onClick={() => {\r\n            const story: DOMElement = DomUtils.child(storyOb, 'story') as DOMElement;\r\n            const scene = DomUtils.addChild(story, 'scene', undefined, 'after');\r\n            DomUtils.attr(scene, 'id', v4());\r\n            DomUtils.attr(scene, 'title', 'Új jelenet');\r\n            DomUtils.addChild(scene, 'events');\r\n            setTimeout(() => setActiveScene(DomUtils.attr(scene, 'id')), 0); //workaround for Tab overwriting activeIndex straight away\r\n            save();\r\n\r\n        }} /></Menu.Item>,\r\n        render: () => {\r\n            return <></>;\r\n        }\r\n    })\r\n\r\n    return <>\r\n        <Button onClick={() => fileDownload(story, 'mese.xml', 'application/xml')} color='green' circular>Export</Button>\r\n        <Button onClick={() => {\r\n            const characters = DomUtils.findElementsByName(storyOb, 'characters')[0];\r\n            const character = DomUtils.addChild(characters, 'character');\r\n            DomUtils.attr(character, 'id', v4());\r\n            DomUtils.addChild(character, 'name');\r\n            DomUtils.addChild(character, 'race');\r\n            DomUtils.addChild(character, 'alignment');\r\n            DomUtils.addChild(character, 'class');\r\n            DomUtils.addChild(character, 'origin');\r\n            DomUtils.addChild(character, 'language');\r\n            DomUtils.addChild(character, 'looks');\r\n            DomUtils.addChild(character, 'behaviour');\r\n            DomUtils.addChild(character, 'loot');\r\n\r\n            save();\r\n\r\n        }} color='green' circular>Új szereplő</Button>\r\n        <Button onClick={() => {\r\n            const items = DomUtils.findElementsByName(storyOb, 'items')[0];\r\n            const item = DomUtils.addChild(items, 'item');\r\n            DomUtils.attr(item, 'id', v4());\r\n            DomUtils.addChild(item, 'name');\r\n            DomUtils.addChild(item, 'value');\r\n            DomUtils.addChild(item, 'description');\r\n\r\n            save();\r\n\r\n        }} color='green' circular>Új tárgy</Button>\r\n        <Tab activeIndex={findSceneById(activeScene)} onTabChange={(e, { activeIndex }) => activeIndex as number < scenes.length && setActiveScene(DomUtils.attr(scenes[activeIndex as number], 'id'))} panes={sceneTabs} />\r\n\r\n        <>\r\n            <Header as='h1'>Szereplők</Header>\r\n            {renderer.renderCards('character', save)}\r\n        </>\r\n        <>\r\n            <Header as='h1'>Tárgyak</Header>\r\n            {renderer.renderCards('item', save)}\r\n        </>\r\n    </>;\r\n}","import React, { useCallback, useState } from 'react';\nimport { KarakterAlkotas } from './pages/KarakterAlkotas';\nimport { Karakterlap } from './pages/Karakterlap';\nimport { useDataConnector } from './hooks/dataconnector';\nimport { Karakter, KarakterInfo } from './engine/karakter';\nimport 'semantic-ui-css/semantic.min.css'\nimport { PageHeader } from './components/PageHeader';\nimport { Kombat } from './pages/Kombat';\nimport { StoryPage } from './story/pages/StoryPage';\n\nexport type PageSelection = { page: 'karakteralkoto' | 'home' } | { page: 'karakterlap', karakter: KarakterInfo } | { page: 'kombat', category: string } | { page: 'story' }\n\n\nfunction App() {\n\n  const [page, setPage] = useState<PageSelection>({ page: 'home' });\n  const { save, list, categories, load, remove, listFajok, listFegyverek, saveFegyverek, loadStory, saveStory, listPancelok, savePancelok, clone } = useDataConnector();\n  const [currentCategory, setCurrentCategory] = useState('');\n\n  const saveKarakter = useCallback((karakter: Karakter) => {\n    save(karakter);\n    setPage({ page: 'karakterlap', karakter });\n  }, [save, setPage]);\n\n  const removeKarakter = useCallback((karakter: Karakter) => {\n    if (karakter) {\n      remove(karakter);\n      setPage({ page: 'home' });\n    }\n  }, [setPage, remove]);\n\n  const renderPage = () => {\n    switch (page.page) {\n      case 'home': return <div>Óvakodj a rotoni lomhatasaktól</div>\n      case 'kombat': return <Kombat karakterek={list(page.category).map(i => load(i))} save={save} />\n      case 'karakteralkoto': return <KarakterAlkotas save={saveKarakter} fajok={listFajok()} />\n      case 'story': return <StoryPage story={loadStory()} saveStory={saveStory} />;\n      case 'karakterlap': return <Karakterlap clone={clone} pancelok={listPancelok()} savePancelok={savePancelok} saveFegyverek={saveFegyverek} fegyverek={listFegyverek()} categories={categories()} karakter={load(page.karakter)} save={saveKarakter} remove={() => removeKarakter(page.karakter as Karakter)} />\n    }\n  };\n\n\n\n  return (\n    <div className=\"App\">\n      <PageHeader\n        categories={categories()}\n        currentCategory={currentCategory}\n        setCurrentCategory={setCurrentCategory}\n        karakter={page.page === 'karakterlap' ? page.karakter : undefined}\n        page={page}\n        setPage={ps => {\n          setPage(ps);\n          if (ps.page === 'kombat') {\n            setCurrentCategory(ps.category);\n          }\n        }}\n        save={saveKarakter}\n        karakterek={list(currentCategory)}\n        saveMese={saveStory}\n      />\n      {renderPage()}\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}