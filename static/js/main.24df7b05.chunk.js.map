{"version":3,"sources":["engine/roll.tsx","engine/dobasmatrix.tsx","engine/harc.tsx","engine/kasztok.tsx","engine/karakter.tsx","components/DobasEredmeny.tsx","components/DobasMatrixDisplay.tsx","components/NumberInput.tsx","components/PointsTable.tsx","components/Selection.tsx","components/KarakterAlkotasBackground.tsx","pages/KarakterAlkotas.tsx","components/FegyverLista.tsx","components/IntegerInput.tsx","components/FegyverEditor.tsx","components/FegyverValaszto.tsx","components/HMEloszto.tsx","components/KepzettsegLista.tsx","components/KepzettsegModal.tsx","components/PancelLista.tsx","components/PancelEditor.tsx","components/PancelValaszto.tsx","pages/Karakterlap.tsx","engine/pancel.tsx","hooks/dataconnector.tsx","components/CategoriesDropdown.tsx","components/DragAndDrop.tsx","components/KarakterImport.tsx","pages/Kocskadobo.tsx","components/KockaModal.tsx","static/magus.png","components/PageHeader.tsx","components/SzituacioSelector.tsx","components/KombatCard.tsx","pages/Kombat.tsx","story/components/EditableText.tsx","story/components/ContextMenu.tsx","story/components/SceneListContextMenu.tsx","story/utils/DomUtils.tsx","story/components/CommentEditorModal.tsx","story/components/CommentList.tsx","story/components/StoryContextMenu.tsx","story/components/StoryEvent.tsx","story/utils/EditorUtils.tsx","story/components/editor/EditingButtons.tsx","story/utils/inlinerenderers/EventRenderer.tsx","story/utils/inlinerenderers/JumpRenderer.tsx","story/utils/inlinerenderers/LanguageRenderer.tsx","story/utils/inlinerenderers/ParagraphRenderer.tsx","story/utils/inlinerenderers/RewardRenderer.tsx","story/utils/inlinerenderers/RollRenderer.tsx","story/utils/inlinerenderers/SettingRenderer.tsx","story/utils/RenderUtils.tsx","story/components/editor/IconComponent.tsx","story/components/editor/EventRoleSelector.tsx","story/components/editor/EventEditor.tsx","story/components/EventEditorModal.tsx","story/components/StoryScene.tsx","story/pages/StoryPage.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["PATTERN","random","Math","rollDice","dice","ijasz","Array","numDice","keys","map","_","rollSingle","reduce","acc","curr","value","details","res","floor","die","ceil","div","rollKf","result","max","plus","kfMod","kf","roll","tries","abs","_roll","parseDiceRoll","diceString","Number","isNaN","replace","match","groups","undefined","formatDiceRoll","DobasMatrix","values","sum","add","name","dobas","forEach","key","toString","filter","indexOf","Object","a","b","getRolls","r","clearRolls","this","HARCERTEK_DISPLAY_NAMES","FEGYVER_KEPZETTSEG","ke","te","ve","ce","FEGYVERTELEN","harcertek","tamPerKor","sebzes","FEGYVEREK","lassu","lotav","SZITUACIOK","KEPESSEG_NEV","ero","gy","ugy","ak","egs","sz","int","ae","asz","erz","FAJ_KEPESSEG","FOKASZTOK","KASZTOK","kepesseg","alapHarcertek","hm","kotelezo","szabad","epfp","ep","fp","fpPerSzint","harcos","lovag","tolvaj","pap","paplovag","folottiResz","hatar","szintlepes","karakter","szint","r1","r2","kaszt","hmHarcertek","Set","maxFp","calculateSebesulesHatrany","maxEp","calculateMGT","kepzettsegek","pancelok","valasztottPancel","pancel","find","k","nehez","mgt","calculateHarcertek","fegyver","szituaciok","fegyvertelen","okol","lofegyver","fejvadasz","kepzettseg","toLowerCase","ret","kepessegek","calculateKepessegHarcertek","sebesules","DobasEredmeny","pointing","Label","size","color","basic","NumberInput","require","default","DobasMatrixDisplay","matrix","keyMap","direction","title","editable","setValue","displayCell","constantRoll","rollString","includes","Table","Cell","allowEmptyValue","stepAmount","minValue","maxValue","onChange","e","celled","striped","Header","Row","HeaderCell","disabled","Body","Footer","definition","min","icons","style","whiteSpace","Icon","compact","onClick","width","newValue","target","test","num","parseInt","PointsTable","points","maxChange","aktChange","fluid","p","label","akt","Selection","selected","setSelected","options","structure","Button","labelPosition","as","fk","Group","vertical","tag","o","n","i","active","KarakterAlkotasBackground","fajNevek","backgroundSelection","setBackgroundSelection","Input","placeholder","error","s","manual","JSON","parse","stringify","faj","calculateKepessegek","fajok","newMatrix","KarakterAlkotas","save","useState","setMatrix","useEffect","kezi","Grid","relaxed","GridRow","columns","divided","GridColumn","floated","textAlign","secondary","primary","kar","kasztOb","id","v4","categories","fegyverek","createKarakter","FegyverLista","onSelectionChange","fegyverLista","rec","selectable","IntegerInput","convertToFormValues","convertFromFormValues","FegyverEditor","submit","cancel","form","setForm","Checkbox","fitted","toggle","checked","FegyverValaszto","saveFegyverek","selectedForDeletion","setSelectedForDeletion","editorOpen","setEditorOpen","listEditorOpen","setListEditorOpen","saveSelection","useCallback","kepzettsegSzint","addFegyverAndKepzettseg","saveDeletion","f","valasztottFegyver","Modal","trigger","onOpen","onClose","open","Content","push","negative","sort","localeCompare","idx","fIdx","findIndex","kepzettsegName","kp","HMEloszto","complete","current","setCurrent","change","he","newCurrent","colSpan","className","compare","KepzettsegLista","KepzettsegModal","modalOpen","setModalOpen","setKepzettseg","setSzint","setKp","circular","v","newKepzettseg","PancelLista","sfe","PancelEditor","PancelValaszto","savePancelok","some","every","Karakterlap","remove","ujfegyver","setUjFegyver","ujPancel","setUjPancel","kategoriak","setKategoriak","ujKategoria","setUjKategoria","torlesKerdes","setTorlesKerdes","kepessegMatrix","list","c","Confirm","onCancel","onConfirm","header","content","cancelButton","confirmButton","fileDownload","pszi","mp","PANCELOK","PREFIX","STORY_KEY","CategoriesDropdown","currentCategory","setCurrentCategory","Dropdown","item","text","Menu","Item","DragAndDrop","state","drag","dropRef","React","createRef","dragCounter","handleDrag","preventDefault","stopPropagation","handleDragIn","dataTransfer","items","length","setState","handleDragOut","handleDrop","files","props","clearData","addEventListener","removeEventListener","display","position","ref","dragPlaceholder","children","Component","KarakterImport","saveMese","l","mese","endsWith","Slider","DICE_ROLLS","PLUS","MERETEK","MOZGASOK","VISZONYOK","Kockadobo","input","setInput","setResult","useReducer","prev","elem","slice","HISTORY_LENGTH","history","addToHistory","tavolsag","meret","mozgas","viszonyok","lofegyverVedo","setLofegyverVedo","dob","setKocka","diceRoll","setPlus","floating","reverse","h","settings","step","KockaModal","kockaOpen","setKockaOpen","PageHeader","karakterek","page","setPage","tabular","Image","src","logo","category","SzituacioSelector","setSzituaciok","szituacioOptions","nev","multiple","simple","icon","renderLabel","KombatCard","forwardRef","dobasEredmeny","setDobasEredmeny","harcertekMatrix","sebzesRoll","rolls","Error","sumRolls","useImperativeHandle","rollKe","rollTe","rollCe","rollSebzes","cellContents","Card","backgroundColor","hatrany","headerColour","Description","singleLine","fegyverCsere","m","extra","Kombat","dobasEredmenyek","setDobasEredmenyek","refs","ButtonGroup","uj","flexDirection","flexWrap","alignItems","one","two","oneKe","order","margin","EditableText","editedText","setEditedText","edited","setEdited","onSubmit","transparent","autoFocus","onBlur","ContextMenu","onClicked","contextRef","useRef","setOpen","onContextMenu","left","clientX","top","clientY","right","bottom","getBoundingClientRect","height","createContextFromEvent","Popup","context","onItemClick","data","SceneListContextMenu","onSelected","findElements","root","elements","ch","concat","addChild","parent","referenceSibling","insert","newElement","type","$parent","addChildElement","child","insertIndex","referenceIndex","splice","deleteChild","deleteIndex","attr","attributes","t","join","DomUtils","addText","previousSibling","childText","findById","found","findElementsByName","str","xml2js","nativeType","trim","addParent","parentKey","convertLegacyLinks","split","events","event","print","js2xml","CommentEditorModal","addComment","kommentModal","setKommentModal","editedKomment","setEditedKomment","CommentList","comments","deleteComment","renderer","hoverable","List","wide","renderElement","StoryContextMenu","setEditedEvent","operation","ROLE_ICONS","iconForRole","role","StoryEvent","status","float","clear","lastPos","len","getLastBlock","getLength","createSelection","start","end","SelectionState","createEmpty","getKey","merge","anchorOffset","focusOffset","addEntity","entityKey","createEntity","getLastCreatedEntityKey","Modifier","applyEntity","EditorUtils","processElement","insertText","block","getText","findEntityRanges","getEntityAt","textNode","substring","entity","getEntity","getType","getData","paragraphs","first","paras","para","EditingButtons","editorState","setEditorState","editorPopup","setEditorPopup","editedValue","setEditedValue","addTag","attrs","selection","getSelection","newContent","getCurrentContent","getStartOffset","getEndOffset","EditorState","search","description","EventRenderer","switchToScene","JumpRenderer","cursor","LanguageRenderer","level","ParagraphRenderer","RewardRenderer","RollRenderer","SettingRenderer","window","STORY_TAG_ICONS","setting","reward","character","jump","StoryElement","contents","targetElem","targetIcon","StoryCard","TableRow","NestedTableRow","elems","rest","rowSpan","CharacterCard","structured","ItemCard","StoryCards","cards","CardGroup","itemsPerRow","raised","Meta","RenderUtils","switchScene","renderCards","IconComponent","offsetKey","contentState","fontWeight","data-offset-key","EventRowSelector","onRoleSelected","labeled","toElements","EventEditor","onFinished","eventRole","setEventRole","ContentState","createFromText","inlineDecorator","CompositeDecorator","strategy","callback","_state","component","createWithContent","Segment","EventEditorModal","editedEvent","onEditingFinished","anchor","StoryScene","scene","animated","comment","findComments","ensureComments","story","eventId","ensureEventId","lastComment","pop","renderCast","renderInventory","StoryPage","saveStory","activeScene","setActiveScene","storyOb","scenes","sceneTabs","menuItem","setTimeout","render","Tab","Pane","activeIndex","onTabChange","panes","App","operations","setOperations","fetch","localStorage","getItem","put","ob","setItem","all","startsWith","cat","load","info","exportMagus","console","log","importMagus","flatMap","removeItem","listFajok","listFegyverek","CONFIG_PREFIX","listPancelok","loadStory","useDataConnector","saveKarakter","removeKarakter","ps","renderPage","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.24df7b05.chunk.js","sourcesContent":["export interface DiceRoll {\n    tries: number;\n    numDice: number;\n    die: number;\n    plus: number;\n    div: number;\n    kf: boolean;\n}\n\nexport interface DiceRollResult {\n    value: number;\n    details: string;\n}\n\nconst PATTERN = /(?<numDice>\\d+)?k(?<die>\\d+)(?:\\/(?<div>\\d+))?(?<plus>[+-]\\d+)?(?:\\((?<tries>\\d+)x\\))?(?:\\+kf(?<kf>))?/;\n\nlet random = Math.random;\n\nconst _roll = (dice: DiceRoll, ijasz: boolean): DiceRollResult => {\n    let result = [...Array(dice.tries).keys()].map(_ => rollDice(dice, ijasz)).reduce((acc, curr) => ({ value: Math.max(acc.value, curr.value), details: `${acc.details ? acc.details + ' or ' : ''}(${curr.details})` }), { value: 0, details: '' });\n    result = {\n        value: result.value + dice.plus,\n        details: `${result.details}${dice.plus > 0 ? ' + ' + dice.plus : (dice.plus < 0 ? ' - ' + Math.abs(dice.plus) : '')}`\n    };\n    if (dice.kf) {\n        return rollKf(dice, result);\n    } else {\n        return result;\n    }\n\n}\n\nconst rollDice = (dice: DiceRoll, ijasz: boolean): DiceRollResult => {\n    return [...Array(dice.numDice).keys()].map(_ => rollSingle(dice, ijasz)).reduce((acc, curr) => ({ value: acc.value + curr, details: `${acc.details ? acc.details + '+' : ''}${curr}` }), { value: 0, details: '' });\n}\n\nconst rollSingle = (dice: DiceRoll, ijasz: boolean): number => {\n    let res = 0;\n    let curr = 0;\n    do {\n        curr = 1 + Math.floor(random() * dice.die);\n        res += Math.ceil(curr / dice.div);\n    } while (ijasz && curr === dice.die)\n    return res;\n}\n\nconst rollKf = (dice: DiceRoll, result: DiceRollResult): DiceRollResult => {\n    const max = dice.numDice * Math.floor(dice.die / dice.div) + dice.plus;\n    if (result.value === max) {\n        let kfMod;\n        const kf = roll('k100').value;\n        if (kf <= 20) {\n            kfMod = -roll('k6').value;\n        } else if (kf <= 50) {\n            kfMod = -1;\n        } else if (kf <= 75) {\n            kfMod = 0;\n        } else if (kf <= 95) {\n            kfMod = 1;\n        } else {\n            kfMod = 2;\n        }\n        return {\n            value: result.value + kfMod,\n            details: `${result.details} (kf: ${kf} / ${kfMod})`\n        }\n    } else {\n        return result;\n    }\n\n}\n\nexport const roll = (dice: DiceRoll | string, ijasz?: boolean): DiceRollResult => _roll(typeof dice === 'string' ? parseDiceRoll(dice) : dice, !!ijasz);\n\nexport const rollSource = (randomFn: () => number): void => { random = randomFn }\n\nexport const parseDiceRoll = (diceString: string = '0'): DiceRoll => {\n    if (!Number.isNaN(Number(diceString))) {\n        return {\n            numDice: 0,\n            die: 0,\n            plus: Number(diceString),\n            tries: 1,\n            div: 1,\n            kf: false\n        };\n    }\n    const res = diceString.replace(/\\s/g, '').match(PATTERN);\n    return {\n        numDice: Number(res?.groups?.numDice ?? 1),\n        die: Number(res?.groups?.die ?? 0),\n        plus: Number(res?.groups?.plus ?? 0),\n        tries: Number(res?.groups?.tries ?? 1),\n        div: Number(res?.groups?.div ?? 1),\n        kf: res?.groups?.kf !== undefined\n    }\n}\n\nexport const formatDiceRoll = (dice: DiceRoll): string => {\n    if (dice.die === 0) {\n        return dice.plus ? `${dice.plus}` : '-';\n    };\n    return `${dice.numDice === 1 ? '' : dice.numDice}k${dice.die}${dice.div > 1 ? '/' + dice.div : ''}${dice.plus ? (dice.plus > 0 ? '+' : '-') + Math.abs(dice.plus) : ''}${dice.tries > 1 ? '(' + dice.tries + 'x)' : ''}${dice.kf ? ' + kf' : ''}`;\n}\n\nexport const formatResult = (result: DiceRollResult): string => {\n    return `${result.value} (${result.details})`\n}\n\nexport const sumRolls = (rolls: Array<DiceRoll>): DiceRoll | null => {\n    try {\n        const ret: DiceRoll = parseDiceRoll();\n        rolls.forEach(r => {\n            if (r.tries > 1 || r.kf) {\n                throw new Error('can\\'t sum rolls with multiple tries or kf');\n            }\n            if (ret.die !== 0 && r.die !== 0 && r.die !== ret.die) {\n                throw new Error('can\\'t sum rolls with different dies');\n            }\n            if (ret.div !== 1 && r.div !== 1 && ret.div !== r.div) {\n                throw new Error('can\\'t sum rolls with different divisors');\n            }\n            if (r.die !== 0) {\n                ret.die = r.die;\n                ret.numDice += r.numDice;\n            }\n            if (r.plus !== 0) {\n                ret.plus += r.plus;\n            }\n            if (r.div > 1) {\n                ret.div = r.div;\n            }\n        })\n        return ret;\n    } catch (e) { }\n    return null;\n}","import { DiceRoll, DiceRollResult, parseDiceRoll, roll } from \"./roll\";\n\nexport interface Dobas {\n    roll: DiceRoll;\n    result?: DiceRollResult;\n}\n\nexport class DobasMatrix {\n    readonly values: Record<string, Record<string, Dobas>>;\n    readonly sum: Record<string, number>;\n\n    constructor(readonly keys: Array<string>) {\n        this.values = {};\n        this.sum = {};\n    }\n\n    add = (name: string, dobas: Record<string, string | number>): DobasMatrix => {\n        this.values[name] = {};\n        if (dobas) {\n            this.keys.forEach(key => {\n                this.values[name][key] = {\n                    roll: parseDiceRoll(dobas[key]?.toString())\n                }\n            });\n        }\n        return this;\n    };\n\n    roll = (keys?: Array<string>): DobasMatrix => {\n        this.keys.filter(key => !keys || keys.indexOf(key) !== -1).forEach(key => {\n            Object.keys(this.values).forEach(name => {\n                const dobas = this.values[name][key];\n                dobas.result = dobas ? roll(dobas.roll) : { value: 0, details: '' };\n                this.sum[key] = Object.values(this.values).map(value => value[key].result?.value).reduce((a, b) => (a ?? 0) + (b ?? 0), 0) ?? 0;\n            });\n        })\n        return this;\n    }\n\n    getRolls = (key: string): Array<DiceRoll> => {\n        return Object.values(this.values).map(r => r[key].roll).filter(roll => roll && (roll.die > 0 || roll.plus !== 0));\n    }\n\n    clearRolls = (): DobasMatrix => {\n        this.keys.forEach(key => {\n            Object.keys(this.values).forEach(name => {\n                const dobas = this.values[name][key];\n                delete dobas.result;\n            });\n        });\n        return this;\n    }\n}\n\n","//todo: ugras\n\nimport { Fegyver } from \"./karakter\";\n\nexport interface Harcertek {\n    ke: number;\n    te: number;\n    ve: number;\n    ce: number;\n}\n\nexport const HARCERTEK_DISPLAY_NAMES = { 'ke': 'KÉ', 'te': 'TÉ', 've': 'VÉ', 'ce': 'CÉ', 'sebzes': 'Sebzés' };\n\nexport const FEGYVER_KEPZETTSEG: Record<string, Harcertek> = {\n    \"képzetlen\": {\n        ke: -10,\n        te: -25,\n        ve: -20,\n        ce: -30\n    },\n    \"képzetlen, fejvadász\": {\n        ke: -5,\n        te: -5,\n        ve: -10,\n        ce: -15\n    },\n    \"Af\": {\n        ke: 0,\n        te: 0,\n        ve: 0,\n        ce: 0\n    },\n    \"Mf\": {\n        ke: 5,\n        te: 10,\n        ve: 10,\n        ce: 10\n    }\n}\n\nexport const FEGYVERTELEN: Fegyver = {\n    name: 'fegyver nélkül',\n    harcertek: {\n        ke: 0,\n        te: 0,\n        ve: 0,\n        ce: 0,\n    },\n    tamPerKor: 0,\n    sebzes: '0'\n};\n\n\nexport const PUSZTA_KEZ_AF: Fegyver = {\n    name: 'Ököl',\n    harcertek: {\n        ke: 4,\n        te: 1,\n        ve: 10,\n        ce: 0,\n    },\n    tamPerKor: 2,\n    sebzes: '1k2'\n}\n\nexport const PUSZTA_KEZ_MF: Fegyver = {\n    name: 'Ököl',\n    harcertek: {\n        ke: 4,\n        te: 1,\n        ve: 10,\n        ce: 0,\n    },\n    tamPerKor: 2,\n    sebzes: '1k6'\n}\n\nexport const FEGYVEREK: Array<Fegyver> = [\n    {\n        name: 'Tőr',\n        harcertek: {\n            ke: 10,\n            te: 8,\n            ve: 2,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2\n    },\n    {\n        name: 'Tőr, dobó',\n        harcertek: {\n            ke: 10,\n            te: 11,\n            ve: 2,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2\n    },\n    {\n        name: 'Tüskés buzogány',\n        harcertek: {\n            ke: 7,\n            te: 12,\n            ve: 13,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1\n    },\n    {\n        name: 'Hajítóbárd',\n        harcertek: {\n            ke: 9,\n            te: 10,\n            ve: 4,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2\n    },\n    {\n        name: 'Dobóháló',\n        harcertek: {\n            ke: 1,\n            te: 8,\n            ve: 4,\n            ce: 0,\n        },\n        sebzes: '0',\n        tamPerKor: 3,\n        lassu: true\n    },\n    {\n        name: 'Buzogány, shadleki',\n        harcertek: {\n            ke: 8,\n            te: 13,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1\n    },\n    {\n        name: 'Csatabárd, egykezes',\n        harcertek: {\n            ke: 5,\n            te: 12,\n            ve: 11,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1\n    },\n    {\n        name: 'Csatabárd, kétkezes',\n        harcertek: {\n            ke: 0,\n            te: 8,\n            ve: 6,\n            ce: 0,\n        },\n        sebzes: '3k6',\n        tamPerKor: 2,\n        lassu: true\n    },\n    {\n        name: 'Csatacsákány',\n        harcertek: {\n            ke: 5,\n            te: 11,\n            ve: 8,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1\n    },\n    {\n        name: 'Kard, rövid',\n        harcertek: {\n            ke: 9,\n            te: 12,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1\n    },\n    {\n        name: 'Kard, hosszú',\n        harcertek: {\n            ke: 6,\n            te: 14,\n            ve: 16,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1\n    },\n    {\n        name: 'Kard, másfélkezes',\n        harcertek: {\n            ke: 4,\n            te: 13,\n            ve: 12,\n            ce: 0,\n        },\n        sebzes: '2k6',\n        tamPerKor: 1\n    },\n    {\n        name: 'Kard, lovagi',\n        harcertek: {\n            ke: 2,\n            te: 10,\n            ve: 7,\n            ce: 0,\n        },\n        sebzes: '2k6+2',\n        tamPerKor: 1\n    },\n    {\n        name: 'Kard, pallos',\n        harcertek: {\n            ke: 0,\n            te: 6,\n            ve: 2,\n            ce: 0,\n        },\n        sebzes: '3k6+2',\n        tamPerKor: 2,\n        lassu: true\n    },\n    {\n        name: 'Kard, szablya',\n        harcertek: {\n            ke: 7,\n            te: 15,\n            ve: 17,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, dzsenn szablya',\n        harcertek: {\n            ke: 9,\n            te: 20,\n            ve: 17,\n            ce: 0,\n        },\n        sebzes: '1k6+3',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, jatagán',\n        harcertek: {\n            ke: 7,\n            te: 14,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, handzsár',\n        harcertek: {\n            ke: 6,\n            te: 14,\n            ve: 15,\n            ce: 0,\n        },\n        sebzes: '1k6+3',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, fejvadász',\n        harcertek: {\n            ke: 8,\n            te: 16,\n            ve: 16,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, Slan',\n        harcertek: {\n            ke: 8,\n            te: 20,\n            ve: 12,\n            ce: 0,\n        },\n        sebzes: '1k10+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, kígyó',\n        harcertek: {\n            ke: 6,\n            te: 14,\n            ve: 15,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kés',\n        harcertek: {\n            ke: 10,\n            te: 4,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '1k5',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Mara-sequor',\n        harcertek: {\n            ke: 7,\n            te: 16,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '2k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Ramiera',\n        harcertek: {\n            ke: 8,\n            te: 17,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Sequor',\n        harcertek: {\n            ke: 8,\n            te: 16,\n            ve: 13,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Slan csillag',\n        harcertek: {\n            ke: 10,\n            te: 4,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '1k3',\n        tamPerKor: 3,\n    },\n    {\n        name: 'Tőr, Slan',\n        harcertek: {\n            ke: 9,\n            te: 14,\n            ve: 6,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Tőrkard',\n        harcertek: {\n            ke: 9,\n            te: 12,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Bot, hosszú',\n        harcertek: {\n            ke: 4,\n            te: 10,\n            ve: 16,\n            ce: 0,\n        },\n        sebzes: '1k5',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Bot, rövid',\n        harcertek: {\n            ke: 9,\n            te: 9,\n            ve: 17,\n            ce: 0,\n        },\n        sebzes: '1k3',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Bot, furkós',\n        harcertek: {\n            ke: 2,\n            te: 7,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Buzogány, egykezes',\n        harcertek: {\n            ke: 7,\n            te: 11,\n            ve: 12,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Buzogány, kétkezes',\n        harcertek: {\n            ke: 0,\n            te: 7,\n            ve: 6,\n            ce: 0,\n        },\n        sebzes: '3k6',\n        tamPerKor: 2,\n        lassu: true\n    },\n    {\n        name: 'Buzogány, tüskés',\n        harcertek: {\n            ke: 7,\n            te: 12,\n            ve: 13,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Buzogány, tollas',\n        harcertek: {\n            ke: 7,\n            te: 12,\n            ve: 13,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Buzogány, láncos',\n        harcertek: {\n            ke: 4,\n            te: 13,\n            ve: 11,\n            ce: 0,\n        },\n        sebzes: '1k6+3',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Cséphadaró',\n        harcertek: {\n            ke: 1,\n            te: 6,\n            ve: 5,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Harcikalapács',\n        harcertek: {\n            ke: 5,\n            te: 8,\n            ve: 10,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Alabárd',\n        harcertek: {\n            ke: 1,\n            te: 14,\n            ve: 15,\n            ce: 0,\n        },\n        sebzes: '2k6+2',\n        tamPerKor: 2,\n        lassu: true\n    },\n    {\n        name: 'Dárda',\n        harcertek: {\n            ke: 8,\n            te: 13,\n            ve: 5,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kopja, könnyű',\n        harcertek: {\n            ke: 2,\n            te: 11,\n            ve: 12,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kopja, lovas',\n        harcertek: {\n            ke: 1,\n            te: 15,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2,\n        lassu: true\n    },\n    {\n        name: 'Kopja, nehézlovas',\n        harcertek: {\n            ke: 0,\n            te: 16,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '2k10',\n        tamPerKor: 3,\n        lassu: true\n    },\n    {\n        name: 'Lándzsa',\n        harcertek: {\n            ke: 4,\n            te: 12,\n            ve: 12,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Szigony',\n        harcertek: {\n            ke: 4,\n            te: 15,\n            ve: 10,\n            ce: 0,\n        },\n        sebzes: '1k10+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Fúvócső',\n        harcertek: {\n            ke: 8,\n            te: 0,\n            ve: 0,\n            ce: 7,\n        },\n        lotav: 30,\n        sebzes: '0',\n        tamPerKor: 3,\n    },\n    {\n        name: 'Íj, rövid',\n        harcertek: {\n            ke: 5,\n            te: 0,\n            ve: 0,\n            ce: 4,\n        },\n        lotav: 90,\n        sebzes: '1k6',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Íj, hosszú',\n        harcertek: {\n            ke: 4,\n            te: 0,\n            ve: 0,\n            ce: 6,\n        },\n        lotav: 110,\n        sebzes: '1k6+1',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Íj, visszacsapó',\n        harcertek: {\n            ke: 3,\n            te: 0,\n            ve: 0,\n            ce: 8,\n        },\n        lotav: 180,\n        sebzes: '1k10',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Íj, elf',\n        harcertek: {\n            ke: 6,\n            te: 0,\n            ve: 0,\n            ce: 10,\n        },\n        lotav: 120,\n        sebzes: '2k6',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Nyílpuska, aquir',\n        harcertek: {\n            ke: 5,\n            te: 0,\n            ve: 0,\n            ce: 18,\n        },\n        lotav: 35,\n        sebzes: '1k10/2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Nyílpuska, kézi',\n        harcertek: {\n            ke: 3,\n            te: 0,\n            ve: 0,\n            ce: 14,\n        },\n        lotav: 30,\n        sebzes: '1k6/2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Nyílpuska, kahrei',\n        harcertek: {\n            ke: 9,\n            te: 0,\n            ve: 0,\n            ce: 13,\n        },\n        lotav: 30,\n        sebzes: '1k6/2',\n        tamPerKor: 3,\n    },\n    {\n        name: 'Nyílpuska, könnyű',\n        harcertek: {\n            ke: 2,\n            te: 0,\n            ve: 0,\n            ce: 16,\n        },\n        lotav: 50,\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Nyílpuska, nehéz',\n        harcertek: {\n            ke: 0,\n            te: 0,\n            ve: 0,\n            ce: 15,\n        },\n        lotav: 60,\n        sebzes: '1k6+1',\n        tamPerKor: 3,\n        lassu: true\n    },\n    {\n        name: 'Nyílpuska, shadoni páncéltörő',\n        harcertek: {\n            ke: 0,\n            te: 0,\n            ve: 0,\n            ce: 17,\n        },\n        lotav: 80,\n        sebzes: '2k10',\n        tamPerKor: 5,\n        lassu: true\n    },\n    {\n        name: 'Parittya',\n        harcertek: {\n            ke: 2,\n            te: 0,\n            ve: 0,\n            ce: 1,\n        },\n        lotav: 100,\n        sebzes: '1k10/2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Bola',\n        harcertek: {\n            ke: 2,\n            te: 10,\n            ve: 2,\n            ce: 0,\n        },\n        sebzes: '1k5',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Dobóháló',\n        harcertek: {\n            ke: 1,\n            te: 8,\n            ve: 4,\n            ce: 0,\n        },\n        sebzes: '0',\n        tamPerKor: 3,\n        lassu: true\n    },\n    {\n        name: 'Garott',\n        harcertek: {\n            ke: 0,\n            te: 5,\n            ve: -20,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Hárítótőr',\n        harcertek: {\n            ke: 8,\n            te: 4,\n            ve: 19,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Korbács',\n        harcertek: {\n            ke: 4,\n            te: 0,\n            ve: 6,\n            ce: 0,\n        },\n        sebzes: '1k3',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Lasszó',\n        harcertek: {\n            ke: 0,\n            te: 1,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '0',\n        tamPerKor: 3,\n        lassu: true\n    },\n    {\n        name: 'Ostor',\n        harcertek: {\n            ke: 3,\n            te: 6,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '1k2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Vasököl',\n        harcertek: {\n            ke: 9,\n            te: 2,\n            ve: 5,\n            ce: 0,\n        },\n        sebzes: '1k3',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Dzsambia',\n        harcertek: {\n            ke: 10,\n            te: 8,\n            ve: 4,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Mesterkard',\n        harcertek: {\n            ke: 7,\n            te: 16,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Predoci egyeneskard',\n        harcertek: {\n            ke: 7,\n            te: 16,\n            ve: 15,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Tahdzsi',\n        harcertek: {\n            ke: 9,\n            te: 11,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Béltépő',\n        harcertek: {\n            ke: 10,\n            te: 8,\n            ve: 2,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Lagoss',\n        harcertek: {\n            ke: 8,\n            te: 14,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+4',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Pugoss',\n        harcertek: {\n            ke: 12,\n            te: 6,\n            ve: 4,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2,\n    },\n];\n\nexport const SZITUACIOK: Record<string, Harcertek> = {\n    'hátulról': {\n        ke: 5,\n        te: 10,\n        ve: 0,\n        ce: 0\n    },\n    'félhátulról': {\n        ke: 2,\n        te: 5,\n        ve: 0,\n        ce: 0\n    },\n    'magasabbról': {\n        ke: 2,\n        te: 5,\n        ve: 0,\n        ce: 5\n    },\n    'alacsonyabbról': {\n        ke: -2,\n        te: -10,\n        ve: 0,\n        ce: -5\n    },\n    'meglepetésből': {\n        ke: 100,\n        te: 30,\n        ve: 0,\n        ce: 10\n    },\n    'mozgó lóról': {\n        ke: 5,\n        te: 10,\n        ve: 20,\n        ce: -20\n    },\n    'vakon': {\n        ke: -20,\n        te: -60,\n        ve: -70,\n        ce: -150\n    },\n    'félhomályban': {\n        ke: -10,\n        te: -30,\n        ve: -35,\n        ce: -70\n    },\n    'helyhez kötve': {\n        ke: -20,\n        te: -15,\n        ve: -5,\n        ce: 0\n    },\n    'kábultan': {\n        ke: -15,\n        te: -20,\n        ve: -25,\n        ce: -30\n    },\n    'bénultan': {\n        ke: -30,\n        te: -40,\n        ve: -35,\n        ce: -15\n    },\n    'félelemmel': {\n        ke: -10,\n        te: -15,\n        ve: 5,\n        ce: -20\n    },\n    'gyűlölettel': {\n        ke: 3,\n        te: 10,\n        ve: -20,\n        ce: -20\n    },\n    'roham': {\n        ke: 0,\n        te: 20,\n        ve: -25,\n        ce: -30\n    },\n    'védharc hátrálva': {\n        ke: 0,\n        te: 0,\n        ve: 40,\n        ce: 0\n    },\n    'védharc állva': {\n        ke: 0,\n        te: 0,\n        ve: 25,\n        ce: 0\n    },\n    'részleges védharc': {\n        ke: 0,\n        te: 0,\n        ve: 15,\n        ce: 0\n    },\n    'foglyul ejtésért': {\n        ke: -5,\n        te: -5,\n        ve: -15,\n        ce: 0\n    },\n}\n","import { Harcertek } from \"./harc\";\nimport { DiceRollResult } from \"./roll\"\n\nexport interface KepessegDobas {\n    ero: string;\n    gy: string;\n    ugy: string;\n    ak: string;\n    egs: string;\n    sz: string;\n    int: string;\n    ae: string;\n    asz: string;\n    erz: string;\n}\n\nexport type KepessegDobasResult = Record<keyof KepessegDobas, DiceRollResult>;\n\nexport const KEPESSEG_NEV: Record<keyof KepessegDobas, string> = {\n    ero: 'Erő',\n    gy: 'Gyorsaság',\n    ugy: 'Ügyesség',\n    ak: 'Állóképesség',\n    egs: 'Egészség',\n    sz: 'Szépség',\n    int: 'Intelligencia',\n    ae: 'Akaraterő',\n    asz: 'Asztrál',\n    erz: 'Érzékelés'\n}\n\nexport const FAJ_KEPESSEG: Record<string, KepessegDobas> = {\n    \"ember\": {\n        ero: '0',\n        gy: '0',\n        ugy: '0',\n        ak: '0',\n        egs: '0',\n        sz: '0',\n        int: '0',\n        ae: '0',\n        asz: '0',\n        erz: '0'\n    },\n    \"elf\": {\n        ero: '-2',\n        gy: '1',\n        ugy: '1',\n        ak: '-1',\n        egs: '0',\n        sz: '1',\n        int: '0',\n        ae: '0',\n        asz: '0',\n        erz: '2'\n    },\n    \"félelf\": {\n        ero: '-1',\n        gy: '1',\n        ugy: '0',\n        ak: '0',\n        egs: '0',\n        sz: '0',\n        int: '0',\n        ae: '0',\n        asz: '0',\n        erz: '1'\n    },\n    \"törp\": {\n        ero: '1',\n        gy: '1',\n        ugy: '0',\n        ak: '1',\n        egs: '1',\n        sz: '-2',\n        int: '-1',\n        ae: '0',\n        asz: '-1',\n        erz: '0'\n    },\n    \"udvari ork\": {\n        ero: '2',\n        gy: '0',\n        ugy: '0',\n        ak: '1',\n        egs: '2',\n        sz: '-3',\n        int: '-1',\n        ae: '0',\n        asz: '-3',\n        erz: '1'\n    },\n    \"amund\": {\n        ero: '1',\n        gy: '0',\n        ugy: '0',\n        ak: '1',\n        egs: '0',\n        sz: '3',\n        int: '0',\n        ae: '0',\n        asz: '-1',\n        erz: '0'\n    },\n    \"dzsenn\": {\n        ero: '0',\n        gy: '0',\n        ugy: '0',\n        ak: '0',\n        egs: '0',\n        sz: '0',\n        int: '2',\n        ae: '0',\n        asz: '0',\n        erz: '0'\n    },\n    \"khál\": {\n        ero: '3',\n        gy: '2',\n        ugy: '1',\n        ak: '2',\n        egs: '3',\n        sz: '0',\n        int: '-1',\n        ae: '0',\n        asz: '-5',\n        erz: '3'\n    },\n    \"gnóm\": {\n        ero: '-1',\n        gy: '0',\n        ugy: '1',\n        ak: '0',\n        egs: '0',\n        sz: '0',\n        int: '1',\n        ae: '0',\n        asz: '0',\n        erz: '2'\n    },\n    \"goblin\": {\n        ero: '-2',\n        gy: '0',\n        ugy: '0',\n        ak: '1',\n        egs: '1',\n        sz: '-2',\n        int: '-1',\n        ae: '0',\n        asz: '-2',\n        erz: '2'\n    },\n\n}\n\nexport const FOKASZTOK: Record<string, Array<string>> = {\n    'harcos': ['harcos', 'gladiátor', 'fejvadász', 'lovag'],\n    'szerencsevadász': ['tolvaj', 'bárd'],\n    'pap': ['pap', 'paplovag'],\n    'harcművész': ['harcművész', 'kardművész'],\n    'varázsló': ['boszorkánymester', 'tűzvarázsló', 'varázsló'],\n    'egyéb': ['egyéb']\n};\n\nexport const KASZTOK: Record<string, Kaszt> = {\n    'egyéb': {\n        name: 'egyéb',\n        kepesseg: {\n            ero: '10',\n            gy: '10',\n            ugy: '10',\n            ak: '10',\n            egs: '10',\n            sz: '10',\n            int: '10',\n            ae: '10',\n            asz: '10',\n            erz: '10'\n        },\n        alapHarcertek: {\n            ke: 0,\n            te: 0,\n            ve: 0,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 0,\n                ve: 0,\n                ce: 0\n            },\n            szabad: 0\n        },\n        epfp: {\n            ep: 0,\n            fp: 0,\n            fpPerSzint: 'k6'\n        }\n    },\n    harcos: {\n        name: 'harcos',\n        kepesseg: {\n            ero: 'k6 + 12 + kf',\n            gy: '2k6 + 6 + kf',\n            ugy: '2k6 + 6 + kf',\n            ak: 'k10 + 8 + kf',\n            egs: 'k10+10',\n            sz: '3k6(2x)',\n            int: '3k6(2x)',\n            ae: '2k6+6',\n            asz: '3k6(2x)',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 9,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 5\n        },\n        epfp: {\n            ep: 7,\n            fp: 6,\n            fpPerSzint: 'k6+4'\n        }\n    },\n    lovag: {\n        name: 'lovag',\n        kepesseg: {\n            ero: 'k6 + 12 + kf',\n            gy: '3k6(2x)',\n            ugy: '3k6(2x)',\n            ak: 'k10 + 8 + kf',\n            egs: 'k10+10',\n            sz: '2k6+6+kf',\n            int: '2k6+6',\n            ae: 'k10+8',\n            asz: '3k6(2x)',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 5,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 5,\n                ve: 5,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 7,\n            fp: 6,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    'gladiátor': {\n        name: 'gladiátor',\n        kepesseg: {\n            ero: 'k6 + 12 + kf',\n            gy: '2k6 + 6 + kf',\n            ugy: '2k6 + 6 + kf',\n            ak: 'k6 + 12 + kf',\n            egs: 'k10+10',\n            sz: '2k6+6',\n            int: '3k6',\n            ae: '3k6',\n            asz: '3k6',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 9,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 4,\n                ve: 4,\n                ce: 0\n            },\n            szabad: 4\n        },\n        epfp: {\n            ep: 8,\n            fp: 7,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    'fejvadász': {\n        name: 'fejvadász',\n        kepesseg: {\n            ero: '2k6+6',\n            gy: 'k6+12+kf',\n            ugy: 'k10+8',\n            ak: 'k6 + 12 + kf',\n            egs: 'k10+10',\n            sz: '3k6',\n            int: '3k6(2x)',\n            ae: 'k10+8',\n            asz: '2k6+6',\n            erz: 'k6+12'\n        },\n        alapHarcertek: {\n            ke: 10,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 4,\n                ve: 4,\n                ce: 0\n            },\n            szabad: 3\n        },\n        epfp: {\n            ep: 6,\n            fp: 7,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    tolvaj: {\n        name: 'tolvaj',\n        kepesseg: {\n            ero: '3k6(2x)',\n            gy: 'k10 + 8 + kf',\n            ugy: 'k6 + 12 + kf',\n            ak: '3k6(2x)',\n            egs: '3k6(2x)',\n            sz: '2k6 + 6',\n            int: '2k6 + 6',\n            ae: '3k6',\n            asz: '3k6(2x)',\n            erz: 'k6+12'\n        },\n        alapHarcertek: {\n            ke: 8,\n            te: 17,\n            ve: 72,\n            ce: 10\n        },\n        hm: {\n            kotelezo: {\n                ke: 1,\n                te: 1,\n                ve: 1,\n                ce: 0\n            },\n            szabad: 4\n        },\n        epfp: {\n            ep: 4,\n            fp: 5,\n            fpPerSzint: 'k6+3'\n        }\n    },\n    'bárd': {\n        name: 'bárd',\n        kepesseg: {\n            ero: 'k10+8',\n            gy: 'k10+8+kf',\n            ugy: 'k10 + 8',\n            ak: '2k6+6',\n            egs: '2k6+6',\n            sz: 'k6+12+kf',\n            int: 'k10+8(2x)',\n            ae: '2k6+6',\n            asz: 'k10+8',\n            erz: 'k10+8'\n        },\n        alapHarcertek: {\n            ke: 10,\n            te: 20,\n            ve: 75,\n            ce: 10\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 2,\n                ve: 2,\n                ce: 0\n            },\n            szabad: 5\n        },\n        epfp: {\n            ep: 5,\n            fp: 6,\n            fpPerSzint: 'k6+3'\n        }\n    },\n    pap: {\n        name: 'pap',\n        kepesseg: {\n            ero: '2k6+6',\n            gy: '3k6(2x)',\n            ugy: '3k6(2x)',\n            ak: '2k6+6',\n            egs: 'k10+8',\n            sz: 'k10+10',\n            int: 'k10+8',\n            ae: 'k10+8+kf',\n            asz: 'k6+12',\n            erz: 'k10+8'\n        },\n        alapHarcertek: {\n            ke: 5,\n            te: 17,\n            ve: 72,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 6,\n            fp: 6,\n            fpPerSzint: 'k6+2'\n        }\n    },\n    paplovag: {\n        name: 'paplovag',\n        kepesseg: {\n            ero: 'k10+8+kf',\n            gy: '3k6(2x)',\n            ugy: '3k6(2x)',\n            ak: 'k10+8',\n            egs: 'k10+10',\n            sz: 'k10+8',\n            int: '2k6 + 6',\n            ae: 'k10+8',\n            asz: 'k10+8+kf',\n            erz: 'k10+8'\n        },\n        alapHarcertek: {\n            ke: 5,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 3\n        },\n        epfp: {\n            ep: 8,\n            fp: 7,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    'harcművész': {\n        name: 'harcművész',\n        kepesseg: {\n            ero: 'k10+8',\n            gy: 'k6+14',\n            ugy: 'k6+12',\n            ak: 'k6+12',\n            egs: 'k10+10',\n            sz: '3k6(2x)',\n            int: '3k6(2x)',\n            ae: 'k6+12',\n            asz: 'k10+8',\n            erz: 'k6+12'\n        },\n        alapHarcertek: {\n            ke: 10,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 4,\n            fp: 8,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    'kardművész': {\n        name: 'kardművész',\n        kepesseg: {\n            ero: 'k10+8',\n            gy: 'k6+12+kf',\n            ugy: 'k6+14',\n            ak: 'k10+8',\n            egs: 'k10+8',\n            sz: '3k6(2x)',\n            int: '2k6 + 6',\n            ae: 'k6+12',\n            asz: 'k10+8',\n            erz: 'k6+12'\n        },\n        alapHarcertek: {\n            ke: 10,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 4,\n            fp: 8,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    'boszorkánymester': {\n        name: 'boszorkánymester',\n        kepesseg: {\n            ero: '3k6(2x)',\n            gy: 'k10+8',\n            ugy: 'k6+12+kf',\n            ak: '3k6(2x)',\n            egs: '2k6+6',\n            sz: '3k6',\n            int: '2k6 + 6',\n            ae: '2k6+6',\n            asz: '2k6+6',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 7,\n            te: 17,\n            ve: 72,\n            ce: 5\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 1,\n                ve: 1,\n                ce: 0\n            },\n            szabad: 5\n        },\n        epfp: {\n            ep: 3,\n            fp: 4,\n            fpPerSzint: 'k6+1'\n        }\n    },\n    'tűzvarázsló': {\n        name: 'tűzvarázsló',\n        kepesseg: {\n            ero: '2k6+6',\n            gy: '3k6(2x)',\n            ugy: '3k6(2x)',\n            ak: '2k6+6',\n            egs: '2k6+6',\n            sz: '3k6',\n            int: '2k6 + 6',\n            ae: '2k6+6',\n            asz: '2k6+6',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 6,\n            te: 17,\n            ve: 72,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 5,\n            fp: 4,\n            fpPerSzint: 'k6+1'\n        }\n    },\n    'varázsló': {\n        name: 'varázsló',\n        kepesseg: {\n            ero: '3k6',\n            gy: '3k6(2x)',\n            ugy: '3k6(2x)',\n            ak: '3k6',\n            egs: '3k6(2x)',\n            sz: '3k6',\n            int: 'k6+12+kf',\n            ae: 'k6+12+kf',\n            asz: 'k6+12+kf',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 2,\n            te: 15,\n            ve: 70,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 1,\n                ve: 1,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 3,\n            fp: 2,\n            fpPerSzint: 'k6'\n        }\n    },\n}\n\nexport interface Kaszt {\n    name: string,\n    kepesseg: KepessegDobas,\n    alapHarcertek: Harcertek,\n    hm: { kotelezo: Harcertek, szabad: number },\n    epfp: { ep: number, fp: number, fpPerSzint: string }\n}\n\nexport function osszead<T>(r1: Record<keyof T, number>, r2: Record<keyof T, number>): Record<keyof T, number> {\n    const keys = [...new Set([...Object.keys(r1), ...Object.keys(r2)])];\n    return keys.reduce((acc, curr) => { acc[curr as keyof T] = r1[curr as keyof T] + r2[curr as keyof T]; return acc; }, {} as Record<keyof T, number>)\n}","import { DobasMatrix } from \"./dobasmatrix\";\nimport { FEGYVERTELEN, FEGYVER_KEPZETTSEG, Harcertek } from \"./harc\";\nimport { Kaszt, osszead } from \"./kasztok\";\nimport { Pancel } from \"./pancel\";\nimport { roll } from \"./roll\";\n\n\nexport interface KarakterKepesseg {\n    ero: number;\n    gy: number;\n    ugy: number;\n    ak: number;\n    egs: number;\n    sz: number;\n    int: number;\n    ae: number;\n    asz: number;\n}\n\nexport interface KarakterInfo {\n    id: string;\n    name: string;\n}\n\nexport interface KarakterInfo {\n    id: string;\n    categories: Array<string>;\n    name: string;\n}\n\nexport interface Karakter extends KarakterInfo, HasEPFP {\n    faj: string;\n    kaszt: Kaszt;\n    szint: number;\n    kepessegek: KarakterKepesseg;\n    kepzettsegek?: Array<Kepzettseg>;\n    alapHarcertek: Harcertek;\n    hmHarcertek: Harcertek;\n    hm: number;\n    fegyverek: Array<Fegyver>;\n    pancelok?: Array<Pancel>;\n    valasztottPancel?: number;\n    valasztottFegyver?: number;\n    pszi?: {\n        max: number;\n        akt: number;\n    },\n    mp?: {\n        max: number;\n        akt: number;\n    },\n}\n\nexport interface HasEPFP {\n    maxFp: number;\n    maxEp: number;\n    fp: number;\n    ep: number;\n}\n\nexport interface Fegyver {\n    name: string;\n    harcertek: Harcertek;\n    sebzes: string;\n    tamPerKor: number;\n    lassu?: boolean;\n    lotav?: number;\n}\n\nexport interface Kepzettseg {\n    name: string;\n    target?: string;\n    szint: '1' | '2' | '3' | '4' | '5' | 'Af' | 'Mf' | number;\n    kp: number;\n}\n\nexport const findKepzettseg = ({ kepzettsegek }: Pick<Karakter, 'kepzettsegek'>, kepzettseg: string): Kepzettseg | undefined => {\n    return kepzettsegek?.find(k => k.name.toLowerCase() === kepzettseg.toLowerCase());\n}\n\nexport const folottiResz = (kepesseg?: number, hatar: number = 10) => {\n    return Math.max(0, ((kepesseg === undefined || Number.isNaN(kepesseg)) ? 0 : kepesseg) - hatar);\n}\n\nexport const szintlepes = (karakter: Karakter): Karakter => {\n    karakter.szint++;\n    const hm = karakter.kaszt.hm;\n    karakter.hm += hm.szabad;\n    karakter.hmHarcertek = osszead(karakter.hmHarcertek, hm.kotelezo);\n    karakter.maxFp += roll(karakter.kaszt.epfp.fpPerSzint).value;\n    karakter.fp = karakter.maxFp;\n    return karakter;\n}\n\nconst calculateKepessegHarcertek = (karakter: Pick<Karakter, 'kepessegek' | 'kepzettsegek' | 'pancelok' | 'valasztottPancel'>, fegyver: Fegyver): Record<string, string | number> => {\n    const mgt = calculateMGT(karakter);\n    const ugy = folottiResz(karakter.kepessegek.ugy - mgt[0]);\n    const gy = folottiResz(karakter.kepessegek.gy - mgt[0]);\n    return {\n        ke: gy + ugy,\n        te: gy + ugy + folottiResz(karakter.kepessegek.ero),\n        ve: gy + ugy,\n        ce: ugy,\n        sebzes: folottiResz(karakter.kepessegek.ero, 16)\n    }\n}\n\nexport const calculateSebesulesHatrany = (karakter: HasEPFP): Harcertek | null => {\n    if (karakter.maxEp > 0 && karakter.ep <= karakter.maxEp * 0.25) {\n        return {\n            ke: -15,\n            te: -20,\n            ve: -25,\n            ce: -30\n        }\n    } else if ((karakter.maxEp > 0 && karakter.ep <= karakter.maxEp * 0.5) || (karakter.maxFp > 0 && karakter.fp < karakter.maxFp * 0.1)) {\n        return {\n            ke: -5,\n            te: -10,\n            ve: -10,\n            ce: -5\n        }\n    }\n    return null;\n}\n\nexport const calculateMGT = ({ kepzettsegek, pancelok, valasztottPancel }: Pick<Karakter, 'kepessegek' | 'kepzettsegek' | 'pancelok' | 'valasztottPancel'>): [number, boolean?] => {\n    const pancel = valasztottPancel !== undefined ? pancelok?.[valasztottPancel] : undefined;\n    if (!pancel) {\n        return [0]; // no pancel, no mgt\n    }\n    const nehezvertViselet = kepzettsegek?.find(k => k.name === 'Nehézvértviselet')?.szint;\n    switch (nehezvertViselet) {\n        case 'Mf': return [0];\n        case 'Af': return [pancel.nehez ? pancel.mgt : 0];\n        default: return [pancel.mgt, pancel.nehez];\n    }\n}\n\nexport const calculateHarcertek = (karakter: { alapHarcertek: Harcertek, hmHarcertek: Harcertek, kepzettsegek?: Array<Kepzettseg>, pancelok?: Array<Pancel>, valasztottPancel?: number, kepessegek: KarakterKepesseg, szint?: number, kaszt?: { name: string } } & HasEPFP, fegyver: Fegyver, szituaciok?: Array<Harcertek & { name: string }>): DobasMatrix => {\n    const fegyvertelen = fegyver.name === FEGYVERTELEN.name;\n    const okol = fegyver.name === 'Puszta kéz';\n    const lofegyver: boolean = fegyver.harcertek.ce > 0;\n    const fejvadasz = karakter.kaszt?.name === 'fejvadász';\n    const kepzettseg: Kepzettseg | undefined = karakter.kepzettsegek?.find(k => okol ? (k.name === 'Ökölharc') : (k.name === 'Fegyverhasználat - ' + fegyver.name.toLowerCase()));\n    const ret: DobasMatrix = new DobasMatrix(fegyvertelen ? ['ke', 'te', 've', 'ce', 'sebzes'] : (lofegyver ? ['ke', 'ce', 've', 'sebzes'] : ['ke', 'te', 've', 'sebzes']));\n    ret.add('alap', karakter.alapHarcertek as unknown as Record<string, number>);\n    if (fejvadasz && karakter.szint) {\n        ret.add('spec', { ke: Math.floor(karakter.szint / 2), sebzes: Math.floor(karakter.szint / 2) });\n    }\n    ret.add('hm', karakter.hmHarcertek as unknown as Record<string, number>)\n    if (!fegyvertelen) {\n        ret.add(fegyver.name, { ...fegyver.harcertek, 'sebzes': fegyver.sebzes });\n    }\n    ret.add('kepessegek', calculateKepessegHarcertek(karakter, fegyver));\n    const mgt = calculateMGT(karakter);\n    if (mgt[1]) {\n        ret.add('Nehézvért', { ...FEGYVER_KEPZETTSEG['képzetlen'] });\n    } else if (!kepzettseg) {\n        if (!fegyvertelen) {\n            if (!fejvadasz) {\n                ret.add('képzetlen', { ...FEGYVER_KEPZETTSEG['képzetlen'] });\n            } else {\n                ret.add('képzetlen', { ...FEGYVER_KEPZETTSEG['képzetlen, fejvadász'] });\n            }\n        }\n    } else if (!okol) {\n        ret.add('Képzettség ' + kepzettseg.szint, { ...FEGYVER_KEPZETTSEG[kepzettseg.szint] });\n    }\n\n    const sebesules = calculateSebesulesHatrany(karakter);\n    if (sebesules) {\n        ret.add('Sebesülés', { ...sebesules });\n    }\n    szituaciok?.forEach(sz => ret.add(sz.name, { ...sz }));\n    return ret;\n}","import React from 'react';\nimport { Label } from 'semantic-ui-react';\nimport { DiceRollResult } from '../engine/roll';\n\nexport const DobasEredmeny: React.FC<{ pointing?: 'left' | 'right', result?: DiceRollResult }> = ({ result, pointing }) => {\n    return <>\n        {result && <Label size='large' pointing={pointing} color='black'>{result?.value}</Label>}\n        {result && <Label basic><i>{result?.details}</i></Label>}\n    </>;\n}","import React from 'react';\nimport { Table } from 'semantic-ui-react';\nimport { DobasMatrix } from '../engine/dobasmatrix';\nimport { formatDiceRoll } from '../engine/roll';\nimport { DobasEredmeny } from './DobasEredmeny';\n\nconst NumberInput: any = require('semantic-ui-react-numberinput').default;\n\nexport const DobasMatrixDisplay: React.FC<{ matrix: DobasMatrix, keyMap: Record<string, string>, direction: 'horizontal' | 'vertical', title: string | React.ReactNode, setValue?: (name: string, key: string, value: string) => unknown, editable?: Array<string> }> = ({ matrix, keyMap, direction, title, editable, setValue }) => {\n    const displayCell = (name: string, key: string) => {\n        const value = matrix.values[name][key];\n        const constantRoll = (value?.roll?.die ?? 0) === 0;\n        const rollString = value?.roll ? formatDiceRoll(value.roll) : '';\n        if (!editable?.includes(name)) {\n            return <Table.Cell key={name + '-' + key}>\n                {rollString}{!constantRoll && value?.result && <> = <DobasEredmeny result={value?.result} /></>}\n            </Table.Cell>;\n        } else {\n            return <Table.Cell key={name + '-' + key}>\n                <NumberInput size='mini' allowEmptyValue value={value.roll.plus} stepAmount={1} minValue={0} maxValue={1000} onChange={(e: string) => setValue?.(name, key, e)} />\n            </Table.Cell>;\n        }\n    }\n\n    if (direction === 'horizontal') {\n        return <Table celled striped>\n            <Table.Header>\n                <Table.Row>\n                    <Table.HeaderCell key='title' disabled={false}>{title}</Table.HeaderCell>\n                    {matrix.keys.map(key => <Table.HeaderCell key={key}>{keyMap[key]}</Table.HeaderCell>)}\n                </Table.Row>\n            </Table.Header>\n            <Table.Body>\n                {Object.keys(matrix.values).map(name => {\n                    return <Table.Row key={name}>\n                        <Table.HeaderCell key={name}>{name}</Table.HeaderCell>\n                        {matrix.keys.map(key => displayCell(name, key))}\n                    </Table.Row>\n                })}\n                <tr key='footer'>\n                </tr>\n            </Table.Body>\n            <Table.Footer>\n                <Table.HeaderCell title='sum'>Összeg</Table.HeaderCell>\n                {matrix.keys.map(key => <Table.HeaderCell key={key}>{matrix.sum[key]}</Table.HeaderCell>)}\n            </Table.Footer>\n        </Table>\n    } else {\n        return <Table celled striped definition>\n            <Table.Header>\n                <Table.Row>\n                    <Table.HeaderCell key='title'>{title}</Table.HeaderCell>\n                    {Object.keys(matrix.values).map(name => <Table.HeaderCell key={name}>{name}</Table.HeaderCell>)}\n                    <Table.HeaderCell key='sum'>Összeg</Table.HeaderCell>\n                </Table.Row>\n            </Table.Header>\n            <Table.Body>\n                {matrix.keys.map(key => {\n                    return <Table.Row key={key}>\n                        <Table.HeaderCell key='title'>{keyMap[key]}</Table.HeaderCell>\n                        {Object.keys(matrix.values).map(name => displayCell(name, key))}\n                        <Table.HeaderCell key='sum'>{matrix.sum[key]}</Table.HeaderCell>\n                    </Table.Row>\n                })}\n            </Table.Body>\n        </Table>\n\n    }\n}","import React from 'react';\r\nimport { Icon, Input, Label } from 'semantic-ui-react';\r\n\r\nexport const NumberInput: React.FC<{ value: number, onChange: (value: number) => unknown, min: number, max: number, icons?: boolean }> = ({ value, onChange, min, max, icons }) => {\r\n    return <div style={{ whiteSpace: 'nowrap' }}>\r\n        {icons && <Icon compact name='arrow down' onClick={() => { onChange(Math.max(min, value - 1)) }} />}\r\n        <input style={{ width: '3rem' }} value={value} onChange={(e) => {\r\n            const newValue = e.target.value;\r\n            if (/^-?\\d+$/.test(newValue) || newValue === '') {\r\n                let num = newValue !== '' ? parseInt(newValue) : 0;\r\n                if (min !== undefined && num < min) {\r\n                    num = min;\r\n                }\r\n                if (max !== undefined && num > max) {\r\n                    num = max;\r\n                }\r\n                onChange(num);\r\n            } else {\r\n                onChange(value);\r\n            }\r\n        }}>\r\n        </input>\r\n        {icons && <Icon compact name='arrow up' onClick={() => { onChange(Math.min(max, value + 1)) }} />}\r\n    </div>\r\n}","import React from 'react';\nimport { Table } from 'semantic-ui-react';\nimport { NumberInput } from './NumberInput';\n\n//const NumberInput: any = require('semantic-ui-react-numberinput').default;\n\ninterface Point {\n    name: string;\n    label: string;\n    max: number;\n    akt: number;\n}\n\n\n\nexport const PointsTable: React.FC<{ points: Array<Point>, onChange: (name: string, newValue: number) => unknown, maxChange?: boolean, title?: string }> = ({ points, onChange, maxChange, title }) => {\n    const aktChange = maxChange === undefined;\n    return <Table striped celled definition fluid>\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell>{title ?? 'Pontok'}</Table.HeaderCell>\n                {points.map(p => <Table.HeaderCell>{p.label}</Table.HeaderCell>)}\n            </Table.Row>\n\n        </Table.Header>\n        <Table.Body>\n            <Table.Row>\n                <Table.HeaderCell>Max</Table.HeaderCell>\n                {points.map(p => <Table.Cell>{maxChange ? <NumberInput icons value={p.max} min={0} max={1000} onChange={(e: number) => onChange(p.name, e)} /> : p.max}</Table.Cell>)}\n            </Table.Row>\n            <Table.Row>\n                <Table.HeaderCell>Akt</Table.HeaderCell>\n                {points.map(p => <Table.Cell>{!aktChange ? p.akt : <NumberInput icons value={p.akt} min={0} max={p.max} onChange={(e: number) => onChange(p.name, Math.min(p.max, e))} />}</Table.Cell>)}\n            </Table.Row>\n        </Table.Body>\n    </Table>\n\n}","import React from 'react';\nimport { Button, Label } from 'semantic-ui-react';\n\ninterface SelectionProps { label: JSX.Element | string, selected?: string, setSelected: (newValue: string | undefined) => unknown, options: Array<string>, structure?: Record<string, Array<string>> };\n\nexport const Selection: React.FC<SelectionProps> = ({ label, selected, setSelected, options, structure }) => {\n    if (!structure) {\n        return <Button labelPosition='left' as='div'>\n            <Label basic pointing='right'>\n                {label}\n            </Label>\n            {options.map(n => <Button active={selected === n} onClick={() => setSelected(n)}>{n}</Button>)}\n        </Button>\n    } else {\n        return <Button labelPosition='left' as='div'>\n            <Label basic pointing='right'>\n                {label}\n            </Label>\n            {Object.keys(structure).map(fk => <Button.Group as='div' vertical>\n                <Label tag color='yellow'>{fk}</Label>\n                {options.filter(o => structure[fk].includes(o)).map((n, i) => <Button compact active={selected === n} onClick={() => setSelected(n)}>{n}</Button>)}\n            </Button.Group>\n            )}\n        </Button>\n    }\n\n}","import React from 'react';\r\nimport { Input, Label } from 'semantic-ui-react';\r\nimport { KASZTOK, FOKASZTOK } from '../engine/kasztok';\r\nimport { BackgroundSelection } from '../pages/KarakterAlkotas';\r\nimport { Selection } from './Selection';\r\n\r\nexport const KarakterAlkotasBackground: React.FC<{ fajNevek: Array<string>, backgroundSelection: BackgroundSelection, setBackgroundSelection: (backgroundSelection: BackgroundSelection) => unknown }> = ({ fajNevek, backgroundSelection, setBackgroundSelection }) => {\r\n\r\n    const changeKasztSelection = (s: string | undefined) => {\r\n        setBackgroundSelection({ ...backgroundSelection, kaszt: s, manual: s === 'egyéb' ? JSON.parse(JSON.stringify(KASZTOK['egyéb'])) : undefined })\r\n    };\r\n\r\n\r\n    return <div>\r\n        <div>\r\n            <Input fluid labelPosition='left' placeholder='Karakter neve...' error={!backgroundSelection.name} value={backgroundSelection.name} onChange={e => setBackgroundSelection({ ...backgroundSelection, name: e.target.value })}>\r\n                <Label pointing='right' basic>Név</Label>\r\n                <input />\r\n            </Input>\r\n        </div>\r\n        <div><Selection label='Kaszt' selected={backgroundSelection.kaszt} setSelected={changeKasztSelection} options={Object.keys(KASZTOK)} structure={FOKASZTOK} /></div>\r\n        <div><Selection label='Faj' selected={backgroundSelection.faj} setSelected={faj => setBackgroundSelection({ ...backgroundSelection, faj })} options={fajNevek} /></div>\r\n        <div><Input labelPosition='left' value={backgroundSelection.szint} onChange={e => {\r\n            const value = e.target.value ? Math.max(0, Math.floor(Number(e.target.value))) : undefined;\r\n            setBackgroundSelection({ ...backgroundSelection, szint: value });\r\n        }}>\r\n            <Label pointing='right' basic>Szint</Label>\r\n            <input />\r\n        </Input>\r\n        </div>\r\n        {backgroundSelection.manual && <div>\r\n            <Input labelPosition='left' error={!backgroundSelection.manual.name} value={backgroundSelection.manual.name} onChange={e => {\r\n                if (backgroundSelection.manual) {\r\n                    setBackgroundSelection({ ...backgroundSelection, manual: { ...backgroundSelection.manual, name: e.target.value } })\r\n                }\r\n            }}>\r\n                <Label pointing='right' basic>Kaszt neve</Label>\r\n                <input />\r\n            </Input>\r\n        </div>}\r\n    </div>\r\n\r\n}\r\n","import React, { useEffect, useState } from 'react';\nimport { Button, Grid, GridColumn, GridRow, Input, Label } from 'semantic-ui-react';\nimport { v4 } from 'uuid';\nimport { DobasMatrix } from '../engine/dobasmatrix';\nimport { FEGYVERTELEN, HARCERTEK_DISPLAY_NAMES } from '../engine/harc';\nimport { calculateHarcertek, folottiResz, Karakter, KarakterKepesseg, szintlepes } from '../engine/karakter';\nimport { Kaszt, KASZTOK, KepessegDobas, KEPESSEG_NEV } from '../engine/kasztok';\nimport { DobasMatrixDisplay } from '../components/DobasMatrixDisplay';\nimport { PointsTable } from '../components/PointsTable';\nimport { KarakterAlkotasBackground } from '../components/KarakterAlkotasBackground';\n\nconst NumberInput: any = require('semantic-ui-react-numberinput').default;\n\nexport interface BackgroundSelection {\n    name: string;\n    faj?: string;\n    kaszt?: string;\n    manual?: Kaszt;\n    szint?: number;\n}\n\n\nconst calculateKepessegek = (fajok: Record<string, KepessegDobas>, { kaszt, faj, manual }: { kaszt?: string, faj?: string, manual?: Kaszt }, roll?: boolean) => {\n    const newMatrix = new DobasMatrix(Object.keys(KEPESSEG_NEV));\n    if (manual) {\n        newMatrix.add('Kaszt: ' + kaszt, manual.kepesseg as unknown as Record<string, string>);\n    } else if (kaszt && KASZTOK[kaszt]) {\n        newMatrix.add('Kaszt: ' + kaszt, KASZTOK[kaszt].kepesseg as unknown as Record<string, string>);\n    }\n    if (faj && fajok[faj]) {\n        newMatrix.add('Faj: ' + faj, fajok[faj] as unknown as Record<string, string>);\n    }\n    if (roll || manual) {\n        newMatrix.roll();\n    }\n    return newMatrix;\n}\n\nconst createKarakter = ({ kaszt, faj, manual, szint, name }: BackgroundSelection, kepessegek: DobasMatrix) => {\n    const kasztOb = manual ?? KASZTOK[kaszt ?? ''];\n    if (!kasztOb || !kepessegek.sum || !faj) {\n        return null;\n    }\n    const epfp = kasztOb.epfp;\n    const ep = epfp.ep + folottiResz(kepessegek.sum.egs);\n    const fp = epfp.fp + folottiResz(kepessegek.sum.ae) + folottiResz(kepessegek.sum.ak);\n    const karakter: Karakter = {\n        id: v4(),\n        name,\n        faj,\n        categories: [],\n        kepessegek: kepessegek.sum as unknown as KarakterKepesseg,\n        kaszt: kasztOb,\n        szint: 0,\n        hm: 0,\n        maxEp: ep,\n        maxFp: fp,\n        ep,\n        fp,\n        hmHarcertek: { ke: 0, te: 0, ve: 0, ce: 0 },\n        kepzettsegek: [],\n        alapHarcertek: kasztOb.alapHarcertek,\n        fegyverek: [FEGYVERTELEN]\n    };\n    [...Array(szint).keys()].forEach(() => szintlepes(karakter));\n    return karakter;\n};\n\n\n\nexport const KarakterAlkotas: React.FC<{ save: (karakter: Karakter) => unknown, fajok: Record<string, KepessegDobas> }> = ({ save, fajok }) => {\n    const [backgroundSelection, setBackgroundSelection] = useState<BackgroundSelection>({ szint: 1, name: '' });\n    const [matrix, setMatrix] = useState<DobasMatrix>(new DobasMatrix(Object.keys(KEPESSEG_NEV)));\n\n    useEffect(() => {\n        setMatrix(calculateKepessegek(fajok, { kaszt: backgroundSelection.kaszt, faj: backgroundSelection.faj, manual: backgroundSelection.manual }));\n    }, [fajok, backgroundSelection.manual, backgroundSelection.faj, backgroundSelection.kaszt, setMatrix]);\n\n    const dob = () => {\n        setMatrix(calculateKepessegek(fajok, backgroundSelection, true));\n    };\n\n\n\n    const kaszt = backgroundSelection.manual ?? KASZTOK[backgroundSelection.kaszt ?? ''];\n    const karakter = kaszt ? {\n        kepessegek: matrix.sum as unknown as KarakterKepesseg,\n        alapHarcertek: kaszt.alapHarcertek,\n        hmHarcertek: kaszt.hm.kotelezo,\n        maxEp: kaszt.epfp.ep + folottiResz(matrix.sum.egs),\n        maxFp: kaszt.epfp.fp + folottiResz(matrix.sum.ae) + folottiResz(matrix.sum.ak),\n        ep: kaszt.epfp.ep + folottiResz(matrix.sum.egs),\n        fp: kaszt.epfp.fp + folottiResz(matrix.sum.ae) + folottiResz(matrix.sum.ak)\n    } : undefined;\n\n    const kezi = backgroundSelection.manual;\n\n    return <Grid relaxed>\n        <GridRow columns={2} divided>\n            <GridColumn>\n                <GridRow>\n                    <KarakterAlkotasBackground backgroundSelection={backgroundSelection} setBackgroundSelection={setBackgroundSelection} fajNevek={Object.keys(fajok)} />\n                </GridRow>\n                {karakter && <>\n                    <div>\n                        <Button as='div' basic floated='left'>\n                            <Label basic>Elosztható HM:</Label>\n                            {backgroundSelection.manual ? <NumberInput size='mini' allowEmptyValue value={backgroundSelection.manual.hm.szabad} stepAmount={1} minValue={0} maxValue={1000} onChange={(e: string) => {\n                                if (backgroundSelection.manual) {\n                                    backgroundSelection.manual.hm.szabad = Number(e);\n                                    setBackgroundSelection({ ...backgroundSelection });\n                                }\n                            }} /> : <Label basic>{kaszt.hm.szabad}</Label>}\n                        </Button>\n                        <Button as='div' basic floated='right'>\n                            <Label basic>Szintenkénti FP:</Label>\n                            {kezi && <Input value={kaszt.epfp.fpPerSzint} onChange={e => {\n                                kezi.epfp.fpPerSzint = e.target.value;\n                                setBackgroundSelection({ ...backgroundSelection, manual: kezi })\n                            }} />}\n                            {!kezi && <Label basic>{kaszt.epfp.fpPerSzint}</Label>}\n                        </Button>\n                    </div>\n                    <div><DobasMatrixDisplay\n                        title='Harcértékek'\n                        editable={kezi ? ['alap', 'hm'] : []}\n                        setValue={(name, key, value) => {\n                            if (kezi) {\n                                if (name === 'alap') {\n                                    (kezi.alapHarcertek as any)[key] = value;\n                                } else if (name === 'hm') {\n                                    (kezi.hm.kotelezo as any)[key] = value;\n                                }\n                                setBackgroundSelection({ ...backgroundSelection, manual: kezi })\n                            }\n                        }}\n                        matrix={calculateHarcertek(karakter, FEGYVERTELEN).roll(['te', 've', 'ce', 'ke'])}\n                        direction='vertical'\n                        keyMap={HARCERTEK_DISPLAY_NAMES} />\n                    </div>\n                    <div>\n                        <PointsTable\n                            title='Életerő 0. szinten'\n                            points={[{ name: 'ep', label: 'ÉP', max: karakter.maxEp, akt: karakter.ep }, { name: 'fp', label: 'FP', max: karakter.maxFp, akt: karakter.fp }]}\n\n                            onChange={(name, value) => {\n                                if (kezi) {\n                                    if (name === 'ep') {\n                                        kezi.epfp.ep = value - folottiResz(matrix.sum.egs);\n                                    }\n                                    if (name === 'fp') {\n                                        kezi.epfp.fp = value - folottiResz(matrix.sum.ae) - folottiResz(matrix.sum.ak);\n                                    }\n                                    setBackgroundSelection({ ...backgroundSelection, manual: kezi })\n                                }\n                            }}\n                            maxChange={kezi !== undefined}\n                        />\n                    </div>\n                </>\n                }\n            </GridColumn>\n            <GridColumn>\n                <DobasMatrixDisplay\n                    title='Képességek'\n                    matrix={matrix}\n                    keyMap={KEPESSEG_NEV}\n                    direction='vertical'\n                    editable={kezi ? ['Kaszt: egyéb'] : []}\n                    setValue={(name, key, value) => kezi && setBackgroundSelection({ ...backgroundSelection, manual: { ...kezi, kepesseg: { ...kezi.kepesseg, [key]: value } } })} />\n            </GridColumn>\n        </GridRow>\n        <GridRow columns={1} textAlign='center'>\n            <GridColumn>\n                <Button disabled={!!kezi} secondary onClick={dob}>Dob</Button>\n                <Button disabled={!backgroundSelection.name || backgroundSelection.szint === undefined || !matrix.sum} primary onClick={() => { const kar = createKarakter(backgroundSelection, matrix); if (kar) { save(kar) } }}>Ment</Button>\n            </GridColumn>\n        </GridRow>\n    </Grid>\n}","import React from 'react';\nimport { Table } from 'semantic-ui-react';\nimport { Fegyver } from '../engine/karakter';\n\nexport const FegyverLista: React.FC<{ fegyverek: Array<Fegyver>, selected?: number, onSelectionChange?: (newSelection: number | undefined) => unknown }> = ({ fegyverek, selected, onSelectionChange }) => {\n    const fegyverLista: Array<Record<string, string | number>> = fegyverek.map(fegyver => {\n        const rec: Record<string, string | number> = {};\n        rec.name = fegyver.name;\n        rec.ke = fegyver.harcertek.ke;\n        rec.te = fegyver.harcertek.te || '-';\n        rec.ve = fegyver.harcertek.ve;\n        rec.ce = fegyver.harcertek.ce || '-';\n        rec.sebzes = fegyver.sebzes;\n        rec.tamPerKor = fegyver.lassu ? '1/' + fegyver.tamPerKor : fegyver.tamPerKor;\n        rec.lotav = fegyver.lotav ?? '-';\n        return rec;\n    });\n\n    return <Table celled striped definition selectable={onSelectionChange !== undefined}>\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell>Fegyver</Table.HeaderCell>\n                <Table.HeaderCell>KÉ</Table.HeaderCell>\n                <Table.HeaderCell>TÉ</Table.HeaderCell>\n                <Table.HeaderCell>VÉ</Table.HeaderCell>\n                <Table.HeaderCell>CÉ</Table.HeaderCell>\n                <Table.HeaderCell>Sebzés</Table.HeaderCell>\n                <Table.HeaderCell>Tám / kör</Table.HeaderCell>\n                <Table.HeaderCell>Lőtáv</Table.HeaderCell>\n            </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {fegyverLista.map((r, i) => {\n                return <Table.Row active={selected === i} onClick={() => onSelectionChange?.(selected === i ? undefined : i)}>\n                    <Table.Cell>{r.name}</Table.Cell>\n                    <Table.Cell>{r.ke}</Table.Cell>\n                    <Table.Cell>{r.te}</Table.Cell>\n                    <Table.Cell>{r.ve}</Table.Cell>\n                    <Table.Cell>{r.ce}</Table.Cell>\n                    <Table.Cell>{r.sebzes}</Table.Cell>\n                    <Table.Cell>{r.tamPerKor}</Table.Cell>\n                    <Table.Cell>{r.lotav}</Table.Cell>\n                </Table.Row>\n            })}\n        </Table.Body>\n    </Table>\n}","import React from 'react'\r\nimport { Input, Label } from 'semantic-ui-react';\r\n\r\ninterface IntegerInputProps {\r\n    value?: number,\r\n    onChange: (value?: number) => unknown,\r\n    label?: string;\r\n}\r\n\r\n\r\nexport const IntegerInput: React.FC<IntegerInputProps> = ({ value, onChange, label }) => {\r\n    return <Input labelPosition='left' error={value === undefined} value={value ?? ''} onChange={e => {\r\n        const newValue = e.target.value ? Math.max(0, Math.floor(Number(e.target.value))) : undefined;\r\n        if (newValue === undefined || !Number.isNaN(newValue)) {\r\n            onChange(newValue);\r\n        }\r\n    }}>\r\n        {label && <Label pointing='right' basic>{label}</Label>}\r\n        <input />\r\n    </Input>;\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { Button, Checkbox, Grid, GridColumn, GridRow, Input, Label } from 'semantic-ui-react';\r\nimport { Fegyver } from '../engine/karakter';\r\nimport { IntegerInput } from './IntegerInput';\r\n\r\ninterface FormValues {\r\n    name: string;\r\n    ke?: number;\r\n    te?: number;\r\n    ve?: number;\r\n    ce?: number;\r\n    lofegyver: boolean;\r\n    lotav?: number;\r\n    sebzes: string;\r\n    tamPerKor?: number;\r\n    lassu: boolean;\r\n}\r\n\r\nexport type FEGYVER_KEPZETTSEG = 'képzetlen' | 'Af' | 'Mf';\r\n\r\nconst convertToFormValues = (fegyver?: Fegyver): FormValues => {\r\n    return {\r\n        name: fegyver?.name ?? '',\r\n        ke: fegyver?.harcertek.ke,\r\n        te: fegyver?.harcertek.te,\r\n        ve: fegyver?.harcertek.ve,\r\n        ce: fegyver?.harcertek.ce,\r\n        lofegyver: (fegyver?.harcertek.ce ?? 0) > 0,\r\n        lotav: fegyver?.lotav,\r\n        sebzes: fegyver?.sebzes ?? '',\r\n        tamPerKor: fegyver?.tamPerKor,\r\n        lassu: fegyver?.lassu ?? false\r\n    }\r\n}\r\n\r\nconst convertFromFormValues = (fegyver: FormValues): Fegyver => {\r\n    return {\r\n        name: fegyver.name,\r\n        harcertek: {\r\n            ke: fegyver.ke ?? 0,\r\n            te: fegyver.te ?? 0,\r\n            ve: fegyver.ve ?? 0,\r\n            ce: fegyver.ce ?? 0\r\n        },\r\n        lotav: fegyver.lotav,\r\n        sebzes: fegyver.sebzes,\r\n        tamPerKor: fegyver.tamPerKor ?? 1,\r\n        lassu: fegyver.lassu\r\n    }\r\n}\r\n\r\nexport const FegyverEditor: React.FC<{ kepzettseg?: boolean, fegyver?: Fegyver, submit: (fegyver: Fegyver, kepzettseg?: FEGYVER_KEPZETTSEG) => unknown, cancel: () => unknown }> = ({ fegyver, submit, cancel, kepzettseg }) => {\r\n\r\n    const [form, setForm] = useState<FormValues>(convertToFormValues(fegyver));\r\n\r\n    useEffect(() => {\r\n        setForm(convertToFormValues(fegyver));\r\n    }, [fegyver]);\r\n\r\n    return <Grid columns={1} relaxed>\r\n        <GridRow>\r\n            <GridColumn>\r\n                <div>\r\n                    <Input fluid labelPosition='left' placeholder='Fegyver neve...' error={!form.name} value={form.name} onChange={e => setForm({ ...form, name: e.target.value })}>\r\n                        <Label pointing='right' basic>Név</Label>\r\n                        <input />\r\n                    </Input>\r\n                </div>\r\n                <div><IntegerInput value={form.ke} onChange={ke => setForm({ ...form, ke })} label='KÉ' /></div>\r\n                <div>\r\n                    <Label pointing='right' basic>Lőfegyver:</Label>\r\n                    <Checkbox fitted={true} toggle checked={form.lofegyver} onChange={() => setForm({ ...form, lofegyver: !form.lofegyver })}>\r\n                    </Checkbox>\r\n                </div>\r\n                {!form.lofegyver &&\r\n                    <div><IntegerInput value={form.te} onChange={te => setForm({ ...form, te })} label='TÉ' /></div>\r\n                }\r\n                {form.lofegyver &&\r\n                    <div><IntegerInput value={form.ce} onChange={ce => setForm({ ...form, ce })} label='CÉ' /></div>\r\n                }\r\n                <div><IntegerInput value={form.ve} onChange={ve => setForm({ ...form, ve })} label='VÉ' /></div>\r\n                <div>\r\n                    <Input fluid labelPosition='left' placeholder='Fegyver sebzése...' error={!form.sebzes} value={form.sebzes} onChange={e => setForm({ ...form, sebzes: e.target.value })}>\r\n                        <Label pointing='right' basic>Sebzés</Label>\r\n                        <input />\r\n                    </Input>\r\n                </div>\r\n                {form.lofegyver &&\r\n                    <div><IntegerInput value={form.lotav} onChange={lotav => setForm({ ...form, lotav })} label='Lőtáv' /></div>\r\n                }\r\n                <div>\r\n                    <Label pointing='right' basic>Lassú:</Label>\r\n                    <Checkbox fitted={true} toggle checked={form.lassu} onChange={() => setForm({ ...form, lassu: !form.lassu })}>\r\n                    </Checkbox>\r\n                </div>\r\n                <div><IntegerInput value={form.tamPerKor} onChange={tamPerKor => setForm({ ...form, tamPerKor })} label={`Támadás körönként: ${form.lassu ? '1 / ' : ''}`} /></div>\r\n            </GridColumn>\r\n        </GridRow>\r\n        <GridRow textAlign='center'>\r\n            <GridColumn>\r\n                {!kepzettseg && <Button onClick={() => submit(convertFromFormValues(form))}>Ment</Button>}\r\n                {kepzettseg &&\r\n                    <Button as='div' labelPosition='left'>\r\n                        <Label pointing='right'>\r\n                            Használat szintje\r\n                    </Label>\r\n                        <Button onClick={() => submit(convertFromFormValues(form), 'képzetlen')}>Képzetlen</Button>\r\n                        <Button secondary onClick={() => submit(convertFromFormValues(form), 'Af')}>Af</Button>\r\n                        <Button primary onClick={() => submit(convertFromFormValues(form), 'Mf')}>Mf</Button>\r\n                    </Button>\r\n                }\r\n                <Button secondary basic onClick={cancel}>Mégse</Button>\r\n            </GridColumn>\r\n        </GridRow>\r\n    </Grid>;\r\n}","import React, { useCallback, useState } from 'react';\nimport { Button, Grid, GridColumn, GridRow, Header, Label, Modal } from 'semantic-ui-react';\nimport { Fegyver, Karakter, Kepzettseg } from '../engine/karakter';\nimport { FegyverEditor } from './FegyverEditor';\nimport { FegyverLista } from './FegyverLista';\n\ninterface FegyverValasztoProps {\n    fegyverek: Array<Fegyver>,\n    karakter: Karakter,\n    save: (karakter: Karakter) => unknown,\n    saveFegyverek: (fegyverek: Array<Fegyver>) => unknown\n}\n\nexport const FegyverValaszto: React.FC<FegyverValasztoProps> = ({ karakter, save, fegyverek, saveFegyverek }) => {\n\n    const [selected, setSelected] = useState<number>();\n    const [selectedForDeletion, setSelectedForDeletion] = useState<number>();\n    const [editorOpen, setEditorOpen] = useState<boolean>(false);\n    const [listEditorOpen, setListEditorOpen] = useState<boolean>(false);\n\n    const saveSelection = useCallback((kepzettsegSzint: string) => {\n        const fegyver = selected !== undefined ? fegyverek[selected] : undefined;\n        if (fegyver) {\n            addFegyverAndKepzettseg(karakter, fegyver, kepzettsegSzint);\n            save(karakter);\n        }\n    }, [karakter, save, selected, fegyverek]);\n\n    const saveDeletion = useCallback(() => {\n        if (selectedForDeletion !== undefined) {\n            karakter.fegyverek = karakter.fegyverek.filter((f, i) => i !== selectedForDeletion);\n            karakter.valasztottFegyver = 0;\n            save(karakter);\n        }\n    }, [karakter, save, selectedForDeletion]);\n\n\n    return <Grid columns={3} relaxed>\n        <GridRow columns='equal'>\n            <GridColumn>\n                <Header size='large'>Választható\n                    <Modal trigger={<Button floated='right' primary>{selected !== undefined ? 'Módosít' : 'Új'}</Button>}\n                        onOpen={() => setListEditorOpen(true)}\n                        onClose={() => setListEditorOpen(false)}\n                        open={listEditorOpen}>\n                        <Modal.Content>\n                            <FegyverEditor\n                                fegyver={selected !== undefined ? fegyverek[selected] : undefined}\n                                submit={f => {\n                                    if (selected === undefined) {\n                                        fegyverek.push(f);\n                                    } else {\n                                        fegyverek[selected] = f;\n                                    }\n                                    saveFegyverek(fegyverek);\n                                    setListEditorOpen(false);\n                                }}\n                                cancel={() => setListEditorOpen(false)} />\n                        </Modal.Content>\n                    </Modal>\n                    <Button floated='right' negative disabled={selected === undefined} onClick={() => {\n                        saveFegyverek(fegyverek.filter((f, i) => i !== selected));\n                    }}>Töröl</Button>\n                    <Button floated='right' as='div' labelPosition='left'>\n                        <Label pointing='right'>\n                            Képzettség\n                        </Label>\n                        <Button disabled={selected === undefined} onClick={() => saveSelection('')}>Képzetlen</Button>\n                        <Button secondary disabled={selected === undefined} onClick={() => saveSelection('Af')}>Af</Button>\n                        <Button primary disabled={selected === undefined} onClick={() => saveSelection('Mf')}>Mf</Button>\n                    </Button>\n                </Header>\n                <FegyverLista fegyverek={fegyverek.sort((a, b) => a.name.localeCompare(b.name))} selected={selected} onSelectionChange={setSelected}></FegyverLista>\n            </GridColumn>\n            <GridColumn>\n                <Header size='large'>Viselt\n                    <Modal trigger={<Button floated='right' primary>{selectedForDeletion !== undefined ? 'Módosít' : 'Új'}</Button>} onOpen={() => setEditorOpen(true)} onClose={() => setEditorOpen(false)} open={editorOpen}>\n                        <Modal.Content>\n                            <FegyverEditor\n                                kepzettseg\n                                fegyver={selectedForDeletion !== undefined ? karakter.fegyverek[selectedForDeletion] : undefined}\n                                submit={(f, k) => { addFegyverAndKepzettseg(karakter, f, k ?? 'képzetlen', selectedForDeletion); save(karakter); setEditorOpen(false) }}\n                                cancel={() => setEditorOpen(false)} />\n                        </Modal.Content>\n                    </Modal>\n                    <Button floated='right' negative disabled={selectedForDeletion === undefined} onClick={saveDeletion}>Töröl</Button>\n                </Header>\n                <FegyverLista fegyverek={karakter.fegyverek} selected={selectedForDeletion} onSelectionChange={setSelectedForDeletion}></FegyverLista>\n            </GridColumn>\n        </GridRow>\n        <GridRow columns={1} textAlign='center'>\n            <GridColumn>\n                <div>\n                </div>\n            </GridColumn>\n        </GridRow>\n    </Grid>\n}\n\nfunction addFegyverAndKepzettseg(karakter: Karakter, fegyver: Fegyver, kepzettsegSzint: string, idx?: number) {\n    const fIdx = idx ?? karakter.fegyverek.findIndex(f => f.name === fegyver.name);\n    if (fIdx === -1) {\n        karakter.fegyverek.push({ ...fegyver });\n    } else {\n        karakter.fegyverek[fIdx] = fegyver;\n    }\n    karakter.valasztottFegyver = karakter.fegyverek.findIndex(f => f.name === fegyver.name);\n    const kepzettsegName = `Fegyverhasználat - ${fegyver.name.toLowerCase()}`;\n    karakter.kepzettsegek = (karakter.kepzettsegek ?? []).filter(k => k.name !== kepzettsegName);\n    if (kepzettsegSzint) {\n        const kepzettseg: Kepzettseg = {\n            name: kepzettsegName,\n            szint: kepzettsegSzint as any,\n            kp: 0\n        };\n        karakter.kepzettsegek.push(kepzettseg);\n    }\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { Button, Table } from 'semantic-ui-react';\nimport { Harcertek, HARCERTEK_DISPLAY_NAMES } from '../engine/harc';\n\nconst NumberInput: any = require('semantic-ui-react-numberinput').default;\n\ninterface State {\n    harcertek: Harcertek,\n    hm: number\n};\n\nexport const HMEloszto: React.FC<{ harcertek: Harcertek, hm: number, complete: (harcertek: Harcertek, hm: number) => unknown }> = ({ harcertek, hm, complete }) => {\n    const [current, setCurrent] = useState<State>({ harcertek: { ...harcertek }, hm: hm } as State);\n\n    useEffect(() => {\n        setCurrent({ harcertek: { ...harcertek }, hm });\n    }, [harcertek, hm, setCurrent]);\n\n\n    const change = useCallback((he: ('ke' | 'te' | 've' | 'ce'), newValue: number) => {\n        const newCurrent: State = { ...current };\n        newCurrent.harcertek[he] = newValue;\n        newCurrent.hm = hm - (Object.keys(newCurrent.harcertek) as Array<any>).reduce((acc, curr: ('ke' | 'te' | 've' | 'ce')) => acc + (newCurrent.harcertek[curr] - harcertek[curr]), 0);\n        setCurrent(newCurrent);\n    }, [current, setCurrent, harcertek, hm]);\n\n    return <Table definition striped>\n        <Table.Row>\n            <Table.Cell>HM:</Table.Cell>\n            <Table.Cell colSpan={2}>{current.hm}</Table.Cell>\n        </Table.Row>\n        {(Object.keys(harcertek) as Array<any>).map((he: ('ke' | 'te' | 've' | 'ce')) => <Table.Row>\n            <Table.Cell>{HARCERTEK_DISPLAY_NAMES[he]}:</Table.Cell>\n            <Table.Cell><i>{harcertek[he]}</i></Table.Cell>\n            <Table.Cell><NumberInput className={he} allowEmptyValue size='mini' value={current.harcertek[he]} stepAmount={1} minValue={harcertek[he]} maxValue={(current.harcertek[he] ?? 0) + current.hm} onChange={(e: any) => change(he, Number(e ?? 0))} /></Table.Cell>\n        </Table.Row>)}\n        <Button onClick={() => complete(current.harcertek, current.hm)}>Eloszt</Button>\n    </Table>\n}","import React from 'react';\nimport { Table } from 'semantic-ui-react';\nimport { Kepzettseg } from '../engine/karakter';\n\n\nconst compare = (a: Kepzettseg, b: Kepzettseg): number => {\n    if (typeof a.szint === 'number' && typeof b.szint !== 'number') {\n        return 1;\n    }\n    if (typeof b.szint === 'number' && typeof a.szint !== 'number') {\n        return -1;\n    }\n    return a.name.localeCompare(b.name);\n}\n\nexport const KepzettsegLista: React.FC<{ kepzettsegek?: Array<Kepzettseg> }> = ({ kepzettsegek }) => {\n    return <Table striped celled>\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell>Képzettség</Table.HeaderCell>\n                <Table.HeaderCell>Szint</Table.HeaderCell>\n                <Table.HeaderCell>KP</Table.HeaderCell>\n            </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {kepzettsegek?.sort(compare).map((r, i) => {\n                return <Table.Row>\n                    <Table.Cell>{r.name}</Table.Cell>\n                    <Table.Cell>{r.szint}</Table.Cell>\n                    <Table.Cell>{r.kp ? r.kp : '-'}</Table.Cell>\n                </Table.Row>\n            })}\n        </Table.Body>\n    </Table>\n\n}","import React, { useState } from 'react';\r\nimport { Modal, Button, Grid, GridColumn, GridRow, Input, Label } from 'semantic-ui-react';\r\nimport { Karakter, Kepzettseg } from '../engine/karakter';\r\nimport { IntegerInput } from './IntegerInput';\r\n\r\nexport const KepzettsegModal: React.FC<{ karakter: Karakter; save: (karakter: Karakter) => unknown }> = ({ karakter, save }) => {\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    const [kepzettseg, setKepzettseg] = useState<string>();\r\n    const [szint, setSzint] = useState<number | '1' | '2' | '3' | '4' | '5' | 'Af' | 'Mf'>();\r\n    const [kp, setKp] = useState<number>();\r\n\r\n    const saveKepzettseg = () => {\r\n        karakter.kepzettsegek = karakter.kepzettsegek ?? [];\r\n        if (kepzettseg && szint !== undefined) {\r\n            const curr = karakter.kepzettsegek.findIndex(k => k.name === kepzettseg);\r\n            const newKepzettseg: Kepzettseg = {\r\n                name: kepzettseg,\r\n                szint,\r\n                kp: kp ?? 0\r\n            }\r\n            if (curr !== -1) {\r\n                karakter.kepzettsegek[curr] = newKepzettseg;\r\n            } else {\r\n                karakter.kepzettsegek.push(newKepzettseg);\r\n            }\r\n            save(karakter);\r\n            setSzint(undefined);\r\n            setKp(undefined);\r\n            setKepzettseg('');\r\n        }\r\n    }\r\n\r\n    return <Modal trigger={<Button primary>Képzettségek szerkesztése</Button>} onOpen={() => setModalOpen(true)} onClose={() => setModalOpen(false)} open={modalOpen}>\r\n        <Modal.Content>\r\n            <Grid>\r\n                <GridRow>\r\n                    <GridColumn>\r\n                        <div>\r\n                            <Input fluid labelPosition='left' placeholder='Képzettség...' error={!kepzettseg} value={kepzettseg} onChange={e => setKepzettseg(e.target.value)}>\r\n                                <Label pointing='right' basic>Képzettség</Label>\r\n                                <input />\r\n                            </Input>\r\n                        </div>\r\n                        <div>\r\n                            <Button as='div' labelPosition='left'>\r\n                                <Label pointing='right'>\r\n                                    Szint\r\n                                </Label>\r\n                                <Button color={szint === 'Af' ? 'black' : 'olive'} onClick={() => setSzint('Af')}>Af</Button>\r\n                                <Button color={szint === 'Mf' ? 'black' : 'olive'} onClick={() => setSzint('Mf')}>Mf</Button>\r\n                            </Button>\r\n                            {['1', '2', '3', '4', '5'].map(i => <Button color={szint === i ? 'black' : 'olive'} circular onClick={() => setSzint(i as any)}>{i}</Button>)}\r\n                            <IntegerInput label='Százalék' value={typeof szint === 'number' ? szint : undefined} onChange={v => setSzint(v)} />\r\n                        </div>\r\n                        <div>\r\n                            <IntegerInput label='Elköltött KP' value={kp} onChange={v => setKp(v)} />\r\n                        </div>\r\n                        <div><Button disabled={!kepzettseg || szint === undefined} onClick={saveKepzettseg}>Ment</Button></div>\r\n                    </GridColumn>\r\n                </GridRow>\r\n            </Grid>\r\n        </Modal.Content>\r\n    </Modal>\r\n}","import React from 'react';\nimport { Icon, Table } from 'semantic-ui-react';\nimport { Pancel } from '../engine/pancel';\n\nexport const PancelLista: React.FC<{ pancelok?: Array<Pancel>, selected?: number, onSelectionChange?: (newSelection: number | undefined) => unknown }> = ({ pancelok, selected, onSelectionChange }) => {\n\n    return <Table celled striped definition selectable={onSelectionChange !== undefined}>\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell>Páncél</Table.HeaderCell>\n                <Table.HeaderCell>SFÉ</Table.HeaderCell>\n                <Table.HeaderCell>MGT</Table.HeaderCell>\n                <Table.HeaderCell>Nehéz</Table.HeaderCell>\n            </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {pancelok?.map((r, i) => {\n                return <Table.Row active={selected === i} onClick={() => onSelectionChange?.(selected === i ? undefined : i)}>\n                    <Table.Cell>{r.name}</Table.Cell>\n                    <Table.Cell>{r.sfe}</Table.Cell>\n                    <Table.Cell>{r.mgt}</Table.Cell>\n                    <Table.Cell>{r.nehez && <Icon compact color='green' name='check' />}</Table.Cell>\n                </Table.Row>\n            })}\n        </Table.Body>\n    </Table>\n}","import React, { useEffect, useState } from 'react';\r\nimport { Button, Checkbox, Grid, GridColumn, GridRow, Input, Label } from 'semantic-ui-react';\r\nimport { Pancel } from '../engine/pancel';\r\nimport { IntegerInput } from './IntegerInput';\r\n\r\n\r\n\r\nexport const PancelEditor: React.FC<{ pancel?: Pancel, submit: (pancel: Pancel) => unknown, cancel: () => unknown }> = ({ pancel, submit, cancel }) => {\r\n\r\n    const [form, setForm] = useState<Pancel>(pancel ?? { name: '', mgt: 0, sfe: 0, nehez: false });\r\n\r\n    useEffect(() => {\r\n        setForm(pancel ?? { name: '', mgt: 0, sfe: 0, nehez: false });\r\n    }, [pancel]);\r\n\r\n    return <Grid columns={1} relaxed>\r\n        <GridRow>\r\n            <GridColumn>\r\n                <div>\r\n                    <Input fluid labelPosition='left' placeholder='Fegyver neve...' error={!form.name} value={form.name} onChange={e => setForm({ ...form, name: e.target.value })}>\r\n                        <Label pointing='right' basic>Név</Label>\r\n                        <input />\r\n                    </Input>\r\n                </div>\r\n                <div><IntegerInput value={form.sfe} onChange={sfe => setForm({ ...form, sfe: sfe ?? 0 })} label='SFÉ' /></div>\r\n                <div><IntegerInput value={form.mgt} onChange={mgt => setForm({ ...form, mgt: mgt ?? 0 })} label='MGT' /></div>\r\n                <div>\r\n                    <Label pointing='right' basic>Nehéz:</Label>\r\n                    <Checkbox fitted={true} toggle checked={form.nehez} onChange={() => setForm({ ...form, nehez: !form.nehez })}>\r\n                    </Checkbox>\r\n                </div>\r\n            </GridColumn>\r\n        </GridRow>\r\n        <GridRow textAlign='center'>\r\n            <GridColumn>\r\n                {!!form.name && <Button onClick={() => submit(form)}>Ment</Button>}\r\n                <Button secondary basic onClick={cancel}>Mégse</Button>\r\n            </GridColumn>\r\n        </GridRow>\r\n    </Grid>;\r\n}","import React, { useCallback, useState } from 'react';\r\nimport { Button, Grid, GridColumn, GridRow, Header, Modal } from 'semantic-ui-react';\r\nimport { Karakter } from '../engine/karakter';\r\nimport { Pancel } from '../engine/pancel';\r\nimport { PancelEditor } from './PancelEditor';\r\nimport { PancelLista } from './PancelLista';\r\n\r\ninterface PancelValasztoProps {\r\n    pancelok: Array<Pancel>,\r\n    karakter: Karakter,\r\n    save: (karakter: Karakter) => unknown,\r\n    savePancelok: (pancelok: Array<Pancel>) => unknown\r\n}\r\n\r\nexport const PancelValaszto: React.FC<PancelValasztoProps> = ({ karakter, save, pancelok, savePancelok }) => {\r\n\r\n    const [selected, setSelected] = useState<number>();\r\n    const [selectedForDeletion, setSelectedForDeletion] = useState<number>();\r\n    const [editorOpen, setEditorOpen] = useState<boolean>(false);\r\n    const [listEditorOpen, setListEditorOpen] = useState<boolean>(false);\r\n\r\n    const saveDeletion = useCallback(() => {\r\n        if (selectedForDeletion !== undefined) {\r\n            karakter.pancelok = karakter.pancelok?.filter((f, i) => i !== selectedForDeletion);\r\n            karakter.valasztottPancel = undefined;\r\n            save(karakter);\r\n        }\r\n    }, [karakter, save, selectedForDeletion]);\r\n\r\n    return <Grid columns={3} relaxed>\r\n        <GridRow columns='equal'>\r\n            <GridColumn>\r\n                <Header size='large'>Választható\r\n                    <Button floated='right' secondary disabled={selected === undefined || (karakter.pancelok ?? []).some(p => p.name === pancelok[selected].name)} onClick={() => {\r\n                        karakter.pancelok = karakter.pancelok ?? [];\r\n                        if (selected && karakter.pancelok.every(p => p.name !== pancelok[selected].name)) {\r\n                            karakter.pancelok.push(pancelok[selected]);\r\n                            save(karakter);\r\n                        }\r\n                    }}>Választ</Button>\r\n                    <Modal trigger={<Button floated='right' primary>{selected !== undefined ? 'Módosít' : 'Új'}</Button>}\r\n                        onOpen={() => setListEditorOpen(true)}\r\n                        onClose={() => setListEditorOpen(false)}\r\n                        open={listEditorOpen}>\r\n                        <Modal.Content>\r\n                            <PancelEditor\r\n                                pancel={selected !== undefined ? pancelok[selected] : undefined}\r\n                                submit={f => {\r\n                                    if (selected === undefined) {\r\n                                        pancelok.push(f);\r\n                                    } else {\r\n                                        pancelok[selected] = f;\r\n                                    }\r\n                                    savePancelok(pancelok);\r\n                                    setListEditorOpen(false);\r\n                                }}\r\n                                cancel={() => setListEditorOpen(false)} />\r\n                        </Modal.Content>\r\n                    </Modal>\r\n                    <Button floated='right' negative disabled={selected === undefined} onClick={() => {\r\n                        savePancelok(pancelok.filter((f, i) => i !== selected));\r\n                    }}>Töröl</Button>\r\n                </Header>\r\n                <PancelLista pancelok={pancelok.sort((a, b) => a.name.localeCompare(b.name))} selected={selected} onSelectionChange={setSelected} />\r\n            </GridColumn>\r\n            <GridColumn>\r\n                <Header size='large'>Viselt\r\n                    <Modal trigger={<Button floated='right' primary>{selectedForDeletion !== undefined ? 'Módosít' : 'Új'}</Button>} onOpen={() => setEditorOpen(true)} onClose={() => setEditorOpen(false)} open={editorOpen}>\r\n                        <Modal.Content>\r\n                            <PancelEditor\r\n                                pancel={selectedForDeletion !== undefined ? karakter.pancelok?.[selectedForDeletion] : undefined}\r\n                                submit={p => {\r\n                                    karakter.pancelok = karakter.pancelok ?? [];\r\n                                    if (selectedForDeletion !== undefined) {\r\n                                        karakter.pancelok[selectedForDeletion] = p;\r\n                                    } else {\r\n                                        karakter.pancelok.push(p);\r\n                                    }\r\n                                    save(karakter);\r\n                                    setEditorOpen(false)\r\n                                }}\r\n                                cancel={() => setEditorOpen(false)} />\r\n                        </Modal.Content>\r\n                    </Modal>\r\n                    <Button floated='right' negative disabled={selectedForDeletion === undefined} onClick={saveDeletion}>Töröl</Button>\r\n                </Header>\r\n                <PancelLista pancelok={karakter.pancelok} selected={selectedForDeletion} onSelectionChange={setSelectedForDeletion}></PancelLista>\r\n            </GridColumn>\r\n        </GridRow>\r\n        <GridRow columns={1} textAlign='center'>\r\n            <GridColumn>\r\n                <div>\r\n                </div>\r\n            </GridColumn>\r\n        </GridRow>\r\n    </Grid>\r\n}\r\n","import React, { useState } from 'react';\nimport { Button, Confirm, Grid, GridColumn, GridRow, Input, Label, Modal, Table } from 'semantic-ui-react';\nimport { DobasMatrixDisplay } from '../components/DobasMatrixDisplay';\nimport { PointsTable } from '../components/PointsTable';\nimport { FegyverLista } from '../components/FegyverLista';\nimport { FegyverValaszto } from '../components/FegyverValaszto';\nimport { HMEloszto } from '../components/HMEloszto';\nimport { KepzettsegLista } from '../components/KepzettsegLista';\nimport { DobasMatrix } from '../engine/dobasmatrix';\nimport { FEGYVERTELEN, HARCERTEK_DISPLAY_NAMES } from '../engine/harc';\nimport { calculateHarcertek, calculateMGT, Fegyver, Karakter, szintlepes } from '../engine/karakter';\nimport { KEPESSEG_NEV } from '../engine/kasztok';\nimport fileDownload from 'js-file-download';\nimport { KepzettsegModal } from '../components/KepzettsegModal';\nimport { PancelLista } from '../components/PancelLista';\nimport { PancelValaszto } from '../components/PancelValaszto';\nimport { Pancel } from '../engine/pancel';\n\ninterface KarakterlapProps {\n    categories: Array<string>,\n    karakter: Karakter,\n    fegyverek: Array<Fegyver>,\n    pancelok: Array<Pancel>,\n    savePancelok: (pancelok: Array<Pancel>) => unknown,\n    save: (karakter: Karakter) => unknown,\n    saveFegyverek: (fegyverek: Array<Fegyver>) => unknown,\n    remove: () => unknown\n}\n\nexport const Karakterlap: React.FC<KarakterlapProps> = ({ karakter, save, remove, categories, fegyverek, saveFegyverek, pancelok, savePancelok }) => {\n    const [ujfegyver, setUjFegyver] = useState(false)\n    const [ujPancel, setUjPancel] = useState(false)\n    const [kategoriak, setKategoriak] = useState(false);\n    const [ujKategoria, setUjKategoria] = useState('');\n    const [torlesKerdes, setTorlesKerdes] = useState(false);\n\n    const exportKarakter = () => {\n        fileDownload(JSON.stringify(karakter), `${karakter.name}.json`, 'text/json');\n    }\n\n    const mgt = calculateMGT(karakter);\n    const kepessegMatrix = new DobasMatrix(Object.keys(KEPESSEG_NEV)).add('alap', karakter.kepessegek as any);\n    if (mgt[0] > 0) {\n        kepessegMatrix.add('mgt', { gy: -mgt[0], ugy: -mgt[0] });\n    }\n    kepessegMatrix.roll();\n    return <Grid relaxed>\n        <GridRow columns={3}>\n            <GridColumn>\n                <Table striped definition>\n                    <Table.Row><Table.Cell>Név:</Table.Cell><Table.Cell>{karakter.name}</Table.Cell></Table.Row>\n                    <Table.Row><Table.Cell>Faj:</Table.Cell><Table.Cell>{karakter.faj}</Table.Cell></Table.Row>\n                    <Table.Row><Table.Cell>Kaszt:</Table.Cell><Table.Cell>{karakter.kaszt.name}</Table.Cell></Table.Row>\n                    <Table.Row><Table.Cell>Szint:</Table.Cell>\n                        <Table.Cell>\n                            <Button as='div' labelPosition='left'>\n                                <Label pointing='right'>\n                                    {karakter.szint}\n                                </Label>\n                                <Button secondary onClick={() => { save(szintlepes(karakter)) }}>Szintlépés</Button>\n                            </Button>\n                        </Table.Cell>\n                    </Table.Row>\n                    <Table.Row>\n                        <Table.Cell>Kategóriák\n                        <Modal trigger={<Button floated='right' size='tiny' circular color='orange'>+</Button>} onOpen={() => setKategoriak(true)} onClose={() => setKategoriak(false)} open={kategoriak} size='fullscreen' title='Új kategória'>\n                                <Modal.Header>Új kategória</Modal.Header>\n                                <Modal.Content>\n                                    <Input list='categories' value={ujKategoria} onChange={e => setUjKategoria(e.target.value)} />\n                                    <datalist id='categories'>\n                                        {categories.map(c => <option value={c}>{c}</option>)}\n                                    </datalist>\n                                    <Button onClick={() => { karakter.categories.push(ujKategoria); setKategoriak(false); save(karakter) }}>Hozzáad</Button>\n                                </Modal.Content>\n                            </Modal>\n\n                        </Table.Cell>\n                        <Table.Cell>\n                            {karakter.categories.map(c => <Label tag>{c}</Label>)}\n                        </Table.Cell>\n                    </Table.Row>\n                    <Table.Row>\n                        <Table.Cell colSpan={2}>\n                            <Button onClick={() => setTorlesKerdes(true)} color='red' circular>Karakter törlése</Button>\n                            <Confirm\n                                open={torlesKerdes}\n                                onCancel={() => setTorlesKerdes(false)}\n                                onConfirm={() => { setTorlesKerdes(false); remove() }}\n                                header='Karakter törlése'\n                                content='Tuti?'\n                                cancelButton='Nem'\n                                confirmButton='De' />\n                            <Button onClick={exportKarakter} color='green' circular>Export</Button>\n                        </Table.Cell>\n                    </Table.Row>\n                </Table>\n                {karakter.hm > 0 && <div><HMEloszto harcertek={karakter.hmHarcertek} hm={karakter.hm} complete={(he, hm) => {\n                    karakter.hmHarcertek = he;\n                    karakter.hm = hm;\n                    save(karakter);\n                }} /> </div>}\n                <PointsTable\n                    points={(function () {\n                        const ret = [\n                            { name: 'ep', label: 'ÉP', max: karakter.maxEp, akt: karakter.ep },\n                            { name: 'fp', label: 'FP', max: karakter.maxFp, akt: karakter.fp }];\n                        if (karakter.pszi) {\n                            ret.push({ name: 'pszi', label: 'ΨP', max: karakter.pszi.max, akt: karakter.pszi.akt })\n                        }\n                        if (karakter.mp) {\n                            ret.push({ name: 'mp', label: 'MP', max: karakter.mp.max, akt: karakter.mp.akt })\n                        }\n                        return ret;\n                    })()}\n                    onChange={(name, value) => {\n                        if (name === 'ep' || name === 'fp') {\n                            (karakter as any)[name] = value;\n                        } else {\n                            (karakter as any)[name].akt = value;\n                        }\n                        save(karakter);\n                    }}\n                />\n            </GridColumn>\n            <GridColumn>\n                <div><DobasMatrixDisplay title='Harcértékek' matrix={calculateHarcertek(karakter, karakter.valasztottFegyver !== undefined ? karakter.fegyverek[karakter.valasztottFegyver] : FEGYVERTELEN).roll(['te', 've', 'ce', 'ke'])} direction='vertical' keyMap={HARCERTEK_DISPLAY_NAMES} /></div>\n                <FegyverLista fegyverek={karakter.fegyverek} selected={karakter.valasztottFegyver} onSelectionChange={f => { karakter.valasztottFegyver = f; save(karakter) }} />\n                <PancelLista pancelok={karakter.pancelok} selected={karakter.valasztottPancel} onSelectionChange={f => { karakter.valasztottPancel = f; save(karakter) }} />\n                <Modal trigger={<Button primary>Fegyverlista módosítása</Button>} onOpen={() => setUjFegyver(true)} onClose={() => setUjFegyver(false)} open={ujfegyver} size='fullscreen'>\n                    <Modal.Header>Fegyverlista módosítása</Modal.Header>\n                    <Modal.Content>\n                        <FegyverValaszto saveFegyverek={saveFegyverek} fegyverek={fegyverek} karakter={karakter} save={k => { save(k); }} />\n                    </Modal.Content>\n                </Modal>\n                <Modal trigger={<Button primary>Páncéllista módosítása</Button>} onOpen={() => setUjPancel(true)} onClose={() => setUjPancel(false)} open={ujPancel} size='fullscreen'>\n                    <Modal.Header>Páncéllista módosítása</Modal.Header>\n                    <Modal.Content>\n                        <PancelValaszto savePancelok={savePancelok} pancelok={pancelok} karakter={karakter} save={save} />\n                    </Modal.Content>\n                </Modal>\n            </GridColumn>\n            <GridColumn>\n                <div><DobasMatrixDisplay title='Képességek' matrix={kepessegMatrix} direction='vertical' keyMap={KEPESSEG_NEV} /></div>\n            </GridColumn>\n        </GridRow>\n        <GridRow>\n            <GridColumn>\n                <div><KepzettsegLista kepzettsegek={karakter.kepzettsegek} /></div>\n                <div><KepzettsegModal karakter={karakter} save={save} /></div>\n            </GridColumn>\n        </GridRow>\n    </Grid>\n}","\r\nexport interface Pancel {\r\n    name: string;\r\n    sfe: number;\r\n    mgt: number;\r\n    nehez?: boolean;\r\n}\r\n\r\nexport const PANCELOK: Array<Pancel> = [\r\n    { name: 'posztó', sfe: 1, mgt: 0 },\r\n    { name: 'kivert bőr', sfe: 1, mgt: 0 },\r\n    { name: 'keményített bőr', sfe: 2, mgt: 2 },\r\n    { name: 'gyűrűs', sfe: 1, mgt: 1 },\r\n    { name: 'brigantin', sfe: 3, mgt: 2 },\r\n    { name: 'láncing', sfe: 2, mgt: 1 },\r\n    { name: 'sodronying', sfe: 3, mgt: 1 },\r\n    { name: 'pikkelyvért', sfe: 3, mgt: 2 },\r\n    { name: 'lemezvértezet', sfe: 3, mgt: 3, nehez: true },\r\n    { name: 'mellvért', sfe: 4, mgt: 4, nehez: true },\r\n    { name: 'félvértezet', sfe: 5, mgt: 6, nehez: true },\r\n    { name: 'teljes vértezet', sfe: 6, mgt: 8, nehez: true }\r\n]","import { useState } from \"react\";\nimport { FEGYVEREK } from \"../engine/harc\";\nimport { Fegyver, Karakter, KarakterInfo } from \"../engine/karakter\";\nimport { FAJ_KEPESSEG, KepessegDobas } from \"../engine/kasztok\";\nimport { Pancel, PANCELOK } from \"../engine/pancel\";\n\nconst PREFIX = 'magus.';\nconst CONFIG_PREFIX = 'magus-config.';\nconst STORY_KEY = 'magus-story';\n\ninterface DataConnector {\n    categories: () => Array<string>;\n    list: (category?: string) => Array<KarakterInfo>;\n    load: (info: KarakterInfo) => Karakter;\n    save: (karakter: Karakter) => void;\n    remove: (info: KarakterInfo) => void;\n    listFajok: () => Record<string, KepessegDobas>;\n    listFegyverek: () => Array<Fegyver>;\n    saveFegyverek: (fegyverek: Array<Fegyver>) => void;\n    listPancelok: () => Array<Pancel>;\n    savePancelok: (pancelok: Array<Pancel>) => void;\n    loadStory: () => string,\n    saveStory: (story: string) => unknown;\n    key?: number;\n}\n\nexport function useDataConnector(): DataConnector {\n\n    const [operations, setOperations] = useState(0);\n\n    function fetch<T>(name: string): T {\n        const s = window.localStorage.getItem(name);\n        return s ? JSON.parse(s) : null;\n    };\n\n    function put(name: string, ob: any) {\n        window.localStorage.setItem(name, JSON.stringify(ob));\n        setOperations(operations + 1);\n    }\n\n    const categories = (): Array<string> => {\n        return [...new Set(list().flatMap(info => info.categories))];\n    }\n\n    const list = (category?: string): Array<KarakterInfo> => {\n        const all: Array<KarakterInfo> = [...Array(window.localStorage.length)].map((_, i) => window.localStorage.key(i) ?? '').filter(key => key.startsWith(PREFIX)).map(key => fetch(key));\n        if (!category) {\n            return all;\n        }\n        return all.filter(k => k.categories.some(cat => cat === category));\n    };\n\n    const load = (info: KarakterInfo): Karakter => {\n        return fetch(PREFIX + info.id);\n    };\n\n    const save = (karakter: Karakter): void => {\n        put(PREFIX + karakter.id, karakter);\n    };\n\n    const remove = (info: KarakterInfo) => {\n        window.localStorage.removeItem(PREFIX + info.id);\n    }\n\n    (window as any).exportMagus = () => {\n        const ret: Record<string, any> = {};\n        list('').forEach(key => {\n            ret[key.id] = load(key);\n        })\n        console.log('export', JSON.stringify(ret));\n    }\n\n    (window as any).importMagus = (content: string) => {\n        const all = JSON.parse(content);\n        Object.keys(all).forEach(key => save(all[key]));\n        console.log('import complete');\n    }\n\n\n    return {\n        categories,\n        list,\n        load,\n        save,\n        remove,\n        listFajok: () => FAJ_KEPESSEG,\n        listFegyverek: () => {\n            let ret = fetch<Array<Fegyver>>(CONFIG_PREFIX + 'fegyverek');\n            if (!ret) {\n                put(CONFIG_PREFIX + 'fegyverek', FEGYVEREK);\n                ret = FEGYVEREK;\n            }\n            return ret;\n        },\n        saveFegyverek: fegyverek => put(CONFIG_PREFIX + 'fegyverek', fegyverek),\n        listPancelok: () => {\n            let ret = fetch<Array<Pancel>>(CONFIG_PREFIX + 'pancelok');\n            if (!ret) {\n                put(CONFIG_PREFIX + 'pancelok', PANCELOK);\n                ret = PANCELOK;\n            }\n            return ret;\n        },\n        savePancelok: pancelok => put(CONFIG_PREFIX + 'pancelok', pancelok),\n        loadStory: () => fetch(STORY_KEY) ?? '<story/>',\n        saveStory: (story: string) => put(STORY_KEY, story),\n        key: operations\n    }\n}","import React from 'react';\r\nimport { Dropdown } from 'semantic-ui-react';\r\n\r\ninterface CategoriesDropdownProps {\r\n    categories: Array<string>;\r\n    currentCategory: string;\r\n    setCurrentCategory: (category: string) => unknown\r\n}\r\n\r\nexport const CategoriesDropdown: React.FC<CategoriesDropdownProps> = ({ currentCategory, setCurrentCategory, categories }) => {\r\n    return <Dropdown item text={`Karakterek: ${currentCategory || 'Összes'}`}>\r\n        <Dropdown.Menu>\r\n            <Dropdown.Item onClick={() => setCurrentCategory('')}>Összes</Dropdown.Item>\r\n            {categories.map(k => <Dropdown.Item onClick={() => setCurrentCategory(k)}>{k}</Dropdown.Item>)}\r\n        </Dropdown.Menu>\r\n    </Dropdown>\r\n}","import React, { Component, ReactNode } from 'react'\r\n\r\nexport interface DragAndDropProps {\r\n    handleDrop: (files: FileList) => unknown;\r\n    dragPlaceholder: ReactNode\r\n}\r\n\r\nclass DragAndDrop extends Component<DragAndDropProps, {}> {\r\n    state = {\r\n        drag: false\r\n    }\r\n    dropRef = React.createRef<HTMLDivElement>();\r\n    dragCounter = 0;\r\n\r\n    handleDrag = (e: Event) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n    }\r\n\r\n    handleDragIn = (e: DragEvent) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        this.dragCounter++\r\n        if (e.dataTransfer?.items && e.dataTransfer.items.length > 0) {\r\n            this.setState({ drag: true })\r\n        }\r\n    }\r\n    handleDragOut = (e: DragEvent) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        this.dragCounter--\r\n        if (this.dragCounter === 0) {\r\n            this.setState({ drag: false })\r\n        }\r\n    }\r\n    handleDrop = (e: DragEvent) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        this.setState({ drag: false })\r\n        if (e.dataTransfer?.files && e.dataTransfer.files.length > 0) {\r\n            this.props.handleDrop(e.dataTransfer.files)\r\n            e.dataTransfer.clearData()\r\n            this.dragCounter = 0\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        let div = this.dropRef.current;\r\n        if (div) {\r\n            div.addEventListener('dragenter', this.handleDragIn)\r\n            div.addEventListener('dragleave', this.handleDragOut)\r\n            div.addEventListener('dragover', this.handleDrag)\r\n            div.addEventListener('drop', this.handleDrop)\r\n        }\r\n    }\r\n    componentWillUnmount() {\r\n        let div = this.dropRef.current;\r\n        if (div) {\r\n            div.removeEventListener('dragenter', this.handleDragIn)\r\n            div.removeEventListener('dragleave', this.handleDragOut)\r\n            div.removeEventListener('dragover', this.handleDrag)\r\n            div.removeEventListener('drop', this.handleDrop)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div\r\n                style={{ display: 'inline-block', position: 'relative' }}\r\n                ref={this.dropRef}\r\n            >\r\n                {this.state.drag ? this.props.dragPlaceholder : this.props.children}\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default DragAndDrop","import React from 'react';\r\nimport { Button, Icon } from 'semantic-ui-react';\r\nimport { Karakter } from '../engine/karakter';\r\nimport DragAndDrop from './DragAndDrop';\r\n\r\nexport const KarakterImport: React.FC<{ save: (karakter: Karakter) => unknown, saveMese: (story: string) => unknown }> = ({ save, saveMese }) => {\r\n    return <DragAndDrop\r\n        dragPlaceholder={<Button circular as='div' color='green'><Icon name='upload' />Import</Button>}\r\n        handleDrop={async l => {\r\n            const text = await l.item(0)?.text();\r\n            const mese = l.item(0)?.name.endsWith('.xml');\r\n            if (text) {\r\n                if (mese) {\r\n                    saveMese(text);\r\n                } else {\r\n                    save(JSON.parse(text));\r\n                }\r\n            }\r\n        }}>\r\n        <Button circular basic as='div' color='green'><Icon name='upload' />Import</Button>\r\n    </DragAndDrop>\r\n\r\n}","import React, { useCallback, useReducer, useState } from 'react';\nimport { DiceRollResult, formatDiceRoll, parseDiceRoll, roll } from '../engine/roll';\nimport { DobasEredmeny } from '../components/DobasEredmeny';\nimport { Button, Dropdown, Grid, GridColumn, GridRow, Header, Input, Label } from 'semantic-ui-react';\nimport { IntegerInput } from '../components/IntegerInput';\nconst { Slider } = require('react-semantic-ui-range');\n\nconst DICE_ROLLS = [2, 3, 5, 6, 10, 100];\nconst PLUS = [1, 2, 3, 5, 10];\nconst HISTORY_LENGTH = 10;\n\nconst MERETEK: Record<string, number> = {\n    'óriás': -30,\n    'ló': -15,\n    'ember': 0,\n    'kutya': 20,\n    'dinnya': 35,\n    'alma': 50,\n    'fémpénz': 65\n}\n\nconst MOZGASOK: Record<string, number> = {\n    'mozdulatlan': 0,\n    'kiszámíthatóan mozgó': 20,\n    'kiszámíthatatlanul mozgó': 35,\n    'kitérésre összpontosító': 50\n\n}\n\nconst VISZONYOK: Record<string, number> = {\n    'napsütés, szélcsend': 0,\n    'szemerkélő eső, szellő': 10,\n    'gyenge eső/szél': 30,\n    'gyenge köd, eső, erős szél': 50,\n    'sűrű köd, zivatar, viharos szél': 70,\n    'egészen sűrű köd, felhőszakadás, orkán': 100,\n\n}\n\n\ninterface LofegyverVedo {\n    tavolsag: number,\n    meret: string;\n    mozgas: string;\n    viszonyok: string;\n}\n\nexport const Kockadobo: React.FC<{}> = () => {\n    const [input, setInput] = useState('');\n    const [result, setResult] = useState({} as DiceRollResult);\n    const [history, addToHistory] = useReducer((prev: Array<string>, elem: string) => {\n        if (prev[0] === elem) {\n            return prev;\n        }\n        return [elem, ...prev.slice(0, HISTORY_LENGTH - 1)];\n    }, []);\n    const [lofegyverVedo, setLofegyverVedo] = useState<LofegyverVedo>({ tavolsag: 0, meret: 'ember', mozgas: 'mozdulatlan', viszonyok: 'napsütés, szélcsend' });\n\n    const dob = useCallback((ijasz?: boolean) => {\n        setResult(roll(input, ijasz));\n        addToHistory(input);\n    }, [input, setResult, addToHistory]);\n\n    const setKocka = useCallback((k: number) => {\n        const diceRoll = parseDiceRoll(input);\n        if (diceRoll.die === k) {\n            diceRoll.numDice++;\n        } else {\n            diceRoll.die = k;\n            diceRoll.numDice = 1;\n        }\n        setInput(formatDiceRoll(diceRoll));\n    }, [input, setInput]);\n\n    const setPlus = useCallback((k: number) => {\n        const diceRoll = parseDiceRoll(input);\n        if (k === 0) {\n            diceRoll.plus = 0;\n        } else {\n            diceRoll.plus += k;\n        }\n        setInput(formatDiceRoll(diceRoll));\n    }, [input, setInput]);\n\n\n    return <Grid columns={1} divided='vertically'>\n        <GridRow>\n            <GridColumn>\n                <Header>Kockadobás</Header>\n                <div>\n                    <Input labelPosition='right' value={input} onChange={e => setInput(e.target.value)}>\n                        <Label basic pointing='right'>Dobás</Label>\n                        <input />\n                        <DobasEredmeny pointing='left' result={result} />\n                        <Button.Group color='teal'>\n                            <Button primary disabled={!input} onClick={() => dob()}>Dob</Button>\n                            <Dropdown\n                                className='button icon'\n                                floating\n                                trigger={<></>}\n                            >\n                                <Dropdown.Menu>\n                                    <Button primary onClick={() => dob(true)}>Íjász szabállyal</Button>\n                                </Dropdown.Menu>\n                            </Dropdown>\n                        </Button.Group>\n\n                    </Input>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Kocka</Label>\n                        {DICE_ROLLS.map(r => <Button onClick={() => setKocka(r)}>k{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Osztó</Label>\n                        {[1, 2, 3].map(r => <Button onClick={() => {\n                            const diceRoll = parseDiceRoll(input);\n                            diceRoll.div = r;\n                            setInput(formatDiceRoll(diceRoll))\n                        }}>/{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Plusz</Label>\n                        {[...PLUS].reverse().map(r => <Button onClick={() => setPlus(-r)}>-{r}</Button>)}\n                        <Button secondary onClick={() => setPlus(0)}>0</Button>\n                        {PLUS.map(r => <Button onClick={() => setPlus(r)}>+{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Ó, újra</Label>\n                        {history.map(h => <Button color='olive' onClick={() => setInput(h)}>{h}</Button>)}\n                    </Button>\n                </div>\n            </GridColumn>\n        </GridRow>\n        <GridRow>\n            <GridColumn>\n                <Header>Célzás védő érték</Header>\n                <div>\n                    <Slider value={lofegyverVedo.tavolsag} settings={{ min: 0, max: 100, step: 1, onChange: (v: number) => setLofegyverVedo({ ...lofegyverVedo, tavolsag: v }) }} />\n                    <IntegerInput label='Távolság' value={lofegyverVedo.tavolsag} onChange={v => setLofegyverVedo({ ...lofegyverVedo, tavolsag: Math.min(v ?? 0, 100) })} />\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Méret</Label>\n                        {Object.keys(MERETEK).map(r => <Button active={lofegyverVedo.meret === r} onClick={() => setLofegyverVedo({ ...lofegyverVedo, meret: r })}>{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Mozgás</Label>\n                        {Object.keys(MOZGASOK).map(r => <Button active={lofegyverVedo.mozgas === r} onClick={() => setLofegyverVedo({ ...lofegyverVedo, mozgas: r })}>{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Viszonyok</Label>\n                        {Object.keys(VISZONYOK).map(r => <Button active={lofegyverVedo.viszonyok === r} onClick={() => setLofegyverVedo({ ...lofegyverVedo, viszonyok: r })}>{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Védő érték</Label>\n                        <Label color='black' size='large'>{30 + lofegyverVedo.tavolsag + MERETEK[lofegyverVedo.meret] + MOZGASOK[lofegyverVedo.mozgas] + VISZONYOK[lofegyverVedo.viszonyok]}</Label>\n                    </Button>\n                </div>\n            </GridColumn>\n        </GridRow>\n    </Grid>\n}","import React, { useState } from 'react';\r\nimport { Modal, Button } from 'semantic-ui-react';\r\nimport { Kockadobo } from '../pages/Kocskadobo';\r\n\r\nexport const KockaModal: React.FC<{}> = () => {\r\n    const [kockaOpen, setKockaOpen] = useState(false);\r\n    return <Modal trigger={<Button primary>Kocka</Button>} onOpen={() => setKockaOpen(true)} onClose={() => setKockaOpen(false)} open={kockaOpen}>\r\n        <Modal.Content>\r\n            <Kockadobo />\r\n        </Modal.Content>\r\n    </Modal>\r\n}","export default __webpack_public_path__ + \"static/media/magus.810aa1ee.png\";","import React from 'react';\nimport { Icon, Menu, Image, Button } from 'semantic-ui-react';\nimport { Karakter, KarakterInfo } from '../engine/karakter';\nimport { CategoriesDropdown } from './CategoriesDropdown';\nimport { KarakterImport } from './KarakterImport';\nimport { KockaModal } from './KockaModal';\n\nimport logo from '../static/magus.png';\nimport { PageSelection } from '../App';\n\n\ninterface PageHeaderProps {\n    categories: Array<string>;\n    currentCategory: string;\n    setCurrentCategory: (category: string) => unknown;\n    karakter?: KarakterInfo;\n    karakterek: Array<KarakterInfo>;\n    page: PageSelection;\n    setPage: (pageSelection: PageSelection) => unknown;\n    save: (karakter: Karakter) => unknown;\n    saveMese: (story: string) => unknown;\n}\n\nexport const PageHeader: React.FC<PageHeaderProps> = ({ categories, currentCategory, setCurrentCategory, karakter, karakterek, page, setPage, save, saveMese }) => {\n    return <Menu tabular>\n        <Menu.Item header>\n            <Image src={logo} size='mini' onClick={() => setPage({ page: page.page === 'story' ? 'home' : 'story' })} />\n        </Menu.Item>\n        <CategoriesDropdown categories={categories} currentCategory={currentCategory} setCurrentCategory={setCurrentCategory} />\n        {karakterek.map(k => <Menu.Item active={k.id === karakter?.id} name={k.name} onClick={() => setPage({ page: 'karakterlap', karakter: k })}>\n        </Menu.Item>)}\n        <Menu.Item active={page.page === 'karakteralkoto'} onClick={() => setPage({ page: 'karakteralkoto' })}>\n            <Icon name='plus' />\n        </Menu.Item>\n        <Menu.Item position='right'>\n            <KarakterImport save={save} saveMese={saveMese} />\n            <Button negative onClick={() => setPage({ page: 'kombat', category: currentCategory })}>Kombat</Button>\n            <KockaModal />\n        </Menu.Item>\n    </Menu>\n}","import React from 'react';\r\nimport { Dropdown, DropdownItemProps, Label } from 'semantic-ui-react';\r\nimport { SZITUACIOK } from '../engine/harc';\r\n\r\nexport const SzituacioSelector: React.FC<{ szituaciok: Array<string>, setSzituaciok: (value: Array<string>) => unknown }> = ({ szituaciok, setSzituaciok }) => {\r\n\r\n    const szituacioOptions: Array<DropdownItemProps> = Object.keys(SZITUACIOK).sort().map(nev => ({\r\n        id: nev,\r\n        key: nev,\r\n        value: nev,\r\n        text: nev\r\n    }));\r\n\r\n    const renderLabel = (label: any) => ({\r\n        color: 'blue',\r\n        content: `${label.text}`,\r\n    })\r\n\r\n    return <>\r\n        <Dropdown multiple simple className='icon' icon=''\r\n            renderLabel={renderLabel}\r\n            text='Harci szituáció'\r\n            onChange={(e, v) => { setSzituaciok([...v.value as Array<string>]) }}\r\n            options={szituacioOptions}\r\n            value={szituaciok}>\r\n        </Dropdown>\r\n    </>\r\n}","import React, { forwardRef, useEffect, useImperativeHandle, useState } from 'react';\r\nimport { Button, Card, Dropdown, DropdownItemProps, Table } from 'semantic-ui-react';\r\nimport { DobasMatrix } from '../engine/dobasmatrix';\r\nimport { FEGYVERTELEN, HARCERTEK_DISPLAY_NAMES, SZITUACIOK } from '../engine/harc';\r\nimport { calculateHarcertek, calculateSebesulesHatrany, Karakter } from '../engine/karakter';\r\nimport { DiceRollResult, formatDiceRoll, parseDiceRoll, roll, sumRolls } from '../engine/roll';\r\nimport { DobasEredmeny } from './DobasEredmeny';\r\nimport { PointsTable } from './PointsTable';\r\nimport { SzituacioSelector } from './SzituacioSelector';\r\n\r\nexport interface KombatCardProps {\r\n    karakter: Karakter,\r\n    save: (karakter: Karakter) => unknown,\r\n    dobasEredmeny: Record<string, DiceRollResult>,\r\n    setDobasEredmeny(value: Record<string, DiceRollResult>): unknown,\r\n}\r\n\r\n\r\nexport const KombatCard: React.ForwardRefExoticComponent<KombatCardProps & React.RefAttributes<unknown>> = forwardRef(({ karakter, save, dobasEredmeny, setDobasEredmeny }, ref) => {\r\n    const [szituaciok, setSzituaciok] = useState<Array<string>>([]);\r\n\r\n    const fegyver = karakter.valasztottFegyver !== undefined ? karakter.fegyverek[karakter.valasztottFegyver] : FEGYVERTELEN;\r\n    const harcertekMatrix = calculateHarcertek(karakter, fegyver, szituaciok.map(sz => ({ ...SZITUACIOK[sz], name: sz }))).roll(['ke', 'te', 'ce', 've']);\r\n    const sebzesRoll = sumRolls(harcertekMatrix.getRolls('sebzes')) ?? parseDiceRoll();\r\n\r\n    useImperativeHandle(ref, () => ({\r\n        rollKe: () => {\r\n            return roll('1k10+' + harcertekMatrix.sum.ke);\r\n        },\r\n        rollTe: () => {\r\n            return roll('1k100+' + harcertekMatrix.sum.te);\r\n        },\r\n        rollCe: () => {\r\n            return roll('1k100+' + harcertekMatrix.sum.ce);\r\n        },\r\n        rollSebzes: () => {\r\n            return roll(sebzesRoll, fegyver.harcertek.ce > 0);\r\n        },\r\n    }), [harcertekMatrix, sebzesRoll, fegyver]);\r\n\r\n\r\n    const fegyverCsere = (v?: number) => {\r\n        karakter.valasztottFegyver = v === undefined ? undefined : Number(v);\r\n        save(karakter);\r\n    };\r\n\r\n    const options: Array<DropdownItemProps> = [\r\n        {\r\n            id: -1,\r\n            value: undefined,\r\n            text: 'fegyver nélkül'\r\n        }\r\n    ];\r\n    karakter.fegyverek.forEach((f, i) => options.push({ id: i, value: i, text: f.name }));\r\n\r\n    const cellContents = (name: string) => {\r\n        switch (name) {\r\n            case 'sebzes': return <><Button circular color='orange' onClick={() => {\r\n                setDobasEredmeny({ ...dobasEredmeny, 'sebzes': roll(sebzesRoll, fegyver.harcertek.ce > 0) });\r\n            }}>{formatDiceRoll(sebzesRoll)}</Button><DobasEredmeny result={dobasEredmeny.sebzes} /></>\r\n            case 'ke': return <><Button circular color='olive' onClick={() => setDobasEredmeny({ ...dobasEredmeny, 'ke': roll('1k10+' + harcertekMatrix.sum[name]) })}>{harcertekMatrix.sum[name]}</Button><DobasEredmeny result={dobasEredmeny.ke} /></>\r\n            case 'ce':\r\n            case 'te': return <><Button circular color='purple' onClick={() => setDobasEredmeny({ ...dobasEredmeny, [name]: roll('1k100+' + harcertekMatrix.sum[name]) })}>{harcertekMatrix.sum[name]}</Button><DobasEredmeny result={dobasEredmeny[name]} /></>\r\n            case 've': return harcertekMatrix.sum[name];\r\n        }\r\n    }\r\n\r\n    const headerColour = () => {\r\n        const down = karakter.ep <= 0 || karakter.fp <= 0;\r\n        if (down) {\r\n            return 'darkgrey';\r\n        }\r\n        const hatrany = calculateSebesulesHatrany(karakter);\r\n        if (!hatrany) {\r\n            return 'white';\r\n        }\r\n        if (hatrany.te === -10) {\r\n            return 'bisque';\r\n        }\r\n        if (hatrany.te === -20) {\r\n            return 'coral';\r\n        }\r\n    }\r\n\r\n    return <Card fluid style={{ backgroundColor: headerColour(), filter: 'drop-shadow(5px 5px 3px #333)' }}>\r\n        <Card.Content>\r\n            <Card.Header >{karakter.name}</Card.Header>\r\n            <Card.Description>\r\n                <PointsTable\r\n                    points={[{ name: 'ep', label: 'ÉP', max: karakter.maxEp, akt: karakter.ep }, { name: 'fp', label: 'FP', max: karakter.maxFp, akt: karakter.fp }]}\r\n                    onChange={(name, value) => {\r\n                        (karakter as any)[name] = value;\r\n                        save(karakter);\r\n                    }}\r\n                />\r\n                <Table columns={2} singleLine>\r\n                    <Table.Header>\r\n                        <Table.HeaderCell colSpan={2}>\r\n                            <Dropdown disabled={false} compact\r\n                                text={fegyver.name}\r\n                                onChange={(e, v) => fegyverCsere(v.value !== undefined ? Number(v.value) : undefined)}\r\n                                options={options}\r\n                                value={karakter.valasztottFegyver}>\r\n                            </Dropdown>\r\n                        </Table.HeaderCell>\r\n                    </Table.Header>\r\n                    {harcertekMatrix.keys.map(m => <Table.Row>\r\n                        <Table.HeaderCell>{(HARCERTEK_DISPLAY_NAMES as any)[m]}</Table.HeaderCell>\r\n                        <Table.Cell>{cellContents(m)}</Table.Cell>\r\n                    </Table.Row>\r\n                    )}\r\n                    {fegyver.name !== FEGYVERTELEN.name &&\r\n                        <Table.Row>\r\n                            <Table.HeaderCell>Tám/kör</Table.HeaderCell>\r\n                            <Table.Cell>{`${fegyver.lassu ? '1/' : ''}${fegyver.tamPerKor}`}</Table.Cell>\r\n                        </Table.Row>\r\n                    }\r\n                </Table>\r\n            </Card.Description>\r\n        </Card.Content>\r\n        <Card.Content extra textAlign='center'>\r\n            <SzituacioSelector szituaciok={szituaciok} setSzituaciok={setSzituaciok} />\r\n        </Card.Content>\r\n    </Card >\r\n});","import React, { useState } from 'react';\r\nimport { Button, ButtonGroup, CardGroup, Icon } from 'semantic-ui-react';\r\nimport { KombatCard } from '../components/KombatCard';\r\nimport { Karakter } from '../engine/karakter';\r\nimport { DiceRollResult } from '../engine/roll';\r\n\r\nexport const Kombat: React.FC<{ karakterek: Array<Karakter>; save: (karakter: Karakter) => unknown }> = ({ karakterek, save }) => {\r\n\r\n    const [dobasEredmenyek, setDobasEredmenyek] = useState<Record<string, Record<string, DiceRollResult>>>(karakterek.reduce((acc, curr) => { acc[curr.id] = {}; return acc; }, {} as Record<string, any>));\r\n    const [refs, _] = useState<Record<string, { current: any }>>({});\r\n\r\n\r\n    const kezdemenySort = (one: Karakter, two: Karakter): number => {\r\n\r\n        const oneKe = dobasEredmenyek[one.id].ke?.value ?? 0;\r\n        const twoKe = dobasEredmenyek[two.id].ke?.value ?? 0;\r\n        return twoKe - oneKe;\r\n    }\r\n\r\n    return <>\r\n        <div style={{ textAlign: 'center' }}>\r\n            <ButtonGroup>\r\n                <Button color='olive' onClick={() => {\r\n                    const uj = { ...dobasEredmenyek };\r\n                    Object.keys(refs).forEach(id => {\r\n                        const ke = refs[id]?.current?.rollKe();\r\n                        uj[id].ke = ke;\r\n                    });\r\n                    setDobasEredmenyek(uj);\r\n                }}>Kezdemény</Button>\r\n                <Button color='purple' onClick={() => {\r\n                    const uj = { ...dobasEredmenyek };\r\n                    Object.keys(refs).forEach(id => {\r\n                        const te = refs[id]?.current?.rollTe();\r\n                        uj[id].te = te;\r\n                    });\r\n                    setDobasEredmenyek(uj);\r\n                }}>Támadó</Button>\r\n                <Button color='purple' onClick={() => {\r\n                    const uj = { ...dobasEredmenyek };\r\n                    Object.keys(refs).forEach(id => {\r\n                        const ce = refs[id]?.current?.rollCe();\r\n                        uj[id].ce = ce;\r\n                    });\r\n                    setDobasEredmenyek(uj);\r\n                }}>Célzó</Button>\r\n                <Button color='orange' onClick={() => {\r\n                    const uj = { ...dobasEredmenyek };\r\n                    Object.keys(refs).forEach(id => {\r\n                        const sebzes = refs[id]?.current?.rollSebzes();\r\n                        uj[id].sebzes = sebzes;\r\n                    });\r\n                    setDobasEredmenyek(uj);\r\n                }}>Sebzés</Button>\r\n                <Button color='red' onClick={() => {\r\n                    setDobasEredmenyek(karakterek.reduce((acc, curr) => { acc[curr.id] = {}; return acc; }, {} as Record<string, any>));\r\n                }}>Dobások törlése\r\n            </Button>\r\n            </ButtonGroup>\r\n        </div>\r\n        <div style={{ display: 'flex', flexDirection: 'row', flexWrap: 'wrap', alignItems: 'stretch' }}>\r\n            {karakterek.sort(kezdemenySort).reverse().map((k, i) => <div style={{ order: karakterek.length - i, margin: '1em' }}>\r\n                <KombatCard ref={ref => refs[k.id] = { current: ref }} key={k.id} karakter={k} save={save} dobasEredmeny={dobasEredmenyek[k.id]} setDobasEredmeny={e => setDobasEredmenyek({ ...dobasEredmenyek, [k.id]: e })} />\r\n            </div>\r\n            )}\r\n        </div>\r\n    </>\r\n}\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Input } from 'semantic-ui-react';\r\n\r\nexport interface EditableTextProps {\r\n    text?: string;\r\n    onChange: (text: string) => unknown;\r\n}\r\n\r\nexport const EditableText: React.FC<EditableTextProps> = ({ text, onChange }) => {\r\n    const [editedText, setEditedText] = useState<string>('');\r\n    const [edited, setEdited] = useState<boolean>(false);\r\n    useEffect(() => {\r\n        setEditedText(text ?? '');\r\n    }, [text]);\r\n    if (edited) {\r\n        return <form onSubmit={() => { setEdited(false); onChange(editedText) }}><Input transparent autoFocus value={editedText} onChange={(e, { value }) => { setEditedText(value) }} onBlur={() => { setEdited(false); onChange(editedText) }} /></form>\r\n    } else {\r\n        return <span onClick={() => setEdited(true)}>{text ?? ''}</span>;\r\n    }\r\n}","import React from 'react';\r\nimport { Menu, Popup, StrictMenuItemProps } from 'semantic-ui-react';\r\n\r\nfunction createContextFromEvent(e: React.MouseEvent): HTMLElement {\r\n    const left = e.clientX\r\n    const top = e.clientY\r\n    const right = left + 1\r\n    const bottom = top + 1\r\n\r\n    return {\r\n        getBoundingClientRect: () => ({\r\n            left,\r\n            top,\r\n            right,\r\n            bottom,\r\n\r\n            height: 0,\r\n            width: 0,\r\n        }),\r\n    } as HTMLElement\r\n}\r\n\r\nexport interface ContextMenuProps {\r\n    items: Array<StrictMenuItemProps>,\r\n    onClicked: (target: StrictMenuItemProps) => unknown;\r\n}\r\n\r\n\r\nexport const ContextMenu: React.FC<ContextMenuProps> = ({ children, items, onClicked }) => {\r\n    const contextRef = React.useRef<HTMLElement | null>(null);\r\n    const [open, setOpen] = React.useState(false)\r\n\r\n    return (\r\n        <>\r\n            <div\r\n                onContextMenu={(e: React.MouseEvent) => {\r\n                    e.preventDefault()\r\n\r\n                    contextRef.current = createContextFromEvent(e)\r\n                    setOpen(true)\r\n                }}\r\n            >\r\n                {children}\r\n            </div>\r\n\r\n            <Popup\r\n                basic\r\n                context={contextRef}\r\n                onClose={() => setOpen(false)}\r\n                open={open}\r\n            >\r\n                <Menu\r\n                    items={items}\r\n                    onItemClick={(_, data) => { setOpen(false); onClicked(data) }}\r\n                    secondary\r\n                    vertical\r\n                />\r\n            </Popup>\r\n        </>\r\n    )\r\n}","import React from 'react';\r\nimport { ContextMenu } from './ContextMenu';\r\n\r\nexport interface ScheneListContextMenuProps {\r\n    onSelected: (selection: 'insertBefore' | 'insertAfter' | 'delete') => unknown\r\n}\r\n\r\nexport const SceneListContextMenu: React.FC<ScheneListContextMenuProps> = ({ onSelected, children }) => (\r\n    <ContextMenu items={[\r\n        { name: 'insertBefore', content: 'Új elem', icon: 'left arrow' },\r\n        { name: 'delete', content: 'Töröl', icon: 'delete' },\r\n        { name: 'insertAfter', content: 'Új elem', icon: 'right arrow' },\r\n    ]}\r\n        onClicked={item => {\r\n            onSelected(item.name as any);\r\n        }}>\r\n        {children}\r\n    </ContextMenu>\r\n);","import { xml2js, Element, js2xml } from 'xml-js';\r\n\r\nexport interface DOMElement extends Element {\r\n    $parent: DOMElement;\r\n    elements?: Array<DOMElement>;\r\n}\r\n\r\nconst findElements = (root: DOMElement, filter: (ob: DOMElement) => boolean): Array<DOMElement> => {\r\n    let ret: Array<DOMElement> = [];\r\n    if (filter(root)) {\r\n        ret.push(root);\r\n    }\r\n    const children = root.elements?.map(elem => findElements(elem, filter));\r\n    children?.forEach(ch => {\r\n        ret = ret.concat(ch);\r\n    })\r\n    return ret;\r\n}\r\n\r\nconst findElementsByName = (root: DOMElement, name: string): Array<DOMElement> => {\r\n    return findElements(root, e => e.name === name);\r\n}\r\n\r\nconst findById = (root: DOMElement, name: string, id: string): DOMElement | null => {\r\n    const found = findElements(root, e => e.name === name && DomUtils.attr(e, 'id') === id);\r\n    return found.length > 0 ? found[0] : null;\r\n}\r\n\r\nconst children = (elem: DOMElement, name: string): Array<DOMElement> => {\r\n    return elem.elements?.filter(e => e.name === name) ?? [];\r\n}\r\n\r\nconst addChild = (parent: DOMElement, name: string, referenceSibling?: DOMElement, insert: 'after' | 'before' = 'after'): DOMElement => {\r\n    const newElement: DOMElement = { type: 'element', name, $parent: parent };\r\n    return addChildElement(parent, newElement, referenceSibling, insert);\r\n}\r\n\r\n\r\nconst addChildElement = (parent: DOMElement, child: DOMElement, referenceSibling?: DOMElement, insert: 'after' | 'before' = 'after'): DOMElement => {\r\n    parent.elements = parent.elements ?? [];\r\n    let insertIndex = 0;\r\n    if (referenceSibling) {\r\n        const referenceIndex = parent.elements.indexOf(referenceSibling);\r\n        insertIndex = insert === 'after' ? referenceIndex + 1 : referenceIndex;\r\n    } else {\r\n        insertIndex = insert === 'after' ? parent.elements.length : 0;\r\n    }\r\n    parent.elements.splice(insertIndex, 0, child);\r\n    child.$parent = parent;\r\n\r\n    return child;\r\n}\r\n\r\nconst deleteChild = (parent: DOMElement, child: DOMElement) => {\r\n    parent.elements = parent.elements ?? [];\r\n    const deleteIndex = parent.elements.indexOf(child);\r\n    if (deleteIndex !== -1) {\r\n        parent.elements.splice(deleteIndex, 1);\r\n    }\r\n}\r\n\r\nconst addText = (parent: DOMElement, text: string, previousSibling?: DOMElement): DOMElement => {\r\n    parent.elements = parent.elements ?? [];\r\n    const insertIndex = previousSibling ? parent.elements.indexOf(previousSibling) + 1 : 0;\r\n    const newElement: DOMElement = { type: 'text', text, $parent: parent };\r\n    parent.elements.splice(insertIndex, 0, newElement);\r\n    return newElement;\r\n}\r\n\r\n\r\nconst child = (elem: DOMElement, name: string): DOMElement | null => {\r\n    const c = children(elem, name);\r\n    return c.length > 0 ? c[0] : null;\r\n}\r\n\r\nconst childText = (elem: Element, name: string): string => {\r\n    const ret = elem.elements?.find(e => e.name === name);\r\n    return text(ret);\r\n}\r\n\r\nconst attr = (elem: Element, name: string, value?: string | null): string => {\r\n    if (value !== undefined) {\r\n        elem.attributes = elem.attributes ?? {};\r\n        if (value !== null) {\r\n            elem.attributes[name] = value;\r\n        } else {\r\n            delete elem.attributes[name];\r\n        }\r\n    }\r\n    return (elem.attributes?.[name] ?? '').toString();\r\n}\r\n\r\n\r\nconst text = (elem?: Element): string => {\r\n    return elem?.elements?.map(t => t.text).join(' ') ?? '';\r\n}\r\n\r\nconst parse = (str: string): DOMElement => {\r\n    return xml2js(str, { compact: false, nativeType: true, trim: false, addParent: true, parentKey: '$parent' }) as DOMElement;\r\n}\r\n\r\nconst convertLegacyLinks = (elem: DOMElement) => {\r\n    if (elem.name === 'link') {\r\n        const [type, ref] = DomUtils.attr(elem, 'target').split(':');\r\n        elem.name = type;\r\n        elem.attributes = { ref }\r\n    }\r\n    if (elem.name === 'setting' && elem.$parent.name === 'scene') { //wrap legacy scene <setting> into a background event instead\r\n        const events = child(elem.$parent, 'events') || addChild(elem.$parent, 'events');\r\n        const event = addChild(events, 'event', undefined, 'before');\r\n        attr(event, 'role', 'background');\r\n        deleteChild(elem.$parent, elem);\r\n        addChildElement(event, elem);\r\n    }\r\n    elem.elements?.forEach(e => convertLegacyLinks(e));\r\n}\r\n\r\nconst print = (root: Element): string => {\r\n    return js2xml(root, { compact: false, parentKey: '$parent' });\r\n}\r\n\r\n\r\nexport const DomUtils = {\r\n    addChild,\r\n    addChildElement,\r\n    addText,\r\n    attr,\r\n    text,\r\n    child,\r\n    childText,\r\n    children,\r\n    deleteChild,\r\n    findById,\r\n    findElementsByName,\r\n    findElements,\r\n    parse,\r\n    convertLegacyLinks,\r\n    print\r\n};","import React, { useState } from 'react';\r\nimport { Button, Icon, Input, Label, Modal } from 'semantic-ui-react';\r\n\r\nexport interface CommentEditorModalProps {\r\n    addComment: (comment: string) => unknown\r\n}\r\n\r\nexport const CommentEditorModal: React.FC<CommentEditorModalProps> = ({ addComment }) => {\r\n    const [kommentModal, setKommentModal] = useState(false);\r\n    const [editedKomment, setEditedKomment] = useState('');\r\n\r\n    return <Modal trigger={<Icon name='comment' />} onOpen={() => setKommentModal(true)} onClose={() => setKommentModal(false)} open={kommentModal}>\r\n        <Modal.Content>\r\n            <Input fluid labelPosition='left' placeholder='Komment...' error={!editedKomment} value={editedKomment} onChange={e => setEditedKomment(e.target.value)}>\r\n                <Label pointing='right' basic>Komment</Label>\r\n                <input />\r\n                <Button floated='right' disabled={!editedKomment} onClick={() => {\r\n                    addComment(editedKomment);\r\n                    setEditedKomment('');\r\n                    setKommentModal(false);\r\n                }}>Ment</Button>\r\n            </Input>\r\n\r\n        </Modal.Content>\r\n    </Modal>\r\n}\r\n","import React from 'react';\r\nimport { List, Popup } from 'semantic-ui-react';\r\nimport { DOMElement } from '../utils/DomUtils';\r\nimport { Renderer } from '../utils/RenderUtils';\r\n\r\nexport interface CommentListProps {\r\n    comments?: Array<DOMElement>;\r\n    deleteComment: (comment: DOMElement) => unknown;\r\n    renderer: Renderer\r\n}\r\n\r\nexport const CommentList: React.FC<CommentListProps> = ({ comments, deleteComment, renderer }) => (\r\n    <>\r\n        {comments && comments.length ? <Popup hoverable trigger={<List.Description>{comments.length} komment</List.Description>} wide>\r\n            <List>\r\n                {comments.map(c => <List.Item><List.Icon name='delete' onClick={() => deleteComment(c)} /><List.Content>{renderer.renderElement(c)}</List.Content></List.Item>)}\r\n            </List>\r\n        </Popup>\r\n            : ''\r\n        }\r\n    </>\r\n)","import React from 'react';\r\nimport { ContextMenu } from './ContextMenu';\r\nimport { EditedEvent } from './StoryEvent';\r\n\r\nexport interface StoryContextMenuProps {\r\n    setEditedEvent: (editedEvent: EditedEvent) => unknown\r\n}\r\n\r\nexport const StoryContextMenu: React.FC<StoryContextMenuProps> = ({ setEditedEvent, children }) => (\r\n    <ContextMenu items={[\r\n        { name: 'insertBefore', content: 'Új elem', icon: 'up arrow' },\r\n        { name: 'edit', content: 'Szerkeszt', icon: 'edit' },\r\n        { name: 'delete', content: 'Töröl', icon: 'delete' },\r\n        { name: 'insertAfter', content: 'Új elem', icon: 'down arrow' },\r\n    ]}\r\n        onClicked={item => {\r\n            setEditedEvent({ operation: item.name as any });\r\n        }}>\r\n        {children}\r\n    </ContextMenu>\r\n);","import React from 'react';\r\nimport { List, Icon, Popup, SemanticICONS } from 'semantic-ui-react';\r\nimport { DOMElement, DomUtils } from '../utils/DomUtils';\r\nimport { Renderer } from '../utils/RenderUtils';\r\nimport { CommentEditorModal } from './CommentEditorModal';\r\nimport { CommentList } from './CommentList';\r\nimport { StoryContextMenu } from './StoryContextMenu';\r\n\r\nexport const ROLE_ICONS: Record<string, SemanticICONS> = {\r\n    'normal': 'angle right',\r\n    'entrance': 'sign-in',\r\n    'exit': 'sign-out',\r\n    'info': 'info circle',\r\n    'background': 'film',\r\n    'speech': 'comment alternate outline',\r\n    'warning': 'warning'\r\n\r\n}\r\n\r\nconst iconForRole = (role: string): SemanticICONS => {\r\n    return ROLE_ICONS[role] ?? 'square full';\r\n}\r\n\r\nexport interface EditedEvent {\r\n    operation?: 'insertAfter' | 'insertBefore' | 'delete' | 'edit';\r\n}\r\n\r\nexport interface StoryEventProps {\r\n    event: DOMElement,\r\n    renderer: Renderer,\r\n    onClick: () => unknown,\r\n    addComment: (contents: string) => unknown,\r\n    comments?: DOMElement[],\r\n    deleteComment: (comment: DOMElement) => unknown,\r\n    setEditedEvent: (editedEvent: EditedEvent) => unknown\r\n};\r\n\r\nexport const StoryEvent: React.FC<StoryEventProps> = ({ event, renderer, onClick, addComment, comments, deleteComment, setEditedEvent }) => {\r\n    const role = DomUtils.attr(event, 'role').toString() || 'normal';\r\n    const status = DomUtils.attr(event, 'status');\r\n\r\n    return <List.Item style={{ backgroundColor: status === 'completed' ? '#eefeee' : undefined }}>\r\n        <List.Icon name={iconForRole(role)} />\r\n        <List.Content>\r\n            <StoryContextMenu setEditedEvent={setEditedEvent}>\r\n                {renderer.renderElement(event)}\r\n            </StoryContextMenu>\r\n        </List.Content>\r\n        <List.Content floated='right'>\r\n            <div style={{ float: 'right' }}>\r\n                <CommentEditorModal addComment={addComment} />\r\n                <Icon name='checkmark' color={status === 'completed' ? 'green' : undefined} onClick={onClick} />\r\n            </div>\r\n            <div style={{ clear: 'both' }}>\r\n                <CommentList comments={comments} deleteComment={deleteComment} renderer={renderer} />\r\n            </div>\r\n        </List.Content>\r\n\r\n    </List.Item>;\r\n}\r\n","import { ContentState, Modifier, SelectionState } from \"draft-js\";\r\nimport { DOMElement } from \"./DomUtils\";\r\n\r\nconst lastPos = (state: ContentState): SelectionState => {\r\n    const len = state.getLastBlock().getLength();\r\n    return createSelection(state, len, len);\r\n}\r\n\r\nconst createSelection = (state: ContentState, start: number, end: number) => {\r\n    let selection = SelectionState.createEmpty(state.getLastBlock().getKey());\r\n    return selection.merge({ anchorOffset: start, focusOffset: end });\r\n}\r\n\r\nconst addEntity = (state: ContentState, type: string, data: any, start: number, end: number): ContentState => {\r\n    let ret = state;\r\n    ret = ret.createEntity(type, 'MUTABLE', data);\r\n    const entityKey = ret.getLastCreatedEntityKey();\r\n    ret = Modifier.applyEntity(ret, createSelection(ret, start, end), entityKey);\r\n    return ret;\r\n}\r\n\r\nconst processElement = (elem: DOMElement, state: ContentState): ContentState => {\r\n    if (elem.type === 'text') {\r\n        return Modifier.insertText(state, lastPos(state), elem.text as string);\r\n    } else if (elem.elements) {\r\n        let ret = state;\r\n        elem.elements.forEach(e => {\r\n            const start = ret.getLastBlock().getLength();;\r\n            ret = processElement(e, ret);\r\n            const end = ret.getLastBlock().getLength();;\r\n            if (e.name === 'p') {\r\n                ret = Modifier.insertText(ret, lastPos(ret), '\\n\\n');\r\n            } else if (e.name) {\r\n                ret = addEntity(ret, e.name, e.attributes, start, end);\r\n            }\r\n        });\r\n        return ret;\r\n    }\r\n    return state;\r\n}\r\n\r\nconst toElements = (state: ContentState, $parent: DOMElement): Array<DOMElement> => {\r\n    const block = state.getLastBlock();\r\n    const ret: Array<DOMElement> = [];\r\n    const text = block.getText();\r\n    block.findEntityRanges(() => true, (start, end) => {\r\n        const entityKey = block.getEntityAt(start);\r\n        const textNode: DOMElement = {\r\n            type: 'text',\r\n            text: text.substring(start, end),\r\n            $parent\r\n        };\r\n        if (entityKey) {\r\n            const entity = state.getEntity(entityKey);\r\n            ret.push({\r\n                type: 'element',\r\n                name: entity.getType(),\r\n                attributes: entity.getData(),\r\n                elements: [textNode],\r\n                $parent\r\n            });\r\n        } else {\r\n            ret.push(textNode);\r\n        }\r\n    })\r\n    if (text.includes('\\n\\n')) {\r\n        const paragraphs: Array<DOMElement> = [{\r\n            type: 'element',\r\n            name: 'p',\r\n            elements: [],\r\n            $parent: $parent\r\n        }];\r\n        ret.forEach(e => {\r\n            if (e.type === 'text' && e.text?.toString().includes('\\n\\n')) {\r\n                const [first, ...paras] = e.text.toString().split('\\n\\n');\r\n                paragraphs[paragraphs.length - 1].elements?.push({\r\n                    type: 'text',\r\n                    text: first,\r\n                    $parent: paragraphs[paragraphs.length - 1]\r\n                });\r\n\r\n                paras.forEach(p => {\r\n                    const para: DOMElement = {\r\n                        type: 'element',\r\n                        name: 'p',\r\n                        $parent,\r\n                        elements: []\r\n                    };\r\n                    para.elements?.push({\r\n                        type: 'text',\r\n                        text: p,\r\n                        $parent: para,\r\n                    })\r\n                    paragraphs.push(para);\r\n                })\r\n            } else {\r\n                paragraphs[paragraphs.length - 1].elements?.push(e);\r\n            }\r\n        })\r\n        return paragraphs;\r\n    }\r\n    return ret;\r\n}\r\n\r\nexport const EditorUtils = {\r\n    processElement,\r\n    toElements,\r\n    addEntity\r\n}","import { EditorState, Modifier } from 'draft-js';\r\nimport React, { useState } from 'react';\r\nimport { Button, Dropdown, Input, Label, Modal } from 'semantic-ui-react';\r\nimport { DOMElement, DomUtils } from '../../utils/DomUtils';\r\nimport { EditorUtils } from '../../utils/EditorUtils';\r\n\r\nconst { addEntity } = EditorUtils;\r\n\r\n\r\nexport const EditingButtons: React.FC<{ editorState: EditorState; setEditorState(s: EditorState): unknown, root: DOMElement }> = ({ editorState, setEditorState, root }) => {\r\n\r\n    const [editorPopup, setEditorPopup] = useState<string>();\r\n    const [editedValue, setEditedValue] = useState<Record<string, string>>({});\r\n\r\n    function addTag(name: string, attrs?: Record<string, string>) {\r\n        const selection = editorState.getSelection();\r\n        const newContent = addEntity(editorState.getCurrentContent(), name, attrs, selection.getStartOffset(), selection.getEndOffset());\r\n        setEditorState(EditorState.push(editorState, newContent, 'apply-entity'));\r\n    }\r\n\r\n    function findTargets(type: string): Array<{ key: string, text: string, value: string }> {\r\n        return DomUtils.findElementsByName(root, type).filter(e => DomUtils.attr(e, 'id')).map(e => ({ key: DomUtils.attr(e, 'id'), value: DomUtils.attr(e, 'id'), text: DomUtils.childText(e, 'name') }));\r\n    }\r\n\r\n    return <>\r\n        <Modal open={editorPopup !== undefined} onClose={() => setEditorPopup(undefined)}>\r\n            <Modal.Content>\r\n                {editorPopup === 'roll' && <>\r\n                    <Input labelPosition='left' value={editedValue.details ?? ''} onChange={e => setEditedValue({ details: e.target.value })}>\r\n                        <Label pointing='right' basic>Dobás</Label>\r\n                        <input />\r\n                    </Input>\r\n                    <Button primary onClick={() => {\r\n                        addTag('roll', editedValue);\r\n                        setEditedValue({});\r\n                        setEditorPopup(undefined)\r\n                    }\r\n                    }>OK</Button>\r\n                </>}\r\n                {(editorPopup === 'character' || editorPopup === 'item') && <>\r\n                    <Dropdown\r\n                        fluid\r\n                        search\r\n                        selection\r\n                        value={editedValue.ref}\r\n                        options={findTargets(editorPopup)}\r\n                        onChange={(e, data) => setEditedValue({ ref: data.value?.toString() ?? '' })} />\r\n                    <Button primary onClick={() => {\r\n                        addTag(editorPopup, editedValue);\r\n                        setEditedValue({});\r\n                        setEditorPopup(undefined)\r\n                    }\r\n                    }>OK</Button>\r\n                </>}\r\n                {editorPopup === 'setting' && <>\r\n                    <div>\r\n                        <Input labelPosition='left' value={editedValue.map ?? ''} onChange={e => setEditedValue({ ...editedValue, map: e.target.value })}>\r\n                            <Label pointing='right' basic>Térkép link</Label>\r\n                            <input />\r\n                        </Input>\r\n                    </div>\r\n                    <div>\r\n                        <Input labelPosition='left' value={editedValue.description ?? ''} onChange={e => setEditedValue({ ...editedValue, description: e.target.value })}>\r\n                            <Label pointing='right' basic>Leírás link</Label>\r\n                            <input />\r\n                        </Input>\r\n                    </div>\r\n                    <Button primary onClick={() => {\r\n                        addTag('setting', editedValue);\r\n                        setEditedValue({});\r\n                        setEditorPopup(undefined)\r\n                    }\r\n                    }>OK</Button>\r\n                </>}\r\n            </Modal.Content>\r\n        </Modal>\r\n        <Button onClick={() => addTag('reward')} icon='trophy'></Button>\r\n        <Button onClick={() => setEditorPopup('roll')} icon='cube'></Button>\r\n        <Button onClick={() => setEditorPopup('setting')} icon='map marker alternate'></Button>\r\n        <Button onClick={() => setEditorPopup('character')} icon='user outline'></Button>\r\n        <Button onClick={() => setEditorPopup('item')} icon='gift'></Button>\r\n        <Button floated='right' onClick={() => {\r\n            const newContent = Modifier.applyEntity(editorState.getCurrentContent(), editorState.getSelection(), null);\r\n\r\n            setEditorState(EditorState.push(editorState, newContent, 'apply-entity'));\r\n        }} icon='remove circle'></Button>\r\n\r\n    </>;\r\n}","import { DomUtils } from '../DomUtils';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const EventRenderer: RendererComponent = ({ children, elem, switchToScene }) => {\r\n    const role = DomUtils.attr(elem, 'role').toString() || 'normal';\r\n\r\n    if (role === 'background') {\r\n        return <i>{children}</i>;\r\n    } else if (role === 'speech') {\r\n        return <blockquote>{children}</blockquote>;\r\n    } else {\r\n        return <>{children}</>;\r\n    }\r\n}","import { Icon } from 'semantic-ui-react';\r\nimport { DomUtils } from '../DomUtils';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const JumpRenderer: RendererComponent = ({ children, elem, switchToScene }) => <><Icon name='paper plane outline' fitted /> <em style={{ cursor: 'pointer' }} onClick={() => switchToScene(DomUtils.attr(elem, 'scene'))}>{children}</em></>;","import { DomUtils } from '../DomUtils';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const LanguageRenderer: RendererComponent = ({ children, elem }) => {\r\n    const level = DomUtils.attr(elem, 'level');\r\n    return <>{children} { level ? <em>({level})</em> : ''}</>;\r\n}","import { RendererComponent } from '../RenderUtils';\r\n\r\nexport const ParagraphRenderer: RendererComponent = ({ children }) => (<p>{children}</p>);","import React from 'react';\r\nimport { Icon } from 'semantic-ui-react';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const RewardRenderer: RendererComponent = ({ children }) => <><Icon name='trophy' fitted /> <strong>{children}</strong></>;","import React from 'react';\r\nimport { Icon, Popup } from 'semantic-ui-react';\r\nimport { DomUtils } from '../DomUtils';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const RollRenderer: RendererComponent = ({ children, elem }) => {\r\n    const details = DomUtils.attr(elem, 'details');\r\n    if (details) {\r\n        return <Popup hoverable trigger={<span><Icon name='cube' fitted /> <strong>{children}</strong></span>} wide>\r\n            <Popup.Content>\r\n                {details}\r\n            </Popup.Content>\r\n        </Popup>\r\n    } else {\r\n        return <><Icon name='cube' fitted /> <strong>{children}</strong></>;\r\n    }\r\n}","import { Icon } from 'semantic-ui-react';\r\nimport { DomUtils } from '../DomUtils';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const SettingRenderer: RendererComponent = ({ children, elem }) => {\r\n    const map = DomUtils.attr(elem, 'map');\r\n    const description = DomUtils.attr(elem, 'description');\r\n\r\n    return <>\r\n        <Icon title={map ? 'Térkép' : undefined} style={map ? { cursor: 'pointer' } : {}} name='map marker alternate' onClick={() => map && window.open(map as string, '_blank')} />\r\n        <strong title={description ? 'Leírás' : undefined} style={description ? { cursor: 'pointer' } : {}} onClick={() => description && window.open(description as string, '_blank')}>{children}</strong>\r\n    </>\r\n}","import React, { ReactNode } from 'react';\r\nimport { Card, CardGroup, Icon, Popup, SemanticICONS, Table } from 'semantic-ui-react';\r\nimport { DOMElement, DomUtils } from './DomUtils';\r\nimport { EventRenderer } from './inlinerenderers/EventRenderer';\r\nimport { JumpRenderer } from './inlinerenderers/JumpRenderer';\r\nimport { LanguageRenderer } from './inlinerenderers/LanguageRenderer';\r\nimport { ParagraphRenderer } from './inlinerenderers/ParagraphRenderer';\r\nimport { RewardRenderer } from './inlinerenderers/RewardRenderer';\r\nimport { RollRenderer } from './inlinerenderers/RollRenderer';\r\nimport { SettingRenderer } from './inlinerenderers/SettingRenderer';\r\n\r\nexport const STORY_TAG_ICONS: Record<string, SemanticICONS> = {\r\n    setting: 'map marker alternate',\r\n    roll: 'cube',\r\n    reward: 'trophy',\r\n    character: 'user outline',\r\n    item: 'gift',\r\n    jump: 'paper plane outline',\r\n    '': 'question'\r\n}\r\n\r\nexport type RendererComponent = React.FC<{ elem: DOMElement; switchToScene: (id: string) => unknown }>;\r\n\r\n\r\n\r\nconst StoryElement: React.FC<{ elem: DOMElement | null, root: DOMElement, switchToScene: (id: string) => unknown }> = ({ elem, root, switchToScene }) => {\r\n    if (!elem) {\r\n        return <></>;\r\n    }\r\n    if (elem.type === 'text') {\r\n        return <>{elem.text}</>;\r\n    }\r\n    const contents = <>\r\n        {elem.elements?.map(e => <StoryElement elem={e} root={root} switchToScene={switchToScene} />)}\r\n    </>;\r\n    switch (elem.name) {\r\n        case 'p': return <ParagraphRenderer switchToScene={switchToScene} elem={elem}>{contents}</ParagraphRenderer>\r\n        case 'setting': return <SettingRenderer switchToScene={switchToScene} elem={elem}>{contents}</SettingRenderer>\r\n        case 'roll': return <RollRenderer switchToScene={switchToScene} elem={elem}>{contents}</RollRenderer>\r\n        case 'reward': return <RewardRenderer switchToScene={switchToScene} elem={elem}>{contents}</RewardRenderer>\r\n        case 'jump': return <JumpRenderer switchToScene={switchToScene} elem={elem}>{contents}</JumpRenderer>\r\n        case 'langauge': return <LanguageRenderer switchToScene={switchToScene} elem={elem}>{contents}</LanguageRenderer>\r\n        case 'event': return <EventRenderer switchToScene={switchToScene} elem={elem}>{contents}</EventRenderer>\r\n        case 'character':\r\n        case 'item':\r\n            {\r\n                const target = DomUtils.attr(elem, 'ref').toString();\r\n                const targetElem = DomUtils.findById(root, elem.name, target);\r\n                if (targetElem) {\r\n                    const targetIcon: SemanticICONS = targetElem.name === 'character' ? 'user outline' : 'gift';\r\n                    return <Popup hoverable trigger={<span><Icon name={targetIcon} fitted /> <strong>{contents}</strong></span>} wide>\r\n                        <Popup.Content>\r\n                            <StoryCard tag={targetElem} root={root} switchToScene={switchToScene} />\r\n                        </Popup.Content>\r\n                    </Popup>\r\n                }\r\n                return contents;\r\n            } case 'language': {\r\n                const level = DomUtils.attr(elem, 'level');\r\n                return <>{contents} { level ? <em>({level})</em> : ''}</>;\r\n            }\r\n        default: {\r\n            return contents;\r\n        }\r\n    }\r\n}\r\n\r\nconst StoryCard: React.FC<{ tag: DOMElement, root: DOMElement, switchToScene: (id: string) => unknown }> = ({ tag, root, switchToScene }) => {\r\n    if (tag.name === 'character') {\r\n        return <CharacterCard elem={tag} root={root} switchToScene={switchToScene} />\r\n    }\r\n    if (tag.name === 'item') {\r\n        return <ItemCard elem={tag} root={root} switchToScene={switchToScene} />\r\n    }\r\n    return null;\r\n}\r\n\r\nconst TableRow: React.FC<{ label: string, elem: DOMElement | null, root: DOMElement, switchToScene: (id: string) => unknown }> = ({ label, elem, root, switchToScene }) => <Table.Row>\r\n    <Table.Cell>{label}</Table.Cell>\r\n    <Table.Cell><StoryElement elem={elem} root={root} switchToScene={switchToScene} /></Table.Cell>\r\n</Table.Row>;\r\n\r\nconst NestedTableRow: React.FC<{ elems: DOMElement[], label: string, root: DOMElement, switchToScene: (id: string) => unknown }> = ({ elems, label, root, switchToScene }) => {\r\n    const [first, ...rest] = elems;\r\n    return <>\r\n        <Table.Row>\r\n            <Table.Cell rowSpan={elems.length}>{label}</Table.Cell>\r\n            <Table.Cell><StoryElement elem={first} root={root} switchToScene={switchToScene} /></Table.Cell>\r\n        </Table.Row>\r\n        {rest.map(r => <Table.Row><Table.Cell><StoryElement elem={r} root={root} switchToScene={switchToScene} /></Table.Cell></Table.Row>)}\r\n    </>;\r\n}\r\n\r\n\r\nconst CharacterCard: React.FC<{ elem: DOMElement, root: DOMElement, switchToScene: (id: string) => unknown }> = ({ elem, root, switchToScene }) => <Table definition striped columns={2} structured>\r\n    <TableRow label='Név' elem={DomUtils.child(elem, 'name')} root={root} switchToScene={switchToScene} />\r\n    <TableRow label='Faj' elem={DomUtils.child(elem, 'race')} root={root} switchToScene={switchToScene} />\r\n    <TableRow label='Jellem' elem={DomUtils.child(elem, 'alignment')} root={root} switchToScene={switchToScene} />\r\n    <TableRow label='Kaszt' elem={DomUtils.child(elem, 'class')} root={root} switchToScene={switchToScene} />\r\n    <TableRow label='Szülőföld' elem={DomUtils.child(elem, 'origin')} root={root} switchToScene={switchToScene} />\r\n    <NestedTableRow elems={DomUtils.findElementsByName(elem, 'language')} label='Nyelvek' root={root} switchToScene={switchToScene} />\r\n    <TableRow label='Kinézet' elem={DomUtils.child(elem, 'looks')} root={root} switchToScene={switchToScene} />\r\n    <TableRow label='Viselkedés' elem={DomUtils.child(elem, 'behaviour')} root={root} switchToScene={switchToScene} />\r\n    <NestedTableRow elems={DomUtils.findElementsByName(elem, 'loot')} label='Felszerelés' root={root} switchToScene={switchToScene} />\r\n</Table>;\r\n\r\n\r\nconst ItemCard: React.FC<{ elem: DOMElement, root: DOMElement, switchToScene: (id: string) => unknown }> = ({ elem, root, switchToScene }) => {\r\n    return <Table definition striped columns={2}>\r\n        <TableRow label='Név' elem={DomUtils.child(elem, 'name')} root={root} switchToScene={switchToScene} />\r\n        <TableRow label='Érték' elem={DomUtils.child(elem, 'value')} root={root} switchToScene={switchToScene} />\r\n        <Table.Row>\r\n            <Table.Cell colSpan={2}>\r\n                {DomUtils.children(elem, 'description').map(e => <StoryElement elem={e} root={root} switchToScene={switchToScene} />)}\r\n            </Table.Cell>\r\n        </Table.Row>\r\n    </Table>;\r\n}\r\n\r\nconst StoryCards: React.FC<{ root: DOMElement, name: string, switchToScene: (id: string) => unknown }> = ({ root, name, switchToScene }) => {\r\n    const cards = DomUtils.findElementsByName(root, name).filter(e => !e.attributes?.ref);\r\n    return <CardGroup itemsPerRow={5}>\r\n        {cards.map(c => <Card raised>\r\n            <Card.Content>\r\n                <Card.Header>{DomUtils.childText(c, 'name')}</Card.Header>\r\n                <Card.Meta>\r\n                    <StoryCard tag={c} root={root} switchToScene={switchToScene} />\r\n                </Card.Meta>\r\n            </Card.Content>\r\n        </Card>\r\n        )}\r\n    </CardGroup>\r\n}\r\n\r\nexport interface Renderer {\r\n    renderElement: (elem: DOMElement) => ReactNode\r\n    renderCards: (name: string) => ReactNode\r\n}\r\n\r\nconst createRenderer = (root: DOMElement, switchScene: (id: string) => unknown): Renderer => {\r\n    return {\r\n        renderElement: elem => <StoryElement elem={elem} root={root} switchToScene={switchScene} />,\r\n        renderCards: name => <StoryCards root={root} name={name} switchToScene={switchScene} />\r\n    }\r\n}\r\n\r\nexport const RenderUtils = {\r\n    createRenderer\r\n}","import { ContentState } from 'draft-js';\r\nimport React from 'react';\r\nimport { Icon, SemanticICONS } from 'semantic-ui-react';\r\nimport { STORY_TAG_ICONS } from '../../utils/RenderUtils';\r\n\r\nexport type DraftDecoratorComponentProps = {\r\n    contentState: ContentState,\r\n    decoratedText: string,\r\n    end: number,\r\n    // Many folks mistakenly assume that there will always be an 'entityKey'\r\n    // passed to a DecoratorComponent.\r\n    // To find the `entityKey`, Draft calls\r\n    // `contentBlock.getEntityKeyAt(leafNode)` and in many cases the leafNode does\r\n    // not have an entityKey. In those cases the entityKey will be null or\r\n    // undefined. That's why `getEntityKeyAt()` is typed to return `?string`.\r\n    // See https://github.com/facebook/draft-js/blob/2da3dcb1c4c106d1b2a0f07b3d0275b8d724e777/src/model/immutable/BlockNode.js#L51\r\n    entityKey?: string,\r\n    offsetKey: string,\r\n    start: number,\r\n};\r\n\r\n\r\n\r\nexport const IconComponent: React.FC<DraftDecoratorComponentProps> = ({ offsetKey, children, contentState, entityKey }) => {\r\n    const entity = entityKey ? contentState.getEntity(entityKey) : null;\r\n    const icon: SemanticICONS = STORY_TAG_ICONS[entity?.getType() ?? ''];\r\n    return <>\r\n        <span\r\n            style={{ fontWeight: 'bold' }}\r\n            data-offset-key={offsetKey}\r\n        >\r\n            <Icon name={icon} fitted />\r\n            {children}\r\n        </span>\r\n    </>;\r\n};","import React from 'react';\r\nimport { Dropdown, DropdownItemProps, Label } from 'semantic-ui-react';\r\nimport { ROLE_ICONS } from '../StoryEvent';\r\n\r\nconst options: Array<DropdownItemProps> = Object.keys(ROLE_ICONS).map(role => ({\r\n    key: role,\r\n    value: role,\r\n    text: role,\r\n    icon: ROLE_ICONS[role]\r\n}));\r\n\r\nexport const EventRowSelector: React.FC<{ role?: string, onRoleSelected(role?: string): unknown }> = ({ role, onRoleSelected }) => (\r\n    <div>\r\n        <Label pointing='right'>\r\n            Event role:\r\n        </Label>\r\n        <Dropdown\r\n            placeholder='Select Role'\r\n            labeled\r\n            selection\r\n            value={role}\r\n            onChange={(e, { value }) => { onRoleSelected(value as string) }}\r\n            options={options}\r\n        >\r\n        </Dropdown>\r\n    </div>\r\n)","import React, { useEffect, useState } from 'react';\r\nimport { Renderer } from '../../utils/RenderUtils';\r\nimport { CompositeDecorator, ContentState, Editor, EditorState } from 'draft-js';\r\nimport 'draft-js/dist/Draft.css';\r\nimport { Button, Segment } from 'semantic-ui-react';\r\nimport { EditorUtils } from '../../utils/EditorUtils';\r\nimport { EditingButtons } from './EditingButtons';\r\nimport { IconComponent } from './IconComponent';\r\nimport { DOMElement, DomUtils } from '../../utils/DomUtils';\r\nimport { EventRowSelector } from './EventRoleSelector';\r\n\r\nconst { processElement, toElements } = EditorUtils;\r\n\r\n\r\n\r\n\r\nexport const EventEditor: React.FC<{ event: DOMElement, onFinished(event: DOMElement): unknown, renderer: Renderer, root: DOMElement }> = ({ event, onFinished, root }) => {\r\n    const [editorState, setEditorState] = useState(\r\n        () => EditorState.createEmpty(),\r\n    );\r\n    const [eventRole, setEventRole] = useState<string>();\r\n\r\n    useEffect(() => {\r\n        const state = processElement(event, ContentState.createFromText(''));\r\n        const inlineDecorator = new CompositeDecorator([\r\n            {\r\n                strategy: (block, callback, _state) => {\r\n                    block.findEntityRanges(c => !!c.getEntity(), callback);\r\n                },\r\n                component: IconComponent\r\n            }\r\n        ]);\r\n        setEditorState(EditorState.createWithContent(state, inlineDecorator));\r\n    }, [event]);\r\n\r\n\r\n    return <>\r\n        <EventRowSelector role={eventRole} onRoleSelected={setEventRole} />\r\n        <EditingButtons editorState={editorState} setEditorState={setEditorState} root={root} />\r\n        <Segment>\r\n            <Editor editorState={editorState} onChange={setEditorState} />\r\n        </Segment>\r\n        <Button onClick={() => {\r\n            DomUtils.attr(event, 'role', eventRole);\r\n            event.elements = toElements(editorState.getCurrentContent(), event);\r\n            onFinished(event);\r\n        }\r\n        }>Save</Button>\r\n    </>;\r\n}","import React from 'react';\r\nimport { Modal } from 'semantic-ui-react';\r\nimport { DOMElement, DomUtils } from '../utils/DomUtils';\r\nimport { Renderer } from '../utils/RenderUtils';\r\nimport { EventEditor } from './editor/EventEditor';\r\nimport { EventEditingState } from './StoryScene';\r\n\r\nexport interface EventEditorModalProps {\r\n    onEditingFinished: () => unknown;\r\n    editedEvent?: EventEditingState;\r\n    renderer: Renderer;\r\n    root: DOMElement;\r\n}\r\n\r\nexport const EventEditorModal: React.FC<EventEditorModalProps> = ({ editedEvent, onEditingFinished, renderer, root }) => {\r\n    return <Modal open={editedEvent !== undefined} onClose={onEditingFinished}>\r\n        <Modal.Content>\r\n            {editedEvent && <EventEditor event={editedEvent.elem} onFinished={() => {\r\n                if (editedEvent.insert) {\r\n                    DomUtils.addChildElement(editedEvent.elem.$parent as DOMElement, editedEvent.elem, editedEvent.anchor as DOMElement, editedEvent.insert);\r\n                }\r\n                onEditingFinished();\r\n            }\r\n            } renderer={renderer} root={root} />}\r\n        </Modal.Content>\r\n    </Modal>;\r\n}","import React, { useState } from 'react';\r\nimport { List } from 'semantic-ui-react';\r\nimport { DOMElement, DomUtils } from '../utils/DomUtils';\r\nimport { Renderer } from '../utils/RenderUtils';\r\nimport { StoryEvent } from './StoryEvent';\r\nimport { v4 } from 'uuid';\r\nimport { EventEditorModal } from './EventEditorModal';\r\n\r\nconst { attr, children, child, addChild, addText, findElementsByName, deleteChild } = DomUtils;\r\n\r\nexport interface EventEditingState {\r\n    insert?: 'after' | 'before',\r\n    anchor?: DOMElement,\r\n    elem: DOMElement\r\n}\r\n\r\n\r\nexport const StoryScene: React.FC<{ scene: DOMElement, renderer: Renderer, onChange: () => unknown, root: DOMElement }> = ({ scene, renderer, onChange, root }) => {\r\n    const events = children(scene, 'events')[0];\r\n    const [editedEvent, setEditedEvent] = useState<EventEditingState>();\r\n    return <>\r\n        <EventEditorModal\r\n            editedEvent={editedEvent}\r\n            onEditingFinished={() => setEditedEvent(undefined)}\r\n            renderer={renderer}\r\n            root={root}\r\n        />\r\n        <List celled animated>\r\n            {events?.elements?.map(e => <StoryEvent\r\n                event={e}\r\n                renderer={renderer}\r\n                setEditedEvent={event => {\r\n                    if (event.operation === 'insertAfter' || event.operation === 'insertBefore') {\r\n                        setEditedEvent({\r\n                            insert: event.operation === 'insertAfter' ? 'after' : 'before', elem: {\r\n                                type: 'element',\r\n                                name: 'event',\r\n                                $parent: e.$parent\r\n                            }, anchor: e\r\n                        });\r\n                    } else if (event.operation === 'delete') {\r\n                        DomUtils.deleteChild(e.$parent, e);\r\n                        onChange();\r\n                    } else {\r\n                        setEditedEvent({ elem: e });\r\n\r\n                    }\r\n\r\n                }}\r\n                onClick={() => {\r\n                    const status = attr(e, 'status');\r\n                    attr(e, 'status', status ? null : 'completed');\r\n                    onChange();\r\n                }}\r\n                addComment={comment => {\r\n                    addComment(e, root, comment);\r\n                    onChange();\r\n                }}\r\n                comments={findComments(e, root)}\r\n                deleteComment={c => {\r\n                    deleteComment(c, root);\r\n                    onChange();\r\n                }}\r\n            />)}\r\n            <List.Item style={{ backgroundColor: 'gainsboro' }} onClick={() => {\r\n                setEditedEvent({\r\n                    insert: 'after',\r\n                    elem: {\r\n                        type: 'element',\r\n                        name: 'event',\r\n                        $parent: events\r\n                    }\r\n                });\r\n\r\n            }}>\r\n                <List.Icon name='plus' />\r\n                <List.Content>\r\n                    <i>Új elem</i>\r\n                </List.Content>\r\n            </List.Item>\r\n\r\n        </List>\r\n    </>\r\n}\r\n\r\nconst ensureComments = (root: DOMElement) => {\r\n    const story = child(root, 'story');\r\n    if (!story) {\r\n        throw new Error('story is missing');\r\n    }\r\n    return child(story, 'comments') || addChild(story, 'comments');\r\n}\r\n\r\nconst addComment = (event: DOMElement, root: DOMElement, contents: string) => {\r\n    const eventId = ensureEventId(event);\r\n    const comments = ensureComments(root);\r\n    const lastComment = children(comments, 'comment').pop();\r\n    const comment = addChild(comments, 'comment', lastComment);\r\n    attr(comment, 'event', eventId);\r\n    addText(comment, contents);\r\n}\r\n\r\nconst deleteComment = (comment: DOMElement, root: DOMElement) => {\r\n    const comments = ensureComments(root);\r\n    deleteChild(comments, comment);\r\n}\r\n\r\n\r\nconst findComments = (event: DOMElement, root: DOMElement): Array<DOMElement> => {\r\n    const eventId = attr(event, 'id');\r\n    const allComments = findElementsByName(root, 'comment');\r\n    return allComments.filter(c => attr(c, 'event') === eventId);\r\n}\r\n\r\n\r\nconst ensureEventId = (event: DOMElement) => {\r\n    let id = attr(event, 'id') || v4();\r\n    attr(event, 'id', id);\r\n    return id;\r\n\r\n}","import fileDownload from 'js-file-download';\r\nimport React, { useState } from 'react';\r\nimport { Button, Header, Icon, Menu, Tab } from 'semantic-ui-react';\r\nimport { v4 } from 'uuid';\r\nimport { EditableText } from '../components/EditableText';\r\nimport { SceneListContextMenu } from '../components/SceneListContextMenu';\r\nimport { StoryScene } from '../components/StoryScene';\r\nimport { DOMElement, DomUtils } from '../utils/DomUtils';\r\nimport { Renderer, RenderUtils } from '../utils/RenderUtils';\r\n\r\nconst { attr, findElementsByName, parse, print, convertLegacyLinks } = DomUtils;\r\n\r\n\r\n\r\nconst renderCast = (renderer: Renderer) => {\r\n    return <>\r\n        <Header as='h1'>Szereplők</Header>\r\n        {renderer.renderCards('character')}\r\n    </>;\r\n}\r\n\r\nconst renderInventory = (renderer: Renderer) => {\r\n    return <>\r\n        <Header as='h1'>Tárgyak</Header>\r\n        {renderer.renderCards('item')}\r\n    </>;\r\n}\r\n\r\n\r\nexport const StoryPage: React.FC<{ story: string, saveStory: (story: string) => unknown }> = ({ story, saveStory }) => {\r\n    const [activeScene, setActiveScene] = useState<string>();\r\n    const storyOb = parse(story);\r\n    convertLegacyLinks(storyOb);\r\n    const scenes = findElementsByName(storyOb, 'scene');\r\n    const findSceneById = (id?: string) => {\r\n        return scenes.findIndex(s => attr(s, 'id') === id);\r\n    }\r\n    const renderer = RenderUtils.createRenderer(storyOb, id => setActiveScene(id));\r\n    const sceneTabs = scenes.map(s => {\r\n        return {\r\n            menuItem: <Menu.Item key={attr(s, 'id')}><SceneListContextMenu onSelected={item => {\r\n                if (item === 'delete') {\r\n                    DomUtils.deleteChild(s.$parent, s);\r\n                } else {\r\n                    const scene = DomUtils.addChild(s.$parent, 'scene', s, item === 'insertAfter' ? 'after' : 'before');\r\n                    DomUtils.attr(scene, 'id', v4());\r\n                    DomUtils.attr(scene, 'title', 'Új jelenet');\r\n                    DomUtils.addChild(scene, 'events');\r\n                    setTimeout(() => setActiveScene(DomUtils.attr(scene, 'id')), 0); //workaround for Tab overwriting activeIndex straight away\r\n                }\r\n                saveStory(print(storyOb));\r\n            }}>\r\n                {activeScene === DomUtils.attr(s, 'id') ? <EditableText text={attr(s, 'title')} onChange={title => {\r\n                    DomUtils.attr(s, 'title', title);\r\n                    saveStory(print(storyOb));\r\n                }} /> : attr(s, 'title')}\r\n            </SceneListContextMenu></Menu.Item>,\r\n            render: () => <Tab.Pane>\r\n                <StoryScene\r\n                    scene={s}\r\n                    renderer={renderer}\r\n                    onChange={() => saveStory(print(storyOb))}\r\n                    root={storyOb} />\r\n            </Tab.Pane>\r\n        }\r\n    });\r\n    sceneTabs.push({\r\n        menuItem: <Menu.Item key='__add'><Icon name='plus' onClick={() => {\r\n            const story: DOMElement = DomUtils.child(storyOb, 'story') as DOMElement;\r\n            const scene = DomUtils.addChild(story, 'scene', undefined, 'after');\r\n            DomUtils.attr(scene, 'id', v4());\r\n            DomUtils.attr(scene, 'title', 'Új jelenet');\r\n            DomUtils.addChild(scene, 'events');\r\n            setTimeout(() => setActiveScene(DomUtils.attr(scene, 'id')), 0); //workaround for Tab overwriting activeIndex straight away\r\n            saveStory(print(storyOb));\r\n\r\n        }} /></Menu.Item>,\r\n        render: () => {\r\n            return <></>;\r\n        }\r\n    })\r\n\r\n    return <>\r\n        <Button onClick={() => fileDownload(story, 'mese.xml', 'application/xml')} color='green' circular>Export</Button>\r\n        <Tab activeIndex={findSceneById(activeScene)} onTabChange={(e, { activeIndex }) => activeIndex as number < scenes.length && setActiveScene(DomUtils.attr(scenes[activeIndex as number], 'id'))} panes={sceneTabs} />\r\n\r\n        {renderCast(renderer)};\r\n        {renderInventory(renderer)};\r\n    </>;\r\n}","import React, { useCallback, useState } from 'react';\nimport { KarakterAlkotas } from './pages/KarakterAlkotas';\nimport { Karakterlap } from './pages/Karakterlap';\nimport { useDataConnector } from './hooks/dataconnector';\nimport { Karakter, KarakterInfo } from './engine/karakter';\nimport 'semantic-ui-css/semantic.min.css'\nimport { PageHeader } from './components/PageHeader';\nimport { Kombat } from './pages/Kombat';\nimport { StoryPage } from './story/pages/StoryPage';\n\nexport type PageSelection = { page: 'karakteralkoto' | 'home' } | { page: 'karakterlap', karakter: KarakterInfo } | { page: 'kombat', category: string } | { page: 'story' }\n\n\nfunction App() {\n\n  const [page, setPage] = useState<PageSelection>({ page: 'home' });\n  const { save, list, categories, load, remove, listFajok, listFegyverek, saveFegyverek, loadStory, saveStory, listPancelok, savePancelok } = useDataConnector();\n  const [currentCategory, setCurrentCategory] = useState('');\n\n  const saveKarakter = useCallback((karakter: Karakter) => {\n    save(karakter);\n    setPage({ page: 'karakterlap', karakter });\n  }, [save, setPage]);\n\n  const removeKarakter = useCallback((karakter: Karakter) => {\n    if (karakter) {\n      remove(karakter);\n      setPage({ page: 'home' });\n    }\n  }, [setPage, remove]);\n\n  const renderPage = () => {\n    switch (page.page) {\n      case 'home': return <div>Óvakodj a rotoni lomhatasaktól</div>\n      case 'kombat': return <Kombat karakterek={list(page.category).map(i => load(i))} save={save} />\n      case 'karakteralkoto': return <KarakterAlkotas save={saveKarakter} fajok={listFajok()} />\n      case 'story': return <StoryPage story={loadStory()} saveStory={saveStory} />;\n      case 'karakterlap': return <Karakterlap pancelok={listPancelok()} savePancelok={savePancelok} saveFegyverek={saveFegyverek} fegyverek={listFegyverek()} categories={categories()} karakter={load(page.karakter)} save={saveKarakter} remove={() => removeKarakter(page.karakter as Karakter)} />\n    }\n  };\n\n\n\n  return (\n    <div className=\"App\">\n      <PageHeader\n        categories={categories()}\n        currentCategory={currentCategory}\n        setCurrentCategory={setCurrentCategory}\n        karakter={page.page === 'karakterlap' ? page.karakter : undefined}\n        page={page}\n        setPage={ps => {\n          setPage(ps);\n          if (ps.page === 'kombat') {\n            setCurrentCategory(ps.category);\n          }\n        }}\n        save={saveKarakter}\n        karakterek={list(currentCategory)}\n        saveMese={saveStory}\n      />\n      {renderPage()}\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}