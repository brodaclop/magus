{"version":3,"sources":["engine/roll.tsx","engine/dobasmatrix.tsx","engine/harc.tsx","engine/kasztok.tsx","engine/karakter.tsx","components/DobasEredmeny.tsx","components/DobasInput.tsx","components/NumberInput.tsx","components/DobasMatrixDisplay.tsx","components/PointsTable.tsx","components/Selection.tsx","components/KarakterAlkotasBackground.tsx","pages/KarakterAlkotas.tsx","components/FegyverLista.tsx","components/IntegerInput.tsx","components/FegyverEditor.tsx","components/FegyverValaszto.tsx","components/HMEloszto.tsx","components/KepzettsegModal.tsx","components/KepzettsegLista.tsx","components/PancelLista.tsx","components/PancelEditor.tsx","components/PancelValaszto.tsx","components/Pajzsok.tsx","components/Jegyzetek.tsx","story/components/EditableText.tsx","components/Felszereles.tsx","components/KategoriaEditor.tsx","components/KarakterTabla.tsx","pages/Karakterlap.tsx","engine/pancel.tsx","hooks/dataconnector.tsx","components/CategoriesDropdown.tsx","components/DragAndDrop.tsx","components/KarakterImport.tsx","pages/Kocskadobo.tsx","components/KockaModal.tsx","static/magus.png","components/VarazslatLista.tsx","engine/varazslat.tsx","pages/Varazslatok.tsx","components/VarazslatokModal.tsx","components/PageHeader.tsx","components/SzituacioSelector.tsx","components/KombatCard.tsx","pages/Kombat.tsx","story/components/ContextMenu.tsx","story/components/SceneListContextMenu.tsx","story/utils/DomUtils.tsx","story/components/CommentEditorModal.tsx","story/components/CommentList.tsx","story/components/StoryEvent.tsx","story/utils/EditorUtils.tsx","story/components/editor/EditingButtons.tsx","story/components/EditableNode.tsx","story/utils/inlinerenderers/EventRenderer.tsx","story/utils/inlinerenderers/JumpRenderer.tsx","story/utils/inlinerenderers/LanguageRenderer.tsx","story/utils/inlinerenderers/ParagraphRenderer.tsx","story/utils/inlinerenderers/RewardRenderer.tsx","story/utils/inlinerenderers/RollRenderer.tsx","story/utils/inlinerenderers/SettingRenderer.tsx","story/utils/RenderUtils.tsx","story/components/editor/IconComponent.tsx","story/components/editor/EventRoleSelector.tsx","story/components/editor/EventEditor.tsx","story/components/EventEditorModal.tsx","story/components/timeline/Timeline.tsx","story/components/StoryContextMenu.tsx","story/utils/CommentUtils.tsx","story/components/StoryScene.tsx","story/pages/StoryPage.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["PATTERN","random","Math","rollDice","dice","ijasz","Array","numDice","keys","map","_","rollSingle","reduce","acc","curr","value","details","res","floor","die","ceil","div","rollKf","result","max","plus","kfMod","kf","roll","tries","abs","_roll","parseDiceRoll","diceString","Number","isNaN","replace","match","groups","undefined","formatDiceRoll","DobasMatrix","values","sum","add","name","dobas","forEach","key","toString","filter","indexOf","Object","a","b","getRolls","r","clearRolls","this","HARCERTEK_DISPLAY_NAMES","FEGYVER_KEPZETTSEG","ke","te","ve","ce","FEGYVERTELEN","harcertek","tamPerKor","sebzes","FEGYVEREK","lassu","lotav","SZITUACIOK","FegyverUtils","fegyver","toLowerCase","pajzs","KEPESSEG_NEV","ero","gy","ugy","ak","egs","sz","int","ae","asz","erz","FAJ_KEPESSEG","FOKASZTOK","KASZTOK","kepesseg","alapHarcertek","hm","kotelezo","szabad","epfp","ep","fp","fpPerSzint","harcos","lovag","tolvaj","pap","paplovag","findKepzettseg","kepzettseg","kepzettsegek","find","k","folottiResz","hatar","szintlepes","karakter","szint","r1","r2","kaszt","hmHarcertek","Set","akt","calculateSebesulesHatrany","calculateMGT","pancel","valasztottPancel","pancelok","nehez","mgt","calculateHarcertek","szituaciok","masodlagos","index","masodlagosFegyver","valasztottFegyver","fegyverek","findFegyver","tipus","ret","kepessegek","erobonusz","calculateKepessegHarcertek","fejvadasz","pajzsHasznalat","ugras","addKepzettseg","ketkezesHarc","addKetkezes","sebesules","DobasEredmeny","pointing","Label","size","color","basic","DobasInput","onChange","setDie","addPlus","ButtonGroup","fluid","labelPosition","Button","onClick","NumberInput","min","icons","style","whiteSpace","Icon","compact","margin","width","e","newValue","target","test","num","parseInt","DobasMatrixDisplay","matrix","keyMap","direction","title","editable","setValue","numberOnly","displayCell","constantRoll","rollString","includes","Table","Cell","collapsing","v","String","celled","striped","Header","Row","HeaderCell","disabled","Body","Footer","definition","PointsTable","points","p","label","Selection","selected","setSelected","options","structure","as","fk","Group","vertical","tag","o","n","i","active","KarakterAlkotasBackground","fajNevek","backgroundSelection","setBackgroundSelection","Input","placeholder","error","s","JSON","parse","stringify","faj","require","default","calculateKepessegek","fajok","newMatrix","KarakterAlkotas","save","useState","setMatrix","useEffect","Grid","relaxed","GridRow","columns","divided","GridColumn","floated","allowEmptyValue","stepAmount","minValue","maxValue","intValue","textAlign","secondary","primary","kar","version","id","v4","categories","createKarakter","FegyverLista","onSelectionChange","extraButton","fegyverLista","rec","selectable","colspan","IntegerInput","mandatory","convertToFormValues","lofegyver","convertFromFormValues","FegyverEditor","submit","cancel","form","setForm","Checkbox","fitted","toggle","checked","FegyverValaszto","saveFegyverek","selectedForDeletion","setSelectedForDeletion","editorOpen","setEditorOpen","listEditorOpen","setListEditorOpen","saveSelection","useCallback","kepzettsegSzint","addFegyverAndKepzettseg","saveDeletion","f","Modal","trigger","onOpen","onClose","open","Content","push","negative","sort","localeCompare","idx","fIdx","findIndex","kepzettsegName","kp","HMEloszto","complete","current","setCurrent","change","he","newCurrent","colSpan","padding","circular","icon","content","KepzettsegModal","editedKepzettseg","setOpen","setKepzettseg","setSzint","setKp","marginBottom","marginLeft","newKepzettseg","compare","KepzettsegLista","splice","PancelLista","sfe","PancelEditor","PancelValaszto","savePancelok","some","every","Pajzsok","asztral","termeszetes","mental","statikus","dinamikus","Jegyzetek","borderRadius","height","jegyzetek","EditableText","forwardRef","ref","text","editedText","setEditedText","edited","setEdited","useImperativeHandle","edit","onSubmit","transparent","autoFocus","onBlur","Felszereles","rowRefs","felszereles","qty","q","KategoriaEditor","kategoriak","setKategoriak","ujKategoria","setUjKategoria","list","c","KarakterTabla","clone","remove","torlesKerdes","setTorlesKerdes","Confirm","onCancel","onConfirm","header","cancelButton","confirmButton","fileDownload","Karakterlap","eletero","pszi","mp","kepessegMatrix","length","masodlagosFegyverMutat","PANCELOK","PREFIX","STORY_KEY","CategoriesDropdown","currentCategory","setCurrentCategory","Dropdown","item","Menu","Item","DragAndDrop","state","drag","dropRef","React","createRef","dragCounter","handleDrag","preventDefault","stopPropagation","handleDragIn","dataTransfer","items","setState","handleDragOut","handleDrop","files","props","clearData","addEventListener","removeEventListener","display","position","dragPlaceholder","children","Component","KarakterImport","saveMese","l","mese","endsWith","Slider","DICE_ROLLS","PLUS","MERETEK","MOZGASOK","VISZONYOK","Kockadobo","input","setInput","setResult","useReducer","prev","elem","slice","HISTORY_LENGTH","history","addToHistory","tavolsag","meret","mozgas","viszonyok","lofegyverVedo","setLofegyverVedo","dob","setKocka","diceRoll","setPlus","className","floating","reverse","h","settings","step","KockaModal","kockaOpen","setKockaOpen","VarazslatLista","varazslatok","fieldLabels","action","toggleOpen","sorted","miscFields","misc","field","pont","varazslasIdeje","backgroundColor","border","dangerouslySetInnerHTML","__html","description","trim","split","line","join","VARAZSLAT_LABELS","me","idotartam","erosseg","hatotav","PSZI_LABELS","ALL_SPELLS","labels","Varazslatok","setTipus","setLabels","spells","spell","spellLabels","has","allSelectedLabels","flatMap","delete","VarazslatokModal","positive","MAX_KARAKTERS_PER_PAGE","PageHeader","karakterek","page","setPage","karakterStart","setKarakterStart","karakterPos","scrolled","canScrollLeft","canScrollRight","karaktersDisplayed","tabular","Image","src","logo","flexGrow","category","SzituacioSelector","setSzituaciok","szituacioOptions","nev","multiple","simple","renderLabel","KombatCard","dobasEredmeny","setDobasEredmeny","harcertekMatrix","sebzesRoll","rolls","Error","sumRolls","rollKe","rollTe","rollCe","rollSebzes","cellContents","Card","hatrany","headerColour","Description","singleLine","fegyverCsere","m","extra","Kombat","dobasEredmenyek","setDobasEredmenyek","refs","DobasButton","rollFn","uj","flexDirection","flexWrap","alignItems","one","two","oneKe","order","createContextFromEvent","left","clientX","top","clientY","right","bottom","getBoundingClientRect","ContextMenu","onClicked","event","contextRef","useRef","close","onContextMenu","Popup","context","onItemClick","data","SceneListContextMenu","onSelected","findElements","root","elements","ch","concat","addChild","parent","referenceSibling","insert","newElement","type","$parent","addChildElement","child","insertIndex","referenceIndex","deleteChild","deleteIndex","attr","attributes","t","DomUtils","addText","previousSibling","childText","findById","found","findElementsByName","findReferences","str","xml2js","nativeType","addParent","parentKey","convertLegacyLinks","events","print","js2xml","CommentEditorModal","addComment","kommentModal","setKommentModal","editedKomment","setEditedKomment","CommentList","comments","deleteComment","renderer","hoverable","List","wide","renderElement","ROLE_ICONS","iconForRole","role","StoryEvent","commentUtils","onEdit","status","setActive","justifyContent","borderTop","borderBottom","onMouseEnter","onMouseLeave","listStyle","cursor","comment","createSelection","start","end","SelectionState","createEmpty","getLastBlock","getKey","merge","anchorOffset","focusOffset","addEntityToSelection","selection","console","log","entityKey","createEntity","getLastCreatedEntityKey","Modifier","applyEntity","addEntity","addBlock","block","ContentBlock","genKey","blockMap","getBlockMap","toOrderedMap","EditorUtils","processElement","contentsOnly","insertText","len","getLength","lastPos","getBlocksAsArray","getText","findEntityRanges","getEntityAt","textNode","substring","entity","getEntity","getType","getData","blockToElement","EditingButtons","editorState","setEditorState","editorPopup","setEditorPopup","editedValue","setEditedValue","addTag","attrs","getSelection","newContent","getCurrentContent","EditorState","search","scene","EditableNode","create","readOnly","setTimeout","onFinished","EventRenderer","switchToScene","JumpRenderer","LanguageRenderer","level","ParagraphRenderer","RewardRenderer","RollRenderer","SettingRenderer","window","STORY_TAG_ICONS","setting","reward","character","jump","StoryElement","contents","targetElem","targetIcon","StoryCard","TableRow","CharacterCard","NestedTableRow","elems","first","rest","rowSpan","structured","ItemCard","StoryCards","cards","CardGroup","itemsPerRow","raised","Meta","RenderUtils","switchScene","renderCards","IconComponent","offsetKey","contentState","fontWeight","data-offset-key","EventRowSelector","onRoleSelected","labeled","toElements","EventEditor","eventEdited","eventRole","setEventRole","eventDate","setEventDate","onEscape","ContentState","createFromBlockArray","inlineDecorator","CompositeDecorator","strategy","callback","_state","component","createWithContent","Segment","keyBindingFn","getDefaultKeyBinding","handleKeyCommand","EventEditorModal","editedEvent","onEditingFinished","anchor","Timeline","orderedEvents","date","heights","fill","unitHeight","TimelineUnit","crossbar","flexBasis","zIndex","pinned","boxShadow","StoryContextMenu","setEditedEvent","operation","ensureComments","story","ensureEventId","CommentUtils","eventId","lastComment","pop","findComments","StoryScene","contextMenu","setContextMenu","displayMode","setDisplayMode","StoryPage","saveStory","activeScene","setActiveScene","storyOb","scenes","sceneTabs","menuItem","render","Tab","Pane","characters","activeIndex","onTabChange","panes","App","operations","setOperations","fetch","localStorage","getItem","put","ob","setItem","all","startsWith","cat","load","info","maxEp","maxFp","exportMagus","importMagus","newNev","removeItem","listFajok","listFegyverek","CONFIG_PREFIX","listPancelok","loadStory","useDataConnector","saveKarakter","removeKarakter","ps","renderPage","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3851f144.chunk.js","sourcesContent":["export interface DiceRoll {\n    tries: number;\n    numDice: number;\n    die: number;\n    plus: number;\n    div: number;\n    kf: boolean;\n}\n\nexport interface DiceRollResult {\n    value: number;\n    details: string;\n}\n\nconst PATTERN = /(?<numDice>\\d+)?k(?<die>\\d+)(?:\\/(?<div>\\d+))?(?<plus>[+-]\\d+)?(?:\\((?<tries>\\d+)x\\))?(?:\\+kf(?<kf>))?/;\n\nlet random = Math.random;\n\nconst _roll = (dice: DiceRoll, ijasz: boolean): DiceRollResult => {\n    let result = [...Array(dice.tries).keys()].map(_ => rollDice(dice, ijasz)).reduce((acc, curr) => ({ value: Math.max(acc.value, curr.value), details: `${acc.details ? acc.details + ' or ' : ''}(${curr.details})` }), { value: 0, details: '' });\n    result = {\n        value: result.value + dice.plus,\n        details: `${result.details}${dice.plus > 0 ? ' + ' + dice.plus : (dice.plus < 0 ? ' - ' + Math.abs(dice.plus) : '')}`\n    };\n    if (dice.kf) {\n        return rollKf(dice, result);\n    } else {\n        return result;\n    }\n\n}\n\nconst rollDice = (dice: DiceRoll, ijasz: boolean): DiceRollResult => {\n    return [...Array(dice.numDice).keys()].map(_ => rollSingle(dice, ijasz)).reduce((acc, curr) => ({ value: acc.value + curr, details: `${acc.details ? acc.details + '+' : ''}${curr}` }), { value: 0, details: '' });\n}\n\nconst rollSingle = (dice: DiceRoll, ijasz: boolean): number => {\n    let res = 0;\n    let curr = 0;\n    do {\n        curr = 1 + Math.floor(random() * dice.die);\n        res += Math.ceil(curr / dice.div);\n    } while (ijasz && curr === dice.die)\n    return res;\n}\n\nconst rollKf = (dice: DiceRoll, result: DiceRollResult): DiceRollResult => {\n    const max = dice.numDice * Math.floor(dice.die / dice.div) + dice.plus;\n    if (result.value === max) {\n        let kfMod;\n        const kf = roll('k100').value;\n        if (kf <= 20) {\n            kfMod = -roll('k6').value;\n        } else if (kf <= 50) {\n            kfMod = -1;\n        } else if (kf <= 75) {\n            kfMod = 0;\n        } else if (kf <= 95) {\n            kfMod = 1;\n        } else {\n            kfMod = 2;\n        }\n        return {\n            value: result.value + kfMod,\n            details: `${result.details} (kf: ${kf} / ${kfMod})`\n        }\n    } else {\n        return result;\n    }\n\n}\n\nexport const roll = (dice: DiceRoll | string, ijasz?: boolean): DiceRollResult => _roll(typeof dice === 'string' ? parseDiceRoll(dice) : dice, !!ijasz);\n\nexport const rollSource = (randomFn: () => number): void => { random = randomFn }\n\nexport const parseDiceRoll = (diceString: string = '0'): DiceRoll => {\n    if (!Number.isNaN(Number(diceString))) {\n        return {\n            numDice: 0,\n            die: 0,\n            plus: Number(diceString),\n            tries: 1,\n            div: 1,\n            kf: false\n        };\n    }\n    const res = diceString.replace(/\\s/g, '').match(PATTERN);\n    return {\n        numDice: Number(res?.groups?.numDice ?? 1),\n        die: Number(res?.groups?.die ?? 0),\n        plus: Number(res?.groups?.plus ?? 0),\n        tries: Number(res?.groups?.tries ?? 1),\n        div: Number(res?.groups?.div ?? 1),\n        kf: res?.groups?.kf !== undefined\n    }\n}\n\nexport const formatDiceRoll = (dice: DiceRoll): string => {\n    if (dice.die === 0) {\n        return dice.plus ? `${dice.plus}` : '-';\n    };\n    return `${dice.numDice === 1 ? '' : dice.numDice}k${dice.die}${dice.div > 1 ? '/' + dice.div : ''}${dice.plus ? (dice.plus > 0 ? '+' : '-') + Math.abs(dice.plus) : ''}${dice.tries > 1 ? '(' + dice.tries + 'x)' : ''}${dice.kf ? ' + kf' : ''}`;\n}\n\nexport const formatResult = (result: DiceRollResult): string => {\n    return `${result.value} (${result.details})`\n}\n\nexport const sumRolls = (rolls: Array<DiceRoll>): DiceRoll | null => {\n    try {\n        const ret: DiceRoll = parseDiceRoll();\n        rolls.forEach(r => {\n            if (r.tries > 1 || r.kf) {\n                throw new Error('can\\'t sum rolls with multiple tries or kf');\n            }\n            if (ret.die !== 0 && r.die !== 0 && r.die !== ret.die) {\n                throw new Error('can\\'t sum rolls with different dies');\n            }\n            if (ret.div !== 1 && r.div !== 1 && ret.div !== r.div) {\n                throw new Error('can\\'t sum rolls with different divisors');\n            }\n            if (r.die !== 0) {\n                ret.die = r.die;\n                ret.numDice += r.numDice;\n            }\n            if (r.plus !== 0) {\n                ret.plus += r.plus;\n            }\n            if (r.div > 1) {\n                ret.div = r.div;\n            }\n        })\n        return ret;\n    } catch (e) { }\n    return null;\n}","import { DiceRoll, DiceRollResult, parseDiceRoll, roll } from \"./roll\";\n\nexport interface Dobas {\n    roll: DiceRoll;\n    result?: DiceRollResult;\n}\n\nexport class DobasMatrix {\n    readonly values: Record<string, Record<string, Dobas>>;\n    readonly sum: Record<string, number>;\n\n    constructor(readonly keys: Array<string>) {\n        this.values = {};\n        this.sum = {};\n    }\n\n    add = (name: string, dobas: Record<string, string | number>): DobasMatrix => {\n        this.values[name] = {};\n        if (dobas) {\n            this.keys.forEach(key => {\n                this.values[name][key] = {\n                    roll: parseDiceRoll(dobas[key]?.toString())\n                }\n            });\n        }\n        return this;\n    };\n\n    roll = (keys?: Array<string>): DobasMatrix => {\n        this.keys.filter(key => !keys || keys.indexOf(key) !== -1).forEach(key => {\n            Object.keys(this.values).forEach(name => {\n                const dobas = this.values[name][key];\n                dobas.result = dobas ? roll(dobas.roll) : { value: 0, details: '' };\n                this.sum[key] = Object.values(this.values).map(value => value[key].result?.value).reduce((a, b) => (a ?? 0) + (b ?? 0), 0) ?? 0;\n            });\n        })\n        return this;\n    }\n\n    getRolls = (key: string): Array<DiceRoll> => {\n        return Object.values(this.values).map(r => r[key].roll).filter(roll => roll && (roll.die > 0 || roll.plus !== 0));\n    }\n\n    clearRolls = (): DobasMatrix => {\n        this.keys.forEach(key => {\n            Object.keys(this.values).forEach(name => {\n                const dobas = this.values[name][key];\n                delete dobas.result;\n            });\n        });\n        return this;\n    }\n}\n\n","//todo: ugras\n\nimport { Fegyver } from \"./karakter\";\n\nexport interface Harcertek {\n    ke: number;\n    te: number;\n    ve: number;\n    ce: number;\n}\n\nexport type fegyverTipus = 'kozelharc' | 'lofegyver' | 'pajzs' | 'kl';\n\nexport const HARCERTEK_DISPLAY_NAMES = { 'ke': 'K', 'te': 'T', 've': 'V', 'ce': 'C', 'sebzes': 'Sebzs' };\n\nexport const FEGYVER_KEPZETTSEG: Record<string, Harcertek> = {\n    \"kpzetlen\": {\n        ke: -10,\n        te: -25,\n        ve: -20,\n        ce: -30\n    },\n    \"kpzetlen, fejvadsz\": {\n        ke: -5,\n        te: -5,\n        ve: -10,\n        ce: -15\n    },\n    \"Af\": {\n        ke: 0,\n        te: 0,\n        ve: 0,\n        ce: 0\n    },\n    \"Mf\": {\n        ke: 5,\n        te: 10,\n        ve: 10,\n        ce: 10\n    }\n}\n\nexport const FEGYVERTELEN: Fegyver = {\n    name: 'fegyver nlkl',\n    harcertek: {\n        ke: 0,\n        te: 0,\n        ve: 0,\n        ce: 0,\n    },\n    tamPerKor: 0,\n    sebzes: '0'\n};\n\n\nexport const PUSZTA_KEZ_AF: Fegyver = {\n    name: 'kl',\n    harcertek: {\n        ke: 4,\n        te: 1,\n        ve: 10,\n        ce: 0,\n    },\n    tamPerKor: 2,\n    sebzes: '1k2'\n}\n\nexport const PUSZTA_KEZ_MF: Fegyver = {\n    name: 'kl',\n    harcertek: {\n        ke: 4,\n        te: 1,\n        ve: 10,\n        ce: 0,\n    },\n    tamPerKor: 2,\n    sebzes: '1k6'\n}\n\nexport const FEGYVEREK: Array<Fegyver> = [\n    {\n        name: 'Tr',\n        harcertek: {\n            ke: 10,\n            te: 8,\n            ve: 2,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2\n    },\n    {\n        name: 'Tr, dob',\n        harcertek: {\n            ke: 10,\n            te: 11,\n            ve: 2,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2\n    },\n    {\n        name: 'Tsks buzogny',\n        harcertek: {\n            ke: 7,\n            te: 12,\n            ve: 13,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1\n    },\n    {\n        name: 'Hajtbrd',\n        harcertek: {\n            ke: 9,\n            te: 10,\n            ve: 4,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2\n    },\n    {\n        name: 'Dobhl',\n        harcertek: {\n            ke: 1,\n            te: 8,\n            ve: 4,\n            ce: 0,\n        },\n        sebzes: '0',\n        tamPerKor: 3,\n        lassu: true\n    },\n    {\n        name: 'Buzogny, shadleki',\n        harcertek: {\n            ke: 8,\n            te: 13,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1\n    },\n    {\n        name: 'Csatabrd, egykezes',\n        harcertek: {\n            ke: 5,\n            te: 12,\n            ve: 11,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1\n    },\n    {\n        name: 'Csatabrd, ktkezes',\n        harcertek: {\n            ke: 0,\n            te: 8,\n            ve: 6,\n            ce: 0,\n        },\n        sebzes: '3k6',\n        tamPerKor: 2,\n        lassu: true\n    },\n    {\n        name: 'Csatacskny',\n        harcertek: {\n            ke: 5,\n            te: 11,\n            ve: 8,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1\n    },\n    {\n        name: 'Kard, rvid',\n        harcertek: {\n            ke: 9,\n            te: 12,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1\n    },\n    {\n        name: 'Kard, hossz',\n        harcertek: {\n            ke: 6,\n            te: 14,\n            ve: 16,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1\n    },\n    {\n        name: 'Kard, msflkezes',\n        harcertek: {\n            ke: 4,\n            te: 13,\n            ve: 12,\n            ce: 0,\n        },\n        sebzes: '2k6',\n        tamPerKor: 1\n    },\n    {\n        name: 'Kard, lovagi',\n        harcertek: {\n            ke: 2,\n            te: 10,\n            ve: 7,\n            ce: 0,\n        },\n        sebzes: '2k6+2',\n        tamPerKor: 1\n    },\n    {\n        name: 'Kard, pallos',\n        harcertek: {\n            ke: 0,\n            te: 6,\n            ve: 2,\n            ce: 0,\n        },\n        sebzes: '3k6+2',\n        tamPerKor: 2,\n        lassu: true\n    },\n    {\n        name: 'Kard, szablya',\n        harcertek: {\n            ke: 7,\n            te: 15,\n            ve: 17,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, dzsenn szablya',\n        harcertek: {\n            ke: 9,\n            te: 20,\n            ve: 17,\n            ce: 0,\n        },\n        sebzes: '1k6+3',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, jatagn',\n        harcertek: {\n            ke: 7,\n            te: 14,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, handzsr',\n        harcertek: {\n            ke: 6,\n            te: 14,\n            ve: 15,\n            ce: 0,\n        },\n        sebzes: '1k6+3',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, fejvadsz',\n        harcertek: {\n            ke: 8,\n            te: 16,\n            ve: 16,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, Slan',\n        harcertek: {\n            ke: 8,\n            te: 20,\n            ve: 12,\n            ce: 0,\n        },\n        sebzes: '1k10+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kard, kgy',\n        harcertek: {\n            ke: 6,\n            te: 14,\n            ve: 15,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Ks',\n        harcertek: {\n            ke: 10,\n            te: 4,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '1k5',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Mara-sequor',\n        harcertek: {\n            ke: 7,\n            te: 16,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '2k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Ramiera',\n        harcertek: {\n            ke: 8,\n            te: 17,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Sequor',\n        harcertek: {\n            ke: 8,\n            te: 16,\n            ve: 13,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Slan csillag',\n        harcertek: {\n            ke: 10,\n            te: 4,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '1k3',\n        tamPerKor: 3,\n    },\n    {\n        name: 'Tr, Slan',\n        harcertek: {\n            ke: 9,\n            te: 14,\n            ve: 6,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Trkard',\n        harcertek: {\n            ke: 9,\n            te: 12,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Bot, hossz',\n        harcertek: {\n            ke: 4,\n            te: 10,\n            ve: 16,\n            ce: 0,\n        },\n        sebzes: '1k5',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Bot, rvid',\n        harcertek: {\n            ke: 9,\n            te: 9,\n            ve: 17,\n            ce: 0,\n        },\n        sebzes: '1k3',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Bot, furks',\n        harcertek: {\n            ke: 2,\n            te: 7,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Buzogny, egykezes',\n        harcertek: {\n            ke: 7,\n            te: 11,\n            ve: 12,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Buzogny, ktkezes',\n        harcertek: {\n            ke: 0,\n            te: 7,\n            ve: 6,\n            ce: 0,\n        },\n        sebzes: '3k6',\n        tamPerKor: 2,\n        lassu: true\n    },\n    {\n        name: 'Buzogny, tsks',\n        harcertek: {\n            ke: 7,\n            te: 12,\n            ve: 13,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Buzogny, tollas',\n        harcertek: {\n            ke: 7,\n            te: 12,\n            ve: 13,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Buzogny, lncos',\n        harcertek: {\n            ke: 4,\n            te: 13,\n            ve: 11,\n            ce: 0,\n        },\n        sebzes: '1k6+3',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Csphadar',\n        harcertek: {\n            ke: 1,\n            te: 6,\n            ve: 5,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Harcikalapcs',\n        harcertek: {\n            ke: 5,\n            te: 8,\n            ve: 10,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Alabrd',\n        harcertek: {\n            ke: 1,\n            te: 14,\n            ve: 15,\n            ce: 0,\n        },\n        sebzes: '2k6+2',\n        tamPerKor: 2,\n        lassu: true\n    },\n    {\n        name: 'Drda',\n        harcertek: {\n            ke: 8,\n            te: 13,\n            ve: 5,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kopja, knny',\n        harcertek: {\n            ke: 2,\n            te: 11,\n            ve: 12,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Kopja, lovas',\n        harcertek: {\n            ke: 1,\n            te: 15,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2,\n        lassu: true\n    },\n    {\n        name: 'Kopja, nehzlovas',\n        harcertek: {\n            ke: 0,\n            te: 16,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '2k10',\n        tamPerKor: 3,\n        lassu: true\n    },\n    {\n        name: 'Lndzsa',\n        harcertek: {\n            ke: 4,\n            te: 12,\n            ve: 12,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Szigony',\n        harcertek: {\n            ke: 4,\n            te: 15,\n            ve: 10,\n            ce: 0,\n        },\n        sebzes: '1k10+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Fvcs',\n        harcertek: {\n            ke: 8,\n            te: 0,\n            ve: 0,\n            ce: 7,\n        },\n        lotav: 30,\n        sebzes: '0',\n        tamPerKor: 3,\n    },\n    {\n        name: 'j, rvid',\n        harcertek: {\n            ke: 5,\n            te: 0,\n            ve: 0,\n            ce: 4,\n        },\n        lotav: 90,\n        sebzes: '1k6',\n        tamPerKor: 2,\n    },\n    {\n        name: 'j, hossz',\n        harcertek: {\n            ke: 4,\n            te: 0,\n            ve: 0,\n            ce: 6,\n        },\n        lotav: 110,\n        sebzes: '1k6+1',\n        tamPerKor: 2,\n    },\n    {\n        name: 'j, visszacsap',\n        harcertek: {\n            ke: 3,\n            te: 0,\n            ve: 0,\n            ce: 8,\n        },\n        lotav: 180,\n        sebzes: '1k10',\n        tamPerKor: 2,\n    },\n    {\n        name: 'j, elf',\n        harcertek: {\n            ke: 6,\n            te: 0,\n            ve: 0,\n            ce: 10,\n        },\n        lotav: 120,\n        sebzes: '2k6',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Nylpuska, aquir',\n        harcertek: {\n            ke: 5,\n            te: 0,\n            ve: 0,\n            ce: 18,\n        },\n        lotav: 35,\n        sebzes: '1k10/2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Nylpuska, kzi',\n        harcertek: {\n            ke: 3,\n            te: 0,\n            ve: 0,\n            ce: 14,\n        },\n        lotav: 30,\n        sebzes: '1k6/2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Nylpuska, kahrei',\n        harcertek: {\n            ke: 9,\n            te: 0,\n            ve: 0,\n            ce: 13,\n        },\n        lotav: 30,\n        sebzes: '1k6/2',\n        tamPerKor: 3,\n    },\n    {\n        name: 'Nylpuska, knny',\n        harcertek: {\n            ke: 2,\n            te: 0,\n            ve: 0,\n            ce: 16,\n        },\n        lotav: 50,\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Nylpuska, nehz',\n        harcertek: {\n            ke: 0,\n            te: 0,\n            ve: 0,\n            ce: 15,\n        },\n        lotav: 60,\n        sebzes: '1k6+1',\n        tamPerKor: 3,\n        lassu: true\n    },\n    {\n        name: 'Nylpuska, shadoni pncltr',\n        harcertek: {\n            ke: 0,\n            te: 0,\n            ve: 0,\n            ce: 17,\n        },\n        lotav: 80,\n        sebzes: '2k10',\n        tamPerKor: 5,\n        lassu: true\n    },\n    {\n        name: 'Parittya',\n        harcertek: {\n            ke: 2,\n            te: 0,\n            ve: 0,\n            ce: 1,\n        },\n        lotav: 100,\n        sebzes: '1k10/2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Bola',\n        harcertek: {\n            ke: 2,\n            te: 10,\n            ve: 2,\n            ce: 0,\n        },\n        sebzes: '1k5',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Dobhl',\n        harcertek: {\n            ke: 1,\n            te: 8,\n            ve: 4,\n            ce: 0,\n        },\n        sebzes: '0',\n        tamPerKor: 3,\n        lassu: true\n    },\n    {\n        name: 'Garott',\n        harcertek: {\n            ke: 0,\n            te: 5,\n            ve: -20,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Hrttr',\n        harcertek: {\n            ke: 8,\n            te: 4,\n            ve: 19,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Korbcs',\n        harcertek: {\n            ke: 4,\n            te: 0,\n            ve: 6,\n            ce: 0,\n        },\n        sebzes: '1k3',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Lassz',\n        harcertek: {\n            ke: 0,\n            te: 1,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '0',\n        tamPerKor: 3,\n        lassu: true\n    },\n    {\n        name: 'Ostor',\n        harcertek: {\n            ke: 3,\n            te: 6,\n            ve: 0,\n            ce: 0,\n        },\n        sebzes: '1k2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Vaskl',\n        harcertek: {\n            ke: 9,\n            te: 2,\n            ve: 5,\n            ce: 0,\n        },\n        sebzes: '1k3',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Dzsambia',\n        harcertek: {\n            ke: 10,\n            te: 8,\n            ve: 4,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Mesterkard',\n        harcertek: {\n            ke: 7,\n            te: 16,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Predoci egyeneskard',\n        harcertek: {\n            ke: 7,\n            te: 16,\n            ve: 15,\n            ce: 0,\n        },\n        sebzes: '1k10',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Tahdzsi',\n        harcertek: {\n            ke: 9,\n            te: 11,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+1',\n        tamPerKor: 1,\n    },\n    {\n        name: 'Bltp',\n        harcertek: {\n            ke: 10,\n            te: 8,\n            ve: 2,\n            ce: 0,\n        },\n        sebzes: '1k6+2',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Lagoss',\n        harcertek: {\n            ke: 8,\n            te: 14,\n            ve: 14,\n            ce: 0,\n        },\n        sebzes: '1k6+4',\n        tamPerKor: 2,\n    },\n    {\n        name: 'Pugoss',\n        harcertek: {\n            ke: 12,\n            te: 6,\n            ve: 4,\n            ce: 0,\n        },\n        sebzes: '1k6',\n        tamPerKor: 2,\n    },\n];\n\nexport const SZITUACIOK: Record<string, Harcertek> = {\n    'htulrl': {\n        ke: 5,\n        te: 10,\n        ve: 0,\n        ce: 0\n    },\n    'flhtulrl': {\n        ke: 2,\n        te: 5,\n        ve: 0,\n        ce: 0\n    },\n    'magasabbrl': {\n        ke: 2,\n        te: 5,\n        ve: 0,\n        ce: 5\n    },\n    'alacsonyabbrl': {\n        ke: -2,\n        te: -10,\n        ve: 0,\n        ce: -5\n    },\n    'meglepetsbl': {\n        ke: 100,\n        te: 30,\n        ve: 0,\n        ce: 10\n    },\n    'mozg lrl': {\n        ke: 5,\n        te: 10,\n        ve: 20,\n        ce: -20\n    },\n    'vakon': {\n        ke: -20,\n        te: -60,\n        ve: -70,\n        ce: -150\n    },\n    'flhomlyban': {\n        ke: -10,\n        te: -30,\n        ve: -35,\n        ce: -70\n    },\n    'helyhez ktve': {\n        ke: -20,\n        te: -15,\n        ve: -5,\n        ce: 0\n    },\n    'kbultan': {\n        ke: -15,\n        te: -20,\n        ve: -25,\n        ce: -30\n    },\n    'bnultan': {\n        ke: -30,\n        te: -40,\n        ve: -35,\n        ce: -15\n    },\n    'flelemmel': {\n        ke: -10,\n        te: -15,\n        ve: 5,\n        ce: -20\n    },\n    'gyllettel': {\n        ke: 3,\n        te: 10,\n        ve: -20,\n        ce: -20\n    },\n    'roham': {\n        ke: 0,\n        te: 20,\n        ve: -25,\n        ce: -30\n    },\n    'vdharc htrlva': {\n        ke: 0,\n        te: 0,\n        ve: 40,\n        ce: 0\n    },\n    'vdharc llva': {\n        ke: 0,\n        te: 0,\n        ve: 25,\n        ce: 0\n    },\n    'rszleges vdharc': {\n        ke: 0,\n        te: 0,\n        ve: 15,\n        ce: 0\n    },\n    'foglyul ejtsrt': {\n        ke: -5,\n        te: -5,\n        ve: -15,\n        ce: 0\n    },\n}\n\nconst tipus = (fegyver?: Fegyver): fegyverTipus | undefined => {\n    if (!fegyver || fegyver.name === FEGYVERTELEN.name) {\n        return undefined;\n    }\n    if (fegyver.harcertek.ce > 0) {\n        return 'lofegyver';\n    }\n    if (fegyver.name.toLowerCase() === 'kl') {\n        return 'kl';\n    }\n    if (fegyver.pajzs) {\n        return 'pajzs';\n    }\n    return 'kozelharc';\n}\n\nconst kepzettseg = (fegyver: Fegyver, dobas?: boolean): string => {\n    if (fegyver.name.toLowerCase() === 'kl') {\n        return 'klharc';\n    }\n    if (dobas) {\n        return 'Fegyverdobs - ' + fegyver.name.toLowerCase();\n    } else {\n        return 'Fegyverhasznlat - ' + fegyver.name.toLowerCase();\n    }\n}\n\nexport const FegyverUtils = {\n    tipus,\n    kepzettseg\n}\n\n","import { Harcertek } from \"./harc\";\nimport { DiceRollResult } from \"./roll\"\n\nexport interface KepessegDobas {\n    ero: string;\n    gy: string;\n    ugy: string;\n    ak: string;\n    egs: string;\n    sz: string;\n    int: string;\n    ae: string;\n    asz: string;\n    erz: string;\n}\n\nexport type KepessegDobasResult = Record<keyof KepessegDobas, DiceRollResult>;\n\nexport const KEPESSEG_NEV: Record<keyof KepessegDobas, string> = {\n    ero: 'Er',\n    gy: 'Gyorsasg',\n    ugy: 'gyessg',\n    ak: 'llkpessg',\n    egs: 'Egszsg',\n    sz: 'Szpsg',\n    int: 'Intelligencia',\n    ae: 'Akarater',\n    asz: 'Asztrl',\n    erz: 'rzkels'\n}\n\nexport const FAJ_KEPESSEG: Record<string, KepessegDobas> = {\n    \"ember\": {\n        ero: '0',\n        gy: '0',\n        ugy: '0',\n        ak: '0',\n        egs: '0',\n        sz: '0',\n        int: '0',\n        ae: '0',\n        asz: '0',\n        erz: '0'\n    },\n    \"elf\": {\n        ero: '-2',\n        gy: '1',\n        ugy: '1',\n        ak: '-1',\n        egs: '0',\n        sz: '1',\n        int: '0',\n        ae: '0',\n        asz: '0',\n        erz: '2'\n    },\n    \"flelf\": {\n        ero: '-1',\n        gy: '1',\n        ugy: '0',\n        ak: '0',\n        egs: '0',\n        sz: '0',\n        int: '0',\n        ae: '0',\n        asz: '0',\n        erz: '1'\n    },\n    \"trp\": {\n        ero: '1',\n        gy: '1',\n        ugy: '0',\n        ak: '1',\n        egs: '1',\n        sz: '-2',\n        int: '-1',\n        ae: '0',\n        asz: '-1',\n        erz: '0'\n    },\n    \"udvari ork\": {\n        ero: '2',\n        gy: '0',\n        ugy: '0',\n        ak: '1',\n        egs: '2',\n        sz: '-3',\n        int: '-1',\n        ae: '0',\n        asz: '-3',\n        erz: '1'\n    },\n    \"amund\": {\n        ero: '1',\n        gy: '0',\n        ugy: '0',\n        ak: '1',\n        egs: '0',\n        sz: '3',\n        int: '0',\n        ae: '0',\n        asz: '-1',\n        erz: '0'\n    },\n    \"dzsenn\": {\n        ero: '0',\n        gy: '0',\n        ugy: '0',\n        ak: '0',\n        egs: '0',\n        sz: '0',\n        int: '2',\n        ae: '0',\n        asz: '0',\n        erz: '0'\n    },\n    \"khl\": {\n        ero: '3',\n        gy: '2',\n        ugy: '1',\n        ak: '2',\n        egs: '3',\n        sz: '0',\n        int: '-1',\n        ae: '0',\n        asz: '-5',\n        erz: '3'\n    },\n    \"gnm\": {\n        ero: '-1',\n        gy: '0',\n        ugy: '1',\n        ak: '0',\n        egs: '0',\n        sz: '0',\n        int: '1',\n        ae: '0',\n        asz: '0',\n        erz: '2'\n    },\n    \"goblin\": {\n        ero: '-2',\n        gy: '0',\n        ugy: '0',\n        ak: '1',\n        egs: '1',\n        sz: '-2',\n        int: '-1',\n        ae: '0',\n        asz: '-2',\n        erz: '2'\n    },\n\n}\n\nexport const FOKASZTOK: Record<string, Array<string>> = {\n    'harcos': ['harcos', 'gladitor', 'fejvadsz', 'lovag'],\n    'szerencsevadsz': ['tolvaj', 'brd'],\n    'pap': ['pap', 'paplovag'],\n    'harcmvsz': ['harcmvsz', 'kardmvsz'],\n    'varzsl': ['boszorknymester', 'tzvarzsl', 'varzsl'],\n    'egyb': ['egyb']\n};\n\nexport const KASZTOK: Record<string, Kaszt> = {\n    'egyb': {\n        name: 'egyb',\n        kepesseg: {\n            ero: '10',\n            gy: '10',\n            ugy: '10',\n            ak: '10',\n            egs: '10',\n            sz: '10',\n            int: '10',\n            ae: '10',\n            asz: '10',\n            erz: '10'\n        },\n        alapHarcertek: {\n            ke: 0,\n            te: 0,\n            ve: 0,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 0,\n                ve: 0,\n                ce: 0\n            },\n            szabad: 0\n        },\n        epfp: {\n            ep: 0,\n            fp: 0,\n            fpPerSzint: 'k6'\n        }\n    },\n    harcos: {\n        name: 'harcos',\n        kepesseg: {\n            ero: 'k6 + 12 + kf',\n            gy: '2k6 + 6 + kf',\n            ugy: '2k6 + 6 + kf',\n            ak: 'k10 + 8 + kf',\n            egs: 'k10+10',\n            sz: '3k6(2x)',\n            int: '3k6(2x)',\n            ae: '2k6+6',\n            asz: '3k6(2x)',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 9,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 5\n        },\n        epfp: {\n            ep: 7,\n            fp: 6,\n            fpPerSzint: 'k6+4'\n        }\n    },\n    lovag: {\n        name: 'lovag',\n        kepesseg: {\n            ero: 'k6 + 12 + kf',\n            gy: '3k6(2x)',\n            ugy: '3k6(2x)',\n            ak: 'k10 + 8 + kf',\n            egs: 'k10+10',\n            sz: '2k6+6+kf',\n            int: '2k6+6',\n            ae: 'k10+8',\n            asz: '3k6(2x)',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 5,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 5,\n                ve: 5,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 7,\n            fp: 6,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    'gladitor': {\n        name: 'gladitor',\n        kepesseg: {\n            ero: 'k6 + 12 + kf',\n            gy: '2k6 + 6 + kf',\n            ugy: '2k6 + 6 + kf',\n            ak: 'k6 + 12 + kf',\n            egs: 'k10+10',\n            sz: '2k6+6',\n            int: '3k6',\n            ae: '3k6',\n            asz: '3k6',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 9,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 4,\n                ve: 4,\n                ce: 0\n            },\n            szabad: 4\n        },\n        epfp: {\n            ep: 8,\n            fp: 7,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    'fejvadsz': {\n        name: 'fejvadsz',\n        kepesseg: {\n            ero: '2k6+6',\n            gy: 'k6+12+kf',\n            ugy: 'k10+8',\n            ak: 'k6 + 12 + kf',\n            egs: 'k10+10',\n            sz: '3k6',\n            int: '3k6(2x)',\n            ae: 'k10+8',\n            asz: '2k6+6',\n            erz: 'k6+12'\n        },\n        alapHarcertek: {\n            ke: 10,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 4,\n                ve: 4,\n                ce: 0\n            },\n            szabad: 3\n        },\n        epfp: {\n            ep: 6,\n            fp: 7,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    tolvaj: {\n        name: 'tolvaj',\n        kepesseg: {\n            ero: '3k6(2x)',\n            gy: 'k10 + 8 + kf',\n            ugy: 'k6 + 12 + kf',\n            ak: '3k6(2x)',\n            egs: '3k6(2x)',\n            sz: '2k6 + 6',\n            int: '2k6 + 6',\n            ae: '3k6',\n            asz: '3k6(2x)',\n            erz: 'k6+12'\n        },\n        alapHarcertek: {\n            ke: 8,\n            te: 17,\n            ve: 72,\n            ce: 10\n        },\n        hm: {\n            kotelezo: {\n                ke: 1,\n                te: 1,\n                ve: 1,\n                ce: 0\n            },\n            szabad: 4\n        },\n        epfp: {\n            ep: 4,\n            fp: 5,\n            fpPerSzint: 'k6+3'\n        }\n    },\n    'brd': {\n        name: 'brd',\n        kepesseg: {\n            ero: 'k10+8',\n            gy: 'k10+8+kf',\n            ugy: 'k10 + 8',\n            ak: '2k6+6',\n            egs: '2k6+6',\n            sz: 'k6+12+kf',\n            int: 'k10+8(2x)',\n            ae: '2k6+6',\n            asz: 'k10+8',\n            erz: 'k10+8'\n        },\n        alapHarcertek: {\n            ke: 10,\n            te: 20,\n            ve: 75,\n            ce: 10\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 2,\n                ve: 2,\n                ce: 0\n            },\n            szabad: 5\n        },\n        epfp: {\n            ep: 5,\n            fp: 6,\n            fpPerSzint: 'k6+3'\n        }\n    },\n    pap: {\n        name: 'pap',\n        kepesseg: {\n            ero: '2k6+6',\n            gy: '3k6(2x)',\n            ugy: '3k6(2x)',\n            ak: '2k6+6',\n            egs: 'k10+8',\n            sz: 'k10+10',\n            int: 'k10+8',\n            ae: 'k10+8+kf',\n            asz: 'k6+12',\n            erz: 'k10+8'\n        },\n        alapHarcertek: {\n            ke: 5,\n            te: 17,\n            ve: 72,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 6,\n            fp: 6,\n            fpPerSzint: 'k6+2'\n        }\n    },\n    paplovag: {\n        name: 'paplovag',\n        kepesseg: {\n            ero: 'k10+8+kf',\n            gy: '3k6(2x)',\n            ugy: '3k6(2x)',\n            ak: 'k10+8',\n            egs: 'k10+10',\n            sz: 'k10+8',\n            int: '2k6 + 6',\n            ae: 'k10+8',\n            asz: 'k10+8+kf',\n            erz: 'k10+8'\n        },\n        alapHarcertek: {\n            ke: 5,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 3\n        },\n        epfp: {\n            ep: 8,\n            fp: 7,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    'harcmvsz': {\n        name: 'harcmvsz',\n        kepesseg: {\n            ero: 'k10+8',\n            gy: 'k6+14',\n            ugy: 'k6+12',\n            ak: 'k6+12',\n            egs: 'k10+10',\n            sz: '3k6(2x)',\n            int: '3k6(2x)',\n            ae: 'k6+12',\n            asz: 'k10+8',\n            erz: 'k6+12'\n        },\n        alapHarcertek: {\n            ke: 10,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 4,\n            fp: 8,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    'kardmvsz': {\n        name: 'kardmvsz',\n        kepesseg: {\n            ero: 'k10+8',\n            gy: 'k6+12+kf',\n            ugy: 'k6+14',\n            ak: 'k10+8',\n            egs: 'k10+8',\n            sz: '3k6(2x)',\n            int: '2k6 + 6',\n            ae: 'k6+12',\n            asz: 'k10+8',\n            erz: 'k6+12'\n        },\n        alapHarcertek: {\n            ke: 10,\n            te: 20,\n            ve: 75,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 4,\n            fp: 8,\n            fpPerSzint: 'k6+5'\n        }\n    },\n    'boszorknymester': {\n        name: 'boszorknymester',\n        kepesseg: {\n            ero: '3k6(2x)',\n            gy: 'k10+8',\n            ugy: 'k6+12+kf',\n            ak: '3k6(2x)',\n            egs: '2k6+6',\n            sz: '3k6',\n            int: '2k6 + 6',\n            ae: '2k6+6',\n            asz: '2k6+6',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 7,\n            te: 17,\n            ve: 72,\n            ce: 5\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 1,\n                ve: 1,\n                ce: 0\n            },\n            szabad: 5\n        },\n        epfp: {\n            ep: 3,\n            fp: 4,\n            fpPerSzint: 'k6+1'\n        }\n    },\n    'tzvarzsl': {\n        name: 'tzvarzsl',\n        kepesseg: {\n            ero: '2k6+6',\n            gy: '3k6(2x)',\n            ugy: '3k6(2x)',\n            ak: '2k6+6',\n            egs: '2k6+6',\n            sz: '3k6',\n            int: '2k6 + 6',\n            ae: '2k6+6',\n            asz: '2k6+6',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 6,\n            te: 17,\n            ve: 72,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 3,\n                ve: 3,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 5,\n            fp: 4,\n            fpPerSzint: 'k6+1'\n        }\n    },\n    'varzsl': {\n        name: 'varzsl',\n        kepesseg: {\n            ero: '3k6',\n            gy: '3k6(2x)',\n            ugy: '3k6(2x)',\n            ak: '3k6',\n            egs: '3k6(2x)',\n            sz: '3k6',\n            int: 'k6+12+kf',\n            ae: 'k6+12+kf',\n            asz: 'k6+12+kf',\n            erz: '2k6+6'\n        },\n        alapHarcertek: {\n            ke: 2,\n            te: 15,\n            ve: 70,\n            ce: 0\n        },\n        hm: {\n            kotelezo: {\n                ke: 0,\n                te: 1,\n                ve: 1,\n                ce: 0\n            },\n            szabad: 2\n        },\n        epfp: {\n            ep: 3,\n            fp: 2,\n            fpPerSzint: 'k6'\n        }\n    },\n}\n\nexport interface Kaszt {\n    name: string,\n    kepesseg: KepessegDobas,\n    alapHarcertek: Harcertek,\n    hm: { kotelezo: Harcertek, szabad: number },\n    epfp: { ep: number, fp: number, fpPerSzint: string }\n}\n\nexport function osszead<T>(r1: Record<keyof T, number>, r2: Record<keyof T, number>): Record<keyof T, number> {\n    const keys = [...new Set([...Object.keys(r1), ...Object.keys(r2)])];\n    return keys.reduce((acc, curr) => { acc[curr as keyof T] = r1[curr as keyof T] + r2[curr as keyof T]; return acc; }, {} as Record<keyof T, number>)\n}","import { DobasMatrix } from \"./dobasmatrix\";\nimport { FEGYVERTELEN, FegyverUtils, FEGYVER_KEPZETTSEG, Harcertek } from \"./harc\";\nimport { Kaszt, osszead } from \"./kasztok\";\nimport { Pancel } from \"./pancel\";\nimport { roll } from \"./roll\";\n\n\nexport interface KarakterKepesseg {\n    ero: number;\n    gy: number;\n    ugy: number;\n    ak: number;\n    egs: number;\n    sz: number;\n    int: number;\n    ae: number;\n    asz: number;\n}\n\nexport interface KarakterInfo {\n    id: string;\n    name: string;\n}\n\nexport interface KarakterInfo {\n    id: string;\n    categories: Array<string>;\n    name: string;\n}\n\nexport interface Points {\n    akt: number;\n    max: number;\n}\n\nexport interface KarakterV1 extends KarakterInfo {\n    version: 1;\n    faj: string;\n    kaszt: Kaszt;\n    szint: number;\n    kepessegek: KarakterKepesseg;\n    kepzettsegek?: Array<Kepzettseg>;\n    alapHarcertek: Harcertek;\n    hmHarcertek: Harcertek;\n    hm: number;\n    fegyverek: Array<Fegyver>;\n    pancelok?: Array<Pancel>;\n    valasztottPancel?: number;\n    valasztottFegyver?: number;\n    masodlagosFegyver?: number;\n    pszi?: Points,\n    mp?: Points,\n\n    maxFp: number;\n    maxEp: number;\n    fp: number;\n    ep: number;\n}\n\nexport interface Pajzs {\n    termeszetes: number;\n    statikus: number;\n    dinamikus: number;\n}\n\nexport interface Karakter extends KarakterInfo {\n    version: 2;\n    faj: string;\n    kaszt: Kaszt;\n    szint: number;\n    kepessegek: KarakterKepesseg;\n    kepzettsegek?: Array<Kepzettseg>;\n    alapHarcertek: Harcertek;\n    hmHarcertek: Harcertek;\n    hm: number;\n    fegyverek: Array<Fegyver>;\n    pancelok?: Array<Pancel>;\n    valasztottPancel?: number;\n    valasztottFegyver?: number;\n    masodlagosFegyver?: number;\n    pszi?: Points,\n    mp?: Points,\n    ep: Points,\n    fp: Points,\n    pajzs?: {\n        asztral: Pajzs;\n        mental: Pajzs;\n    };\n    jegyzetek?: string;\n    felszereles?: Array<FelszerelesItem>;\n    masodlagosFegyverMutat?: boolean;\n}\n\nexport interface FelszerelesItem {\n    name: string;\n    qty: number;\n}\n\nexport interface Fegyver {\n    name: string;\n    harcertek: Harcertek;\n    sebzes: string;\n    tamPerKor: number;\n    lassu?: boolean;\n    lotav?: number;\n    erobonusz?: number;\n    pajzs?: boolean;\n    mgt?: number;\n}\n\nexport interface Kepzettseg {\n    name: string;\n    target?: string;\n    szint: '1' | '2' | '3' | '4' | '5' | 'Af' | 'Mf' | number;\n    kp: number;\n}\n\nexport const findKepzettseg = ({ kepzettsegek }: Pick<Karakter, 'kepzettsegek'>, kepzettseg: string): Kepzettseg | undefined => {\n    return kepzettsegek?.find(k => k.name.toLowerCase() === kepzettseg.toLowerCase());\n}\n\nexport const folottiResz = (kepesseg?: number, hatar: number = 10) => {\n    return Math.max(0, ((kepesseg === undefined || Number.isNaN(kepesseg)) ? 0 : kepesseg) - hatar);\n}\n\nexport const szintlepes = (karakter: Karakter): Karakter => {\n    karakter.szint++;\n    const hm = karakter.kaszt.hm;\n    karakter.hm += hm.szabad;\n    karakter.hmHarcertek = osszead(karakter.hmHarcertek, hm.kotelezo);\n    karakter.fp.max += roll(karakter.kaszt.epfp.fpPerSzint).value;\n    karakter.fp.akt = karakter.fp.max;\n    return karakter;\n}\n\nconst calculateKepessegHarcertek = (karakter: Karakter, fegyver: Fegyver): Record<string, string | number> => {\n    const mgt = calculateMGT(karakter);\n    const ugy = folottiResz(karakter.kepessegek.ugy - mgt[0]);\n    const gy = folottiResz(karakter.kepessegek.gy - mgt[0]);\n    const erobonusz = fegyver.erobonusz ?? 16;\n    return {\n        ke: gy + ugy,\n        te: gy + ugy + folottiResz(karakter.kepessegek.ero),\n        ve: gy + ugy,\n        ce: ugy,\n        sebzes: erobonusz !== 0 ? folottiResz(karakter.kepessegek.ero, erobonusz) : 0\n    }\n}\n\nexport const calculateSebesulesHatrany = (karakter: Karakter): Harcertek | null => {\n    if (karakter.ep.max > 0 && karakter.ep.akt <= karakter.ep.max * 0.25) {\n        return {\n            ke: -15,\n            te: -20,\n            ve: -25,\n            ce: -30\n        }\n    } else if ((karakter.ep.max > 0 && karakter.ep.akt <= karakter.ep.max * 0.5) || (karakter.fp.akt > 0 && karakter.fp.akt < karakter.fp.max * 0.1)) {\n        return {\n            ke: -5,\n            te: -10,\n            ve: -10,\n            ce: -5\n        }\n    }\n    return null;\n}\n\nexport const calculateMGT = (karakter: Karakter): [number, boolean?] => {\n    const pancel = karakter.valasztottPancel !== undefined ? karakter.pancelok?.[karakter.valasztottPancel] : undefined;\n    if (!pancel) {\n        return [0]; // no pancel, no mgt\n    }\n    const nehezvertViselet = findKepzettseg(karakter, 'Nehzvrtviselet')?.szint;\n    switch (nehezvertViselet) {\n        case 'Mf': return [0];\n        case 'Af': return [pancel.nehez ? pancel.mgt : 0];\n        default: return [pancel.mgt, pancel.nehez];\n    }\n}\n\nconst addKepzettseg = (ret: DobasMatrix, karakter: Karakter, fegyver: Fegyver) => {\n    const tipus = FegyverUtils.tipus(fegyver);\n    const fejvadasz = karakter.kaszt?.name === 'fejvadsz';\n    const kepzettseg: Kepzettseg | undefined = karakter.kepzettsegek?.find(k => k.name === FegyverUtils.kepzettseg(fegyver));\n    const pajzsHasznalat = findKepzettseg(karakter, 'Pajzshasznlat');\n\n    const mgt = calculateMGT(karakter);\n    if (mgt[1]) {\n        ret.add('Nehzvrt', { ...FEGYVER_KEPZETTSEG['kpzetlen'] });\n    } else if (!kepzettseg) {\n        if (tipus && !(tipus === 'pajzs' && pajzsHasznalat?.szint)) {\n            if (!fejvadasz) {\n                ret.add('kpzetlen', { ...FEGYVER_KEPZETTSEG['kpzetlen'] });\n            } else {\n                ret.add('kpzetlen', { ...FEGYVER_KEPZETTSEG['kpzetlen, fejvadsz'] });\n            }\n        }\n    } else if (tipus !== 'kl') { // klharcnl nincs bnusz\n        ret.add('Kpzettsg ' + kepzettseg.szint, { ...FEGYVER_KEPZETTSEG[kepzettseg.szint] });\n    }\n\n    const ugras = findKepzettseg(karakter, 'Ugrs');\n    if (ugras && typeof ugras.szint === 'number') {\n        ret.add('ugrs', { ve: Math.floor(ugras.szint / 5) })\n    }\n}\n\nconst addKetkezes = (ret: DobasMatrix, karakter: Karakter, masodlagos?: boolean) => {\n    if (karakter.valasztottFegyver === undefined || karakter.masodlagosFegyver === undefined) {\n        return;\n    }\n    const pajzsHasznalat = findKepzettseg(karakter, 'Pajzshasznlat');\n    const ketkezesHarc = findKepzettseg(karakter, 'Ktkezes harc');\n    const masodlagosFegyver = karakter.fegyverek[karakter.masodlagosFegyver];\n    if (masodlagosFegyver?.pajzs && pajzsHasznalat) {\n        if (!masodlagos) {\n            ret.add('Pajzs', { ve: masodlagosFegyver.harcertek.ve });\n        }\n    } else {\n        switch (ketkezesHarc?.szint) {\n            case 'Mf': return;\n            case 'Af': {\n                if (masodlagos) {\n                    ret.add('ktkezes harc', { ke: -2, te: -5, ve: -5 });\n                }\n                return;\n            }\n            default: {\n                if (masodlagos) {\n                    ret.add('ktkezes harc', { ...FEGYVER_KEPZETTSEG['kpzetlen'] });\n                } else {\n                    ret.add('ktkezes harc', { ke: -5, te: -10, ve: -10 });\n                }\n                return;\n            }\n        }\n    }\n}\n\nconst findFegyver = (karakter: Karakter, masodlagos?: boolean): Fegyver => {\n    const index = masodlagos ? karakter.masodlagosFegyver : karakter.valasztottFegyver;\n    if (index === undefined) {\n        return FEGYVERTELEN;\n    }\n    return karakter.fegyverek[index] ?? FEGYVERTELEN;\n}\n\nexport const calculateHarcertek = (karakter: Karakter, szituaciok?: Array<Harcertek & { name: string }>, masodlagos?: boolean): DobasMatrix => {\n    const fegyver = findFegyver(karakter, masodlagos);\n    const tipus = FegyverUtils.tipus(fegyver);\n    const ret: DobasMatrix = new DobasMatrix(!tipus ? ['ke', 'te', 've', 'ce', 'sebzes'] : (tipus === 'lofegyver' ? ['ke', 'ce', 've', 'sebzes'] : ['ke', 'te', 've', 'sebzes']));\n\n    ret.add('alap', karakter.alapHarcertek as unknown as Record<string, number>);\n\n    const fejvadasz = karakter.kaszt?.name === 'fejvadsz';\n    if (fejvadasz && karakter.szint) {\n        ret.add('spec', { ke: Math.floor(karakter.szint / 2), sebzes: Math.floor(karakter.szint / 2) });\n    }\n\n    ret.add('hm', karakter.hmHarcertek as unknown as Record<string, number>)\n\n    if (tipus) {\n        ret.add(fegyver.name, { ...fegyver.harcertek, 'sebzes': fegyver.sebzes });\n    }\n\n    ret.add('kepessegek', calculateKepessegHarcertek(karakter, fegyver));\n\n    addKepzettseg(ret, karakter, fegyver);\n\n    addKetkezes(ret, karakter, masodlagos);\n\n    const sebesules = calculateSebesulesHatrany(karakter);\n    if (sebesules) {\n        ret.add('Sebesls', { ...sebesules });\n    }\n\n    szituaciok?.forEach(sz => ret.add(sz.name, { ...sz }));\n\n    return ret;\n}","import React from 'react';\nimport { Label } from 'semantic-ui-react';\nimport { DiceRollResult } from '../engine/roll';\n\nexport const DobasEredmeny: React.FC<{ pointing?: 'left' | 'right', result?: DiceRollResult }> = ({ result, pointing }) => {\n    return <>\n        {result && <Label size='large' pointing={pointing} color='black'>{result?.value}</Label>}\n        {result && <Label basic><i>{result?.details}</i></Label>}\n    </>;\n}","import React from 'react';\r\nimport { Button, ButtonGroup, Label } from 'semantic-ui-react';\r\nimport { DiceRoll, formatDiceRoll } from '../engine/roll';\r\n\r\nexport const DobasInput: React.FC<{ value: DiceRoll, onChange: (dobas: DiceRoll) => unknown }> = ({ value, onChange }) => {\r\n\r\n    const setDie = (die: number) => {\r\n        if (value.die === die) {\r\n            value.numDice++;\r\n        } else {\r\n            value.die = die;\r\n            value.numDice = 1;\r\n        }\r\n        onChange(value);\r\n    }\r\n\r\n    const addPlus = (plus: number) => {\r\n        value.plus += plus;\r\n        onChange(value);\r\n    }\r\n\r\n    const toggleKf = () => {\r\n        value.kf = !value.kf;\r\n        onChange(value);\r\n    }\r\n\r\n    const toggle2x = () => {\r\n        value.tries = (value.tries > 1) ? 1 : 2;\r\n        onChange(value);\r\n    }\r\n\r\n    return <ButtonGroup fluid size='tiny' labelPosition='left'>\r\n        <Label basic>{formatDiceRoll(value)}</Label>\r\n        <Button color='olive' onClick={() => setDie(0)}>-</Button>\r\n        <Button color='olive' onClick={() => setDie(6)}>k6</Button>\r\n        <Button color='olive' onClick={() => setDie(10)}>k10</Button>\r\n        <Button onClick={() => addPlus(-1)}>-1</Button>\r\n        <Button onClick={() => addPlus(1)}>+1</Button>\r\n        <Button color='orange' onClick={() => toggleKf()}>+kf</Button>\r\n        <Button color='blue' onClick={() => toggle2x()}>2x</Button>\r\n    </ButtonGroup>\r\n}","import React from 'react';\r\nimport { Icon } from 'semantic-ui-react';\r\n\r\nexport const NumberInput: React.FC<{ value: number, onChange: (value: number) => unknown, min: number, max: number, icons?: boolean }> = ({ value, onChange, min, max, icons }) => {\r\n    return <span style={{ whiteSpace: 'nowrap' }}>\r\n        {icons && <button onClick={() => { onChange(Math.max(min, value - 1)) }} ><Icon compact name='arrow down' style={{ margin: '0' }} /></button>}\r\n        <input style={{ width: '3rem' }} value={value} onChange={(e) => {\r\n            const newValue = e.target.value;\r\n            if (/^-?\\d+$/.test(newValue) || newValue === '') {\r\n                let num = newValue !== '' ? parseInt(newValue) : 0;\r\n                if (min !== undefined && num < min) {\r\n                    num = min;\r\n                }\r\n                if (max !== undefined && num > max) {\r\n                    num = max;\r\n                }\r\n                onChange(num);\r\n            } else {\r\n                onChange(value);\r\n            }\r\n        }}>\r\n        </input>\r\n        {icons && <button onClick={() => { onChange(Math.min(max, value + 1)) }}><Icon compact name='arrow up' style={{ margin: '0' }} /></button>}\r\n    </span>\r\n}","import React from 'react';\nimport { SemanticCOLORS, Table } from 'semantic-ui-react';\nimport { DobasMatrix } from '../engine/dobasmatrix';\nimport { formatDiceRoll, parseDiceRoll } from '../engine/roll';\nimport { DobasEredmeny } from './DobasEredmeny';\nimport { DobasInput } from './DobasInput';\nimport { NumberInput } from './NumberInput';\n\ninterface DobasMatrixDisplayProps {\n    matrix: DobasMatrix,\n    keyMap: Record<string, string>,\n    direction: 'horizontal' | 'vertical',\n    title: string | React.ReactNode,\n    setValue?: (name: string, key: string, value: string) => unknown,\n    editable?: Array<string>,\n    numberOnly?: boolean,\n    color?: SemanticCOLORS\n}\n\nexport const DobasMatrixDisplay: React.FC<DobasMatrixDisplayProps> = ({ matrix, keyMap, direction, title, editable, setValue, numberOnly, color }) => {\n    const displayCell = (name: string, key: string) => {\n        const value = matrix.values[name][key];\n        const constantRoll = (value?.roll?.die ?? 0) === 0;\n        const rollString = value?.roll ? formatDiceRoll(value.roll) : '';\n        if (!editable?.includes(name)) {\n            return <Table.Cell key={name + '-' + key} collapsing>\n                {rollString}{!constantRoll && value?.result && <> = <DobasEredmeny result={value?.result} /></>}\n            </Table.Cell>;\n        } else {\n            return <Table.Cell key={name + '-' + key} collapsing>\n                {numberOnly ?\n                    <NumberInput value={value?.roll.plus ?? 0} onChange={v => setValue?.(name, key, String(v))} min={0} max={100000} />\n                    :\n                    <DobasInput value={value?.roll ?? parseDiceRoll('')} onChange={e => setValue?.(name, key, formatDiceRoll(e))} />\n                }\n            </Table.Cell>;\n        }\n    }\n\n    if (direction === 'horizontal') {\n        return <Table celled striped compact color={color}>\n            <Table.Header>\n                <Table.Row>\n                    <Table.HeaderCell key='title' disabled={false}>{title}</Table.HeaderCell>\n                    {matrix.keys.map(key => <Table.HeaderCell key={key}>{keyMap[key]}</Table.HeaderCell>)}\n                </Table.Row>\n            </Table.Header>\n            <Table.Body>\n                {Object.keys(matrix.values).map(name => {\n                    return <Table.Row key={name}>\n                        <Table.HeaderCell key={name}>{name}</Table.HeaderCell>\n                        {matrix.keys.map(key => displayCell(name, key))}\n                    </Table.Row>\n                })}\n                <tr key='footer'>\n                </tr>\n            </Table.Body>\n            <Table.Footer>\n                <Table.HeaderCell title='sum'>sszeg</Table.HeaderCell>\n                {matrix.keys.map(key => <Table.HeaderCell key={key} collapsing>{matrix.sum[key]}</Table.HeaderCell>)}\n            </Table.Footer>\n        </Table>\n    } else {\n        return <Table celled striped definition compact color={color}>\n            <Table.Header>\n                <Table.Row>\n                    <Table.HeaderCell key='title'>{title}</Table.HeaderCell>\n                    {Object.keys(matrix.values).map(name => <Table.HeaderCell key={name}>{name}</Table.HeaderCell>)}\n                    <Table.HeaderCell key='sum' collapsing>sszeg</Table.HeaderCell>\n                </Table.Row>\n            </Table.Header>\n            <Table.Body>\n                {matrix.keys.map(key => {\n                    return <Table.Row key={key}>\n                        <Table.HeaderCell key='title'>{keyMap[key]}</Table.HeaderCell>\n                        {Object.keys(matrix.values).map(name => displayCell(name, key))}\n                        <Table.HeaderCell key='sum'>{matrix.sum[key]}</Table.HeaderCell>\n                    </Table.Row>\n                })}\n            </Table.Body>\n        </Table>\n\n    }\n}","import React from 'react';\nimport { Table } from 'semantic-ui-react';\nimport { SemanticCOLORS } from 'semantic-ui-react/dist/commonjs/generic';\nimport { Points } from '../engine/karakter';\nimport { NumberInput } from './NumberInput';\n\n//const NumberInput: any = require('semantic-ui-react-numberinput').default;\n\ninterface Point extends Points {\n    name: string;\n    label: string;\n}\n\ninterface PointsTableProps {\n    points: Array<Point>,\n    onChange: (name: string, max: boolean, newValue: number) => unknown,\n    title?: string,\n    color?: SemanticCOLORS;\n}\n\nexport const PointsTable: React.FC<PointsTableProps> = ({ points, onChange, title, color }) => {\n    return <Table striped celled definition fluid compact color={color}>\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell>{title ?? 'Pontok'}</Table.HeaderCell>\n                {points.map(p => <Table.HeaderCell collapsing>{p.label}</Table.HeaderCell>)}\n            </Table.Row>\n\n        </Table.Header>\n        <Table.Body>\n            <Table.Row>\n                <Table.HeaderCell>Max</Table.HeaderCell>\n                {points.map(p => <Table.Cell collapsing><NumberInput icons value={p.max} min={0} max={1000} onChange={(e: number) => onChange(p.name, true, e)} /></Table.Cell>)}\n            </Table.Row>\n            <Table.Row>\n                <Table.HeaderCell>Akt</Table.HeaderCell>\n                {points.map(p => <Table.Cell collapsing><NumberInput icons value={p.akt} min={0} max={p.max} onChange={(e: number) => onChange(p.name, false, Math.min(p.max, e))} /></Table.Cell>)}\n            </Table.Row>\n        </Table.Body>\n    </Table>\n\n}","import React from 'react';\nimport { Button, Label } from 'semantic-ui-react';\n\ninterface SelectionProps { label: JSX.Element | string, selected?: string, setSelected: (newValue: string | undefined) => unknown, options: Array<string>, structure?: Record<string, Array<string>> };\n\nexport const Selection: React.FC<SelectionProps> = ({ label, selected, setSelected, options, structure }) => {\n    if (!structure) {\n        return <Button labelPosition='left' as='div'>\n            <Label basic pointing='right'>\n                {label}\n            </Label>\n            {options.map(n => <Button active={selected === n} onClick={() => setSelected(n)}>{n}</Button>)}\n        </Button>\n    } else {\n        return <Button labelPosition='left' as='div'>\n            <Label basic pointing='right'>\n                {label}\n            </Label>\n            {Object.keys(structure).map(fk => <Button.Group as='div' vertical>\n                <Label tag color='yellow'>{fk}</Label>\n                {options.filter(o => structure[fk].includes(o)).map((n, i) => <Button compact active={selected === n} onClick={() => setSelected(n)}>{n}</Button>)}\n            </Button.Group>\n            )}\n        </Button>\n    }\n\n}","import React from 'react';\r\nimport { Input, Label } from 'semantic-ui-react';\r\nimport { KASZTOK, FOKASZTOK } from '../engine/kasztok';\r\nimport { BackgroundSelection } from '../pages/KarakterAlkotas';\r\nimport { Selection } from './Selection';\r\n\r\nexport const KarakterAlkotasBackground: React.FC<{ fajNevek: Array<string>, backgroundSelection: BackgroundSelection, setBackgroundSelection: (backgroundSelection: BackgroundSelection) => unknown }> = ({ fajNevek, backgroundSelection, setBackgroundSelection }) => {\r\n\r\n    const changeKasztSelection = (s: string | undefined) => {\r\n        const kaszt = (!!s && KASZTOK[s]) || KASZTOK['egyb']\r\n        setBackgroundSelection({ ...backgroundSelection, kaszt: JSON.parse(JSON.stringify(kaszt)) });\r\n    };\r\n\r\n\r\n    return <div>\r\n        <div>\r\n            <Input fluid labelPosition='left' placeholder='Karakter neve...' error={!backgroundSelection.name} value={backgroundSelection.name} onChange={e => setBackgroundSelection({ ...backgroundSelection, name: e.target.value })}>\r\n                <Label pointing='right' basic>Nv</Label>\r\n                <input />\r\n            </Input>\r\n        </div>\r\n        <div><Selection label='Kaszt' selected={backgroundSelection.kaszt?.name} setSelected={changeKasztSelection} options={Object.keys(KASZTOK)} structure={FOKASZTOK} /></div>\r\n        <div><Selection label='Faj' selected={backgroundSelection.faj} setSelected={faj => setBackgroundSelection({ ...backgroundSelection, faj })} options={fajNevek} /></div>\r\n        <div><Input labelPosition='left' value={backgroundSelection.szint} onChange={e => {\r\n            const value = e.target.value ? Math.max(0, Math.floor(Number(e.target.value))) : undefined;\r\n            setBackgroundSelection({ ...backgroundSelection, szint: value });\r\n        }}>\r\n            <Label pointing='right' basic>Szint</Label>\r\n            <input />\r\n        </Input>\r\n        </div>\r\n        <div>\r\n            <Input labelPosition='left' error={!backgroundSelection.kaszt?.name} value={backgroundSelection.kaszt?.name} onChange={e => {\r\n                if (backgroundSelection.kaszt) {\r\n                    setBackgroundSelection({ ...backgroundSelection, kaszt: { ...backgroundSelection.kaszt, name: e.target.value } });\r\n                }\r\n            }}>\r\n                <Label pointing='right' basic>Kaszt neve</Label>\r\n                <input />\r\n            </Input>\r\n        </div>\r\n    </div>\r\n\r\n}\r\n","import React, { useEffect, useState } from 'react';\nimport { Button, Grid, GridColumn, GridRow, Input, Label } from 'semantic-ui-react';\nimport { v4 } from 'uuid';\nimport { DobasMatrix } from '../engine/dobasmatrix';\nimport { HARCERTEK_DISPLAY_NAMES } from '../engine/harc';\nimport { calculateHarcertek, folottiResz, Karakter, KarakterKepesseg, szintlepes } from '../engine/karakter';\nimport { Kaszt, KepessegDobas, KEPESSEG_NEV } from '../engine/kasztok';\nimport { DobasMatrixDisplay } from '../components/DobasMatrixDisplay';\nimport { PointsTable } from '../components/PointsTable';\nimport { KarakterAlkotasBackground } from '../components/KarakterAlkotasBackground';\n\nconst NumberInput: any = require('semantic-ui-react-numberinput').default;\n\nexport interface BackgroundSelection {\n    name: string;\n    faj?: string;\n    kaszt?: Kaszt;\n    szint?: number;\n}\n\n\nconst calculateKepessegek = (fajok: Record<string, KepessegDobas>, { kaszt, faj }: { kaszt?: Kaszt, faj?: string }, roll?: boolean) => {\n    const newMatrix = new DobasMatrix(Object.keys(KEPESSEG_NEV));\n    if (kaszt) {\n        newMatrix.add('Kaszt: ' + kaszt.name, kaszt.kepesseg as unknown as Record<string, string>);\n    }\n    if (faj && fajok[faj]) {\n        newMatrix.add('Faj: ' + faj, fajok[faj] as unknown as Record<string, string>);\n    }\n    if (roll) {\n        newMatrix.roll();\n    }\n    return newMatrix;\n}\n\nconst createKarakter = ({ kaszt, faj, szint, name }: BackgroundSelection, kepessegek: DobasMatrix) => {\n    if (!kaszt || !kepessegek.sum || !faj) {\n        return null;\n    }\n    const epfp = kaszt.epfp;\n    const ep = epfp.ep + folottiResz(kepessegek.sum.egs);\n    const fp = epfp.fp + folottiResz(kepessegek.sum.ae) + folottiResz(kepessegek.sum.ak);\n    const karakter: Karakter = {\n        version: 2,\n        id: v4(),\n        name,\n        faj,\n        categories: [],\n        kepessegek: kepessegek.sum as unknown as KarakterKepesseg,\n        kaszt,\n        szint: 0,\n        hm: 0,\n        ep: { max: ep, akt: ep },\n        fp: { max: fp, akt: fp },\n        hmHarcertek: { ke: 0, te: 0, ve: 0, ce: 0 },\n        kepzettsegek: [],\n        alapHarcertek: kaszt.alapHarcertek,\n        fegyverek: []\n    };\n    [...Array(szint).keys()].forEach(() => szintlepes(karakter));\n    return karakter;\n};\n\n\n\nexport const KarakterAlkotas: React.FC<{ save: (karakter: Karakter) => unknown, fajok: Record<string, KepessegDobas> }> = ({ save, fajok }) => {\n    const [backgroundSelection, setBackgroundSelection] = useState<BackgroundSelection>({ szint: 1, name: '' });\n    const [matrix, setMatrix] = useState<DobasMatrix>(new DobasMatrix(Object.keys(KEPESSEG_NEV)));\n\n    useEffect(() => {\n        setMatrix(calculateKepessegek(fajok, { kaszt: backgroundSelection.kaszt, faj: backgroundSelection.faj }));\n    }, [fajok, backgroundSelection.faj, backgroundSelection.kaszt, setMatrix]);\n\n    const dob = () => {\n        setMatrix(calculateKepessegek(fajok, backgroundSelection, true));\n    };\n\n\n\n    const { kaszt } = backgroundSelection;\n    const karakter = kaszt ? {\n        kepessegek: matrix.sum as unknown as KarakterKepesseg,\n        alapHarcertek: kaszt.alapHarcertek,\n        hmHarcertek: kaszt.hm.kotelezo,\n        ep: { max: kaszt.epfp.ep + folottiResz(matrix.sum.egs), akt: kaszt.epfp.ep + folottiResz(matrix.sum.egs) },\n        fp: { max: kaszt.epfp.fp + folottiResz(matrix.sum.ae) + folottiResz(matrix.sum.ak), akt: kaszt.epfp.fp + folottiResz(matrix.sum.ae) + folottiResz(matrix.sum.ak) }\n    } : undefined;\n\n    return <Grid relaxed>\n        <GridRow columns={2} divided>\n            <GridColumn>\n                <GridRow>\n                    <KarakterAlkotasBackground backgroundSelection={backgroundSelection} setBackgroundSelection={setBackgroundSelection} fajNevek={Object.keys(fajok)} />\n                </GridRow>\n                {karakter && <>\n                    <div>\n                        <Button as='div' basic floated='left'>\n                            <Label basic>Eloszthat HM:</Label>\n                            <NumberInput size='mini' allowEmptyValue value={backgroundSelection.kaszt?.hm.szabad} stepAmount={1} minValue={0} maxValue={1000} onChange={(e: string) => {\n                                if (backgroundSelection.kaszt) {\n                                    backgroundSelection.kaszt.hm.szabad = Number(e);\n                                    setBackgroundSelection({ ...backgroundSelection });\n                                }\n                            }} />\n                        </Button>\n                        <Button as='div' basic floated='right'>\n                            <Label basic>Szintenknti FP:</Label>\n                            <Input disabled={!kaszt} value={kaszt?.epfp.fpPerSzint} onChange={e => {\n                                if (kaszt) {\n                                    kaszt.epfp.fpPerSzint = e.target.value;\n                                    setBackgroundSelection({ ...backgroundSelection, kaszt })\n                                }\n                            }} />\n\n                        </Button>\n                    </div>\n                    <div><DobasMatrixDisplay\n                        title='Harcrtkek'\n                        editable={kaszt ? ['alap', 'hm'] : []}\n                        numberOnly\n                        setValue={(name, key, value) => {\n                            const intValue = Number(value);\n                            if (kaszt && !isNaN(intValue)) {\n                                if (name === 'alap') {\n                                    (kaszt.alapHarcertek as any)[key] = value;\n                                } else if (name === 'hm') {\n                                    (kaszt.hm.kotelezo as any)[key] = value;\n                                }\n                                setBackgroundSelection({ ...backgroundSelection, kaszt })\n                            }\n                        }}\n                        matrix={calculateHarcertek(karakter as Karakter).roll(['te', 've', 'ce', 'ke'])}\n                        direction='vertical'\n                        keyMap={HARCERTEK_DISPLAY_NAMES} />\n                    </div>\n                    <div>\n                        <PointsTable\n                            title='leter 0. szinten'\n                            points={[{ name: 'ep', label: 'P', ...karakter.ep }, { name: 'fp', label: 'FP', ...karakter.fp }]}\n\n                            onChange={(name, max, value) => {\n                                if (kaszt && max) {\n                                    if (name === 'ep') {\n                                        kaszt.epfp.ep = value - folottiResz(matrix.sum.egs);\n                                    }\n                                    if (name === 'fp') {\n                                        kaszt.epfp.fp = value - folottiResz(matrix.sum.ae) - folottiResz(matrix.sum.ak);\n                                    }\n                                    setBackgroundSelection({ ...backgroundSelection, kaszt })\n                                }\n                            }}\n                        />\n                    </div>\n                </>\n                }\n            </GridColumn>\n            <GridColumn>\n                <DobasMatrixDisplay\n                    title='Kpessgek'\n                    matrix={matrix}\n                    keyMap={KEPESSEG_NEV}\n                    direction='vertical'\n                    editable={kaszt?.name ? ['Kaszt: ' + kaszt.name] : []}\n                    setValue={(name, key, value) => kaszt && setBackgroundSelection({ ...backgroundSelection, kaszt: { ...kaszt, kepesseg: { ...kaszt.kepesseg, [key]: value } } })} />\n            </GridColumn>\n        </GridRow>\n        <GridRow columns={1} textAlign='center'>\n            <GridColumn>\n                <Button disabled={!kaszt} secondary onClick={dob}>Dob</Button>\n                <Button disabled={!backgroundSelection.name || backgroundSelection.szint === undefined || !matrix.sum} primary onClick={() => { const kar = createKarakter(backgroundSelection, matrix); if (kar) { save(kar) } }}>Ment</Button>\n            </GridColumn>\n        </GridRow>\n    </Grid>\n}","import React from 'react';\nimport { SemanticCOLORS, Table } from 'semantic-ui-react';\nimport { Fegyver } from '../engine/karakter';\n\ninterface FegyverListaProps {\n    fegyverek: Array<Fegyver>,\n    selected?: number,\n    onSelectionChange?: (newSelection: number | undefined) => unknown,\n    title?: string;\n    extraButton?: JSX.Element;\n    color?: SemanticCOLORS;\n\n}\n\nexport const FegyverLista: React.FC<FegyverListaProps> = ({ fegyverek, selected, onSelectionChange, title, extraButton, color }) => {\n    const fegyverLista: Array<Record<string, string | number>> = fegyverek.map(fegyver => {\n        const rec: Record<string, string | number> = {};\n        rec.name = fegyver.name;\n        rec.ke = fegyver.harcertek.ke;\n        rec.te = fegyver.harcertek.te || '-';\n        rec.ve = fegyver.harcertek.ve;\n        rec.ce = fegyver.harcertek.ce || '-';\n        rec.sebzes = fegyver.sebzes;\n        rec.tamPerKor = fegyver.lassu ? '1/' + fegyver.tamPerKor : fegyver.tamPerKor;\n        rec.lotav = fegyver.lotav ?? '-';\n        return rec;\n    });\n\n    return <Table compact celled striped definition selectable={onSelectionChange !== undefined} color={color}>\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell>{title ?? 'Fegyver'}</Table.HeaderCell>\n                <Table.HeaderCell>K</Table.HeaderCell>\n                <Table.HeaderCell>T</Table.HeaderCell>\n                <Table.HeaderCell>V</Table.HeaderCell>\n                <Table.HeaderCell>C</Table.HeaderCell>\n                <Table.HeaderCell>Sebzs</Table.HeaderCell>\n                <Table.HeaderCell>Tm / kr</Table.HeaderCell>\n                <Table.HeaderCell>Ltv</Table.HeaderCell>\n            </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {fegyverLista.map((r, i) => <Table.Row key={i} active={selected === i} onClick={() => onSelectionChange?.(selected === i ? undefined : i)}>\n                <Table.Cell>{r.name}</Table.Cell>\n                <Table.Cell>{r.ke}</Table.Cell>\n                <Table.Cell>{r.te}</Table.Cell>\n                <Table.Cell>{r.ve}</Table.Cell>\n                <Table.Cell>{r.ce}</Table.Cell>\n                <Table.Cell>{r.sebzes}</Table.Cell>\n                <Table.Cell>{r.tamPerKor}</Table.Cell>\n                <Table.Cell>{r.lotav}</Table.Cell>\n            </Table.Row>\n            )}\n            {extraButton && <Table.Row key='__extra'>\n                <Table.Cell colspan={8}>{extraButton}</Table.Cell>\n            </Table.Row>}\n        </Table.Body>\n    </Table>\n}","import React from 'react'\r\nimport { Input, Label } from 'semantic-ui-react';\r\n\r\ninterface IntegerInputProps {\r\n    value?: number,\r\n    onChange: (value?: number) => unknown,\r\n    label?: string;\r\n    labelPosition?: 'left' | 'right';\r\n    mandatory?: boolean;\r\n    disabled?: boolean;\r\n}\r\n\r\n\r\nexport const IntegerInput: React.FC<IntegerInputProps> = ({ value, onChange, label, labelPosition = 'left', mandatory, disabled }) => {\r\n    return <Input disabled={disabled} labelPosition={labelPosition} error={mandatory && (value === undefined)} value={value ?? ''} onChange={e => {\r\n        const newValue = e.target.value ? Math.max(0, Math.floor(Number(e.target.value))) : undefined;\r\n        if (newValue === undefined || !Number.isNaN(newValue)) {\r\n            onChange(newValue);\r\n        }\r\n    }}>\r\n        {label && labelPosition === 'left' && <Label pointing='right' basic>{label}</Label>}\r\n        <input style={{ width: '5rem' }} />\r\n        {label && labelPosition === 'right' && <Label pointing='left' basic>{label}</Label>}\r\n    </Input>;\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { Button, Checkbox, Grid, GridColumn, GridRow, Input, Label } from 'semantic-ui-react';\r\nimport { Fegyver } from '../engine/karakter';\r\nimport { IntegerInput } from './IntegerInput';\r\n\r\ninterface FormValues {\r\n    name: string;\r\n    ke?: number;\r\n    te?: number;\r\n    ve?: number;\r\n    ce?: number;\r\n    lofegyver: boolean;\r\n    lotav?: number;\r\n    sebzes: string;\r\n    tamPerKor?: number;\r\n    erobonusz?: number;\r\n    lassu: boolean;\r\n    pajzs: boolean;\r\n    mgt?: number;\r\n}\r\n\r\nexport type FEGYVER_KEPZETTSEG = 'kpzetlen' | 'Af' | 'Mf';\r\n\r\nconst convertToFormValues = (fegyver?: Fegyver): FormValues => {\r\n    return {\r\n        name: fegyver?.name ?? '',\r\n        ke: fegyver?.harcertek.ke,\r\n        te: fegyver?.harcertek.te,\r\n        ve: fegyver?.harcertek.ve,\r\n        ce: fegyver?.harcertek.ce,\r\n        lofegyver: (fegyver?.harcertek.ce ?? 0) > 0,\r\n        lotav: fegyver?.lotav,\r\n        sebzes: fegyver?.sebzes ?? '',\r\n        tamPerKor: fegyver?.tamPerKor,\r\n        erobonusz: fegyver?.erobonusz,\r\n        lassu: fegyver?.lassu ?? false,\r\n        pajzs: fegyver?.pajzs ?? false,\r\n        mgt: fegyver?.mgt ?? 0\r\n    }\r\n}\r\n\r\nconst convertFromFormValues = (fegyver: FormValues): Fegyver => {\r\n    return {\r\n        name: fegyver.name,\r\n        harcertek: {\r\n            ke: fegyver.ke ?? 0,\r\n            te: fegyver.te ?? 0,\r\n            ve: fegyver.ve ?? 0,\r\n            ce: fegyver.ce ?? 0\r\n        },\r\n        lotav: fegyver.lotav,\r\n        sebzes: fegyver.sebzes,\r\n        tamPerKor: fegyver.tamPerKor ?? 1,\r\n        erobonusz: fegyver.erobonusz,\r\n        lassu: fegyver.lassu,\r\n        pajzs: fegyver.pajzs,\r\n        mgt: fegyver.mgt\r\n    }\r\n}\r\n\r\nexport const FegyverEditor: React.FC<{ kepzettseg?: boolean, fegyver?: Fegyver, submit: (fegyver: Fegyver, kepzettseg?: FEGYVER_KEPZETTSEG) => unknown, cancel: () => unknown }> = ({ fegyver, submit, cancel, kepzettseg }) => {\r\n\r\n    const [form, setForm] = useState<FormValues>(convertToFormValues(fegyver));\r\n\r\n    useEffect(() => {\r\n        setForm(convertToFormValues(fegyver));\r\n    }, [fegyver]);\r\n\r\n    return <Grid columns={1} relaxed>\r\n        <GridRow>\r\n            <GridColumn>\r\n                <div>\r\n                    <Input fluid labelPosition='left' placeholder='Fegyver neve...' error={!form.name} value={form.name} onChange={e => setForm({ ...form, name: e.target.value })}>\r\n                        <Label pointing='right' basic>Nv</Label>\r\n                        <input />\r\n                    </Input>\r\n                </div>\r\n                <div><IntegerInput value={form.ke} onChange={ke => setForm({ ...form, ke })} label='K' /></div>\r\n                <div>\r\n                    <Label pointing='right' basic>Lfegyver:</Label>\r\n                    <Checkbox fitted={true} toggle checked={form.lofegyver} onChange={() => setForm({ ...form, lofegyver: !form.lofegyver })}>\r\n                    </Checkbox>\r\n                </div>\r\n                {!form.lofegyver &&\r\n                    <div><IntegerInput value={form.te} onChange={te => setForm({ ...form, te })} label='T' /></div>\r\n                }\r\n                {form.lofegyver &&\r\n                    <div><IntegerInput value={form.ce} onChange={ce => setForm({ ...form, ce })} label='C' /></div>\r\n                }\r\n                <div><IntegerInput value={form.ve} onChange={ve => setForm({ ...form, ve })} label='V' /></div>\r\n                <div>\r\n                    <Input fluid labelPosition='left' placeholder='Fegyver sebzse...' error={!form.sebzes} value={form.sebzes} onChange={e => setForm({ ...form, sebzes: e.target.value })}>\r\n                        <Label pointing='right' basic>Sebzs</Label>\r\n                        <input />\r\n                    </Input>\r\n                </div>\r\n                {form.lofegyver &&\r\n                    <div><IntegerInput value={form.lotav} onChange={lotav => setForm({ ...form, lotav })} label='Ltv' /></div>\r\n                }\r\n                <div>\r\n                    <Label pointing='right' basic>Lass:</Label>\r\n                    <Checkbox fitted={true} toggle checked={form.lassu} onChange={() => setForm({ ...form, lassu: !form.lassu })}>\r\n                    </Checkbox>\r\n                </div>\r\n                <div><IntegerInput value={form.tamPerKor} onChange={tamPerKor => setForm({ ...form, tamPerKor })} label={`Tmads krnknt: ${form.lassu ? '1 / ' : ''}`} /></div>\r\n                <div><IntegerInput value={form.erobonusz} onChange={erobonusz => setForm({ ...form, erobonusz })} label={`Minimum er bnuszhoz:`} /></div>\r\n                <div>\r\n                    <Label pointing='right' basic>Pajzs:</Label>\r\n                    <Checkbox fitted={true} toggle checked={form.pajzs} onChange={() => setForm({ ...form, pajzs: !form.pajzs })}>\r\n                    </Checkbox>\r\n                </div>\r\n                <div><IntegerInput disabled={!form.pajzs} value={form.mgt} onChange={mgt => setForm({ ...form, mgt })} label='MGT' /></div>\r\n            </GridColumn>\r\n        </GridRow>\r\n        <GridRow textAlign='center'>\r\n            <GridColumn>\r\n                {!kepzettseg && <Button onClick={() => submit(convertFromFormValues(form))}>Ment</Button>}\r\n                {kepzettseg &&\r\n                    <Button as='div' labelPosition='left'>\r\n                        <Label pointing='right'>\r\n                            Hasznlat szintje\r\n                    </Label>\r\n                        <Button onClick={() => submit(convertFromFormValues(form), 'kpzetlen')}>Kpzetlen</Button>\r\n                        <Button secondary onClick={() => submit(convertFromFormValues(form), 'Af')}>Af</Button>\r\n                        <Button primary onClick={() => submit(convertFromFormValues(form), 'Mf')}>Mf</Button>\r\n                    </Button>\r\n                }\r\n                <Button secondary basic onClick={cancel}>Mgse</Button>\r\n            </GridColumn>\r\n        </GridRow>\r\n    </Grid>;\r\n}","import React, { useCallback, useState } from 'react';\nimport { Button, Grid, GridColumn, GridRow, Header, Label, Modal } from 'semantic-ui-react';\nimport { Fegyver, Karakter, Kepzettseg } from '../engine/karakter';\nimport { FegyverEditor, FEGYVER_KEPZETTSEG } from './FegyverEditor';\nimport { FegyverLista } from './FegyverLista';\n\ninterface FegyverValasztoProps {\n    fegyverek: Array<Fegyver>,\n    karakter: Karakter,\n    save: (karakter: Karakter) => unknown,\n    saveFegyverek: (fegyverek: Array<Fegyver>) => unknown\n}\n\nexport const FegyverValaszto: React.FC<FegyverValasztoProps> = ({ karakter, save, fegyverek, saveFegyverek }) => {\n\n    const [selected, setSelected] = useState<number>();\n    const [selectedForDeletion, setSelectedForDeletion] = useState<number>();\n    const [editorOpen, setEditorOpen] = useState<boolean>(false);\n    const [listEditorOpen, setListEditorOpen] = useState<boolean>(false);\n\n    const saveSelection = useCallback((kepzettsegSzint: FEGYVER_KEPZETTSEG) => {\n        const fegyver = selected !== undefined ? fegyverek[selected] : undefined;\n        if (fegyver) {\n            addFegyverAndKepzettseg(karakter, fegyver, kepzettsegSzint);\n            save(karakter);\n        }\n    }, [karakter, save, selected, fegyverek]);\n\n    const saveDeletion = useCallback(() => {\n        if (selectedForDeletion !== undefined) {\n            karakter.fegyverek = karakter.fegyverek.filter((f, i) => i !== selectedForDeletion);\n            karakter.valasztottFegyver = 0;\n            save(karakter);\n        }\n    }, [karakter, save, selectedForDeletion]);\n\n\n    return <Grid columns={3} relaxed>\n        <GridRow columns='equal'>\n            <GridColumn>\n                <Header size='large'>Vlaszthat\n                    <Modal trigger={<Button floated='right' primary>{selected !== undefined ? 'Mdost' : 'j'}</Button>}\n                        onOpen={() => setListEditorOpen(true)}\n                        onClose={() => setListEditorOpen(false)}\n                        open={listEditorOpen}>\n                        <Modal.Content>\n                            <FegyverEditor\n                                fegyver={selected !== undefined ? fegyverek[selected] : undefined}\n                                submit={f => {\n                                    if (selected === undefined) {\n                                        fegyverek.push(f);\n                                    } else {\n                                        fegyverek[selected] = f;\n                                    }\n                                    saveFegyverek(fegyverek);\n                                    setListEditorOpen(false);\n                                }}\n                                cancel={() => setListEditorOpen(false)} />\n                        </Modal.Content>\n                    </Modal>\n                    <Button floated='right' negative disabled={selected === undefined} onClick={() => {\n                        saveFegyverek(fegyverek.filter((f, i) => i !== selected));\n                    }}>Trl</Button>\n                    <Button floated='right' as='div' labelPosition='left'>\n                        <Label pointing='right'>\n                            Kpzettsg\n                        </Label>\n                        <Button disabled={selected === undefined} onClick={() => saveSelection('kpzetlen')}>Kpzetlen</Button>\n                        <Button secondary disabled={selected === undefined} onClick={() => saveSelection('Af')}>Af</Button>\n                        <Button primary disabled={selected === undefined} onClick={() => saveSelection('Mf')}>Mf</Button>\n                    </Button>\n                </Header>\n                <FegyverLista fegyverek={fegyverek.sort((a, b) => a.name.localeCompare(b.name))} selected={selected} onSelectionChange={setSelected}></FegyverLista>\n            </GridColumn>\n            <GridColumn>\n                <Header size='large'>Viselt\n                    <Modal trigger={<Button floated='right' primary>{selectedForDeletion !== undefined ? 'Mdost' : 'j'}</Button>} onOpen={() => setEditorOpen(true)} onClose={() => setEditorOpen(false)} open={editorOpen}>\n                        <Modal.Content>\n                            <FegyverEditor\n                                kepzettseg\n                                fegyver={selectedForDeletion !== undefined ? karakter.fegyverek[selectedForDeletion] : undefined}\n                                submit={(f, k) => { addFegyverAndKepzettseg(karakter, f, k ?? 'kpzetlen', selectedForDeletion); save(karakter); setEditorOpen(false) }}\n                                cancel={() => setEditorOpen(false)} />\n                        </Modal.Content>\n                    </Modal>\n                    <Button floated='right' negative disabled={selectedForDeletion === undefined} onClick={saveDeletion}>Trl</Button>\n                </Header>\n                <FegyverLista fegyverek={karakter.fegyverek} selected={selectedForDeletion} onSelectionChange={setSelectedForDeletion}></FegyverLista>\n            </GridColumn>\n        </GridRow>\n        <GridRow columns={1} textAlign='center'>\n            <GridColumn>\n                <div>\n                </div>\n            </GridColumn>\n        </GridRow>\n    </Grid>\n}\n\nfunction addFegyverAndKepzettseg(karakter: Karakter, fegyver: Fegyver, kepzettsegSzint: FEGYVER_KEPZETTSEG, idx?: number) {\n    const fIdx = idx ?? karakter.fegyverek.findIndex(f => f.name === fegyver.name);\n    if (fIdx === -1) {\n        karakter.fegyverek.push({ ...fegyver });\n    } else {\n        karakter.fegyverek[fIdx] = fegyver;\n    }\n    karakter.valasztottFegyver = karakter.fegyverek.findIndex(f => f.name === fegyver.name);\n    const kepzettsegName = `Fegyverhasznlat - ${fegyver.name.toLowerCase()}`;\n    karakter.kepzettsegek = (karakter.kepzettsegek ?? []).filter(k => k.name !== kepzettsegName);\n    if (kepzettsegSzint !== 'kpzetlen') {\n        const kepzettseg: Kepzettseg = {\n            name: kepzettsegName,\n            szint: kepzettsegSzint as any,\n            kp: 0\n        };\n        karakter.kepzettsegek.push(kepzettseg);\n    }\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { Button, Table } from 'semantic-ui-react';\nimport { Harcertek, HARCERTEK_DISPLAY_NAMES } from '../engine/harc';\nimport { NumberInput } from './NumberInput';\n\ninterface State {\n    harcertek: Harcertek,\n    hm: number\n};\n\nexport const HMEloszto: React.FC<{ harcertek: Harcertek, hm: number, complete: (harcertek: Harcertek, hm: number) => unknown }> = ({ harcertek, hm, complete }) => {\n    const [current, setCurrent] = useState<State>({ harcertek: { ...harcertek }, hm: hm } as State);\n\n    useEffect(() => {\n        setCurrent({ harcertek: { ...harcertek }, hm });\n    }, [harcertek, hm, setCurrent]);\n\n\n    const change = useCallback((he: ('ke' | 'te' | 've' | 'ce'), newValue: number) => {\n        const newCurrent: State = { ...current };\n        newCurrent.harcertek[he] = newValue;\n        newCurrent.hm = hm - (Object.keys(newCurrent.harcertek) as Array<any>).reduce((acc, curr: ('ke' | 'te' | 've' | 'ce')) => acc + (newCurrent.harcertek[curr] - harcertek[curr]), 0);\n        setCurrent(newCurrent);\n    }, [current, setCurrent, harcertek, hm]);\n\n    return <Table definition striped compact color='orange'>\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell>HM:</Table.HeaderCell>\n                <Table.Cell colSpan={2} style={!current.hm ? { padding: '0' } : {}} textAlign={current.hm ? 'left' : 'center'}>\n                    {current.hm ? current.hm : <Button compact color='green' circular icon='check' content='Eloszt' onClick={() => complete(current.harcertek, current.hm)} />}\n                </Table.Cell>\n            </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {(Object.keys(harcertek) as Array<any>).map((he: ('ke' | 'te' | 've' | 'ce')) => <Table.Row>\n                <Table.Cell>{HARCERTEK_DISPLAY_NAMES[he]}:</Table.Cell>\n                <Table.Cell collapsing><i>{harcertek[he]}</i></Table.Cell>\n                <Table.Cell collapsing><NumberInput icons value={current.harcertek[he]} min={harcertek[he]} max={(current.harcertek[he] ?? 0) + current.hm} onChange={e => change(he, e ?? 0)} /></Table.Cell>\n            </Table.Row>)}\n        </Table.Body>\n    </Table>\n}","import React, { useState } from 'react';\r\nimport { Modal, Button, Grid, GridColumn, Input, Label } from 'semantic-ui-react';\r\nimport { Karakter, Kepzettseg } from '../engine/karakter';\r\nimport { IntegerInput } from './IntegerInput';\r\n\r\nexport const KepzettsegModal: React.FC<{ karakter: Karakter; editedKepzettseg?: Kepzettseg; save: () => unknown; trigger: JSX.Element }> = ({ karakter, save, editedKepzettseg, trigger }) => {\r\n    const [open, setOpen] = useState<boolean>(false);\r\n    const [kepzettseg, setKepzettseg] = useState<string | undefined>(editedKepzettseg?.name);\r\n    const [szint, setSzint] = useState<number | '1' | '2' | '3' | '4' | '5' | 'Af' | 'Mf' | undefined>(editedKepzettseg?.szint);\r\n    const [kp, setKp] = useState<number | undefined>(editedKepzettseg?.kp);\r\n\r\n    const saveKepzettseg = () => {\r\n        karakter.kepzettsegek = karakter.kepzettsegek ?? [];\r\n        if (kepzettseg && szint !== undefined) {\r\n            const curr = karakter.kepzettsegek.findIndex(k => k.name === kepzettseg);\r\n            const newKepzettseg: Kepzettseg = {\r\n                name: kepzettseg,\r\n                szint,\r\n                kp: kp ?? 0\r\n            }\r\n            if (curr !== -1) {\r\n                karakter.kepzettsegek[curr] = newKepzettseg;\r\n            } else {\r\n                karakter.kepzettsegek.push(newKepzettseg);\r\n            }\r\n            save();\r\n            if (!editedKepzettseg) {\r\n                setSzint(undefined);\r\n                setKp(undefined);\r\n                setKepzettseg(undefined);\r\n            }\r\n            setOpen(false);\r\n        }\r\n    }\r\n\r\n    return <Modal trigger={trigger} open={open} onOpen={() => setOpen(true)} onClose={() => setOpen(false)}>\r\n        <Modal.Content>\r\n            <div style={{ marginBottom: '0.5rem' }}>\r\n                <Input fluid labelPosition='left' placeholder='Kpzettsg...' error={!kepzettseg} disabled={!!editedKepzettseg} value={kepzettseg} onChange={e => setKepzettseg(e.target.value)}>\r\n                    <Label pointing='right' basic>Kpzettsg</Label>\r\n                    <input />\r\n                    <Button circular color='olive' style={{ marginLeft: '1rem' }} onClick={() => setKepzettseg('Nehzvrtviselet')}>Nehzvrtviselet</Button>\r\n                    <Button circular color='olive' style={{ marginLeft: '1rem' }} onClick={() => setKepzettseg('Ktkezes harc')}>Ktkezes harc</Button>\r\n                    <Button circular color='olive' style={{ marginLeft: '1rem' }} onClick={() => setKepzettseg('Pajzshasznlat')}>Pajzshasznlat</Button>\r\n                </Input>\r\n            </div>\r\n            <div style={{ marginBottom: '0.5rem' }}>\r\n                <Grid columns={4}>\r\n                    <GridColumn width={3} >\r\n                        <Button as='div' labelPosition='left'>\r\n                            <Label pointing='right'>\r\n                                Szint\r\n                    </Label>\r\n                            <Button color={szint === 'Af' ? 'black' : 'olive'} onClick={() => setSzint('Af')}>Af</Button>\r\n                            <Button color={szint === 'Mf' ? 'black' : 'olive'} onClick={() => setSzint('Mf')}>Mf</Button>\r\n                        </Button>\r\n                    </GridColumn>\r\n                    <GridColumn width={6} textAlign='center'>\r\n                        {['1', '2', '3', '4', '5'].map(i => <Button color={szint === i ? 'black' : 'olive'} circular onClick={() => setSzint(i as any)}>{i}</Button>)}\r\n                    </GridColumn>\r\n                    <GridColumn width={3} textAlign='left'>\r\n                        <IntegerInput labelPosition='right' label='Szzalk' value={typeof szint === 'number' ? szint : undefined} onChange={v => setSzint(v)} />\r\n                    </GridColumn>\r\n                    <GridColumn width={4} textAlign='right'>\r\n                        <IntegerInput labelPosition='right' label='Elklttt KP' value={kp} onChange={v => setKp(v)} />\r\n                    </GridColumn>\r\n                </Grid>\r\n            </div>\r\n            <div style={{ marginBottom: '0.5rem' }}>\r\n                <Button compact fluid circular icon='save' disabled={!kepzettseg || szint === undefined} onClick={saveKepzettseg} content='Ment' />\r\n            </div>\r\n        </Modal.Content>\r\n    </Modal>\r\n}","import React from 'react';\nimport { Button, Icon, Table } from 'semantic-ui-react';\nimport { Karakter, Kepzettseg } from '../engine/karakter';\nimport { KepzettsegModal } from './KepzettsegModal';\n\n\nconst compare = (a: Kepzettseg, b: Kepzettseg): number => {\n    if (typeof a.szint === 'number' && typeof b.szint !== 'number') {\n        return 1;\n    }\n    if (typeof b.szint === 'number' && typeof a.szint !== 'number') {\n        return -1;\n    }\n    return a.name.localeCompare(b.name);\n}\n\nexport const KepzettsegLista: React.FC<{ karakter: Karakter, save: () => unknown }> = ({ karakter, save }) => {\n    return <Table striped celled compact color='pink'>\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell collapsing></Table.HeaderCell>\n                <Table.HeaderCell>Kpzettsg</Table.HeaderCell>\n                <Table.HeaderCell collapsing>Szint</Table.HeaderCell>\n                <Table.HeaderCell collapsing>KP</Table.HeaderCell>\n                <Table.HeaderCell collapsing></Table.HeaderCell>\n            </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {karakter.kepzettsegek?.sort(compare).map((r, i) => <Table.Row>\n                <Table.Cell collapsing><KepzettsegModal karakter={karakter} editedKepzettseg={r} save={save} trigger={<Icon name='edit' />} /></Table.Cell>\n                <Table.Cell>{r.name}</Table.Cell>\n                <Table.Cell collapsing>{r.szint}</Table.Cell>\n                <Table.Cell collapsing>{r.kp ? r.kp : '-'}</Table.Cell>\n                <Table.Cell collapsing><Icon name='delete' onClick={() => { karakter.kepzettsegek?.splice(i, 1); save() }} /></Table.Cell>\n            </Table.Row>\n            )}\n            <Table.Row key='__new'>\n                <Table.Cell colspan={5}><KepzettsegModal karakter={karakter} save={save} trigger={<Button fluid circular icon='plus' content='j kpzettsg' />} /></Table.Cell>\n            </Table.Row>\n        </Table.Body>\n    </Table>\n\n}","import React from 'react';\nimport { Icon, SemanticCOLORS, Table } from 'semantic-ui-react';\nimport { Pancel } from '../engine/pancel';\n\ninterface PancelListaProps {\n    pancelok?: Array<Pancel>,\n    selected?: number,\n    onSelectionChange?: (newSelection: number | undefined) => unknown\n    extraButton?: JSX.Element;\n    color?: SemanticCOLORS\n}\n\nexport const PancelLista: React.FC<PancelListaProps> = ({ pancelok, selected, onSelectionChange, extraButton, color }) => {\n\n    return <Table compact celled striped definition selectable={onSelectionChange !== undefined} color={color}>\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell>Pncl</Table.HeaderCell>\n                <Table.HeaderCell>SF</Table.HeaderCell>\n                <Table.HeaderCell>MGT</Table.HeaderCell>\n                <Table.HeaderCell>Nehz</Table.HeaderCell>\n            </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {pancelok?.map((r, i) => <Table.Row key={i} active={selected === i} onClick={() => onSelectionChange?.(selected === i ? undefined : i)}>\n                <Table.Cell>{r.name}</Table.Cell>\n                <Table.Cell>{r.sfe}</Table.Cell>\n                <Table.Cell>{r.mgt}</Table.Cell>\n                <Table.Cell>{r.nehez && <Icon compact color='green' name='check' />}</Table.Cell>\n            </Table.Row>\n            )}\n            {extraButton && <Table.Row key='__extra'>\n                <Table.Cell colspan={4}>{extraButton}</Table.Cell>\n            </Table.Row>}\n        </Table.Body>\n    </Table>\n}","import React, { useEffect, useState } from 'react';\r\nimport { Button, Checkbox, Grid, GridColumn, GridRow, Input, Label } from 'semantic-ui-react';\r\nimport { Pancel } from '../engine/pancel';\r\nimport { IntegerInput } from './IntegerInput';\r\n\r\n\r\n\r\nexport const PancelEditor: React.FC<{ pancel?: Pancel, submit: (pancel: Pancel) => unknown, cancel: () => unknown }> = ({ pancel, submit, cancel }) => {\r\n\r\n    const [form, setForm] = useState<Pancel>(pancel ?? { name: '', mgt: 0, sfe: 0, nehez: false });\r\n\r\n    useEffect(() => {\r\n        setForm(pancel ?? { name: '', mgt: 0, sfe: 0, nehez: false });\r\n    }, [pancel]);\r\n\r\n    return <Grid columns={1} relaxed>\r\n        <GridRow>\r\n            <GridColumn>\r\n                <div>\r\n                    <Input fluid labelPosition='left' placeholder='Fegyver neve...' error={!form.name} value={form.name} onChange={e => setForm({ ...form, name: e.target.value })}>\r\n                        <Label pointing='right' basic>Nv</Label>\r\n                        <input />\r\n                    </Input>\r\n                </div>\r\n                <div><IntegerInput value={form.sfe} onChange={sfe => setForm({ ...form, sfe: sfe ?? 0 })} label='SF' /></div>\r\n                <div><IntegerInput value={form.mgt} onChange={mgt => setForm({ ...form, mgt: mgt ?? 0 })} label='MGT' /></div>\r\n                <div>\r\n                    <Label pointing='right' basic>Nehz:</Label>\r\n                    <Checkbox fitted={true} toggle checked={form.nehez} onChange={() => setForm({ ...form, nehez: !form.nehez })}>\r\n                    </Checkbox>\r\n                </div>\r\n            </GridColumn>\r\n        </GridRow>\r\n        <GridRow textAlign='center'>\r\n            <GridColumn>\r\n                {!!form.name && <Button onClick={() => submit(form)}>Ment</Button>}\r\n                <Button secondary basic onClick={cancel}>Mgse</Button>\r\n            </GridColumn>\r\n        </GridRow>\r\n    </Grid>;\r\n}","import React, { useCallback, useState } from 'react';\r\nimport { Button, Grid, GridColumn, GridRow, Header, Modal } from 'semantic-ui-react';\r\nimport { Karakter } from '../engine/karakter';\r\nimport { Pancel } from '../engine/pancel';\r\nimport { PancelEditor } from './PancelEditor';\r\nimport { PancelLista } from './PancelLista';\r\n\r\ninterface PancelValasztoProps {\r\n    pancelok: Array<Pancel>,\r\n    karakter: Karakter,\r\n    save: (karakter: Karakter) => unknown,\r\n    savePancelok: (pancelok: Array<Pancel>) => unknown\r\n}\r\n\r\nexport const PancelValaszto: React.FC<PancelValasztoProps> = ({ karakter, save, pancelok, savePancelok }) => {\r\n\r\n    const [selected, setSelected] = useState<number>();\r\n    const [selectedForDeletion, setSelectedForDeletion] = useState<number>();\r\n    const [editorOpen, setEditorOpen] = useState<boolean>(false);\r\n    const [listEditorOpen, setListEditorOpen] = useState<boolean>(false);\r\n\r\n    const saveDeletion = useCallback(() => {\r\n        if (selectedForDeletion !== undefined) {\r\n            karakter.pancelok = karakter.pancelok?.filter((f, i) => i !== selectedForDeletion);\r\n            karakter.valasztottPancel = undefined;\r\n            save(karakter);\r\n        }\r\n    }, [karakter, save, selectedForDeletion]);\r\n\r\n    return <Grid columns={3} relaxed>\r\n        <GridRow columns='equal'>\r\n            <GridColumn>\r\n                <Header size='large'>Vlaszthat\r\n                    <Button floated='right' secondary disabled={selected === undefined || (karakter.pancelok ?? []).some(p => p.name === pancelok[selected].name)} onClick={() => {\r\n                        karakter.pancelok = karakter.pancelok ?? [];\r\n                        if (selected && karakter.pancelok.every(p => p.name !== pancelok[selected].name)) {\r\n                            karakter.pancelok.push(pancelok[selected]);\r\n                            save(karakter);\r\n                        }\r\n                    }}>Vlaszt</Button>\r\n                    <Modal trigger={<Button floated='right' primary>{selected !== undefined ? 'Mdost' : 'j'}</Button>}\r\n                        onOpen={() => setListEditorOpen(true)}\r\n                        onClose={() => setListEditorOpen(false)}\r\n                        open={listEditorOpen}>\r\n                        <Modal.Content>\r\n                            <PancelEditor\r\n                                pancel={selected !== undefined ? pancelok[selected] : undefined}\r\n                                submit={f => {\r\n                                    if (selected === undefined) {\r\n                                        pancelok.push(f);\r\n                                    } else {\r\n                                        pancelok[selected] = f;\r\n                                    }\r\n                                    savePancelok(pancelok);\r\n                                    setListEditorOpen(false);\r\n                                }}\r\n                                cancel={() => setListEditorOpen(false)} />\r\n                        </Modal.Content>\r\n                    </Modal>\r\n                    <Button floated='right' negative disabled={selected === undefined} onClick={() => {\r\n                        savePancelok(pancelok.filter((f, i) => i !== selected));\r\n                    }}>Trl</Button>\r\n                </Header>\r\n                <PancelLista pancelok={pancelok.sort((a, b) => a.name.localeCompare(b.name))} selected={selected} onSelectionChange={setSelected} />\r\n            </GridColumn>\r\n            <GridColumn>\r\n                <Header size='large'>Viselt\r\n                    <Modal trigger={<Button floated='right' primary>{selectedForDeletion !== undefined ? 'Mdost' : 'j'}</Button>} onOpen={() => setEditorOpen(true)} onClose={() => setEditorOpen(false)} open={editorOpen}>\r\n                        <Modal.Content>\r\n                            <PancelEditor\r\n                                pancel={selectedForDeletion !== undefined ? karakter.pancelok?.[selectedForDeletion] : undefined}\r\n                                submit={p => {\r\n                                    karakter.pancelok = karakter.pancelok ?? [];\r\n                                    if (selectedForDeletion !== undefined) {\r\n                                        karakter.pancelok[selectedForDeletion] = p;\r\n                                    } else {\r\n                                        karakter.pancelok.push(p);\r\n                                    }\r\n                                    save(karakter);\r\n                                    setEditorOpen(false)\r\n                                }}\r\n                                cancel={() => setEditorOpen(false)} />\r\n                        </Modal.Content>\r\n                    </Modal>\r\n                    <Button floated='right' negative disabled={selectedForDeletion === undefined} onClick={saveDeletion}>Trl</Button>\r\n                </Header>\r\n                <PancelLista pancelok={karakter.pancelok} selected={selectedForDeletion} onSelectionChange={setSelectedForDeletion}></PancelLista>\r\n            </GridColumn>\r\n        </GridRow>\r\n        <GridRow columns={1} textAlign='center'>\r\n            <GridColumn>\r\n                <div>\r\n                </div>\r\n            </GridColumn>\r\n        </GridRow>\r\n    </Grid>\r\n}\r\n","import React from 'react';\nimport { Table } from 'semantic-ui-react';\nimport { Pajzs } from '../engine/karakter';\nimport { NumberInput } from './NumberInput';\n\n\n\n\n\nexport const Pajzsok: React.FC<{ pajzs: { asztral: Pajzs, mental: Pajzs }, onChange: (pajzs: { asztral: Pajzs, mental: Pajzs }) => unknown }> = ({ pajzs, onChange }) => {\n    return <Table striped celled definition fluid compact color='red'>\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell>Pajzsok</Table.HeaderCell>\n                <Table.HeaderCell collapsing>Asztrl</Table.HeaderCell>\n                <Table.HeaderCell collapsing>Mentl</Table.HeaderCell>\n            </Table.Row>\n\n        </Table.Header>\n        <Table.Body>\n            <Table.Row>\n                <Table.HeaderCell>Termszetes</Table.HeaderCell>\n                <Table.Cell collapsing><NumberInput icons value={pajzs.asztral.termeszetes} min={0} max={1000} onChange={(e: number) => { pajzs.asztral.termeszetes = e; onChange(pajzs) }} /></Table.Cell>\n                <Table.Cell collapsing><NumberInput icons value={pajzs.mental.termeszetes} min={0} max={1000} onChange={(e: number) => { pajzs.mental.termeszetes = e; onChange(pajzs) }} /></Table.Cell>\n            </Table.Row>\n            <Table.Row>\n                <Table.HeaderCell>Statikus</Table.HeaderCell>\n                <Table.Cell collapsing><NumberInput icons value={pajzs.asztral.statikus} min={0} max={1000} onChange={(e: number) => { pajzs.asztral.statikus = e; onChange(pajzs) }} /></Table.Cell>\n                <Table.Cell collapsing><NumberInput icons value={pajzs.mental.statikus} min={0} max={1000} onChange={(e: number) => { pajzs.mental.statikus = e; onChange(pajzs) }} /></Table.Cell>\n            </Table.Row>\n            <Table.Row>\n                <Table.HeaderCell>Dinamikus</Table.HeaderCell>\n                <Table.Cell collapsing><NumberInput icons value={pajzs.asztral.dinamikus} min={0} max={1000} onChange={(e: number) => { pajzs.asztral.dinamikus = e; onChange(pajzs) }} /></Table.Cell>\n                <Table.Cell collapsing><NumberInput icons value={pajzs.mental.dinamikus} min={0} max={1000} onChange={(e: number) => { pajzs.mental.dinamikus = e; onChange(pajzs) }} /></Table.Cell>\n            </Table.Row>\n            <Table.Row>\n                <Table.HeaderCell>sszeg</Table.HeaderCell>\n                <Table.Cell collapsing><b>{pajzs.asztral.termeszetes + pajzs.asztral.statikus + pajzs.asztral.dinamikus}</b></Table.Cell>\n                <Table.Cell collapsing><b>{pajzs.mental.termeszetes + pajzs.mental.statikus + pajzs.mental.dinamikus}</b></Table.Cell>\n            </Table.Row>\n        </Table.Body>\n    </Table>\n\n}","import React from 'react';\r\nimport { Table } from 'semantic-ui-react';\r\nimport { Karakter } from '../engine/karakter';\r\n\r\nexport const Jegyzetek: React.FC<{ karakter: Karakter, save: () => unknown }> = ({ karakter, save }) => <Table celled fluid compact color='yellow'>\r\n    <Table.Header>\r\n        <Table.Row>\r\n            <Table.HeaderCell>Jegyzetek</Table.HeaderCell>\r\n        </Table.Row>\r\n\r\n    </Table.Header>\r\n    <Table.Body>\r\n        <Table.Row>\r\n            <Table.Cell style={{ padding: '0' }}>\r\n                <textarea style={{ borderRadius: '0.25em', height: '10em', width: '100%' }} value={karakter.jegyzetek ?? ''} onChange={e => { karakter.jegyzetek = e.target.value; save(); }} />\r\n            </Table.Cell>\r\n        </Table.Row>\r\n    </Table.Body>\r\n</Table>;\r\n","import React, { forwardRef, useEffect, useImperativeHandle, useState } from 'react';\r\nimport { Input } from 'semantic-ui-react';\r\n\r\nexport interface EditableTextProps {\r\n    text?: string;\r\n    onChange: (text: string) => unknown;\r\n}\r\n\r\nexport const EditableText = forwardRef<any, EditableTextProps>(({ text, onChange }, ref) => {\r\n    const [editedText, setEditedText] = useState<string>('');\r\n    const [edited, setEdited] = useState<boolean>(false);\r\n    useImperativeHandle(ref, () => ({\r\n        edit: () => setEdited(true)\r\n    }));\r\n    useEffect(() => {\r\n        setEditedText(text ?? '');\r\n    }, [text]);\r\n    if (edited) {\r\n        return <form onSubmit={() => { setEdited(false); onChange(editedText) }}><Input transparent autoFocus value={editedText} onChange={(e, { value }) => { setEditedText(value) }} onBlur={() => { setEdited(false); onChange(editedText) }} /></form>\r\n    } else {\r\n        return <span onClick={() => setEdited(true)}>{text ?? ''}</span>;\r\n    }\r\n});\r\n","import React from 'react';\r\nimport { Button, Icon, Table } from 'semantic-ui-react';\r\nimport { Karakter } from '../engine/karakter';\r\nimport { EditableText } from '../story/components/EditableText';\r\nimport { NumberInput } from './NumberInput';\r\n\r\nexport const Felszereles: React.FC<{ karakter: Karakter, save: () => unknown }> = ({ karakter, save }) => {\r\n\r\n    const rowRefs: Record<string, { current: any }> = {};\r\n\r\n    return <Table celled fluid compact color='blue'>\r\n        <Table.Header>\r\n            <Table.Row>\r\n                <Table.HeaderCell>Felszerels</Table.HeaderCell>\r\n                <Table.HeaderCell>Mennyisg</Table.HeaderCell>\r\n                <Table.HeaderCell />\r\n            </Table.Row>\r\n        </Table.Header>\r\n        <Table.Body>\r\n            {karakter.felszereles?.map((f, i) => <Table.Row key={f.name}>\r\n                <Table.Cell onClick={() => rowRefs[f.name].current.edit()}>\r\n                    <EditableText ref={ref => rowRefs[f.name] = { current: ref }} text={f.name} onChange={v => { f.name = v; save() }} />\r\n                </Table.Cell>\r\n                <Table.Cell collapsing>\r\n                    <NumberInput min={0} max={10000} value={f.qty} onChange={q => { f.qty = q; save() }} icons />\r\n                </Table.Cell>\r\n                <Table.Cell collapsing>\r\n                    <Icon name='delete' onClick={() => { karakter.felszereles?.splice(i, 1); save() }} />\r\n                </Table.Cell>\r\n            </Table.Row>\r\n            )}\r\n            <Table.Row>\r\n                <Table.Cell colSpan={3} >\r\n                    <Button fluid circular icon='plus' content='Hozzad' onClick={() => { karakter.felszereles = [...(karakter.felszereles ?? []), { name: '', qty: 1 }]; save(); }} />\r\n                </Table.Cell>\r\n\r\n            </Table.Row>\r\n\r\n        </Table.Body>\r\n    </Table>;\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Modal, Button, Input, Grid, GridColumn } from 'semantic-ui-react';\r\n\r\nexport const KategoriaEditor: React.FC<{ categories: Array<string>, save: (value: string) => unknown }> = ({ categories, save }) => {\r\n    const [kategoriak, setKategoriak] = useState(false);\r\n    const [ujKategoria, setUjKategoria] = useState('');\r\n\r\n    return <Modal trigger={<Button floated='right' size='tiny' circular compact color='orange'>+</Button>} onOpen={() => setKategoriak(true)} onClose={() => setKategoriak(false)} open={kategoriak} size='mini' title='j kategria'>\r\n        <Modal.Header>j kategria</Modal.Header>\r\n        <Modal.Content>\r\n            <Grid columns={2} fluid relaxed>\r\n                <GridColumn>\r\n                    <Input list='categories' value={ujKategoria} onChange={e => setUjKategoria(e.target.value)} />\r\n                    <datalist id='categories'>\r\n                        {categories.map(c => <option value={c}>{c}</option>)}\r\n                    </datalist>\r\n                </GridColumn>\r\n                <GridColumn>\r\n                    <Button fluid primary onClick={() => { save(ujKategoria); setKategoriak(false); }}>Hozzad</Button>\r\n                </GridColumn>\r\n            </Grid>\r\n        </Modal.Content>\r\n    </Modal>\r\n\r\n}","import fileDownload from 'js-file-download';\r\nimport React, { useState } from 'react';\r\nimport { Button, Confirm, Icon, Label, Table } from 'semantic-ui-react';\r\nimport { Karakter, szintlepes } from '../engine/karakter';\r\nimport { EditableText } from '../story/components/EditableText';\r\nimport { KategoriaEditor } from './KategoriaEditor';\r\n\r\ninterface KarakterTablaProps {\r\n    karakter: Karakter;\r\n    save: (karakter: Karakter) => unknown;\r\n    categories: Array<string>;\r\n    clone: (karakter: Karakter) => Karakter;\r\n    remove: () => unknown\r\n\r\n}\r\n\r\nexport const KarakterTabla: React.FC<KarakterTablaProps> = ({ karakter, save, categories, clone, remove }) => {\r\n\r\n    const [torlesKerdes, setTorlesKerdes] = useState(false);\r\n\r\n    const exportKarakter = () => {\r\n        fileDownload(JSON.stringify(karakter), `${karakter.name}.json`, 'text/json');\r\n    }\r\n\r\n\r\n    return <Table striped definition compact>\r\n        <Table.Row><Table.Cell>Nv:</Table.Cell><Table.Cell><EditableText text={karakter.name} onChange={n => { karakter.name = n; save(karakter); }} /> </Table.Cell></Table.Row>\r\n        <Table.Row><Table.Cell>Faj:</Table.Cell><Table.Cell>{karakter.faj}</Table.Cell></Table.Row>\r\n        <Table.Row><Table.Cell>Kaszt:</Table.Cell><Table.Cell>{karakter.kaszt.name}</Table.Cell></Table.Row>\r\n        <Table.Row><Table.Cell>Szint:</Table.Cell>\r\n            <Table.Cell>\r\n                <Button as='div' labelPosition='left'>\r\n                    <Label pointing='right'>\r\n                        {karakter.szint}\r\n                    </Label>\r\n                    <Button secondary compact onClick={() => { save(szintlepes(karakter)) }}>Szintlps</Button>\r\n                </Button>\r\n            </Table.Cell>\r\n        </Table.Row>\r\n        <Table.Row>\r\n            <Table.Cell>Kategrik\r\n        <       KategoriaEditor categories={categories} save={value => { karakter.categories = [...new Set([...karakter.categories, value])]; save(karakter) }} />\r\n            </Table.Cell>\r\n            <Table.Cell>\r\n                {karakter.categories.map(c => <Label tag>{c} <Icon name='delete' onClick={() => { karakter.categories = karakter.categories.filter(value => value !== c); save(karakter) }} /></Label>)}\r\n            </Table.Cell>\r\n        </Table.Row>\r\n        <Table.Row>\r\n            <Table.Cell colSpan={2}>\r\n                <Button onClick={() => setTorlesKerdes(true)} color='red' compact circular>Karakter trlse</Button>\r\n                <Confirm\r\n                    open={torlesKerdes}\r\n                    onCancel={() => setTorlesKerdes(false)}\r\n                    onConfirm={() => { setTorlesKerdes(false); remove() }}\r\n                    header='Karakter trlse'\r\n                    content='Tuti?'\r\n                    cancelButton='Nem'\r\n                    confirmButton='De' />\r\n                <Button onClick={exportKarakter} color='green' circular compact>Export</Button>\r\n                <Button onClick={() => clone(karakter)} color='green' circular compact>Kln</Button>\r\n            </Table.Cell>\r\n        </Table.Row>\r\n    </Table>;\r\n}","import React from 'react';\nimport { Button, Grid, GridColumn, GridRow, Modal } from 'semantic-ui-react';\nimport { DobasMatrixDisplay } from '../components/DobasMatrixDisplay';\nimport { PointsTable } from '../components/PointsTable';\nimport { FegyverLista } from '../components/FegyverLista';\nimport { FegyverValaszto } from '../components/FegyverValaszto';\nimport { HMEloszto } from '../components/HMEloszto';\nimport { KepzettsegLista } from '../components/KepzettsegLista';\nimport { DobasMatrix } from '../engine/dobasmatrix';\nimport { HARCERTEK_DISPLAY_NAMES } from '../engine/harc';\nimport { calculateHarcertek, calculateMGT, Fegyver, folottiResz, Karakter, KarakterKepesseg } from '../engine/karakter';\nimport { KEPESSEG_NEV } from '../engine/kasztok';\nimport { PancelLista } from '../components/PancelLista';\nimport { PancelValaszto } from '../components/PancelValaszto';\nimport { Pancel } from '../engine/pancel';\nimport { Pajzsok } from '../components/Pajzsok';\nimport { Jegyzetek } from '../components/Jegyzetek';\nimport { Felszereles } from '../components/Felszereles';\nimport { KarakterTabla } from '../components/KarakterTabla';\n\ninterface KarakterlapProps {\n    categories: Array<string>,\n    karakter: Karakter,\n    fegyverek: Array<Fegyver>,\n    pancelok: Array<Pancel>,\n    savePancelok: (pancelok: Array<Pancel>) => unknown,\n    save: (karakter: Karakter) => unknown,\n    clone: (karakter: Karakter) => Karakter;\n\n    saveFegyverek: (fegyverek: Array<Fegyver>) => unknown,\n    remove: () => unknown\n}\n\nexport const Karakterlap: React.FC<KarakterlapProps> = ({ karakter, save, remove, categories, fegyverek, saveFegyverek, pancelok, savePancelok, clone }) => {\n\n    const eletero = [\n        { name: 'ep', label: 'P', ...karakter.ep },\n        { name: 'fp', label: 'FP', ...karakter.fp }];\n    const points = [];\n    if (karakter.pszi) {\n        points.push({ name: 'pszi', label: 'P', ...karakter.pszi })\n    }\n    if (karakter.mp) {\n        points.push({ name: 'mp', label: 'MP', ...karakter.mp })\n    }\n\n    const mgt = calculateMGT(karakter);\n    const kepessegMatrix = new DobasMatrix(Object.keys(KEPESSEG_NEV)).add('alap', karakter.kepessegek as any);\n    if (mgt[0] > 0) {\n        kepessegMatrix.add('mgt', { gy: -mgt[0], ugy: -mgt[0] });\n    }\n    kepessegMatrix.roll();\n\n\n\n    return <Grid relaxed>\n        <GridColumn width={4} >\n            <KarakterTabla karakter={karakter} categories={categories} save={save} clone={clone} remove={remove} />\n            {karakter.hm > 0 && <div><HMEloszto harcertek={karakter.hmHarcertek} hm={karakter.hm} complete={(he, hm) => {\n                karakter.hmHarcertek = he;\n                karakter.hm = hm;\n                save(karakter);\n            }} /> </div>}\n            <PointsTable color='olive'\n                points={eletero}\n                onChange={(name, max, value) => {\n                    (karakter as any)[name][max ? 'max' : 'akt'] = value;\n                    save(karakter);\n                }}\n                title='leter'\n            />\n            {points.length > 0 &&\n                <PointsTable color='olive'\n                    points={points}\n                    onChange={(name, max, value) => {\n                        (karakter as any)[name][max ? 'max' : 'akt'] = value;\n                        save(karakter);\n                    }}\n                    title='Mgia'\n                />}\n            <Pajzsok\n                pajzs={karakter.pajzs ?? {\n                    asztral: { termeszetes: folottiResz(karakter.kepessegek.asz, 10), statikus: 0, dinamikus: 0 },\n                    mental: { termeszetes: folottiResz(karakter.kepessegek.ae, 10), statikus: 0, dinamikus: 0 }\n                }}\n                onChange={pajzs => { karakter.pajzs = pajzs; save(karakter); }}\n            />\n            <DobasMatrixDisplay\n                color='purple'\n                title='Kpessgek'\n                matrix={kepessegMatrix}\n                direction='vertical'\n                editable={['alap']}\n                numberOnly\n                keyMap={KEPESSEG_NEV}\n                setValue={(_, key, value) => { karakter.kepessegek[key as keyof KarakterKepesseg] = Number(value); save(karakter); }} />\n        </GridColumn>\n        <GridColumn width={12} >\n            <Grid columns={2}>\n                <GridRow>\n                    <GridColumn>\n                        <DobasMatrixDisplay color='orange' title='Harcrtkek' matrix={calculateHarcertek(karakter).roll(['te', 've', 'ce', 'ke'])} direction='vertical' keyMap={HARCERTEK_DISPLAY_NAMES} />\n                        <FegyverLista color='green' fegyverek={karakter.fegyverek} selected={karakter.valasztottFegyver} onSelectionChange={f => { karakter.valasztottFegyver = f; save(karakter) }}\n                            extraButton={<Modal trigger={<Button fluid circular icon='edit' content='Fegyverlista szerkesztse' />} size='fullscreen'>\n                                <Modal.Header>Fegyverek</Modal.Header>\n                                <Modal.Content>\n                                    <FegyverValaszto saveFegyverek={saveFegyverek} fegyverek={fegyverek} karakter={karakter} save={k => { save(k); }} />\n                                </Modal.Content>\n                            </Modal>} />\n                        <PancelLista color='teal' pancelok={karakter.pancelok} selected={karakter.valasztottPancel} onSelectionChange={f => { karakter.valasztottPancel = f; save(karakter) }}\n                            extraButton={<Modal trigger={<Button fluid circular icon='edit' content='Pncllista szerkesztse' />} size='fullscreen'>\n                                <Modal.Header>Pnclok</Modal.Header>\n                                <Modal.Content>\n                                    <PancelValaszto savePancelok={savePancelok} pancelok={pancelok} karakter={karakter} save={save} />\n                                </Modal.Content>\n                            </Modal>\n                            } />\n                        <KepzettsegLista karakter={karakter} save={() => save(karakter)} />\n                    </GridColumn>\n                    <GridColumn>\n                        {(karakter.masodlagosFegyverMutat ?? true) && <>\n                            {karakter.masodlagosFegyver !== undefined && <div><DobasMatrixDisplay color='orange' title='Msodlagos harcrtkek' matrix={calculateHarcertek(karakter, undefined, true).roll(['te', 've', 'ce', 'ke'])} direction='vertical' keyMap={HARCERTEK_DISPLAY_NAMES} /></div>}\n                            <FegyverLista color='green' title='Msodlagos fegyver' fegyverek={karakter.fegyverek} selected={karakter.masodlagosFegyver} onSelectionChange={f => { karakter.masodlagosFegyver = f; save(karakter) }}\n                                extraButton={<Modal trigger={<Button fluid circular icon='edit' content='Fegyverlista szerkesztse' />} size='fullscreen'>\n                                    <Modal.Header>Fegyverek</Modal.Header>\n                                    <Modal.Content>\n                                        <FegyverValaszto saveFegyverek={saveFegyverek} fegyverek={fegyverek} karakter={karakter} save={k => { save(k); }} />\n                                    </Modal.Content>\n                                </Modal>} />\n                        </>}\n                        <Button fluid circular icon={(karakter.masodlagosFegyverMutat ?? true) ? 'eye slash' : 'eye'} content='Msodlagos fegyver' onClick={() => {\n                            karakter.masodlagosFegyverMutat = !(karakter.masodlagosFegyverMutat ?? true);\n                            save(karakter);\n                        }} />\n                        <Felszereles karakter={karakter} save={() => save(karakter)} />\n                        <Jegyzetek karakter={karakter} save={() => save(karakter)} />\n                    </GridColumn>\n                </GridRow>\n            </Grid>\n        </GridColumn>\n    </Grid>\n}","\r\nexport interface Pancel {\r\n    name: string;\r\n    sfe: number;\r\n    mgt: number;\r\n    nehez?: boolean;\r\n}\r\n\r\nexport const PANCELOK: Array<Pancel> = [\r\n    { name: 'poszt', sfe: 1, mgt: 0 },\r\n    { name: 'kivert br', sfe: 1, mgt: 0 },\r\n    { name: 'kemnytett br', sfe: 2, mgt: 2 },\r\n    { name: 'gyrs', sfe: 1, mgt: 1 },\r\n    { name: 'brigantin', sfe: 3, mgt: 2 },\r\n    { name: 'lncing', sfe: 2, mgt: 1 },\r\n    { name: 'sodronying', sfe: 3, mgt: 1 },\r\n    { name: 'pikkelyvrt', sfe: 3, mgt: 2 },\r\n    { name: 'lemezvrtezet', sfe: 3, mgt: 3, nehez: true },\r\n    { name: 'mellvrt', sfe: 4, mgt: 4, nehez: true },\r\n    { name: 'flvrtezet', sfe: 5, mgt: 6, nehez: true },\r\n    { name: 'teljes vrtezet', sfe: 6, mgt: 8, nehez: true }\r\n]","import { useState } from \"react\";\nimport { v4 } from \"uuid\";\nimport { FEGYVEREK } from \"../engine/harc\";\nimport { Fegyver, Karakter, KarakterInfo, KarakterV1 } from \"../engine/karakter\";\nimport { FAJ_KEPESSEG, KepessegDobas } from \"../engine/kasztok\";\nimport { Pancel, PANCELOK } from \"../engine/pancel\";\n\nconst PREFIX = 'magus.';\nconst CONFIG_PREFIX = 'magus-config.';\nconst STORY_KEY = 'magus-story';\n\ninterface DataConnector {\n    categories: () => Array<string>;\n    list: (category?: string) => Array<KarakterInfo>;\n    load: (info: KarakterInfo) => Karakter;\n    save: (karakter: Karakter) => void;\n    clone: (karakter: Karakter) => Karakter;\n    remove: (info: KarakterInfo) => void;\n    listFajok: () => Record<string, KepessegDobas>;\n    listFegyverek: () => Array<Fegyver>;\n    saveFegyverek: (fegyverek: Array<Fegyver>) => void;\n    listPancelok: () => Array<Pancel>;\n    savePancelok: (pancelok: Array<Pancel>) => void;\n    loadStory: () => string,\n    saveStory: (story: string) => unknown;\n    key?: number;\n}\n\nexport function useDataConnector(): DataConnector {\n\n    const [operations, setOperations] = useState(0);\n\n    function fetch<T>(name: string): T {\n        const s = window.localStorage.getItem(name);\n        return s ? JSON.parse(s) : null;\n    };\n\n    function put(name: string, ob: any) {\n        window.localStorage.setItem(name, JSON.stringify(ob));\n        setOperations(operations + 1);\n    }\n\n    const categories = (): Array<string> => {\n        return [...new Set(list().flatMap(info => info.categories))];\n    }\n\n    const list = (category?: string): Array<KarakterInfo> => {\n        const all: Array<KarakterInfo> = [...Array(window.localStorage.length)].map((_, i) => window.localStorage.key(i) ?? '').filter(key => key.startsWith(PREFIX)).map(key => fetch(key));\n        if (!category) {\n            return all.sort((a, b) => a.name.localeCompare(b.name));\n        }\n        return all.filter(k => k.categories.some(cat => cat === category)).sort((a, b) => a.name.localeCompare(b.name));\n    };\n\n    const load = (info: KarakterInfo): Karakter => {\n        const karakter: Karakter | KarakterV1 = fetch(PREFIX + info.id);\n        if (karakter.version === 2) {\n            return karakter;\n        }\n        //Convert v1 to v2\n        (karakter as any).version = 2;\n        (karakter as any).ep = { max: karakter.maxEp, akt: karakter.ep };\n        (karakter as any).fp = { max: karakter.maxFp, akt: karakter.fp };\n        return karakter as unknown as Karakter;\n    };\n\n    const save = (karakter: Karakter): void => {\n        put(PREFIX + karakter.id, karakter);\n    };\n\n    const clone = (karakter: Karakter): Karakter => {\n        const karakterek = list();\n        let newNev: string;\n        let i = 2;\n        do {\n            newNev = `${karakter.name} (${i})`;\n            i++;\n            // eslint-disable-next-line no-loop-func\n        } while (karakterek.some(k => k.name === newNev));\n\n        const ret = { ...karakter, id: v4(), name: newNev };\n        save(ret);\n        return ret;\n    }\n\n    const remove = (info: KarakterInfo) => {\n        window.localStorage.removeItem(PREFIX + info.id);\n    }\n\n    (window as any).exportMagus = () => {\n        const ret: Record<string, any> = {};\n        list('').forEach(key => {\n            ret[key.id] = load(key);\n        })\n        console.log('export', JSON.stringify(ret));\n    }\n\n    (window as any).importMagus = (content: string) => {\n        const all = JSON.parse(content);\n        Object.keys(all).forEach(key => save(all[key]));\n        console.log('import complete');\n    }\n\n\n    return {\n        categories,\n        list,\n        load,\n        save,\n        clone,\n        remove,\n        listFajok: () => FAJ_KEPESSEG,\n        listFegyverek: () => {\n            let ret = fetch<Array<Fegyver>>(CONFIG_PREFIX + 'fegyverek');\n            if (!ret) {\n                put(CONFIG_PREFIX + 'fegyverek', FEGYVEREK);\n                ret = FEGYVEREK;\n            }\n            return ret;\n        },\n        saveFegyverek: fegyverek => put(CONFIG_PREFIX + 'fegyverek', fegyverek),\n        listPancelok: () => {\n            let ret = fetch<Array<Pancel>>(CONFIG_PREFIX + 'pancelok');\n            if (!ret) {\n                put(CONFIG_PREFIX + 'pancelok', PANCELOK);\n                ret = PANCELOK;\n            }\n            return ret;\n        },\n        savePancelok: pancelok => put(CONFIG_PREFIX + 'pancelok', pancelok),\n        loadStory: () => fetch(STORY_KEY) ?? '<story/>',\n        saveStory: (story: string) => put(STORY_KEY, story),\n        key: operations\n    }\n}","import React from 'react';\r\nimport { Dropdown } from 'semantic-ui-react';\r\n\r\ninterface CategoriesDropdownProps {\r\n    categories: Array<string>;\r\n    currentCategory: string;\r\n    setCurrentCategory: (category: string) => unknown\r\n}\r\n\r\nexport const CategoriesDropdown: React.FC<CategoriesDropdownProps> = ({ currentCategory, setCurrentCategory, categories }) => {\r\n    return <Dropdown item text={`Karakterek: ${currentCategory || 'sszes'}`}>\r\n        <Dropdown.Menu>\r\n            <Dropdown.Item key='__all' onClick={() => setCurrentCategory('')}>sszes</Dropdown.Item>\r\n            {categories.map(k => <Dropdown.Item key={k} onClick={() => setCurrentCategory(k)}>{k}</Dropdown.Item>)}\r\n        </Dropdown.Menu>\r\n    </Dropdown>\r\n}","import React, { Component, ReactNode } from 'react'\r\n\r\nexport interface DragAndDropProps {\r\n    handleDrop: (files: FileList) => unknown;\r\n    dragPlaceholder: ReactNode\r\n}\r\n\r\nclass DragAndDrop extends Component<DragAndDropProps, {}> {\r\n    state = {\r\n        drag: false\r\n    }\r\n    dropRef = React.createRef<HTMLDivElement>();\r\n    dragCounter = 0;\r\n\r\n    handleDrag = (e: Event) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n    }\r\n\r\n    handleDragIn = (e: DragEvent) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        this.dragCounter++\r\n        if (e.dataTransfer?.items && e.dataTransfer.items.length > 0) {\r\n            this.setState({ drag: true })\r\n        }\r\n    }\r\n    handleDragOut = (e: DragEvent) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        this.dragCounter--\r\n        if (this.dragCounter === 0) {\r\n            this.setState({ drag: false })\r\n        }\r\n    }\r\n    handleDrop = (e: DragEvent) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        this.setState({ drag: false })\r\n        if (e.dataTransfer?.files && e.dataTransfer.files.length > 0) {\r\n            this.props.handleDrop(e.dataTransfer.files)\r\n            e.dataTransfer.clearData()\r\n            this.dragCounter = 0\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        let div = this.dropRef.current;\r\n        if (div) {\r\n            div.addEventListener('dragenter', this.handleDragIn)\r\n            div.addEventListener('dragleave', this.handleDragOut)\r\n            div.addEventListener('dragover', this.handleDrag)\r\n            div.addEventListener('drop', this.handleDrop)\r\n        }\r\n    }\r\n    componentWillUnmount() {\r\n        let div = this.dropRef.current;\r\n        if (div) {\r\n            div.removeEventListener('dragenter', this.handleDragIn)\r\n            div.removeEventListener('dragleave', this.handleDragOut)\r\n            div.removeEventListener('dragover', this.handleDrag)\r\n            div.removeEventListener('drop', this.handleDrop)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div\r\n                style={{ display: 'inline-block', position: 'relative' }}\r\n                ref={this.dropRef}\r\n            >\r\n                {this.state.drag ? this.props.dragPlaceholder : this.props.children}\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default DragAndDrop","import React from 'react';\r\nimport { Button, Icon } from 'semantic-ui-react';\r\nimport { Karakter } from '../engine/karakter';\r\nimport DragAndDrop from './DragAndDrop';\r\n\r\nexport const KarakterImport: React.FC<{ save: (karakter: Karakter) => unknown, saveMese: (story: string) => unknown }> = ({ save, saveMese }) => {\r\n    return <DragAndDrop\r\n        dragPlaceholder={<Button circular as='div' color='green'><Icon name='upload' />Import</Button>}\r\n        handleDrop={async l => {\r\n            const text = await l.item(0)?.text();\r\n            const mese = l.item(0)?.name.endsWith('.xml');\r\n            if (text) {\r\n                if (mese) {\r\n                    saveMese(text);\r\n                } else {\r\n                    save(JSON.parse(text));\r\n                }\r\n            }\r\n        }}>\r\n        <Button circular basic as='div' color='green'><Icon name='upload' />Import</Button>\r\n    </DragAndDrop>\r\n\r\n}","import React, { useCallback, useReducer, useState } from 'react';\nimport { DiceRollResult, formatDiceRoll, parseDiceRoll, roll } from '../engine/roll';\nimport { DobasEredmeny } from '../components/DobasEredmeny';\nimport { Button, Dropdown, Grid, GridColumn, GridRow, Header, Input, Label } from 'semantic-ui-react';\nimport { IntegerInput } from '../components/IntegerInput';\nconst { Slider } = require('react-semantic-ui-range');\n\nconst DICE_ROLLS = [2, 3, 5, 6, 10, 100];\nconst PLUS = [1, 2, 3, 5, 10];\nconst HISTORY_LENGTH = 10;\n\nconst MERETEK: Record<string, number> = {\n    'ris': -30,\n    'l': -15,\n    'ember': 0,\n    'kutya': 20,\n    'dinnya': 35,\n    'alma': 50,\n    'fmpnz': 65\n}\n\nconst MOZGASOK: Record<string, number> = {\n    'mozdulatlan': 0,\n    'kiszmthatan mozg': 20,\n    'kiszmthatatlanul mozg': 35,\n    'kitrsre sszpontost': 50\n\n}\n\nconst VISZONYOK: Record<string, number> = {\n    'napsts, szlcsend': 0,\n    'szemerkl es, szell': 10,\n    'gyenge es/szl': 30,\n    'gyenge kd, es, ers szl': 50,\n    'sr kd, zivatar, viharos szl': 70,\n    'egszen sr kd, felhszakads, orkn': 100,\n\n}\n\n\ninterface LofegyverVedo {\n    tavolsag: number,\n    meret: string;\n    mozgas: string;\n    viszonyok: string;\n}\n\nexport const Kockadobo: React.FC<{}> = () => {\n    const [input, setInput] = useState('');\n    const [result, setResult] = useState({} as DiceRollResult);\n    const [history, addToHistory] = useReducer((prev: Array<string>, elem: string) => {\n        if (prev[0] === elem) {\n            return prev;\n        }\n        return [elem, ...prev.slice(0, HISTORY_LENGTH - 1)];\n    }, []);\n    const [lofegyverVedo, setLofegyverVedo] = useState<LofegyverVedo>({ tavolsag: 0, meret: 'ember', mozgas: 'mozdulatlan', viszonyok: 'napsts, szlcsend' });\n\n    const dob = useCallback((ijasz?: boolean) => {\n        setResult(roll(input, ijasz));\n        addToHistory(input);\n    }, [input, setResult, addToHistory]);\n\n    const setKocka = useCallback((k: number) => {\n        const diceRoll = parseDiceRoll(input);\n        if (diceRoll.die === k) {\n            diceRoll.numDice++;\n        } else {\n            diceRoll.die = k;\n            diceRoll.numDice = 1;\n        }\n        setInput(formatDiceRoll(diceRoll));\n    }, [input, setInput]);\n\n    const setPlus = useCallback((k: number) => {\n        const diceRoll = parseDiceRoll(input);\n        if (k === 0) {\n            diceRoll.plus = 0;\n        } else {\n            diceRoll.plus += k;\n        }\n        setInput(formatDiceRoll(diceRoll));\n    }, [input, setInput]);\n\n\n    return <Grid columns={1} divided='vertically'>\n        <GridRow>\n            <GridColumn>\n                <Header>Kockadobs</Header>\n                <div>\n                    <Input labelPosition='right' value={input} onChange={e => setInput(e.target.value)}>\n                        <Label basic pointing='right'>Dobs</Label>\n                        <input />\n                        <DobasEredmeny pointing='left' result={result} />\n                        <Button.Group color='teal'>\n                            <Button primary disabled={!input} onClick={() => dob()}>Dob</Button>\n                            <Dropdown\n                                className='button icon'\n                                floating\n                                trigger={<></>}\n                            >\n                                <Dropdown.Menu>\n                                    <Button primary onClick={() => dob(true)}>jsz szabllyal</Button>\n                                </Dropdown.Menu>\n                            </Dropdown>\n                        </Button.Group>\n\n                    </Input>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Kocka</Label>\n                        {DICE_ROLLS.map(r => <Button onClick={() => setKocka(r)}>k{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Oszt</Label>\n                        {[1, 2, 3].map(r => <Button onClick={() => {\n                            const diceRoll = parseDiceRoll(input);\n                            diceRoll.div = r;\n                            setInput(formatDiceRoll(diceRoll))\n                        }}>/{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Plusz</Label>\n                        {[...PLUS].reverse().map(r => <Button onClick={() => setPlus(-r)}>-{r}</Button>)}\n                        <Button secondary onClick={() => setPlus(0)}>0</Button>\n                        {PLUS.map(r => <Button onClick={() => setPlus(r)}>+{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>, jra</Label>\n                        {history.map(h => <Button color='olive' onClick={() => setInput(h)}>{h}</Button>)}\n                    </Button>\n                </div>\n            </GridColumn>\n        </GridRow>\n        <GridRow>\n            <GridColumn>\n                <Header>Clzs vd rtk</Header>\n                <div>\n                    <Slider value={lofegyverVedo.tavolsag} settings={{ min: 0, max: 100, step: 1, onChange: (v: number) => setLofegyverVedo({ ...lofegyverVedo, tavolsag: v }) }} />\n                    <IntegerInput label='Tvolsg' value={lofegyverVedo.tavolsag} onChange={v => setLofegyverVedo({ ...lofegyverVedo, tavolsag: Math.min(v ?? 0, 100) })} />\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Mret</Label>\n                        {Object.keys(MERETEK).map(r => <Button active={lofegyverVedo.meret === r} onClick={() => setLofegyverVedo({ ...lofegyverVedo, meret: r })}>{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Mozgs</Label>\n                        {Object.keys(MOZGASOK).map(r => <Button active={lofegyverVedo.mozgas === r} onClick={() => setLofegyverVedo({ ...lofegyverVedo, mozgas: r })}>{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Viszonyok</Label>\n                        {Object.keys(VISZONYOK).map(r => <Button active={lofegyverVedo.viszonyok === r} onClick={() => setLofegyverVedo({ ...lofegyverVedo, viszonyok: r })}>{r}</Button>)}\n                    </Button>\n                </div>\n                <div>\n                    <Button as='div' labelPosition='left'>\n                        <Label basic pointing='right'>Vd rtk</Label>\n                        <Label color='black' size='large'>{30 + lofegyverVedo.tavolsag + MERETEK[lofegyverVedo.meret] + MOZGASOK[lofegyverVedo.mozgas] + VISZONYOK[lofegyverVedo.viszonyok]}</Label>\n                    </Button>\n                </div>\n            </GridColumn>\n        </GridRow>\n    </Grid>\n}","import React, { useState } from 'react';\r\nimport { Modal, Button } from 'semantic-ui-react';\r\nimport { Kockadobo } from '../pages/Kocskadobo';\r\n\r\nexport const KockaModal: React.FC<{}> = () => {\r\n    const [kockaOpen, setKockaOpen] = useState(false);\r\n    return <Modal trigger={<Button primary>Kocka</Button>} onOpen={() => setKockaOpen(true)} onClose={() => setKockaOpen(false)} open={kockaOpen}>\r\n        <Modal.Content>\r\n            <Kockadobo />\r\n        </Modal.Content>\r\n    </Modal>\r\n}","export default __webpack_public_path__ + \"static/media/magus.810aa1ee.png\";","import React, { useReducer } from 'react';\r\nimport { Table } from 'semantic-ui-react';\r\nimport { Varazslat } from '../engine/varazslat';\r\n\r\ninterface VarazslatListaProps {\r\n    varazslatok: Array<Varazslat>;\r\n    fieldLabels: Record<string, string>;\r\n}\r\n\r\nexport const VarazslatLista: React.FC<VarazslatListaProps> = ({ varazslatok, fieldLabels }) => {\r\n\r\n    const [open, toggleOpen] = useReducer((prev: Record<string, boolean>, action: string) => ({ ...prev, [action]: !prev[action] }), {})\r\n\r\n    const sorted = varazslatok.sort((a, b) => {\r\n        return a.name.localeCompare(b.name);\r\n    });\r\n\r\n    const cleanupDescription = (text: string) => {\r\n        return text.trim().split('\\n\\n').map(line => `<p>${line.replace(/\\s+/g, ' ').trim()}</p>`).join('');\r\n    }\r\n\r\n    const miscFields: Set<string> = varazslatok.reduce((acc, curr) => {\r\n        if (curr.misc) {\r\n            Object.keys(curr.misc).forEach(field => acc.add(field));\r\n        }\r\n        return acc;\r\n    }, new Set<string>());\r\n\r\n    return <Table compact celled striped definition>\r\n        <Table.Header>\r\n            <Table.Row>\r\n                <Table.HeaderCell>{fieldLabels.name ?? '???'}</Table.HeaderCell>\r\n                <Table.HeaderCell>{fieldLabels.pont ?? '???'}</Table.HeaderCell>\r\n                <Table.HeaderCell>{fieldLabels.varazslasIdeje ?? '???'}</Table.HeaderCell>\r\n                {[...miscFields].map(field => <Table.HeaderCell>{fieldLabels[field] ?? '???'}</Table.HeaderCell>)}\r\n            </Table.Row>\r\n        </Table.Header>\r\n        <Table.Body>\r\n            {sorted.map(v => <><Table.Row onClick={() => toggleOpen(v.name)}>\r\n                <Table.Cell>{v.name}</Table.Cell>\r\n                <Table.Cell>{v.pont}</Table.Cell>\r\n                <Table.Cell>{v.varazslasIdeje}</Table.Cell>\r\n                {[...miscFields].map(field => <Table.Cell>{(v.misc as any)?.[field]}</Table.Cell>)}\r\n            </Table.Row>\r\n                {open[v.name] && <Table.Row>\r\n                    <Table.Cell colspan={3 + miscFields.size}>\r\n                        <div style={{ backgroundColor: 'burlywood', borderRadius: '0.5em', padding: '0.5em', width: '100%', border: '1px solid black' }} dangerouslySetInnerHTML={{ __html: cleanupDescription(v.description) }} />\r\n                    </Table.Cell>\r\n                </Table.Row>}\r\n            </>\r\n            )}\r\n        </Table.Body>\r\n    </Table>\r\n\r\n}","export interface Varazslat {\n    name: string;\n    pont: string;\n    misc?: {\n        erosseg?: string;\n        sebzes?: string;\n        idotartam?: string;\n        me?: string;\n        hatotav?: string;\n    };\n    varazslasIdeje: string;\n    labels: Array<string>;\n    description: string;\n}\n\nexport const PSZI_PYARRONI: Array<Varazslat> = [\n    {\n        name: 'Emlkfelidzs',\n        pont: '1',\n        misc: {\n            me: 'M',\n            idotartam: 'Lsd a lersban',\n        },\n        varazslasIdeje: '2 kr',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description:\n            `A diszciplna helysznek, szvegek, vagy esemnyek megjegyzsben, illetve rgi - egybknt mr elfelejtett - emlkek felidzsben nyjt segtsget. Ha a -alkalmaz valamit szeretne gy az elmjbe vsni, hogy arra ksbb - minden rszletben visszaemlkezzen, akkor rvid (kt krig] tart meditcival  mintegy belegeti a kvnt dolgot az agyba.\n\nEzek utn az emlk mg hrom ven t tkletesen tisztn l  benne, s minden klnsebb erfeszts (vagy diszciplna alkalmazsa) nlkl felidzhet. Az emlk  hrom v mltn ugyangy halvnyodni kezd, mint egy nem effle begetssel szerzett kp.\n\nHa a -alkalmaz olyan emlket kvn felidzni, melyet nem a fenti mdon trol agyban, akkor a  diszciplna hasznlatval erre is md nylik. Az gy felidzett emlk 10 krig tkletesen les lesz, m  utna semmiv vlik, s csak a diszciplna jbli alkalmazsval kerl el megint.\n        \nMesterfok alkalmazs esetn nem csak sajt magunkban idzhetnk fel emlket, hanem msokban is.`\n    },\n    {\n        name: 'breds',\n        pont: '-',\n        misc: {\n            me: 'M',\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `A -alkalmaz kpes beprogramozni magt arra, hogy egy  meghatrozott idben minden kls befolys nlkl felbredjen. Az  nszuggesztinak vagy arra kell irnyulnia, hogy mennyi id  mlva szakadjon ki az lombl, vagy egy kls jelhez kell  kapcsoldnia. Mivel az rzkszervek alvs alatt is mkdnek noha normlis esetben a gyenge ingereket a tudat figyelmen  kvl hagyja - a diszciplna alkalmazja olyasfle jeleket hatrozhat  meg bredsi pontnak, mint hajnali kakassz, az jkzp teljes  sttje, lova ideges horkantsa, stb.\n        \n        A diszciplna nem mkdik, ha a karakter eljult, kbtszeres  lomba merlt, vagy valamely mentlis tmads hatsra  kapcsolt ki tudata. Az alkalmazshoz legalbb egy p-tal kell  rendelkeznie.`\n    },\n    {\n        name: 'rzklests',\n        pont: '2/rzk',\n        misc: {\n            me: 'M',\n            idotartam: '1 kr',\n        },\n        varazslasIdeje: '2 kr',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `A Pszi-energik lehetsget nyjtanak arra, hogy felhasznlsukkal az alapvet t rzkszerv hatsfokt nveljk vagy  cskkentsk. A diszciplna arra ad mdot, hogy a ltst, hallst,  szaglst, tapintst s zlelst akaratunk szerint befolysoljuk.\n        \n        A Lts befolysolsval nemcsak lesthetjk a szemet (esetleg  elhomlyosthatjuk), hanem lehetsgnk nylik a Megzavarsra  is. A lts lestsvel legfeljebb megktszerezdik a lttvolsg,  tomptsval azonban vaksg is okozhat.\n        \n        Megzavars esetn a szem nem tud kellkppen fkuszlni,  gy fellphet kettslts, esetleg a tvolsg, vagy egy kzeled  trgy, lny sebessgnek felmrse okozhat problmt. A valsgtl  val eltrs 10% s 60% kztt mozoghat. (Kiszmtsa: 1 K6,  majd az eredmny megszorzand 10-zel.)\n        \n        A Halls lestse ktszeresre nveli a halltvolsgot, mg  tomptsa akr sketsghez is vezethet.\n        \n        Megzavarsakor a hangok tvolsgt, esetleg irnyt vti el  a befolysolt lny. Az eltrs s a kiszmts mdja megegyezik  a Lts befolysolsnl lertakkal.\n        \n        A Szagls, a Tapints, s az zlels felerstse megktszerezi  ezen rzkszervek hatsfokt. Tomptsuk az rzkek teljes  kikapcsolsval is jrhat. Megzavarsukkal elrhetjk, hogy ms  szag, anyagi minsg (esetleg hmrsklet), vagy z rzdjk. A  Megzavars mrtknek eldntse a Kalandmester feladata.\n        \n        FIGYELEM!\n        A diszciplna nem alkalmas arra, hogy brmely rzkszerv  befolysolsval vals krt okozzon. Pl.: Nem lehet a hrzetet  annyira fokozni, ami Fp vesztesggel jr.\n        A diszciplna vgrehajtsa rzkszervenkt 2 p-ba kerl, s  hatst 1 krig fejti ki. 4 p-rt kt rzkszervet lehet befolysolni  1 krig, vagy egy rzkszervet 2 krig, stb.`\n    },\n    {\n        name: 'Fjdalomcsillapts',\n        pont: '1/Fp',\n        misc: {\n            me: 'A',\n            idotartam: 'vgleges',\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `A diszciplna segtsgvel az agy fjdalomkzpontjra gyakorolhatunk hatst. Lehetsg nylik fjdalomrzet tomptsra vagy  keltsre. Miutn nem gygyt vagy okoz valdi sebeslseket, az  leter Pontokra nincs befolyssal. Csak Fp-ot adhatunk vissza,  vagy vehetnk el. Az Fp-ok teljes elvonsval - 0 Fp-ra knzs elrhetjk, hogy az ldozat eljuljon, m igazi seb ekkor sem  keletkezik rajta. Maximum Fp fl sem nmagunkat, sem msokat  nem juttathatunk, brmennyi p-ot is ldoznnk r. Asztrltesttel  nem rendelkez lnyekre a diszciplna nem mkdik.`\n    },\n    {\n        name: 'Hatodik rzk',\n        pont: '5',\n        misc: {\n            idotartam: '60 kr',\n        },\n        varazslasIdeje: '5 szegmens',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `A Hatodik rzk az agy azon klnleges kpessgt hasznlja  fel, mely lehetv teszi, hogy az id szvedkn tszrd  esemnymozaikokat sszerendezve megrezze a kzeljvben  bekvetkez trtnsek irnyt.\n        \n        A diszciplna alkalmazja megrzsekhez juthat az idtartam  alatt. Ezek a megrzsek semmifle pontossggal nem brnak,  csupn egy hamarosan bekvetkez esemnyre figyelmeztetik a  karaktert. A megrzsek lehetnek j, vagy rossz eljelek.\n        \n        Rossz elrzetet kelt minden olyan trtns, mely rtalmas  lehet, vagy gonosz szndkkal cselekedtk.\n\n        J elrzethez juthat a diszciplna alkalmazja, ha az idtartam alatt semmifle baj nem trtnik vele, illetve a r vr  esemnyek a javra vlnak.\n\n        A Hatodik rzknek kt alkalmazsi mdja lehetsges. Az  els esetben a karakter csupn ltalnossgban kvncsi az  idtartam alatt bekvetkez esemnyek r vonatkoz eljelre.  Ennek tipikus pldja, ha a karakter egy stt barlang szjnl  megtorpanva alkalmazza a diszciplnt. Amennyiben a barlangban ellensges lnyek lapulnak, akik valamilyen mdon a  biztonsgra trnek a diszciplna hatsnak idtartama alatt,  akkor a karaktert Rossz Elrzet fogja el. Nem tudja az okt, st,  a leselked veszedelem mrtkt s pontos irnyt sem ismeri,  csupn arrl szerez tudomst, hogy valami vr r. Belpve a  barlangba fokozdik Rossz Elrzete - ahogy az idben egyre  kzeledik az rtalmas esemny -, majd a baj kzvetlen megtrtnte  eltt egy pillanattal megrzi irnyt is. Ha ez egy tmads volt,  mr nem rte a diszciplna alkalmazjt vratlanul, s ebben az  esetben az ellensges akci nem minsl Meglepetsnek.\n\n        A Hatodik rzk msik alkalmazsi mdja, ha a karakter  arra kvncsi, hogy egy ltala vgrehajtott cselekmny milyen  hatssal jr r nzve. Ilyenkor a diszciplna alkalmazsa utn  megkrdezheti Kalandmestert, hogy milyen elrzetei vannak,  rdemes-e megtenni, amire kszl. A vlasz minden esetben csak  annyi, hogy j vagy rossz rzsek brednek benne. Indokls sosincs.  Jellemz helyzet, amikor karakter egy srt kvn kibontani.  Vgrehajtja a diszciplnt, s megkrdezi a Kalandmestert rzeteirl.  Ha a srban lhalott fekszik, a karakternek Rossz Elrzetei  tmadnak. Ha a srban semmi sincs (legfeljebb egy porlad tetem),  vagy a kopors mlyn kincs hever, a karakterben ) Elrzetek  brednek.\n\n        A diszciplna 5 p-rt 60 krig (azaz tz percig) engedi effle  korltozott mdon a jv titkainak felfedst. 10 p felhasznlsval  az idtartam megduplzdik, stb.\n\n        A Hatodik rzk csak alapfokon mkdik, mesterfoka nincs. `\n    },\n    {\n        name: 'Kpessgjavts',\n        pont: 'lsd a lersban',\n        misc: {\n            me: 'M',\n            idotartam: '6 kr',\n        },\n        varazslasIdeje: '2 kr',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `Olykor - klnleges veszlyhelyzetekben - az emberi fizikum  ltszlag csodkra kpes. Egy vadllattl megrmlt gyermek  hihetetlen gyorsasggal kpes felkszni egy sudr, g nlkli fa  trzsn, s miutn a veszly elmlt, nemcsak azon csodlkozik,  hogy mikpp sikerlt ez neki, hanem gyakorta lemszni sem tud  magtl. Ez jellemz pldja a  akaratlan megnyilvnulsnak,  hiszen ilyenkor az agy szabadt fel a testben olyan erforrsokat,  melyek egybknt nem hozzfrhetek.\n        \n        A diszciplna ugyanezt kpes vgrehajtani, termszetesen a  tudat teljes irnytsa alatt. A  erk segtsgvel a fizikai kpessgek  - kivve a Szpsget - megvltoztathatak. A vltoztats idleges,  s a diszciplna hatsnak elmltval visszatrnek az eredeti rtkek.  Ugyanakkor lehetetlent nem szabad elvrnunk a -tl sem: egyik  kpessgnket sem emelhetjk 20 fl.\n        \n        FIGYELEM!  \n        Brmely kpessg nullra - vagy nulla al - cskkentse azonnali  hallhoz vezet.\n\n        A Kpessgjavts az egyik legkedveltebb ltalnos Diszciplna. Gyakorta hasznljk a Mregellenlls - az Egszsg tz  feletti rsze - megnvelsre. Valjban igen hasznos minden  olyan esetben, amikor Kpessgprbra knyszerlnk, hiszen  az adott pillanatban valban ersebbek, gyorsabbak, egszsgesebbek vagy gyesebbek lesznk. Nem szabad elfelejteni,  hogy ha harc folyamn megnveljk egszsgnket - s egy  csapst csak az gy nyert p-okkal ltnk tl -,amint a diszciplna hatsa elmlik, a nyert p-k is semmiv lesznek, s ebbe  akr bele is halhatunk.\n\n        Ha Rontssal az ellenfelnk Egszsgt annyira lecskkentettk, hogy ettl elveszti maradk p-jait, akkor meghal. Hiba  jnnnek vissza az p-ok a diszciplna hatsnak megszntvel,  a llek nem kltzik vissza a halott testbe.\n\n        <table>\n            <tr>\n                <td>+/- mdosts az eredeti kpessghez kpest</td>\n                <td>1</td>\n                <td>2</td>\n                <td>3</td>\n                <td>4</td>\n                <td>5</td>\n                <td>6</td>\n            </tr>\n            <tr>\n                <td>Szksges p</td>\n                <td>1</td>\n                <td>2</td>\n                <td>4</td>\n                <td>8</td>\n                <td>16</td>\n                <td>32</td>\n            </tr>\n        </table>\n\n        A tblzatban feltntetett p rtkek a diszciplna alap idtartamra (6 kr) vonatkoznak. A felhasznlt p-ok megduplzsval a hats idtartamnak megduplzst rhetjk el,  megtriplzsval a hats ideje meghromszorozdik, s gy tovbb.        \n        `\n    },\n    {\n        name: 'Roham',\n        pont: '1/+2T',\n        misc: {\n            me: 'A',\n            idotartam: '1 tmads',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `A diszciplna alkalmazja egyetlen csapsra sszpontostva,  teste s elmje minden tartalkt kiadja egy lerohansszer  tmadsban. Az alkalmaz mly, torokhang kilts ksretben  hajtja vgre a rohamot.\n        \n        A diszciplna felemszti az alkalmaz sszes aktulis p-jt,  belertve a Dinamikus Pajzsban troltakat is. Ez azt jelenti, hogy  a tmad knytelen felhasznlni minden p-ot, amivel rendelkezik,  s az ebbl nyert energia hozzaddik a Tmad rtkhez.  1 p +2 T-t jelent. (Azaz 5 p felhasznlsa esetn + 10 van a  T-n.)\n\n        Amennyiben az ellenfl nem ugyanezt a diszciplnt alkalmazza,  a kezdemnyezs automatikusan a Roham alkalmazjt illeti,  kezdemnyez dobs nlkl.\n\n        Megfkezs esetn a diszciplna vgrehajtja ezzel a mdszerrel megakasztja, megzavarja tmadjt, az elveszti kezdemnyezst s a fenti mdon kiszmtott rtk levondik a Tmad  rtkbl.\n\n        Ez a diszciplna olykor igen hasznos lehet, m nem szabad  figyelmen kvl hagynunk veszlyt: agyunk feltltdsig kptelenek  lesznk brmifle -alkalmazsra s elmnket is csak a Statikus  Pajzs vdi.\n        `\n    },\n    {\n        name: 'Telekinzis',\n        pont: '2/1kg',\n        misc: {\n            idotartam: '1 kr',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `Agyi energiink segtsgvel kisebb trgyakat mozgathatunk  lttvolsgon bell. Elfordthatunk a zrban egy kulcsot, a tlnk  tvol hever fegyvert magunkhoz hzhatjuk, vagy szrevtlen  elcsenhetnk az kszerszmhelybl nmi drgasgot. A diszciplna  alkalmazsa taglejtseket nem ignyel, pusztn a mozgatni kvnt  trgyon kell tartani tekintetnket. Amint elfordulunk, vagy valami  eltakarja a trgyat, az mozdulatlann vlik, esetleg - ha a levegben  volt - lepottyan. A Telekinzis csak lass mozgatsra alkalmas  - egy fut ember sebessgnl nagyobbat nem rhetnk el vele ezrt ilyen mdon fegyvert dobni, vagy sebeslst okozni szinte  lehetetlen.\n        \n        A diszciplna kifejti hatst mgikus trgyakra is.\n\n        2 p felhasznlsval 1 kg sly trgy mozgathat 1 krig. 4  p rldozsval mozgathatunk 1 kg-os trgyat 2 krig, vagy 2  kg-ot 1 krig, stb.\n        `\n    },\n    {\n        name: 'Teleptia',\n        pont: 'lsd a lerst',\n        misc: {\n            me: 'M',\n            idotartam: 'lsd a lerst',\n        },\n        varazslasIdeje: '3 kr',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `\n        Az egyik legsibb -alkalmazs, ms nven Gondolattvitel.  Az ltalnos Diszciplnk azon kivtele, mely igazn csak  mesterfokon hasznlhat. Segtsgvel gondolati ton lehet  beszlgetni, vagy a -alkalmaz ltal felidzett kpeket kzlni.  A Teleptia csak  kpzettsggel rendelkezk kztt mkdik.  Alapfokon a -alkalmaz nem tud beszlgetst kezdemnyezni,  st vlaszolni sem, csupn a hozz intzett gondolati zenetet  kpes venni.\n\n        A diszciplna mesterfok alkalmazsa ad mdot arra, hogy a  Gondolattvitelt megindtsa, s - kt mesterfok alkalmaz esetben - vlaszoljon a krdsekre.\n\n        A Teleptia alkalmazshoz a Gondolattvitel megkezdjnek  tkletesen ismernie kell a gondolatokat fogad szemlyt - ebben  az esetben a tvolsg nem szmt -, vagy ltnia kell azt.\n\n        Amennyiben a Teleptiban rsztvevk ltjk egymst, csupn  2 p-ba kerl az 1 krig tart gondolattvitel. Ha nem ltjk  egymst 1 szegmensenknt kerl 1 p-ba. A p-ok nvelsvel  egyenl arnyban nvelhet a diszciplna idtartama is.\n\n        Egyszerre legfeljebb kt elme kapcsolhat ssze Teleptival,  teht a gondolati ton trtn beszlgetsbe nem lehet harmadik  rszrl sem beleszlni, sem azt lehallgatni.\n\n        Az egyetlen olyan diszciplna, mely megtallja a mdjt,  hogy hatsa tszivrogjon a Statikus Pajzson, noha a Dinamikus Pajzs ezt is feltartztatja. Ha egy effle pajzsot viselnek kldenek Teleptival zenetet, az csak azt fogja rzkelni, hogy kapcsolatot keresnek vele, m a beszlgets csupn a fogad Dinamikus Pajzsnak lebomlsa utn jhet ltre.\n\n        A Teleptia mindig csak annak a -alkalmaznak kerl p-ba, aki a gondolati kzlst kezdemnyezte.\n        `\n    },\n    {\n        name: 'Testhmrsklet n/cs',\n        pont: '1/5 C',\n        misc: {\n            me: 'M',\n            idotartam: '1 ra',\n        },\n        varazslasIdeje: '6 kr',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `A diszciplna alkalmazja kpes sajt - mesterfokon ms testnek hmrsklett nvelni vagy cskkenteni. gy lehetsge  nylik a vizes ruht megszrtani magn, vagy egy lngol hzbl  kimeneklni gsi srlsek nlkl. Minden felhasznlt p 5 fokkal  kpes megvltoztatni a testhmrskletet.\n        \n        Az tven fok fl nvelt testh hat kr mltn julst eredmnyez,  hosszabb tvon halllal jr. A hsz fokra cskkentett hmrsklet  Tetszhallhoz vezet - ilyen formn mg egy felkszletlen szervezet  is kpes letben maradni nhny hnapig -, a hsz fok al  cskkentett testk maradand egszsgkrosodssal jr, mg a  negyedrt meghalad t fok alatti llapot visszafordthatatlan  folyamatt vlik, s az ldozat meghal.\n\n        A diszciplna lehetsget ad arra, hogy 1p-rt 5 fokkal eltr  hmrskletet 1 rig fenntartsa, 2p-rt az 5 fokos befolysolst  2 rig, vagy a 10 fokos vltoztatst 1 rn keresztl biztostsa,  stb.\n        `\n    },\n    {\n        name: 'Pszi-lks',\n        pont: '1/1 kg',\n        varazslasIdeje: '1 szegmens',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `\n        Ms nevn Energialks. A mgihoz legkzelebb ll, alapvet  diszciplna. Hasznlata sorn a -alkalmaz kis mennyisg mgikus  energit gyjt magba, m mivel trolsra nem kszti fel a  mdszer, azonnal ki is ramlik belle. A -lks irnythat, gyenge szl fuvallat formjban nyilvnul meg. Taszt ereje felhasznlt  p-onknt 1 kg. Aprbb dolgok felbortsra, arrb lksre  szoktk hasznlni, olykor-kell ervel alkalmazva - trgyak vagy emberek egyenslyi helyzett lehet megszntetni  vele.\n        `\n    },\n    {\n        name: 'Pszi-ostrom',\n        pont: 'min 1',\n        varazslasIdeje: '1 szegmens',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `\n        A tudat vdelmre felptett -pajzsok megsemmistsre szolgl  diszciplna, mely csak mesterfokon alkalmazhat. Kt klnbz  tpusa ltezik: a -rombols s -bonts.\n        \n        A -rombolssal a Statikus Pajzsokat lehet megszntetni. A  Statikus Pajzsok nem bonthatak p-onknt - egyszerre kell  lerombolni ket. Ez a kvetkezkpp trtnik:\n        \n        A diszciplna alkalmazja meghatrozza, hogy a -rombolshoz  hny p-ot kivn felhasznlni. Ennyi lesz a Rombols erstse.  Ha ez nagyobb (egyenl), mint a Statikus Pajzs erstse, akkor a  Statikus Pajzs megsznik, s a pajzshoz felhasznlt energia semmiv  vlik. Amennyiben a -rombolshoz valaki kevesebb p-ot hasznl,  mint amennyibl a Statikus Pajzsot felptettk (legyen az asztrlis  vagy mentlis), akkor a pajzs teljes erstssel megmarad, mg a  Rombolshoz felhasznlt p-ok elvesznek. A -rombols nem rt  a Dinamikus Pajzsoknak.\n        \n        A Dinamikus Pajzsok kiiktatsra a -bonts szolgl.  Segtsgvel akr p-onknt is bonthat a Dinamikus Pajzs.  Ilyenkor a Bontshoz felhasznlt p-ok mennyisgvel megegyez p bomlik le a Dinamikus Pajzsbl. -bontssal nem  tmadhat a Statikus Pajzs.\n        \n        Egy 10 p erssg Statikus Pajzs, csak egy, legalbb 10 p  erssg (vagy nagyobb) -rombolssal semmisthet meg.  Ekkor a pajzs viselje (a pajzs ptshez felhasznlt, m az  aktulis p-jaiba nem beleszmt) s a Rombols alkalmazja  (a Rombolshoz felhasznlt) p-jalt is elveszti. Ha a -rom\n        \n        bolshoz kevesebb, mint 10 p-ot hasznltak, a Statikus Pajzs  teljes erstssel megmarad, mg a Rombolshoz ignybe vett  p-ok elvesznek.\n        \n        Egy l0 p nagysg Dinamikus Pajzs lebonthat 1, 2 vagy 3  p-onknt, de Felhasznltat egyszerre 10 vagy tbb p is. A Dinamikus Pajzs mindig elveszt annyit az erssgbl, ahny  p erssg a Bonts. Persze, ha mr nincs pajzs, a Rombolshoz  vagy Bontshoz felhasznlt p-ok elvesznek, hiszen ugyangy  levondnak az aktulis p szmbl, mintha lett volna pajzs.\n        \n        A  alapfok alkalmazi nem rzkelik, ha egy elmt pajzsok  vdenek. Mesterfokon mr gyenge (p-ot nem ignyl) koncentrcival megllapthat, ha a tudatot vezi valamifle vdelem. Azt azonban, hogy Statikus vagy Dinamikus Pajzsok  mkdnek, csak a Kyr metdus alkalmazi tudhatjk (lsd Kyr  Diszciplnk, Aurarzkels).\n        \n        A -ostrom folytatja kvetkeztethet a pajzsok tpusaira, hiszen  pontosan rzkeli, ha az Ostrom valamely fajtja sikerrel jr, vagy  ha a felhasznlt energik nem tkznek ellenllsba.        \n        `\n    },\n    {\n        name: 'Pszi-pajzs, Dinamikus',\n        pont: 'min 1',\n        misc: {\n            idotartam: 'lsd a lerst'\n        },\n        varazslasIdeje: '30 kr',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `\n        A Statikus Pajzsokra pthet egyetlen jabb vdelmi rteg,  az gynevezett Dinamikus Pajzs. A 30 krig tart meditci utn  a Dinamikus Pajzs megmarad mindaddig, amg az alkalmaz  meg nem sznteti, vagy -ostrommal le nem bontjk. Felptse utn - ellenttben a Statikus Pajzzsal - brmikor tovbbi p-ok  adhatak hozz (azaz ersthet), vagy vonhatak el belle. Ez  minden alkalommal 1 krig tart, rvid, meditatv koncentrcit  ignyel. Erssge minden esetben megegyezik az ppen benne  trolt p-ok mennyisgvel, m az aktulis p-ok szmnl  sosem lehet tbb. A Dinamikus Pajzsokban tartott p-ok  beleszmtanak a karakter aktulis p-jaiba, azaz az asztrlis  s mentlis Dinamikus Pajzsban mkd p-ok s a diszciplnkra  Felhasznlhat pontok sszessge a Karakter max. p-ja.\n\n        Fenntartsa folytonos, gyenge koncentrcit ignyel, amire a  -alkalmaz szinte brmely esetben kpes - kivve, ha alszik,  eszmletlen, vagy brmely egyb okbl ntudatlan. Ha az elmt  valamilyen ers sokk ri, akrcsak egy pillanatra is, vagy a tudatot  megbntjk, a Dinamikus Pajzs rgtn lebomlik.\n\n        A Dinamikus Pajzsnak ppen gy kt formja ltezik, mint  a Statikusnak (asztrlis s mentlis), s erssge is ppen gy  addik hozz a ME-hoz. Elnye a Statikus Pajzshoz kpest,  hogy a benne trolt -energia brmikor hozzfrhet, s felhasznlhat egyb diszciplnk alkalmazshoz vagy -ostrom  folytatshoz. Htrnya, hogy a Dinamikus Pajzs lebontsval  a tmad nem csak kzelebb jutott az elmhez, hanem az  alkalmazt, a diszciplnkra felhasznlhat p-jai nagyrsztl  (a Dinamikus Pajzsban troltaktl) is megfosztotta.\n\n        Dinamikus Pajzs ms elmje kr nem pthet.\n        `\n    },\n    {\n        name: 'Pszi-pajzs, Statikus',\n        pont: 'min 1',\n        misc: {\n            idotartam: 'lsd a lerst'\n        },\n        varazslasIdeje: '90 kr',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `\n        A  pajzsok hivatottak megvdeni az  elmt a mgikus s Pszi befolysok ellen. A  alkalmaz agyi energiibl erteret pt tudata kr, melyen a tudati tmadsok  fennakadhatnak. A Statikus Prajzs egyfajta  lland vdelem, ami mindaddig vja a  tudatot, amg azt az alkalmaz meg nem  sznteti, vagy valaki le nem Rombolja.\n\n        A Statikus Pajzs erssge annyi, ahny  p-bl ptettk. Gyakorlati hatsa abban nyilvnul meg, hogy a pajzs erssgt  hozzadjuk a Tudatalatti Mgiaellenl lshoz s gy dobjuk az ME-t. Kt klnbz tpus Statikus  Pajzs ltezik: asztrlis s mentlis. Az Asztrlis Pajzs az asztrlis  tmadsok ME-hoz addik hozz, mg a Mentlis Pajzs a mentlis  ME-hoz.\n\n        A Statikus Pajzs, miutn felplt, tbb nem befolysolhat: p-okot sem elvonni, sem hozzadni nem lehetsges.  Vd hatst akkor is kifejti, ha a -alkalmaz alszik, eszmletlen, vagy brmely egyb okbl ntudatlan, hiszen immr  az elmtl fggetlenl mkdik. Lebontani is csak jabb  kilencven krn t tart meditcival lehet vagy -ostrommal  (lsd ltalnos Diszciplnk, -ostrom).\n\n        A Statikus Pajzshoz felhasznlt p-ok a ksbbiekben nem  szmtanak bele az aktulis p-ok szmba. Ez azt jelenti, hogy  az alkalmaz megteheti, hogy egy bks napon az sszes p-jt  Statikus Pajzsok emelsre fordtja, majd pihens utn ismt  maximlis p-jaira tmaszkodhat - noha tudatt mr vdik) a  Statikus Pajzsfok). Minden elme kr legfeljebb egy asztrlis s egy  mentlis Statikus Pajzs pthet.\n\n        Statikus -pajzs, mesterfok alkalmazssal brki elmje kr  (nemcsak ember, de llekkel rendelkez llat) pthet, m a  ms elme kr ptett pajzs, akrki ptette is (harcmvsz,  kardmvsz vagy varzsl), brki ltal alkalmazott -ostrommal  lerombolhat.\n`\n    },\n    {\n        name: 'Membrn',\n        pont: '10',\n        misc: {\n            idotartam: 'vgleges'\n        },\n        varazslasIdeje: '5 perc',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `\n        A membrn a Statikus -pajzs egy vltozata. ppgy krbevehet vele az elme, mkdtetsre tbb nem kell -pontot ldozni, s lerombolni is csak ahhoz hasonlan, -ostrommal lehet.\n\n        A Membrn nem vdi az elmt, hanem figyelmezteti a r irnyul passzv -tevkenysgre. A membrn felptje megrzi, ha huzamosabb ideig figyelik, s azt is meg tudja hatrozni, merrl. Azonnal tudomsra jut, ha Asztrl vagy Mentl Szemmel rpillantanak. Termszetesen akkor is nyomban riaszt, ha asztrl vagy mentl varzslattal prblnak hatni a viseljre. Ha a -hasznl nem a sajt, hanem ms elmjt vezi Membrnnal, brmilyen tvol tartzkodjk is, tudomsra jut, ha a viselre a fent emltett mgikus mdszerekkel hatnak.\n\n        A membrn magtl soha nem vsz el, csak felptje kpes lebontani, vagy 10 E erssg -ostrom.\n`\n    },\n    {\n        name: 'Csettints',\n        pont: 'lsd a lersban',\n        misc: {\n            idotartam: 'egyszeri'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `\n        A diszciplina alapvet kpessge minden -hasznlnak. Oly kevs mentlis energia hasznldik el alkalmazsakor, hogy -pontban nem mrhet, ezrt a Csettintsre nem kell -pontot ldozni. Egyszerre egyvalakivel szemben hasznlhat, mindssze annyi trtnik, hogy az illet tudomst szerez a diszciplina alkalmazjrl. A hats hasonl ahhoz, mint amikor egy csendes teremben valaki csettint. A \"csettintst\" csak a kiszemelt \"ldozat\" hallja, nem tudja, kitl szrmazik, de tudja, milyen irnyban keresse t. Tapasztalatlan emberek els reakcija felttlenl az, hogy az alkalmaz irnyba, netn rpillantanak.\n        A Csettints csak azzal szemben hasznlhat, akit az alkalmaz lt.\n`\n    },\n    {\n        name: 'sszpontosts',\n        pont: '1/-hasznlati szint',\n        misc: {\n            idotartam: '1 kr'\n        },\n        varazslasIdeje: '2 szegmens',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `\n        A diszciplina legtbb 1 kr idtartamig egyetlen adott feladat megoldsra elegend misztikus, bels ervel ruhzza fel alkalmazjt. Az illet ezltal kpes lesz olyan prbattelek sikeres vgrehajtsra, melyekre egybknt lmban sem lenne alkalmas. 1 -pont felhasznlsval +1-gyel, szzalkos prba esetn +5%-kal nvelheti az eslyeit. Egyszerre legtbb annyi -pontot kpes felhasznlni ilyen clra, amennyi a -hasznlati Szintje.\n\n        Mivel az 1 teljes krig tart sszpontosts utn az els tevkenysg maga a prbattel kell legyen, a diszciplina aligha hasznlhat kzelharcban. Annl inkbb lesbl leadott, clzott lvsben (+5 C/-pont azaz -hasznlati Szint).\n\n        A diszciplina klnlegessge, hogy egyes -t nem ismer jszok is alkalmazzk, esetkben -pont felhasznlsa nlkl, +5 C/Tapasztalati Szint mrtkben.\n`\n    },\n    {\n        name: 'Abszolt Lts',\n        pont: '8',\n        misc: {\n            idotartam: 'vgleges'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `\n        A diszciplina alkalmazja nem anyagi testnek tkletlen ltszervn, a szemen keresztl lt, hanem sokkal kifinomultabb lelki szemt hasznlja. Ezltal egyszerre nem csak egy irnyba nzhet, hanem teljes krben - jobbra, balra, elre, htra, fel s le - lt egyidejleg; mi tbb, mindent lesen, hisz nem szksges szemt a krdses tvolsgra fkuszlnia.\n\n        Az Abszolt lts egyetlen htrnya a rvid lttvolsg: csak 20 mter sugar krn bell hasznlhat, azon tl minden teljes sttbe borul. Az rintett terleten azonban tkletesek a ltsi viszonyok, fggetlenl a fnyviszonyoktl - azaz teljes sttsgben is minden lthat. Az Abszolt ltssal sem pillanthatak meg ellenben a lthatatlan trgyak, a rejtz emberek vagy takarsban lv dolgok; ahogyan a mgikus sttsg is gtat szab hasznlatnak.\n\n        Htultje is akad: az rintett terleten bell a Szimblumok, a Mgikus tekintet - s az sszes ltson alapul mgikus befolys - azonnal kifejti hatst az alkalmazra.\n\n        Az Abszolt lts megrtshez elvont gondolkods szksges, hiszen nehz felfogni a fkuszls nlkli teljes krv ltst a szzhsz fokos lttrhez szokott emberi elmnek. ppen ezrt - az tlls miatt- ignyel sok mentlis energit (Pszi-pontot) a diszciplina alkalmazsa.\n\n        Maga az Abszolt lts - a norml ltshoz hasonlan - nem ignyel Pszi-pontot, csak az tlls: a lelki szemre val tkapcsols. Azaz az Abszolt lts brmeddig hasznlhat, mg csak alkalmazja vissza nem kvn trni a szokvnyos mdszerhez; ekkor jra a diszciplinhoz knytelen fordulni, hogy norml ltst visszanyerje.\n\n        Az Abszolt lts sorn a szem a semmibe rved, a szembjak gyakorta le is csukdnak, gy a hirtelen felvillan les fny - legyen br mgikus - sem tehet krt az alkalmaz ltsban.\n\n        Az Abszolt lts diszciplina magas mentlis felkszltset ignyel, ezrt - dacra annak, hogy az alkalmaz nmagra vonatkoztatva hasznlja - alkalmazsa Mesterfok Pszi kpzettsget ignyel. Mivel az Abszolt ltsban a szem nem jtszik szerepet, a diszciplint vakok s bekttt szemek is alkalmazhatjk. Harcban megsznteti a htulrl vagy flhtulrl tmadk elnyeit, s gy kizrlag a \"Harc tbb ellenfl ellen\" mdosti rvnyeslnek.\n`\n    },\n    {\n        name: 'Szinesztzia',\n        pont: 'lsd a lersban',\n        misc: {\n            idotartam: 'egyszeri'\n        },\n        varazslasIdeje: '2 szegmens',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `\n        A diszciplina alkalmazja kpes rzkkzpontjban a ltshoz kapcsolni a ms rzkszervein keresztl szlelt ingereket. Ily mdon sznes fnynyalbok formjban megpillanthatja a hangokat s a szagokat, s knnyszerrel felismerheti forrsukat. Varzslk a Szinesztzia ltal a leplezetlen mgit is megpillantjk, mivel az dereng auraknt vilgt a mgikus trgy, szemly, hely krl. Hatodik rzkkel egytt alkalmazva a diszciplina hasonl aurval leplezi le az alkalmazjt veszlyeztet trgyat, ill. szemlyt.\n\n        Nem szksgszer, hogy ppen a lts legyen a kedvezmnyezett rzkszerv, ez csak az emberi s hozz hasonl fajok esetben termszetes, mivel k leginkbb a ltsukra hagyatkoznak. Elviekben ms rzkszerv hasznlata is elkpzelhet, br ezt - gy tudni - egyetlen pszi-mester sem oktatja s ismeri.\n\n        A Szinesztzia alkalmazsakor minden rzkszerv ingerei ms sznben s erssgktl fggen egyre vilgosabb rnyalatban (egyre nagyobb fnyervel) jelennek meg. ltalnosan a kvetkez sznek hasznlatosak.\n\n        <table>\n            <tr>\n                <td>rzkszerv</td>\n                <td>Szn</td>\n                <td>-pont</td>\n            </tr>\n            <tr>\n                <td>halls</td>\n                <td>srga</td>\n                <td>1</td>\n            </tr>\n            <tr>\n                <td>szagls</td>\n                <td>zld</td>\n                <td>1</td>\n            </tr>\n            <tr>\n                <td>mgia</td>\n                <td>kk</td>\n                <td>2</td>\n            </tr>\n            <tr>\n                <td>hatodik rzk</td>\n                <td>vrs</td>\n                <td>3</td>\n            </tr>\n        </table>\n\n        A -pont rovat megmutatja, mennyi Pszi energit emszt fel az adott rzkszerv ltshoz kapcsolsa 1 krre. Tbb rzk egyttes tkapcsolsakor az rtkek sszeaddnak, az idtartam nvelsekor pedig krnknt tbbszrzdnek.\n`\n    },\n    {\n        name: 'rzk-tisztts',\n        pont: '1/rzkszerv',\n        misc: {\n            idotartam: 'vgleges'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['pszi', 'pszi-pyarroni'],\n        description: `\n        A diszciplina alkalmazja 1 -pontrt megtisztthatja egyik rzkszervt, melyet a korbbi nagy erej ingerek eltomptottak. Verfnyrl a barlang sttjbe lpve azonnal \"hozzszoktatja\" szemt a megvltozott fnyviszonyokhoz; a flsrt ricsajt kvet csendben is kifinomultan hallgatzhat; egyetlen rpke pillanat alatt szmzheti orrbl a korbbi bz vagy illatfelh szaglst bnt uthatsait.\n`\n    },\n\n]\n\nexport const PSZI_SLAN: Array<Varazslat> = [\n    {\n        name: 'Aranyharang',\n        pont: '1/1 SFE',\n        misc: {\n            idotartam: '2 kr'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['pszi', 'pszi-slan'],\n        description: `\n        A tudat test feletti tkletes uralma nyilvnul meg ebben a  diszciplinban. Segtsgvel az alkalmaz kpess vlik testt  l pncll alaktani. Ezt izomzata trendezsvel, s -energinak  ers kisugrzsval ri el. Az Aranyharang ppen olyan Sebzs  Felfog rtket ad alkalmazjnak, mint brmilyen pncl - az gy  nyert SF megegyezik a felhasznlt p-ok szmval. A diszciplna  az egyik legnehezebben elsajtthat s legveszedelmesebb alkalmazsi mdszer. ppen ezrt az alkalmaz nem hasznlhatja  korltlanul: maximlis mrtke megegyezik az alkalmaz Tapasztalati  Szintjvel. Ez a gyakorlatban azt jelenti, hogy az Aranyharang  SF-je sosem lehet nagyobb a diszciplnt hasznl Tapasztalati  Szintjnl (azaz egy 4. szint Slan legfeljebb 4-es SF-j  Aranyharangot kpes csinlni).\n        \n        1 p-rt 1-es SF nyerhet 2 krre, 2 p-rt 2-es SF 2 krre,  vagy 1-es SF 4 krre, stb.`\n    },\n    {\n        name: 'Bels id',\n        pont: '10',\n        misc: {\n            idotartam: '1 szegmens'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['pszi', 'pszi-slan'],\n        description: `\n        A Slan Pszi mentlis alkalmazsnak tklyre vitele. A diszciplna  alkalmazja kpes sajt bels idejt annyira lelasstani, hogy minden  - a valsgban -1 szegmensnyi idt egy teljes krnek rzkel. Ez  lehetsget nyjt az alkalmaznak, hogy az esemnyeket jobban  vgiggondolva mrlegeljen, s hogy az eltelt vals id helyett a sajt  bels ideje szerint alkalmazzon  diszciplnkat. Mindemellett a  Slan-t Bels Ideje nemcsak a gondolati folyamatokat gyorstja fel,  hanem a diszciplna hasznljnak testt is, gy az alkalmaznak  minden szempontbl egy teljes kre van cselekedni-akr harcolni is  -, mg a klvilg szmra csupn 1 szegmens telik el.\n        \n        A kls szemll rzkei szinte kvethetetlen gyorsasgnak  talljk a diszciplna alkalmazjt- az Idtartam alatt a Kezdemnyezs  minden esetben a Bels Idvel felgyorstott Slant illeti meg. A  hasznlat sorn az alkalmaz kpes kitrni a mgikus lvedkek  ell, a rltt nylvesszket akr puszta kzzel is megfoghatja, s  lehetetlen meglepetsszer tmadst intzni ellene.\n        \n        10 p felhasznlsval a vals id 1 szegmense lassthat le,  20 p-rt mr kt szegmens, stb.        `\n    },\n    {\n        name: 'Chi-harc',\n        pont: '1/kr',\n        misc: {\n            idotartam: 'lsd a lerst'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['pszi', 'pszi-slan'],\n        description: `\n        A Chi-harc nem ms, mint a harc- vagy kardmvsz azon  tudsa, mely segtsgvel a bels energiit harc kzben a teste  szolglatba llthatja. Ettl lesz tbb minden egyb pusztakezes verekednl s fegyverhasznlnl - ez a harc mvszete.  Az alkalmazs kzben mozdulatai csiszoltabb, pontosabb  vlnak, sajt bels ideje lelassul. tseiben nemcsak izomzatnak  ereje s testnek slya nyilvnul meg, hanem felszabadtott  tudati energii is. A harcmvsz puszta keze - ha gy kvnja  - a leglesebb karddal lesz egyenrtk, vagy buzognyknt  zz. A kardmvsz eggy vlik fegyvervel, mintegy sajt  vgtajaknt rzkeli azt.\n        \n        A Chi-harc folyamn nem lehet meglepni az alkalmazt, s  lehetetlen olyan mdon harcolni, hogy az ellenfl csak rtalmatlann  vljon (lsd Harc, Harc az ellenfl rtalmatlann ttelrte. Hasznlat  sorn az alkalmaz vonsai sszpontostsrl rulkodnak, arca  kifejezstelen kmaszknak hat, tekintete maga el mered, hiszen  nem csak a szemre, hanem rzkeinek egyttesre hagyatkozik.  Mondjk, a Slan-ek az effajta llapotot a Srkny bredsnek  nevezik.\n        \n        A Chi-harc hatkonysgt az albbi tblzat mutatja.\n\n        <table>\n            <tr>\n                <td>TSz</td>\n                <td>Tm/kr</td>\n                <td>Idtartam</td>\n                <td>T,V</td>\n                <td>K</td>\n                <td>Sp</td>\n            </tr>\n            <tr>\n<td>1.</td>\n<td>1</td>\n<td>1 kr</td>\n<td>+10</td>\n<td>+2</td>\n<td>+1</td>\n            </tr>\n            <tr>\n<td>3.</td>\n<td>2</td>\n<td>1 kr</td>\n<td>+15</td>\n<td>+4</td>\n<td>+3</td>\n            </tr>\n            <tr>\n<td>5.</td>\n<td>3</td>\n<td>2 kr</td>\n<td>+20</td>\n<td>+6</td>\n<td>+5</td>\n            </tr>\n            <tr>\n<td>7.</td>\n<td>4</td>\n<td>2 kr</td>\n<td>+25</td>\n<td>+8</td>\n<td>+7</td>\n            </tr>\n            <tr>\n<td>9.</td>\n<td>5</td>\n<td>3 kr</td>\n<td>+30</td>\n<td>+10</td>\n<td>+9</td>\n            </tr>\n            <tr>\n<td>11.</td>\n<td>6</td>\n<td>Korltlan</td>\n<td>+50</td>\n<td>+12</td>\n<td>+11</td>\n                        </tr>\n        </table>\n\n        Minden tovbbi Tapasztalati Szinten a Sebzs + 1-gyel n, azaz 1-2. szinten 1 p felhasznlsval a diszciplna alkalmazja  1 krig kpes a Chi-harcra; miltal Tmad rtke, Vd rtke 10zel nvekszik, Kezdemnyez rtkhez +2 addik, mg sebzshez  + 1. Tovbbi p-ok rldozsval csak az Idtartamot lehet  elnyjtani, a T, V, K s a Sebzs nem nvelhet. Ezen rtkek  csak a tblzatban feltntetett mrtkben vltoznak.        \n        `\n    },\n    {\n        name: 'rzkelhetetlensg',\n        pont: '8',\n        misc: {\n            idotartam: '1 kr'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['pszi', 'pszi-slan'],\n        description: `\n        A diszciplna alkalmazja mozdulatlann dermedve kpes  rzkelhetetlenn vlni. Ebben az llapotban mg a leglesebb rzkszervek (pl.: lts,  halls, szagls, stb.) szmra sem fedezhet fel, s  kikerl a Hatodik rzk hatsugarbl is. Az rzkelhetetlensg folyamn  semmilyen tevkenysg (mozgs, harc, -alkalmazs, vagy kommunikci) nem vgezhet.\n\n        A Kyr metdus Aurarzkelse eltt is rejtve marad, csupn  olyan Lthatatlansgi szlelssel fedezhet fel, mely legalbb 4-es  ersits.\n\n        Nyolc p felhasznlsval 1 krig alkalmazhat a diszciplna,  16p-rt 2 krig, stb.\n    `\n    },\n    {\n        name: 'Hallos ujj',\n        pont: '3/1 P',\n        misc: {\n            idotartam: '24 ra'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['pszi', 'pszi-slan'],\n        description: `\n        A Pszi energik koncentrlt, rombol kisugrzsnak mdszere Yadegori Chunin nevhez fzdik. Yadegori ellenttben a  hresztelsekkel kardmvsz volt, noha a pusztakezes harcmvszet nagymestereknt tartjk szmon. Ennek oka, hogy  kzel tz vet tlttt az Oltalmaz Keleti Szl kolostorban,  ahol Enoszukrl magval hozott tudst tantotta a szerzeteseknek. Hamar hress vlt, s elterjedt rla, hogy egyetlen  rintsvel kpes lni. A Gymntok vnek nyolcadik havban  Yi Chien Mu csszri herceg, mig ismeretlen okbl prviadalra  hvta ki. Yadegori tbbszr visszautastotta a kihvst, m egy  zben a herceg meditci kzben zavarta meg, s tiszteletlensgvel addig provoklta, mg az enoszukei mester- anlkl,  hogy egy szt szlt volna - odalpett a herceghez s mutatujjval megbkte. Yi Chien Mu azonnal kiszenvedett. Az  esetnek hamar hre ment, gy Yadegori knytelen volt meneklni.  Azonban mieltt elhagyta volna a kolostort, megtantotta a  rendfnkt arra a diszciplnra, melynek segtsgvel meglte  a csszri herceget. A Hallos ujjat - nevezik Yadegori rintsnek  is - sokig titkos tantsknt kezeltk, csak nem rg jutott el  Tiadlanba, ahol is a legtbb Slan iskola tvette s tantani  kezdte. \n\n        A diszciplnt a legveszlyesebb -alkalmazsnak tarjk.  Hasznlatval idztett bels srlsek okozhatk. Az alkalmaznak meg kell rinteni valamelyik mutatujjval ellenfelt. Ez  harci szituciban sikeres tmadst ignyel. Az okozott srls  az alkalmaz akarata szerinti - de huszonngy rn bell es idpontban keletkezik, gygytsa nem lehetsges. A disziplna  minden esetben p vesztesget okoz, s a pnclok Sebzs Felfog  rtke nem vondik le belle, st az Aranyharang sem jelent  vdelmet hatsa ellen.\n\n        Nehzsge okn nem alkalmazhat korltlanul: minden  Tapasztalati Szinten csak 1 p srls okozhat, mely 3 p  felhasznlsba kerl. Msodik TSz-en mr 6 p rldozsval 2  p vesztesg rhet el, stb.\n            `\n    },\n    {\n        name: 'Jelentktelensg',\n        pont: '6',\n        misc: {\n            idotartam: '1 kr'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['pszi', 'pszi-slan'],\n        description: `\n        A Slan-ek letk nagy rszt- mg ki nem kerlnek a kolostorbl vagy iskolbl - csndes nmagukba zrkzssal, nyugalmas  elmlyedssel tltik. A szinte szrevtlen jelenlt, httrbe hzd  viselkeds az effajta letmd egyik alapkvetelmnye. Mindezt tklyre  fejlesztve, s a -energikat is segtsgl hvva, a Slan-t alkalmazi  elrtk, hogy a teljes jelentktelensg aurjba burkolzhassanak.\n        \n        A diszciplna hasznlatakor az alkalmaz nem tnik fel a  legberebb rnek, a legfigyelmesebb szemlldnek sem. A rirnytott tekintet lesiklik rla, jelentktelen, figyelmet nem rdeml  senkinek hat. A tudatos rzkelsek persze felfedezik (Aurarzkels, Lthatatlansg rzkels, Hatodik rzk) s leleplezdik  akkor is, ha a figyelmes szemll sikeres Intelligencia Prbt  dob. Ha azonban az alkalmaz mr elhagyta a helysznt - ahol  a diszciplna segtsgvel sikerlt szrevtlennek maradnia - hiba  jrt le a jelentktelensg idtartama, nem bred gyan senkiben.\n        \n        Kznsges pldja ennek, ha az alkalmaz gy kvn hallos  ellensgeinek tborn vgighaladni - esetleg kikmlelni azt -,  hogy jrsa-kelse szrevtlen maradjon. Ilyenkor a diszciplna  segtsgvel jelentktelenn vlik, s az rk meg a tborlakk sikeres Intelligencia Prba, vagy tudatos rzkels hjn - nem  figyelnek fl r: maguk kz tartoznak tekintik. Miutn a tbort  elhagyta, senkinek sem jut eszbe, hogy idegen jrt kzttk.  Tvozsa ppgy jelentsg nlkl val, mint jelenlte. A diszciplna  alkalmazsa kzben szlni, beszdbe elegyedni nem lehet - ez  azonnali leleplezdssel jr -, mikppen a harcba bocstkozs is  megsznteti a jelentktelensget.\n        \n        A diszciplna rtelmetlen alkalmazsa szintn balul thet ki:  magnyos emberhez odamenni, vagy hegyi risok falujba  bestlni - azaz brmi olyat tenni, amikor nincs md a krnyezetben  tartzkodkkal val azonosulsra - nem vezethet sikerhez.\n        \n        A Jelentktelensg 6 p-rt 1 krig tarthat fenn, 12 p-rt 2  krig, stb.            \n        `\n    },\n    {\n        name: 'Levitci',\n        pont: '1',\n        misc: {\n            idotartam: '1 ra'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['pszi', 'pszi-slan'],\n        description: `\n        Meglehetsen kevs gyakorlati alkalmazhatsggal br  diszciplna, m a Slanek szertartsainak elengedhetetlen kellke.  Az emberi test slynak teljes lekzdsre szolgl, alkalmazsval fld feletti lebegsre nylik md. 1 p felhasznlsval 1  rn keresztl lehet I mter magassgban lebegni, 2 p-rt mr  kt rn keresztl tarthat fenn a diszciplna hatsa. A Levitci  magassga nem nvelhet, m az alkalmaz brmekkora slyamennyiben a teste korltai elbrjk- felemelsre kpes. A diszciplna  hasznlata kzben a Slan teste sebezhetetlenn vlik brmely nem mgikus - fegyverrel szemben. A diszciplna folyamatos  koncentrcit ignyel, kzben fizikai tmads, egyb diszciplna  vagy varzslat hasznlata nem lehetsges.\n        `\n    },\n    {\n        name: 'Statikus -pajzs',\n        pont: 'min 1',\n        misc: {\n            idotartam: 'lsd a lerst'\n        },\n        varazslasIdeje: '90 kr',\n        labels: ['pszi', 'pszi-slan'],\n        description: `\n        A Slan-t alkalmazi ltal gerjesztett Statikus Pajzs felptsben  gykeresen klnbzik a Pyarroni mdszer segtsgvel ltrehozottl, m mkdsben s alkalmazsban teljesen megegyezik  azzal. A pontos lerst lsd az ltalnos Diszciplnk, Statikus pajzs diszciplna trgyalsnl.\n        \n        A valdi klnbsg a vgeredmnyben mutatkozik meg: a Slan t Statikus -pajzst senki nem kpes lerombolni, csak maga az  alkalmaz szntetheti meg s ptheti jra. Effle pajzsot a Slan  csak sajt elmje kr kpes felhzni.\n        `\n    },\n    {\n        name: 'Testsly vltoztats',\n        pont: 'lsd a lerst',\n        misc: {\n            idotartam: '3 kr'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['pszi', 'pszi-slan'],\n        description: `\n        A diszciplna hasznlatval a -alkalmaz kpes sajt testslyt megnvelni, avagy lecskkenteni. Ezltal kpess vlik tbb  emelet magasra felugrani, a havon futni anlkl, hogy mly nyomot  hagyna, esetleg gyorsabban szni. A diszciplnval nem vltoztathat  meg az alkalmaz ltal hordott vagy viselt trgyak slya.\n        \n        Az albbi tblzatbl kiderl, hogy a testsly klnbz mrtk megvltoztatsa mennyi p-ba kerl. A felhasznlt p-ok  nvelsvel a diszciplna Idtartama is meghosszabbthat.        \n        \n        <table>\n        <tr>\n            <td colspan=\"9\">\n            +/- mdosts az eredethez kpest            \n            </td>\n        </tr>\n           <tr>\n<td>Sly</td>\n<td>1 kg</td>\n<td>3 kg</td>\n<td>5 kg</td>\n<td>9 kg</td>\n<td>13 kg</td>\n<td>31 kg</td>\n<td>2x kg</td>\n<td>3x kg</td>\n           </tr>\n           <tr>\n<td>p</td>\n<td>1</td>\n<td>2</td>\n<td>4</td>\n<td>7</td>\n<td>10</td>\n<td>20</td>\n<td>30</td>\n<td>35</td>\n           </tr>\n        </table>\n        \n        Hromszorosnl jobban nvelni, vagy harmadnl kevesebbre  cskkenteni a testslyt brmennyi p rldozsval sem lehet.\n        `\n    },\n    {\n        name: 'Tetszhall',\n        pont: '6',\n        misc: {\n            idotartam: '1 ra'\n        },\n        varazslasIdeje: '10 kr',\n        labels: ['pszi', 'pszi-slan'],\n        description: `\n        Az alkalmazs segtsgvel lehetsg nylik a test lettani folyamatainak  felfggesztsre. Ilyenkor az alkalmaz  semmifle letjelet nem ad, nincs szksge  tpllkra vagy folyadkra, de mg levegre  sem. Mozdulatlann vlik-olyan ez, akr  a hall dermedtsge - s kihl, a tudati  Folyamatok megsznnek, gy lebomlik a  Dinamikus Pszi-pajzs, csupn a Statikus  marad meg. Ezzel szemben az Asztrl- s  a Mentltest nem alszik, gy az alkalmaz  tovbbra sem lehet alanya a Termszeti  Anyag Mgijnak. Az alkalmaznak elre  el kell dntenie a Tetszhall idtartamt,  mert nincs r md, hogy az idtartam  lejrta eltt flbeszaktsk a diszciplnt.  Tetszhall llapotban semmifle fjdalom (FP) nem okozhat, s a testet rt (P) srlsek felezdnek. Az  egyetlen olyan diszciplna ez, melynek alkalmazsa sorn  valban regenerldik a test. Minden Tetszhallban tlttt ra  alatt 1 P regenerldik - azaz gygyul magtl -, s 10 FP.  Maximuma fl sem az P, sem az FP nem emelkedhet. A  szervezetbe kerlt mrgek hatideje hromszorosra lassul,  radsul sebzsk is harmadoldik.\n\n        A Tetszhall felfedezsre csak a Kyr Metdus Aurarzkelsvel  lehetsges.\n\n        A p-ok megduplzsval az idtartam megktszerezdik,  triplzsval meghromszorozdik, stb.\n        `\n    },\n    {\n        name: 'Kilts',\n        pont: '5/tmads',\n        misc: {\n            idotartam: 'egysszeri'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['pszi', 'pszi-slan'],\n        description: `\n        A diszciplina segtsgvel a harcmvsz szellemi energijval tmadsnak erejt fokozhatja. A Kilts ksretben vgrehajtott tmads rombolerejt tekintve tkletes, Sebzsnek meghatrozsakor nincs szksg kockadobsra, minden esetben a lehetsges maximumot sebzi. Ez persze fgg a tmad fegyvertl, az alkalmaz Tapasztalati Szintjtl s mg sok egybtl.\n\n        A bels energikat elnyjtott kilts szabadtja fel - innen kapta nevt a diszciplina. Kilts hjn a vrt hats is elmarad. Mindig egyetlen tmadst befolysol, csak annak sebzst nveli. A felhasznlt -pont akkor is elveszik, ha a tmads sikertelen. A diszciplint a harcmvsz egy kr alatt legtbb annyiszor hasznlhatja, ahnyadik Tapasztalai Szint - termszetesen minden jabb \"megerstett\" tmads tovbbi 5 -pontba kerl.\n\n        A Kilts Chi-harcban is alkalmazhat.\n    `\n    },\n    {\n        name: 'Kitrs',\n        pont: '4/kr',\n        misc: {\n            idotartam: '1 kr'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['pszi', 'pszi-slan'],\n        description: `\n        A diszciplina alkalmazsakor a slan bels ritmus diktlta tncba kezd. Egyfajta intuitv rvlet ez, mely alatt elre ltja a rvr veszedelmeket, ezrt nagy biztonsggal kpes kitrni ellk. A Kitrs idtartama alatt a hajtott fegyverek s clzott lvedkek elmletileg nem tallhatjk el, a gyakorlatban a vletlen nha mst eredmnyez: a 00-s dobsok eredmnyesek ellene is. A diszciplint 2 -pontrt 1 krig kpes alkalmazni, s ez id alatt nem tmadhat, nem vgezhet ms -tevkenysget. Egy adott krben minden slan legtbb annyi lvedk ell kpes kitrni, amennyi a -hasznlati Szintje.\n        `\n    },\n\n]\n\nexport const PSZI_KYR: Array<Varazslat> = [\n    {\n        name: 'Energiagyjts',\n        pont: 'lsd a lersban',\n        varazslasIdeje: 'lsd a lersban',\n        labels: ['pszi', 'pszi-kyr'],\n        description: `\n        A Kyr metdus legalapvetbb diszciplnja, a varzslk  tudomnynak alapja. Segtsgvel a varzsl elmjbe gyjtheti  a vilgegyetemet that mgikus energit (Mana-pont), az  energit, melyhl a varzslatait ltrehozza. Termszetesen egyszerre maximum annyit, amennyit befogadni kpes. Errl a  mennyisgrl a Tapasztalati Szint fggvnyben a max. Manapont tudst. Az Energiagyjts leegyszerstve nem ms, mint a  -pontok Mana-pontokra vltsa - a vltszm az Energiagyjtsre alkalmazott mdszertl fgg. Itt csak a hrom alapvet mdszert  ismeretetjk: a Meditcis-formula, a Kivons s a Kisajtols.\n\n        A Meditcis Formula (1 p = 10 Mp) alkalmazshoz a  varzslnak Meditcis Varzskrben kell tartzkodnia (ennek  elksztse 18 Mana-pontba kerl s 30 percbe telik) s ott 1 ra  hosszan transzllapotban meditlnia (lsd Transz diszciplna).  Mr ebbl is ltszik, hogy ennl a mdszernl jelents elkszletekre van szksg, s a varzsl msfl ra hosszan helyhez  van ktve. Mgis, a varzslk, ha idejk s krlmnyeik engedik,  ehhez az energiagyjtsi mdszerhez folyamodnak, mert gy  juthatnak a legtbb mgikus energihoz (Mp) a legkevesebb pontrt.\n\n        Ha a meditci brmely okbl flbeszakad, az Energiagyjts  sikertelen lesz, s a felhasznlt -pontok is elvesznek. Mi tbb, a  varzsl elmjbl elillan a mr korbban begyjttt energia is,  azaz Mana-pontjainak szma nullra zuhan.\n\n        Ha az 1 rs meditci zavartalanul vget r, azzal a varzsl  sikerrel gyjttte elmjbe a kvnt mennyisg mgikus energit.  Tzszer annyi Mana-pontot kap, ahny -pontot a diszciplna  alkalmazssra fordtott; teht a Meditcis formula alkalmazsval 1 -pontrt l0 Mana-pont jr.\n\n        Kivonshoz (1 p = 3 Mp) a varzslk olyankor folyamodnak, ha kifogytak az elmjkben trolt energibl, s  srgsen utnptlsra van szksgk. A sietsgrt cserbe a  kisebb hatkonysggal fizetnek - a mdszer a -pontok  valsgos pazarlsa! Ellenben csak 2 krig tart, s sem Transz,  sem Meditcis Varzskr nem kell hozz; azaz semmifle  elkszletet nem ignyel, mindssze nmi sszpontostst.  Kzben a varzsl stlhat, lptethet a lovn, de nem harcolhat,  varzsolhat, s nem alkalmazhat ms diszciplnt.\n\n        A mdszer alkalmazsakor a varzsl kivonja krnyezetbl a  tbbletenergikat, mindenhonnan csak keveset s csak a felesleget  - nem rt senkinek s semminek. Kivonssal hromszor annyi  Mana-pontthoz jut, mint amennyit a diszciplnra ldozott; teht  1 -pontrt 3 Mana-pontot.\n        \n        A Kisajtols (1 p = 5 Mp) termszetbl fakadan feketemgia!  Alkalmazsakor a varzsl nem a felesleget vonja el a krnyezettl,  hanem kisajtt abbl annyi energit, amennyit csak kpes. A folyamat  eredmnyeknt a varzsl Znjban (20 m sugar gmb) a nvnyek  elszradnak (csak 20 Mp felett) s az llnyek knz fjdalmat  reznek egsz testkben. A fjdalom nem jr sebbel, de Fp-vesztst  okoz a varzsl Znjban tartozkod sszes lnynek. A vesztesg  minden megkezdett 20 Mp utn K6 Fp (pl: 20 Mp = K6 Fp; 25 Mp  = 2K6 Fp; 70 Mp = 4K6 Fp). Az ldozat ilymdon p-t soha nem  veszthet!\n\n        A Kisajtols 5 szegmens alatt elvgezhet, s tszr annyi Mpot eredmnyez, mint amennyit a varzsl a diszciplnra elhasznlt,  vagyis 1 -pontrt 5 Mp jr.\n\n        A lertak kivtelvel a Kisajtols mdszere teljesen azonos a  Kivonssal.\n        `\n    },\n    {\n        name: 'Transz',\n        pont: '1',\n        misc: {\n            idotartam: 'korltlan'\n        },\n        varazslasIdeje: '10 perc',\n        labels: ['pszi', 'pszi-kyr'],\n        description: `\n        A diszciplna segtsgvel a vgrehajt transzllapotba kerlhet.  Hogy ez megtrtnjk, tz percig mozdulatlan meditl, teljes  szellemisgvel a transz elrsre sszpontost. Ez id alatt nem vgezhet fizikai vagy szellemi tevkenysget, mozdulatlanul ll,  vagy l, netn fekszik.\n        \n        Transzban lass mozdulatokkal kpes mozogni, akr egy stl  lovat is meglni, vagy gyalogolni, mgikus jeleket rajzolni, beszlni,  rni; de nem kpes frge mozdulatokra, kzelharcra, a transztl  eltr sszpontostsra. Maga a vgrehajt brmikor visszatrhet  normlis tudatllapotba; ms azonban csak nehezen kpes  kizkkenteni. A transzban lev emberhez hiba beszlnek, rzzk,  ntik nyakon vzzel; a transz csak Fp vagy p vesztst okoz  zavars\" hatsra szakad flbe.\n        \n        A transzllapot felttlenl szksges egyes mgikus tanok  gyakorlsnl (pl: jelmgia), s a varzslk ilyenkor ezen diszciplnhoz  folyamodnak Egyetlen -pont felhasznlsval a vgrehajt korltian  idtartamra transzba kerlhet. Termszetesen lteznek ms  mdszerek is a transzllapot elrsre, mint pldul a koplals, a  kntls vagy a trzsi tnc- m ezek a javasasszonyok, boszorknyok,  smnok fegyvertrba tartoznak.\n        \n        Transzllapotban az ember testi funkcii lelassulnak, gy jval  (tszr) hosszabb idt kpes kibrni evs, ivs vagy levegvtel  nlkl.\n        `\n    },\n    {\n        name: 'Lthatatlansg szlelse',\n        pont: '5 (ersthet)',\n        misc: {\n            idotartam: '5 kr',\n            erosseg: '1'\n        },\n        varazslasIdeje: '2 szegmens',\n        labels: ['pszi', 'pszi-kyr'],\n        description: `\n        A diszciplna vgrehajtja t krn keresztl ltja a mgikusan  lthatatlann tett tgyakat s llnyeket. Termszetesen csak  azokat, melyeknl a diszciplna erssge meghaladja a lthatatlansg  Erssgt (E). Hasonlkpp a Leplezett varzslatok esetben: az  alkalmaz megpillanthatja a lthatatlann tett mgikus hatsokat,  varzslatokat.\n        \n        Alapesetben a diszciplna erssge (E)1, de ez dupla vagy tripla  mennyisg -pont felhasznlsval a vgtelensgig tbbszrzhet.  Ugyanez igaz az 5 krs idtartamra is.        \n        `\n    },\n    {\n        name: 'Asztrl Szem',\n        pont: '3',\n        misc: {\n            me: 'A',\n            idotartam: 'azonnali',\n            erosseg: '3'\n        },\n        varazslasIdeje: '3 szegmens',\n        labels: ['pszi', 'pszi-kyr'],\n        description: `\n        A diszciplna msok rzelmeinek, indulatainak kifrkszsre alkalmas. Segtsgvel  t lehet ltni\" az Asztrl Pajzson is.  Brmilyen ersts Asztrl Szemmel tekintnk is valakire, egyet mindenkppen s  biztosan megtudhatunk: az illet rzelmi  kiegyenslyozottsgnak mrtkt, msknt  szlva, Asztrljt (lsd Kpessgek). Ezen  tl az ldozat jogosult Asztrlis Mgiaellenllsra.\n\n        Abban az esetben, ha Mgiaellenllsa  sikeres, az alkalmaz csak a legnyilvnvalbb  rzelmeirl szerez tudomst - melyek ltalban mr puszta emberismerettel is felfedezhetek. Kimagaslan ers rzelmekrl van  itt sz: ilyen a heves szerelem, a vak gyllet, a szamurj hsge vagy ppen a fellngol szexulis vgy.  Mindezeknek is csak a ltre derl fny; a cljukra, arra hogy az illet kinek vagy minek az irnyban rez, arra nem. Erre a diszciplna  alkalmazja legfeljebb kvetkeztethet: pldul kitallhatja, hogy a  pap vak hsge istene fel irnyul.\n\n        Ha az ldozat elvti Asztrlis Mgiaellenllst, vilgoss vlik  az rzelmek clja is, mitbb, a kevsb nyilvnval rzelmek is  napvilgra kerlnek. Persze az Asztrl Szem egyszeri hasznlata  nem egyenl az ldozat teljes rzelmi letnek feltrkpezsvel.  Segtsgvel megpillanthat t nyilvnval, hrom tlagos vagy  egy titkolt rcelem. Legutbbirl akkor beszlnk, ha valaki szpontost  arra, hogy lelke mlyn elrejtsen egy rzelmet illetve indulatot egyszerre legfeljebb kettvel teheti.\n\n        A Szem alkalmazja vagy a KM-re bzza, hogy meslje el, mi  az, amit lt, vagy clirnyosan krdezhet is. Felteheti a krdst,  hogy a diszciplna ldozata miknt rez meghatrozott szemlyek  vagy eszmk irnyban. Krheti az t legnyilvnvalbb rzelem  felsorolst, vagy tudakozdhat egy esetleges titkolt rzelem fell.  A vlasztl fggetlenl, a krdezst annyiszor ismtelheti meg,  ahnyszor a felsorolt felttelek lehetv teszik.\n\n        A diszciplna egyszerre egyetlen szemly ellen alkalmazhat, s  a feltntetett 3 szegmens alatt a teljes informcicsere lezajlik. Ez  id alatt az alkalmaz meditatv tudatllapotban kell legyen.\n\n        A diszciplna msik hasznlati mdja, mikor az alkalmaz az  Asztrl Szem tekintetvel nem egy valakit vesz alaposan szemgyre,  hanem a 3 szegmens alatt gyorsan krbepsztz. Ilyenkor  megtudhatja a kzelben tartzkod - legfeljebb tz - szemly  Asztrl Kpessgnek rtkt, de az rzelmeiket s azok cljt  nem frkszheti ki.\n\n        Az alkalmazsra sznt minden egyes tovbbi -pont-a feltntetett  3-on fell - nem 1-gyel, hanem 3-mal nveli a diszciplna Erssgt.  \n\n        Az Asztrl Szem hasznlatrl a diszciplna ldozata ill. ldozatai  nem szereznek tudomst!\n        `\n    },\n    {\n        name: 'Mentl Szem',\n        pont: '5 (ersthet)',\n        misc: {\n            me: 'M',\n            idotartam: 'azonnali',\n            erosseg: '5'\n        },\n        varazslasIdeje: '5 szegmens',\n        labels: ['pszi', 'pszi-kyr'],\n        description: `\n        A Mentl Szem egyetlenegy szemly gondolati letnek minsgrl  ad felvilgostst. Segtsgvel t lehet \"ltni\" a Mentl Pajzson,  br ilyenkor nem gbekilt az eredmny- de nem is lebecslend.\n        \n        A Mentl Szem hasznlata ellen a kiszemelt ldozat mentlis  Mgiaellenllsra jogosult. Ha ez sikeres, az alkalmaz csak  annyit tud meg rla, hogy figyelemre mlt elme-e, netn tlagos  gondolkod, vagy ppen affle ostoba tusk\". Tovbb azt,  ha valakitl, vagy valakihez Mentl-fonl vezet. Hogy kitl  kihez, az csak akkor derthet ki, ha az alkalmaz mindkt  ldozatot szemgyre veszi Mentl Szemvel.\n        \n        Ha az ldozat elvti Mgiaellenllst, az alkalmaz  szmszeren tudomst szerez Intelligencia s Akarater  Kpessgrl, valamint Kasztjrl s plusz-mnusz 1 eltrssel  a Tapasztalati Szintjrl s -hasznlatnak szintjrl.\n        \n        A diszciplna egyszerre egyetlen szemly ellen alkalmazhat, s  a feltntetett 5 szegmens alatt a teljes informcicsere lezajlik.  Ezalatt az alkalmaz meditatv tudatllapotban kell legyen.\n        \n        A diszciplna msik hasznlati mdja, mikor az alkalmaz a  Mentl Szemmel nem egy valakit vesz alaposan szemgyre, hanem  az 5 szegmens alatt gyorsan krbepsztz. Ilyenkor legfeljebb  tz, kzelben tartzkod szemlyrl tudhatja meg azt, amit a  Mgia-ellenlls elvtsnek esetben rtunk le, de mst nem  frkszhet ki.\n        \n        Az alkalmazsra sznt minden egyes tovbbi -pont-a feltntetett  5-n fell - nem 1-gyel, hanem 2-vel nveli a diszciplna Erssgt.\n        \n        A Mentl Szem hasznlatrl a diszciplna ldozata ill. ldozatai  nem szereznek tudomst!        \n        `\n    },\n    {\n        name: 'Aurarzkels',\n        pont: '7 (ersthet)',\n        misc: {\n            me: 'A+M',\n            idotartam: 'lsd a lerst',\n            erosseg: '7'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['pszi', 'pszi-kyr'],\n        description: `\n        Minden kifejlett llekkel br teremtmny kisugroz magbl  Szemlyes Aurt. Ez azon tl, hogy megvdi a llek uralta testet  a mgia bizonyos formitl, messzemenen jellemz az illetre.  Egy varzsl kpes arra, hogy klnleges rzkeivel szemgyre  vegye az Aurt. Ha mr mskor is ltta\" s megjegyezte, az  Aura alapjn felismeri a lelket, brmely testben lakozik is. Kpes  szlelni a szembetl termszetellenessget is, mint mikor emberi  llek llatban lakozik, vagy fordtva. Tovbb meg tudja llaptani,  hogy az illet milyen fajhoz tartozik.\n        \n        Mivel azonban az Asztrl s Mentl Pajzsok az Aura krl  plnek fel, mindezen informcit csak akkor szerezheti meg,  ha tlt\" a Pajzsokon. Ezt csak gy rheti el, hogy az Aurarzkelst  annyira felersti, hogy ldozata elvtse kln-kln, mind Asztrl,  mind Mentl Mgiaellenllst.\n        \n        Mindaddig, mg ez nem trtnik meg, a diszciplna csak a  pajzsok erssgrl szolgltat adatokat. Nem szmszeren,  hanem a kvetkez tblzat szerint elrulja, milyen nagysgrend az illet statikus Asztrl s Mentl Pajzsa, valamint  dinamikus Asztrl s Mentl Pajzsa.\n        \n        <table>\n            <tr>\n                <td>Pajzs E-je</td>\n                <td>Nagysgrend</td>\n            </tr>\n            <tr>\n                <td>0</td>\n                <td>Nincs</td>\n                </tr>\n                <tr>\n                <td>1-9</td>\n                <td>Gyenge</td>\n                </tr>\n                <tr>\n                <td>10-21</td>\n                <td>Mrskelt</td>\n                </tr>\n                <tr>\n                <td>22-34</td>\n                <td>Kzepes</td>\n                </tr>\n                <tr>\n                <td>35-50</td>\n                <td>Ers</td>\n                </tr>\n                <tr>\n                <td>51-</td>\n                <td>Nagyon ers</td>\n                </tr>\n        </table>\n\n        A diszciplnt elszegettel hasznljk alakjukat megvltoztatott  szemlyek felismersre, netn vlt azonossg vagy ennek  ellenkezjnek tisztzsra, mivel az Aura elvltoztatsra nincs  md!\n\n        Az Aurarzkelsre sznt minden tovbbi 1-pont - a lert 7-en  fell - nem 1-gyel, hanem 2-vel nveli a diszciplna erssgt.\n        `\n    },\n    {\n        name: 'Mgikus Tekintet',\n        pont: '4 (ersthet)',\n        misc: {\n            me: 'AE-prba',\n            idotartam: 'lsd a lerst',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['pszi', 'pszi-kyr'],\n        description: `\n        A diszciplna az Energiagyjts mellett a Kyr metdus msik  cscspontjt jelenti. Kifejezetten jkelet, br vek alatt szles  krben elterjedt; kifejlesztse egy Ynev-szerte csak a Smaragd Uraknt  ismert pyarroni mgus nevhez fzdik. Alapja az okkult tan,  miszerint az anyagi porhvelyben a szem a legrvidebb t a llek  fel. pp ezrt az alkalmaznak minden esetben a kiszemelt ldozat  szembe kell nznie.\n\n        Brki, aki a diszciplna alkalmazjnak szembe nz, akaraterprbt kteles dobni, amit ha elvt, tbb nem kpes tekintett a varzsltl elszaktani. Brmit tehet, htrlhat, akr r is  tmadhat az alkalmazra, de nem cselekedhet semmi olyat,  minek eredmnyeknt kiszabadulna a Mgikus Tekintet bklyjbl. Vagyis nem helyezhet semmit az sszekapcsold  tekintetek tjba, nem fordulhat el, nem lphet takarsba. A  kapcsolat megtartsa minden clja eltt val! A Mgikus  Tekintettl csak akkor szabadulhat, ha az alkalmaz, tekintetnek elfordtsval szabadon engedi, illetleg, ha harmadik  szemly akr csak egy szemvillansra is akadlyt grdt a kt  pillants kereszttzbe.\n\n        Ha az ldozat kiszabadult, a diszciplna idtartama azonnal  lejr, egybknt percekig, rkig, de elmletileg akr a vgtelensgig is tarthat.\n\n        A varzsl az ellen a szemly  ellen, aki Mgikus Tekintetnek  rabja, magasabb hatsfokon kpes Asztrl- s Mentlmgit alkalmazni. Ami termszetesen felttelezi, hogy a varzslat ideje alatt  az ldozat nem szabadul. Hogy az  emltett magasabb hatsfok mit  jelent, az a kvetkez tblzatbl  derl ki        \n\n        <table>\n            <tr>\n                <td>TSZ</td>\n                <td>+E</td>\n            </tr>\n            <tr>\n<td>1. </td>\n<td>+ 4 E  </td>\n</tr>\n<tr>\n<td>2. </td>\n<td>+ 5 E  </td>\n</tr>\n<tr>\n<td>3. </td>\n<td>+ 6 E  </td>\n</tr>\n<tr>\n<td>4. </td>\n<td>+ 7 E  </td>\n</tr>\n<tr>\n<td>5. </td>\n<td>+ 9 E  </td>\n</tr>\n<tr>\n<td>6. </td>\n<td>+ 10 E  </td>\n</tr>\n<tr>\n<td>7. </td>\n<td>+ 11 E  </td>\n</tr>\n<tr>\n<td>8. </td>\n<td>+ 12 E  </td>\n</tr>\n<tr>\n<td>9. </td>\n<td>+ 13 E</td>\n</tr>\n<tr>\n<td>10</td>\n<td>+ 15 E  </td>\n</tr>\n<tr>\n<td>11. </td>\n<td>+ 16 E  </td>\n</tr>\n<tr>\n<td>12. </td>\n<td>+ 17 E  </td>\n</tr>\n<tr>\n<td>13. </td>\n<td>+ 18 E  </td>\n</tr>\n<tr>\n<td>14. </td>\n<td>+ 19 E  </td>\n</tr>\n<tr>\n<td>15. </td>\n<td>+ 21 E</td>\n</tr>\n        </table>\n\n        A varzslat Erssghez (E)  hozzadand az adott Tapasztalati Szinten, a +E rovatban  feltntetett E rtk. (Pldul: 4.  TSZ-en, ha a varzslat E-je 13,  Mgikus Tekintet rabsgban az  erssg 20-nak minsl.)\n        A varzslat ltrejttvel - de  mg idtartamnak lejrtval  sem - az ldozat nem szabadul  a Mgikus Tekintet bilincsbl.  Ez csak a fent emltett esetekben  trtnhet, addig a varzsl anynyiszor varzsol r a lert kedvezmnnyel, ahnyszor csak jnak ltja, illetve ameddig Manapontjai el nem fogynak.\n           `\n    },\n    {\n        name: '-ostrom',\n        pont: '1 (ersthet)',\n        misc: {\n            idotartam: 'lsd a lerst',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['pszi', 'pszi-kyr'],\n        description: `\n        Mindenben azonos az ltalnos Diszciplnknl lert -ostromhoz,  m ezzel 1 -pontrt 2-pont bonthat le a dinamikus, s 2 E  rombolhat le a statikus pajzsokbl.        \n        `\n    },\n    {\n        name: 'Pszeud',\n        pont: '5 + a Pszeud',\n        misc: {\n            idotartam: 'egyszeri',\n        },\n        varazslasIdeje: '5 szegmens',\n        labels: ['pszi', 'pszi-kyr'],\n        description: `\n        Baromi hossz lers egy olyan diszciplinhoz, amit amgy se hasznl soha senki.\n        `\n    },\n]\n\nexport const BARD_VARAZSLATOK: Array<Varazslat> = [\n    {\n        name: 'lom dala',\n        pont: '12/clpont',\n        misc: {\n            erosseg: '6',\n            idotartam: 'lsd lers',\n            hatotav: '10 lb',\n            me: 'M'\n        },\n        varazslasIdeje: '3 kr',\n        labels: ['magia', 'brd', 'brd-dalmgia'],\n        description: ``\n    },\n    {\n        name: 'Bjols dala',\n        pont: '5/lny',\n        misc: {\n            erosseg: '6',\n            idotartam: '2 ra',\n            hatotav: '10 lb',\n            me: 'A'\n        },\n        varazslasIdeje: '1 perc',\n        labels: ['magia', 'brd', 'brd-dalmgia'],\n        description: ``\n    },\n    {\n        name: 'Btorsg dala',\n        pont: '7',\n        misc: {\n            erosseg: '5',\n            idotartam: 'dal hossza',\n            hatotav: 'lsd lers',\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-dalmgia'],\n        description: ``\n    },\n    {\n        name: 'Bnts dala',\n        pont: '8/clpont',\n        misc: {\n            erosseg: '7',\n            idotartam: 'k6 kr',\n            hatotav: '10 lb',\n            me: 'M'\n        },\n        varazslasIdeje: '2+k6 kr',\n        labels: ['magia', 'brd', 'brd-dalmgia'],\n        description: ``\n    },\n    {\n        name: 'Ellenttek dala',\n        pont: '35',\n        misc: {\n            erosseg: '25',\n            idotartam: 'vgleges',\n            hatotav: '10 lb',\n            me: 'A'\n        },\n        varazslasIdeje: '1 perc',\n        labels: ['magia', 'brd', 'brd-dalmgia'],\n        description: ``\n    },\n    {\n        name: 'Emlkek dala',\n        pont: '25',\n        misc: {\n            erosseg: '12',\n            idotartam: 'vgleges',\n            hatotav: '10 lb',\n            me: 'M'\n        },\n        varazslasIdeje: '3 perc',\n        labels: ['magia', 'brd', 'brd-dalmgia'],\n        description: ``\n    },\n    {\n        name: 'Feleds dala',\n        pont: '20',\n        misc: {\n            erosseg: '12',\n            idotartam: 'egyszeri',\n            hatotav: '10 lb',\n            me: 'M'\n        },\n        varazslasIdeje: '3 perc',\n        labels: ['magia', 'brd', 'brd-dalmgia'],\n        description: ``\n    },\n    {\n        name: 'Flelem dala',\n        pont: '4/lny',\n        misc: {\n            erosseg: '6',\n            idotartam: 'dal hossza',\n            hatotav: '10 lb',\n            me: 'A'\n        },\n        varazslasIdeje: '1 perc',\n        labels: ['magia', 'brd', 'brd-dalmgia'],\n        description: ``\n    },\n    {\n        name: 'Hall dala',\n        pont: '45/lny',\n        misc: {\n            erosseg: '15',\n            idotartam: 'vgleges',\n            hatotav: '10 lb',\n            me: 'A'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-dalmgia'],\n        description: ``\n    },\n    {\n        name: 'Knok dala',\n        pont: '4/kr',\n        misc: {\n            erosseg: '25',\n            idotartam: 'dal hossza',\n            hatotav: 'halltv',\n            me: 'M'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-dalmgia'],\n        description: ``\n    },\n    {\n        name: 'Nyugalom dala',\n        pont: '1/clpont',\n        misc: {\n            erosseg: '5',\n            idotartam: 'k6 kr',\n            hatotav: '10 lb',\n            me: 'A'\n        },\n        varazslasIdeje: '1 perc',\n        labels: ['magia', 'brd', 'brd-dalmgia'],\n        description: ``\n    },\n    {\n        name: 'Zavarodottsg dala',\n        pont: '6/clpont',\n        misc: {\n            erosseg: '4',\n            idotartam: 'k6 kr',\n            hatotav: '10 lb',\n            me: 'M'\n        },\n        varazslasIdeje: '1 perc',\n        labels: ['magia', 'brd', 'brd-dalmgia'],\n        description: ``\n    },\n    {\n        name: 'Beszl mlt',\n        pont: '19',\n        misc: {\n            erosseg: '1',\n            idotartam: '15 perc',\n            hatotav: '20 lb',\n        },\n        varazslasIdeje: '1 perc',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Bvhangszer',\n        pont: '4',\n        misc: {\n            erosseg: '1',\n            idotartam: '10 perc/szint',\n            hatotav: 'brd hangszere',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Csend',\n        pont: '10',\n        misc: {\n            erosseg: '8',\n            idotartam: '1 kr/szint',\n            hatotav: '8 lb',\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Dalegyests',\n        pont: '18',\n        misc: {\n            erosseg: '5',\n            idotartam: 'lsd lers',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Hamis beszd',\n        pont: '7',\n        misc: {\n            erosseg: '2',\n            idotartam: 'perc/szint',\n            hatotav: '15 lb',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Hangcsaps',\n        pont: '3',\n        misc: {\n            erosseg: '1',\n            idotartam: '1 szegmens',\n            hatotav: '50 lb',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Hangidzs',\n        pont: '8',\n        misc: {\n            erosseg: '1',\n            idotartam: '2 perc/szint',\n            hatotav: '10 lb',\n        },\n        varazslasIdeje: '5 kr',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Hangkivetts',\n        pont: '6',\n        misc: {\n            erosseg: '1',\n            idotartam: '1 ra',\n            hatotav: '50 lb',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Hangorkn',\n        pont: '22',\n        misc: {\n            erosseg: '4',\n            idotartam: '1 szegmens',\n            me: 'llkpessg',\n            hatotav: '12 lb',\n        },\n        varazslasIdeje: '4 szegmens',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Hangtanulmny',\n        pont: '2',\n        misc: {\n            erosseg: '1',\n            idotartam: 'vgleges',\n            hatotav: '5 lb',\n        },\n        varazslasIdeje: '3 perc',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Hangteremts',\n        pont: '2',\n        misc: {\n            erosseg: '1',\n            idotartam: '5 perc/szint',\n            hatotav: '12 lb',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Hangutnzs',\n        pont: '4',\n        misc: {\n            erosseg: '1',\n            idotartam: '15 perc/szomt',\n            hatotav: '35 lb',\n        },\n        varazslasIdeje: '3 szegmens',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Mgia dala',\n        pont: '10',\n        misc: {\n            erosseg: '5',\n            idotartam: 'lsd lers',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Mgikus hang',\n        pont: '8',\n        misc: {\n            erosseg: '1',\n            idotartam: 'vgleges',\n            hatotav: 'rints',\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Nyelvzagyvls',\n        pont: '6',\n        misc: {\n            erosseg: '5',\n            idotartam: 'perc/szint',\n            hatotav: '15 lb',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Rejtett zenet',\n        pont: '5',\n        misc: {\n            erosseg: '1',\n            idotartam: 'egyszeri',\n            hatotav: 'halltv',\n        },\n        varazslasIdeje: 'lsd lers',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Tvoli zenet',\n        pont: '25',\n        misc: {\n            erosseg: '25',\n            idotartam: 'egyszeri',\n            hatotav: 'korltlan',\n        },\n        varazslasIdeje: '2 perc',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Tvolsg dala',\n        pont: '10/szorz',\n        misc: {\n            erosseg: '5',\n            idotartam: 'lsd lers',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Zajkelts',\n        pont: '1',\n        misc: {\n            erosseg: '1',\n            idotartam: '1 kr',\n            hatotav: '15 kr',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-hangmgia'],\n        description: ``\n    },\n    {\n        name: 'Alakvlts',\n        pont: '15',\n        misc: {\n            erosseg: '1',\n            idotartam: '2 perc/szint',\n            me: 'lsd lers'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Aura',\n        pont: '3',\n        misc: {\n            erosseg: '1',\n            idotartam: '10 kr',\n            hatotav: '10 lb'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Bvharc',\n        pont: '16',\n        misc: {\n            erosseg: '1',\n            idotartam: 'kr/szint',\n            hatotav: 'lsd lers'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Dlibb',\n        pont: '12',\n        misc: {\n            erosseg: '3',\n            idotartam: '1 ra',\n            hatotav: '5 mrfld'\n        },\n        varazslasIdeje: '1 perc',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'jszakai lts',\n        pont: '9',\n        misc: {\n            erosseg: '5',\n            idotartam: '10 perc/szint',\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'l trtnelem',\n        pont: '21',\n        misc: {\n            erosseg: '1',\n            idotartam: '1 perc/szint',\n            hatotav: '15 lb'\n        },\n        varazslasIdeje: '1 perc',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Fantom',\n        pont: '23',\n        misc: {\n            erosseg: '3',\n            idotartam: '1 ra',\n        },\n        varazslasIdeje: '3 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Fantomsereg',\n        pont: '5',\n        misc: {\n            erosseg: '1',\n            idotartam: '15 kr',\n            hatotav: '50 lb'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Fegyver',\n        pont: '5',\n        misc: {\n            erosseg: '1',\n            idotartam: '2 kr/szint',\n            hatotav: 'brd fegyvere'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Flelmetes fegyver',\n        pont: '3',\n        misc: {\n            erosseg: '1',\n            idotartam: '8 kr',\n            hatotav: 'lsd lers'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Fnysugr',\n        pont: '9',\n        misc: {\n            erosseg: '3',\n            idotartam: '3 kr/szint',\n        },\n        varazslasIdeje: '2 kr',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Fnytnc',\n        pont: '5',\n        misc: {\n            erosseg: '6',\n            idotartam: '2 kr/szint',\n            hatotav: '7 lb',\n            me: 'A'\n        },\n        varazslasIdeje: '2 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Fnyvarzs',\n        pont: '3',\n        misc: {\n            erosseg: '1',\n            idotartam: 'perc/szint',\n            hatotav: '15 lb'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Fnyvrt',\n        pont: '9',\n        misc: {\n            erosseg: '2',\n            idotartam: '2 perc/szint',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Fkuszlt fny',\n        pont: '15',\n        misc: {\n            erosseg: '3',\n            idotartam: 'kr/3 szint',\n            hatotav: '6 lb'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Hamis teleport',\n        pont: '25',\n        misc: {\n            erosseg: '15',\n            idotartam: '6 kr/szint',\n            hatotav: '16 lb'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Hasonms',\n        pont: '6/hasonms',\n        misc: {\n            erosseg: '2',\n            idotartam: '5 kr',\n        },\n        varazslasIdeje: '2 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Illzi',\n        pont: '4',\n        misc: {\n            erosseg: '1',\n            idotartam: '15 perc/szint',\n            hatotav: 'lsd lers'\n        },\n        varazslasIdeje: '3 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Illzirs',\n        pont: '15',\n        misc: {\n            erosseg: '2',\n            idotartam: 'vgleges',\n        },\n        varazslasIdeje: '5 perc',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Illzitalaj',\n        pont: '6',\n        misc: {\n            erosseg: '2',\n            idotartam: '10 perc/szint',\n            hatotav: 'lsd lers'\n        },\n        varazslasIdeje: '5 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Irnyveszts',\n        pont: '12',\n        misc: {\n            erosseg: '2',\n            idotartam: '15 perc/szint',\n            hatotav: '15 lb'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Kosz',\n        pont: '35',\n        misc: {\n            erosseg: '25',\n            idotartam: 'perc/szint',\n            hatotav: '20 lb'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Kp',\n        pont: '5',\n        misc: {\n            erosseg: '1',\n            idotartam: 'lsd lers',\n            hatotav: '5 lb'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Kpidzs',\n        pont: '9',\n        misc: {\n            erosseg: '1',\n            idotartam: 'perc/szint',\n            hatotav: '12 lb'\n        },\n        varazslasIdeje: '5 kr',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Kdalak',\n        pont: '4',\n        misc: {\n            erosseg: '1',\n            idotartam: '3 kr/szint',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Lthatatlansg',\n        pont: '4',\n        misc: {\n            erosseg: '1',\n            idotartam: '1 ra',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Lnyalkots',\n        pont: '6',\n        misc: {\n            erosseg: '1',\n            idotartam: '15 perc/szint',\n            hatotav: '12 lb'\n        },\n        varazslasIdeje: '3 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Maszk',\n        pont: '2',\n        misc: {\n            erosseg: '1',\n            idotartam: 'lsd lers',\n        },\n        varazslasIdeje: '3 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Mgiamegj',\n        pont: '6',\n        misc: {\n            erosseg: '1',\n            idotartam: '1 perc/szint',\n            hatotav: '3 lb/szint'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Nylzpor',\n        pont: '7',\n        misc: {\n            erosseg: '1',\n            idotartam: 'kr/szint',\n            hatotav: '50 lb'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Rejtjel',\n        pont: '10',\n        misc: {\n            erosseg: '2',\n            idotartam: '1 v',\n        },\n        varazslasIdeje: '3 kr',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Rmts',\n        pont: '5',\n        misc: {\n            erosseg: '1',\n            idotartam: '5 kr',\n            hatotav: '10 lb'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Szemlyes varzs',\n        pont: '5',\n        misc: {\n            erosseg: '1',\n            idotartam: '15 perc/szint',\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Szpsgvarzs',\n        pont: '12',\n        misc: {\n            erosseg: '2',\n            idotartam: '6 ra',\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Sznvarzs',\n        pont: '1',\n        misc: {\n            erosseg: '1',\n            idotartam: '1 nap/szint',\n            hatotav: '5 lb'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Szivrvny',\n        pont: '4',\n        misc: {\n            erosseg: '1',\n            idotartam: '2 perc/szint',\n            hatotav: '20 lb'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Tanulmny',\n        pont: '2',\n        misc: {\n            erosseg: '1',\n            idotartam: 'vgleges',\n            hatotav: '8 lb'\n        },\n        varazslasIdeje: '3 perc',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Trgyalkots',\n        pont: '5',\n        misc: {\n            erosseg: '1',\n            idotartam: '3 perc/szint',\n            hatotav: 'rints'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Trgytvltoztats',\n        pont: '6',\n        misc: {\n            erosseg: '1',\n            idotartam: '1 nap/szint',\n            hatotav: 'rints'\n        },\n        varazslasIdeje: '2 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Trgylthatatlansg',\n        pont: '8',\n        misc: {\n            erosseg: '1',\n            idotartam: '3 kr/szint',\n            hatotav: '12 lb'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Tvolsgtorzts',\n        pont: '9',\n        misc: {\n            erosseg: '2',\n            idotartam: '15 perc',\n            hatotav: 'lsd lers'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Teljes lca',\n        pont: '35',\n        misc: {\n            erosseg: '12',\n            idotartam: '10 kr/szint',\n            hatotav: '20 lb'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Tkr',\n        pont: '4',\n        misc: {\n            erosseg: '1',\n            idotartam: '3 kr/szint',\n            hatotav: 'rints'\n        },\n        varazslasIdeje: '2 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'ressg',\n        pont: '18',\n        misc: {\n            erosseg: '2',\n            idotartam: '5 perc/szint',\n            hatotav: '20 lb'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Vakon lts',\n        pont: '35',\n        misc: {\n            erosseg: '15',\n            idotartam: '5 perc/szint',\n        },\n        varazslasIdeje: '3 kr',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Vaksg',\n        pont: '8',\n        misc: {\n            erosseg: '1',\n            idotartam: '3 kr',\n            hatotav: '10 lb'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-fnymgia'],\n        description: ``\n    },\n    {\n        name: 'Figyelem elterelse',\n        pont: '2',\n        misc: {\n            erosseg: '1',\n            idotartam: '1 szegmens',\n            hatotav: '5 lb'\n        },\n        varazslasIdeje: '1 szegmens',\n        labels: ['magia', 'brd', 'brd-egyb'],\n        description: ``\n    },\n    {\n        name: 'Hipnzis',\n        pont: '20',\n        misc: {\n            erosseg: '6',\n            idotartam: 'perc/szint',\n            me: 'A',\n            hatotav: '3 lb'\n        },\n        varazslasIdeje: '1 perc',\n        labels: ['magia', 'brd', 'brd-egyb'],\n        description: ``\n    },\n    {\n        name: 'Rohan id',\n        pont: '34',\n        misc: {\n            erosseg: '15',\n            idotartam: 'perc/szint',\n            hatotav: '15 lb'\n        },\n        varazslasIdeje: '1 kr',\n        labels: ['magia', 'brd', 'brd-egyb'],\n        description: ``\n    },\n    {\n        name: 'Tanuls',\n        pont: '4',\n        misc: {\n            erosseg: '1',\n            idotartam: 'vgleges',\n            hatotav: '10 lb'\n        },\n        varazslasIdeje: 'lsd lers',\n        labels: ['magia', 'brd', 'brd-egyb'],\n        description: ``\n    },\n\n\n];\n\nexport const VARAZSLAT_LABELS: Record<string, string> = {\n    name: 'Varzslatok',\n    pont: 'MP',\n    me: 'ME',\n    idotartam: 'Idtartam',\n    erosseg: 'E',\n    hatotav: 'Hattv',\n    varazslasIdeje: 'Varzsls ideje'\n}\n\nexport const PSZI_LABELS: Record<string, string> = {\n    name: 'Diszciplink',\n    pont: 'P',\n    me: 'ME',\n    idotartam: 'Idtartam',\n    varazslasIdeje: 'Meditci ideje'\n}","import React, { useState } from 'react';\nimport { Button, ButtonGroup } from 'semantic-ui-react';\nimport { VarazslatLista } from '../components/VarazslatLista';\nimport { PSZI_PYARRONI, PSZI_SLAN, PSZI_KYR, PSZI_LABELS, VARAZSLAT_LABELS, BARD_VARAZSLATOK } from '../engine/varazslat';\n\nconst ALL_SPELLS = [...PSZI_PYARRONI, ...PSZI_SLAN, ...PSZI_KYR, ...BARD_VARAZSLATOK];\n\nexport const Varazslatok: React.FC<{}> = () => {\n    const [tipus, setTipus] = useState<'pszi' | 'magia'>('pszi');\n    const [labels, setLabels] = useState<Set<string>>(new Set());\n\n\n\n    const spells = ALL_SPELLS.filter(spell => {\n        const spellLabels = spell.labels;\n        if (!spellLabels.includes(tipus)) {\n            return false;\n        }\n        if (labels.size === 0) {\n            return true;\n        }\n        return spellLabels.some(l => labels.has(l));\n    })\n\n\n    const allSelectedLabels = [...new Set(ALL_SPELLS.filter(spell => spell.labels.includes(tipus)).flatMap(s => s.labels))].filter(l => l !== 'pszi' && l !== 'magia').sort();\n\n    return <>\n\n        <ButtonGroup compact>\n            <Button compact content='Pszi' primary={tipus === 'pszi'} onClick={() => {\n                if (tipus !== 'pszi') {\n                    setTipus('pszi');\n                    setLabels(new Set());\n                }\n            }} />\n            <Button compact content='Mgia' primary={tipus === 'magia'} onClick={() => {\n                if (tipus !== 'magia') {\n                    setTipus('magia');\n                    setLabels(new Set());\n                }\n            }} />\n            {allSelectedLabels.map(l => <Button compact primary={labels.has(l)} onClick={() => { labels.has(l) ? labels.delete(l) : labels.add(l); setLabels(new Set(labels)); }} content={l} />)}\n        </ButtonGroup>\n        <VarazslatLista varazslatok={spells} fieldLabels={tipus === 'pszi' ? PSZI_LABELS : VARAZSLAT_LABELS} />\n    </>\n\n}","import React from 'react';\r\nimport { Modal, Button } from 'semantic-ui-react';\r\nimport { Varazslatok } from '../pages/Varazslatok';\r\n\r\nexport const VarazslatokModal: React.FC<{}> = () => {\r\n    return <Modal trigger={<Button positive>Mgia</Button>}>\r\n        <Modal.Content>\r\n            <Varazslatok />\r\n        </Modal.Content>\r\n    </Modal>\r\n}","import React, { useEffect, useState } from 'react';\nimport { Icon, Menu, Image, Button } from 'semantic-ui-react';\nimport { Karakter, KarakterInfo } from '../engine/karakter';\nimport { CategoriesDropdown } from './CategoriesDropdown';\nimport { KarakterImport } from './KarakterImport';\nimport { KockaModal } from './KockaModal';\n\nimport logo from '../static/magus.png';\nimport { PageSelection } from '../App';\nimport { VarazslatokModal } from './VarazslatokModal';\n\n\ninterface PageHeaderProps {\n    categories: Array<string>;\n    currentCategory: string;\n    setCurrentCategory: (category: string) => unknown;\n    karakter?: KarakterInfo;\n    karakterek: Array<KarakterInfo>;\n    page: PageSelection;\n    setPage: (pageSelection: PageSelection) => unknown;\n    save: (karakter: Karakter) => unknown;\n    saveMese: (story: string) => unknown;\n}\n\nconst MAX_KARAKTERS_PER_PAGE = 10;\n\nexport const PageHeader: React.FC<PageHeaderProps> = ({ categories, currentCategory, setCurrentCategory, karakter, karakterek, page, setPage, save, saveMese }) => {\n    const [karakterStart, setKarakterStart] = useState(0);\n\n    const karakterPos = karakterek.findIndex(k => k.id === karakter?.id);\n\n    //adjust scrolling\n    useEffect(() => {\n        if (karakterPos > -1) {\n            if (karakterPos < karakterStart) {\n                setKarakterStart(karakterPos);\n            }\n            if (karakterPos >= karakterStart + MAX_KARAKTERS_PER_PAGE) {\n                setKarakterStart(karakterPos - MAX_KARAKTERS_PER_PAGE + 1);\n            }\n        }\n    }, [karakterPos, karakterStart, setKarakterStart]);\n\n    const scrolled = karakterek.length > MAX_KARAKTERS_PER_PAGE;\n    const canScrollLeft = karakterStart > 0 && (karakterPos === -1 || karakterPos < karakterStart + MAX_KARAKTERS_PER_PAGE - 1);\n    const canScrollRight = (karakterStart + MAX_KARAKTERS_PER_PAGE < karakterek.length) && (karakterPos === -1 || karakterPos > karakterStart);\n    const karaktersDisplayed = karakterek.slice(karakterStart, karakterStart + MAX_KARAKTERS_PER_PAGE);\n\n    return <Menu tabular>\n        <Menu.Item key='header' header>\n            <Image src={logo} size='mini' onClick={() => setPage({ page: page.page === 'story' ? 'home' : 'story' })} />\n        </Menu.Item>\n        <CategoriesDropdown categories={categories} currentCategory={currentCategory} setCurrentCategory={setCurrentCategory} />\n        {scrolled &&\n            <Menu.Item key='scroll_left' disabled={!canScrollLeft} onClick={() => setKarakterStart(karakterStart - 1)}>\n                <Icon name='triangle left' />\n            </Menu.Item>\n        }\n        {karaktersDisplayed.map(k =>\n            <Menu.Item key={k.id} style={{ flexGrow: 1 }} active={k.id === karakter?.id} name={k.name} onClick={() => k.id === karakter?.id ? setPage({ page: 'home' }) : setPage({ page: 'karakterlap', karakter: k })} />\n        )}\n        <Menu.Item key='new' active={page.page === 'karakteralkoto'} onClick={() => setPage({ page: 'karakteralkoto' })}>\n            <Icon name='plus' />\n        </Menu.Item>\n        {scrolled &&\n            <Menu.Item key='scroll_right' disabled={!canScrollRight} onClick={() => setKarakterStart(karakterStart + 1)}>\n                <Icon name='triangle right' />\n            </Menu.Item>\n        }\n        <Menu.Item key='floated' position='right'>\n            <KarakterImport save={save} saveMese={saveMese} />\n            <VarazslatokModal />\n            <Button negative onClick={() => setPage({ page: 'kombat', category: currentCategory })}>Kombat</Button>\n            <KockaModal />\n        </Menu.Item>\n    </Menu>\n}","import React from 'react';\r\nimport { Dropdown, DropdownItemProps } from 'semantic-ui-react';\r\nimport { SZITUACIOK } from '../engine/harc';\r\n\r\nexport const SzituacioSelector: React.FC<{ szituaciok: Array<string>, setSzituaciok: (value: Array<string>) => unknown }> = ({ szituaciok, setSzituaciok }) => {\r\n\r\n    const szituacioOptions: Array<DropdownItemProps> = Object.keys(SZITUACIOK).sort().map(nev => ({\r\n        id: nev,\r\n        key: nev,\r\n        value: nev,\r\n        text: nev\r\n    }));\r\n\r\n    const renderLabel = (label: any) => ({\r\n        color: 'blue',\r\n        content: `${label.text}`,\r\n    })\r\n\r\n    return <>\r\n        <Dropdown multiple simple className='icon' icon=''\r\n            renderLabel={renderLabel}\r\n            text='Harci szituci'\r\n            onChange={(e, v) => { setSzituaciok([...v.value as Array<string>]) }}\r\n            options={szituacioOptions}\r\n            value={szituaciok}>\r\n        </Dropdown>\r\n    </>\r\n}","import React, { forwardRef, useImperativeHandle, useState } from 'react';\r\nimport { Button, Card, Dropdown, DropdownItemProps, Table } from 'semantic-ui-react';\r\nimport { FEGYVERTELEN, FegyverUtils, HARCERTEK_DISPLAY_NAMES, SZITUACIOK } from '../engine/harc';\r\nimport { calculateHarcertek, calculateSebesulesHatrany, Karakter } from '../engine/karakter';\r\nimport { DiceRollResult, formatDiceRoll, parseDiceRoll, roll, sumRolls } from '../engine/roll';\r\nimport { DobasEredmeny } from './DobasEredmeny';\r\nimport { PointsTable } from './PointsTable';\r\nimport { SzituacioSelector } from './SzituacioSelector';\r\n\r\nexport interface KombatCardProps {\r\n    karakter: Karakter,\r\n    save: (karakter: Karakter) => unknown,\r\n    dobasEredmeny: Record<string, DiceRollResult>,\r\n    setDobasEredmeny(value: Record<string, DiceRollResult>): unknown,\r\n}\r\n\r\n\r\nexport const KombatCard: React.ForwardRefExoticComponent<KombatCardProps & React.RefAttributes<unknown>> = forwardRef(({ karakter, save, dobasEredmeny, setDobasEredmeny }, ref) => {\r\n    const [szituaciok, setSzituaciok] = useState<Array<string>>([]);\r\n\r\n    const fegyver = karakter.valasztottFegyver !== undefined ? karakter.fegyverek[karakter.valasztottFegyver] : FEGYVERTELEN;\r\n    const harcertekMatrix = calculateHarcertek(karakter, szituaciok.map(sz => ({ ...SZITUACIOK[sz], name: sz }))).roll(['ke', 'te', 'ce', 've']);\r\n    const sebzesRoll = sumRolls(harcertekMatrix.getRolls('sebzes')) ?? parseDiceRoll();\r\n\r\n    useImperativeHandle(ref, () => ({\r\n        rollKe: () => {\r\n            return roll('1k10+' + harcertekMatrix.sum.ke);\r\n        },\r\n        rollTe: () => {\r\n            return roll('1k100+' + harcertekMatrix.sum.te);\r\n        },\r\n        rollCe: () => {\r\n            return roll('1k100+' + harcertekMatrix.sum.ce);\r\n        },\r\n        rollSebzes: () => {\r\n            return roll(sebzesRoll, FegyverUtils.tipus(fegyver) === 'lofegyver');\r\n        },\r\n    }), [harcertekMatrix, sebzesRoll, fegyver]);\r\n\r\n\r\n    const fegyverCsere = (v?: number) => {\r\n        karakter.valasztottFegyver = v === undefined ? undefined : Number(v);\r\n        save(karakter);\r\n    };\r\n\r\n    const options: Array<DropdownItemProps> = [\r\n        {\r\n            id: -1,\r\n            value: undefined,\r\n            text: 'fegyver nlkl'\r\n        }\r\n    ];\r\n    karakter.fegyverek.forEach((f, i) => options.push({ id: i, value: i, text: f.name }));\r\n\r\n    const cellContents = (name: string) => {\r\n        switch (name) {\r\n            case 'sebzes': return <><Button compact circular color='orange' onClick={() => {\r\n                setDobasEredmeny({ ...dobasEredmeny, 'sebzes': roll(sebzesRoll, FegyverUtils.tipus(fegyver) === 'lofegyver') });\r\n            }}>{formatDiceRoll(sebzesRoll)}</Button><DobasEredmeny result={dobasEredmeny.sebzes} /></>\r\n            case 'ke': return <><Button compact circular color='olive' onClick={() => setDobasEredmeny({ ...dobasEredmeny, 'ke': roll('1k10+' + harcertekMatrix.sum[name]) })}>{harcertekMatrix.sum[name]}</Button><DobasEredmeny result={dobasEredmeny.ke} /></>\r\n            case 'ce':\r\n            case 'te': return <><Button compact circular color='purple' onClick={() => setDobasEredmeny({ ...dobasEredmeny, [name]: roll('1k100+' + harcertekMatrix.sum[name]) })}>{harcertekMatrix.sum[name]}</Button><DobasEredmeny result={dobasEredmeny[name]} /></>\r\n            case 've': return harcertekMatrix.sum[name];\r\n        }\r\n    }\r\n\r\n    const headerColour = () => {\r\n        const down = karakter.ep.akt <= 0 || karakter.fp.akt <= 0;\r\n        if (down) {\r\n            return 'darkgrey';\r\n        }\r\n        const hatrany = calculateSebesulesHatrany(karakter);\r\n        if (!hatrany) {\r\n            return 'white';\r\n        }\r\n        if (hatrany.te === -10) {\r\n            return 'bisque';\r\n        }\r\n        if (hatrany.te === -20) {\r\n            return 'coral';\r\n        }\r\n    }\r\n\r\n    return <Card fluid style={{ backgroundColor: headerColour(), filter: 'drop-shadow(5px 5px 3px #333)' }}>\r\n        <Card.Content>\r\n            <Card.Header >{karakter.name}</Card.Header>\r\n            <Card.Description>\r\n                <PointsTable\r\n                    points={[{ name: 'ep', label: 'P', ...karakter.ep }, { name: 'fp', label: 'FP', ...karakter.fp }]}\r\n                    onChange={(name, max, value) => {\r\n                        (karakter as any)[name][max ? 'max' : 'akt'] = value;\r\n                        save(karakter);\r\n                    }}\r\n                />\r\n                <Table columns={2} singleLine compact>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell>SF</Table.HeaderCell>\r\n                        <Table.Cell>{karakter.valasztottPancel ? karakter.pancelok?.[karakter.valasztottPancel].sfe : '-'}</Table.Cell>\r\n                    </Table.Row>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell>Asztrl ME</Table.HeaderCell>\r\n                        <Table.Cell>{karakter.pajzs ? karakter.pajzs.asztral.termeszetes + karakter.pajzs.asztral.statikus + karakter.pajzs.asztral.dinamikus : '-'}</Table.Cell>\r\n                    </Table.Row>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell>Mentl ME</Table.HeaderCell>\r\n                        <Table.Cell>{karakter.pajzs ? karakter.pajzs.mental.termeszetes + karakter.pajzs.mental.statikus + karakter.pajzs.mental.dinamikus : '-'}</Table.Cell>\r\n                    </Table.Row>\r\n                </Table>\r\n                <Table columns={2} singleLine compact>\r\n                    <Table.Header>\r\n                        <Table.HeaderCell colSpan={2}>\r\n                            <Dropdown disabled={false} compact\r\n                                text={fegyver.name}\r\n                                onChange={(e, v) => fegyverCsere(v.value !== undefined ? Number(v.value) : undefined)}\r\n                                options={options}\r\n                                value={karakter.valasztottFegyver}>\r\n                            </Dropdown>\r\n                        </Table.HeaderCell>\r\n                    </Table.Header>\r\n                    {harcertekMatrix.keys.map(m => <Table.Row>\r\n                        <Table.HeaderCell>{(HARCERTEK_DISPLAY_NAMES as any)[m]}</Table.HeaderCell>\r\n                        <Table.Cell>{cellContents(m)}</Table.Cell>\r\n                    </Table.Row>\r\n                    )}\r\n                    {fegyver.name !== FEGYVERTELEN.name &&\r\n                        <Table.Row>\r\n                            <Table.HeaderCell>Tm/kr</Table.HeaderCell>\r\n                            <Table.Cell>{`${fegyver.lassu ? '1/' : ''}${fegyver.tamPerKor}`}</Table.Cell>\r\n                        </Table.Row>\r\n                    }\r\n                </Table>\r\n            </Card.Description>\r\n        </Card.Content>\r\n        <Card.Content extra textAlign='center'>\r\n            <SzituacioSelector szituaciok={szituaciok} setSzituaciok={setSzituaciok} />\r\n        </Card.Content>\r\n    </Card >\r\n});","import React, { useState } from 'react';\r\nimport { Button, ButtonGroup } from 'semantic-ui-react';\r\nimport { SemanticCOLORS } from 'semantic-ui-react/dist/commonjs/generic';\r\nimport { KombatCard } from '../components/KombatCard';\r\nimport { Karakter } from '../engine/karakter';\r\nimport { DiceRollResult } from '../engine/roll';\r\n\r\n\r\n\r\nexport const Kombat: React.FC<{ karakterek: Array<Karakter>; save: (karakter: Karakter) => unknown }> = ({ karakterek, save }) => {\r\n\r\n    const [dobasEredmenyek, setDobasEredmenyek] = useState<Record<string, Record<string, DiceRollResult>>>(karakterek.reduce((acc, curr) => { acc[curr.id] = {}; return acc; }, {} as Record<string, any>));\r\n    const [refs] = useState<Record<string, { current: any }>>({});\r\n\r\n    const DobasButton: React.FC<{\r\n        color: SemanticCOLORS,\r\n        label: string,\r\n        rollFn: string,\r\n        value: string\r\n    }> = ({ color, label, rollFn, value }) => <Button color={color} onClick={() => {\r\n        const uj = { ...dobasEredmenyek };\r\n        Object.keys(refs).forEach(id => {\r\n            uj[id][value] = refs[id]?.current?.[rollFn]();\r\n        });\r\n        setDobasEredmenyek(uj);\r\n    }}>{label}</Button>\r\n\r\n\r\n    const kezdemenySort = (one: Karakter, two: Karakter): number => {\r\n\r\n        const oneKe = dobasEredmenyek[one.id].ke?.value ?? 0;\r\n        const twoKe = dobasEredmenyek[two.id].ke?.value ?? 0;\r\n        return twoKe - oneKe;\r\n    }\r\n\r\n    return <>\r\n        <div style={{ textAlign: 'center' }}>\r\n            <ButtonGroup>\r\n                <DobasButton\r\n                    color='olive'\r\n                    label='Kezdemny'\r\n                    rollFn='rollKe'\r\n                    value='ke' />\r\n                <DobasButton\r\n                    color='purple'\r\n                    label='Tmad'\r\n                    rollFn='rollTe'\r\n                    value='te' />\r\n                <DobasButton\r\n                    color='purple'\r\n                    label='Clz'\r\n                    rollFn='rollCe'\r\n                    value='ce' />\r\n                <DobasButton\r\n                    color='orange'\r\n                    label='Sebzs'\r\n                    rollFn='rollSebzes'\r\n                    value='sebzes' />\r\n                <Button color='red' onClick={() => {\r\n                    setDobasEredmenyek(karakterek.reduce((acc, curr) => { acc[curr.id] = {}; return acc; }, {} as Record<string, any>));\r\n                }}>Dobsok trlse\r\n            </Button>\r\n            </ButtonGroup>\r\n        </div>\r\n        <div style={{ display: 'flex', flexDirection: 'row', flexWrap: 'wrap', alignItems: 'stretch' }}>\r\n            {karakterek.sort(kezdemenySort).reverse().map((k, i) => <div style={{ order: karakterek.length - i, margin: '1em' }}>\r\n                <KombatCard\r\n                    ref={ref => refs[k.id] = { current: ref }}\r\n                    key={k.id}\r\n                    karakter={k}\r\n                    save={save}\r\n                    dobasEredmeny={dobasEredmenyek[k.id]}\r\n                    setDobasEredmeny={e => setDobasEredmenyek({ ...dobasEredmenyek, [k.id]: e })} />\r\n            </div>\r\n            )}\r\n        </div>\r\n    </>\r\n}\r\n\r\n","import React from 'react';\r\nimport { Menu, Popup, StrictMenuItemProps } from 'semantic-ui-react';\r\n\r\nfunction createContextFromEvent(e: React.MouseEvent): HTMLElement {\r\n    const left = e.clientX\r\n    const top = e.clientY\r\n    const right = left + 1\r\n    const bottom = top + 1\r\n\r\n    return {\r\n        getBoundingClientRect: () => ({\r\n            left,\r\n            top,\r\n            right,\r\n            bottom,\r\n\r\n            height: 0,\r\n            width: 0,\r\n        }),\r\n    } as HTMLElement\r\n}\r\n\r\nexport interface ContextMenuProps {\r\n    items: Array<StrictMenuItemProps>,\r\n    onClicked: (target: StrictMenuItemProps) => unknown;\r\n    onClose: () => unknown;\r\n    event?: React.MouseEvent;\r\n}\r\n\r\n\r\nexport const ContextMenu: React.FC<ContextMenuProps> = ({ children, items, onClicked, onClose, event }) => {\r\n    const contextRef = React.useRef<HTMLElement | null>(null);\r\n    const [open, setOpen] = React.useState(false)\r\n\r\n    const close = () => {\r\n        setOpen(false);\r\n        onClose();\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {!event && <div\r\n                onContextMenu={(e: React.MouseEvent) => {\r\n                    e.preventDefault()\r\n\r\n                    contextRef.current = createContextFromEvent(e)\r\n                    setOpen(true)\r\n                }}\r\n            >\r\n                {children}\r\n            </div>}\r\n\r\n            <Popup\r\n                basic\r\n                context={event ? { current: createContextFromEvent(event) } : contextRef}\r\n                onClose={close}\r\n                open={open || !!event}\r\n            >\r\n                <Menu\r\n                    items={items}\r\n                    onItemClick={(_, data) => { close(); onClicked(data) }}\r\n                    secondary\r\n                    vertical\r\n                />\r\n            </Popup>\r\n        </>\r\n    )\r\n}","import React from 'react';\r\nimport { ContextMenu } from './ContextMenu';\r\n\r\nexport interface ScheneListContextMenuProps {\r\n    onSelected: (selection: 'insertBefore' | 'insertAfter' | 'delete') => unknown\r\n}\r\n\r\nexport const SceneListContextMenu: React.FC<ScheneListContextMenuProps> = ({ onSelected, children }) => (\r\n    <ContextMenu onClose={() => { }} items={[\r\n        { name: 'insertBefore', content: 'j elem', icon: 'left arrow' },\r\n        { name: 'delete', content: 'Trl', icon: 'delete' },\r\n        { name: 'insertAfter', content: 'j elem', icon: 'right arrow' },\r\n    ]}\r\n        onClicked={item => {\r\n            onSelected(item.name as any);\r\n        }}>\r\n        {children}\r\n    </ContextMenu>\r\n);","import { xml2js, Element, js2xml } from 'xml-js';\r\n\r\nexport interface DOMElement extends Element {\r\n    $parent: DOMElement;\r\n    elements?: Array<DOMElement>;\r\n}\r\n\r\nconst findElements = (root: DOMElement, filter: (ob: DOMElement) => boolean): Array<DOMElement> => {\r\n    let ret: Array<DOMElement> = [];\r\n    if (filter(root)) {\r\n        ret.push(root);\r\n    }\r\n    const children = root.elements?.map(elem => findElements(elem, filter));\r\n    children?.forEach(ch => {\r\n        ret = ret.concat(ch);\r\n    })\r\n    return ret;\r\n}\r\n\r\nconst findElementsByName = (root: DOMElement, name: string): Array<DOMElement> => {\r\n    return findElements(root, e => e.name === name);\r\n}\r\n\r\nconst findById = (root: DOMElement, name: string, id: string): DOMElement | null => {\r\n    const found = findElements(root, e => e.name === name && DomUtils.attr(e, 'id') === id);\r\n    return found.length > 0 ? found[0] : null;\r\n}\r\n\r\nconst findReferences = (root: DOMElement, target: DOMElement): Array<DOMElement> => {\r\n    const id = DomUtils.attr(target, 'id');\r\n    if (!id) {\r\n        return [];\r\n    }\r\n    return findElements(root, e => DomUtils.attr(e, 'ref') === id);\r\n}\r\n\r\n\r\nconst children = (elem: DOMElement, name: string): Array<DOMElement> => {\r\n    return elem.elements?.filter(e => e.name === name) ?? [];\r\n}\r\n\r\nconst addChild = (parent: DOMElement, name: string, referenceSibling?: DOMElement, insert: 'after' | 'before' = 'after'): DOMElement => {\r\n    const newElement: DOMElement = { type: 'element', name, $parent: parent };\r\n    return addChildElement(parent, newElement, referenceSibling, insert);\r\n}\r\n\r\n\r\nconst addChildElement = (parent: DOMElement, child: DOMElement, referenceSibling?: DOMElement, insert: 'after' | 'before' = 'after'): DOMElement => {\r\n    parent.elements = parent.elements ?? [];\r\n    let insertIndex = 0;\r\n    if (referenceSibling) {\r\n        const referenceIndex = parent.elements.indexOf(referenceSibling);\r\n        insertIndex = insert === 'after' ? referenceIndex + 1 : referenceIndex;\r\n    } else {\r\n        insertIndex = insert === 'after' ? parent.elements.length : 0;\r\n    }\r\n    parent.elements.splice(insertIndex, 0, child);\r\n    child.$parent = parent;\r\n\r\n    return child;\r\n}\r\n\r\nconst deleteChild = (parent: DOMElement, child: DOMElement) => {\r\n    parent.elements = parent.elements ?? [];\r\n    const deleteIndex = parent.elements.indexOf(child);\r\n    if (deleteIndex !== -1) {\r\n        parent.elements.splice(deleteIndex, 1);\r\n    }\r\n}\r\n\r\nconst addText = (parent: DOMElement, text: string, previousSibling?: DOMElement): DOMElement => {\r\n    parent.elements = parent.elements ?? [];\r\n    const insertIndex = previousSibling ? parent.elements.indexOf(previousSibling) + 1 : 0;\r\n    const newElement: DOMElement = { type: 'text', text, $parent: parent };\r\n    parent.elements.splice(insertIndex, 0, newElement);\r\n    return newElement;\r\n}\r\n\r\n\r\nconst child = (elem: DOMElement, name: string): DOMElement | null => {\r\n    const c = children(elem, name);\r\n    return c.length > 0 ? c[0] : null;\r\n}\r\n\r\nconst childText = (elem: Element, name: string): string => {\r\n    const ret = elem.elements?.find(e => e.name === name);\r\n    return text(ret);\r\n}\r\n\r\nconst attr = (elem: Element, name: string, value?: string | null): string => {\r\n    if (value !== undefined) {\r\n        elem.attributes = elem.attributes ?? {};\r\n        if (value !== null) {\r\n            elem.attributes[name] = value;\r\n        } else {\r\n            delete elem.attributes[name];\r\n        }\r\n    }\r\n    return (elem.attributes?.[name] ?? '').toString();\r\n}\r\n\r\n\r\nconst text = (elem?: Element): string => {\r\n    return elem?.elements?.map(t => t.text).join(' ') ?? '';\r\n}\r\n\r\nconst parse = (str: string): DOMElement => {\r\n    return xml2js(str, { compact: false, nativeType: true, trim: false, addParent: true, parentKey: '$parent' }) as DOMElement;\r\n}\r\n\r\nconst convertLegacyLinks = (elem: DOMElement) => {\r\n    if (elem.name === 'link') {\r\n        const [type, ref] = DomUtils.attr(elem, 'target').split(':');\r\n        elem.name = type;\r\n        elem.attributes = { ref }\r\n    }\r\n    if (elem.name === 'setting' && elem.$parent.name === 'scene') { //wrap legacy scene <setting> into a background event instead\r\n        const events = child(elem.$parent, 'events') || addChild(elem.$parent, 'events');\r\n        const event = addChild(events, 'event', undefined, 'before');\r\n        attr(event, 'role', 'background');\r\n        deleteChild(elem.$parent, elem);\r\n        addChildElement(event, elem);\r\n    }\r\n    elem.elements?.forEach(e => convertLegacyLinks(e));\r\n}\r\n\r\nconst print = (root: Element): string => {\r\n    return js2xml(root, { compact: false, parentKey: '$parent' });\r\n}\r\n\r\n\r\nexport const DomUtils = {\r\n    addChild,\r\n    addChildElement,\r\n    addText,\r\n    attr,\r\n    text,\r\n    child,\r\n    childText,\r\n    children,\r\n    deleteChild,\r\n    findById,\r\n    findElementsByName,\r\n    findReferences,\r\n    findElements,\r\n    parse,\r\n    convertLegacyLinks,\r\n    print\r\n};","import React, { useState } from 'react';\r\nimport { Button, Icon, Input, Label, Modal } from 'semantic-ui-react';\r\n\r\nexport interface CommentEditorModalProps {\r\n    addComment: (comment: string) => unknown\r\n}\r\n\r\nexport const CommentEditorModal: React.FC<CommentEditorModalProps> = ({ addComment }) => {\r\n    const [kommentModal, setKommentModal] = useState(false);\r\n    const [editedKomment, setEditedKomment] = useState('');\r\n\r\n    return <Modal trigger={<Icon name='comment' />} onOpen={() => setKommentModal(true)} onClose={() => setKommentModal(false)} open={kommentModal}>\r\n        <Modal.Content>\r\n            <Input fluid labelPosition='left' placeholder='Komment...' error={!editedKomment} value={editedKomment} onChange={e => setEditedKomment(e.target.value)}>\r\n                <Label pointing='right' basic>Komment</Label>\r\n                <input />\r\n                <Button floated='right' disabled={!editedKomment} onClick={() => {\r\n                    addComment(editedKomment);\r\n                    setEditedKomment('');\r\n                    setKommentModal(false);\r\n                }}>Ment</Button>\r\n            </Input>\r\n\r\n        </Modal.Content>\r\n    </Modal>\r\n}\r\n","import React from 'react';\r\nimport { List, Popup } from 'semantic-ui-react';\r\nimport { DOMElement } from '../utils/DomUtils';\r\nimport { Renderer } from '../utils/RenderUtils';\r\n\r\nexport interface CommentListProps {\r\n    comments?: Array<DOMElement>;\r\n    deleteComment: (comment: DOMElement) => unknown;\r\n    renderer: Renderer\r\n}\r\n\r\nexport const CommentList: React.FC<CommentListProps> = ({ comments, deleteComment, renderer }) => (\r\n    <>\r\n        {comments && comments.length ? <Popup hoverable trigger={<List.Description>{comments.length}&nbsp;komment</List.Description>} wide>\r\n            <List>\r\n                {comments.map(c => <List.Item><List.Icon name='delete' onClick={() => deleteComment(c)} /><List.Content>{renderer.renderElement(c)}</List.Content></List.Item>)}\r\n            </List>\r\n        </Popup>\r\n            : ''\r\n        }\r\n    </>\r\n)","import React, { useState } from 'react';\r\nimport { Icon, SemanticICONS } from 'semantic-ui-react';\r\nimport { CommentUtils } from '../utils/CommentUtils';\r\nimport { DOMElement, DomUtils } from '../utils/DomUtils';\r\nimport { Renderer } from '../utils/RenderUtils';\r\nimport { CommentEditorModal } from './CommentEditorModal';\r\nimport { CommentList } from './CommentList';\r\n\r\nexport const ROLE_ICONS: Record<string, SemanticICONS> = {\r\n    'normal': 'angle right',\r\n    'entrance': 'sign-in',\r\n    'exit': 'sign-out',\r\n    'info': 'info circle',\r\n    'background': 'film',\r\n    'speech': 'comment alternate outline',\r\n    'warning': 'warning'\r\n\r\n}\r\n\r\nconst iconForRole = (role: string): SemanticICONS => {\r\n    return ROLE_ICONS[role] ?? 'square full';\r\n}\r\n\r\nexport interface EditedEvent {\r\n    operation?: 'insertAfter' | 'insertBefore' | 'delete' | 'edit';\r\n}\r\n\r\nexport interface StoryEventProps {\r\n    event: DOMElement,\r\n    renderer: Renderer,\r\n    onClick: () => unknown,\r\n    commentUtils: CommentUtils,\r\n    onChange: () => unknown;\r\n    onContextMenu: (event: React.MouseEvent) => unknown,\r\n    onEdit: () => unknown;\r\n};\r\n\r\nexport const StoryEvent: React.FC<StoryEventProps> = ({ event, renderer, onClick, commentUtils, onChange, onContextMenu, onEdit }) => {\r\n    const role = DomUtils.attr(event, 'role').toString() || 'normal';\r\n    const status = DomUtils.attr(event, 'status');\r\n    const [active, setActive] = useState(false);\r\n\r\n    return <div onContextMenu={e => {\r\n        onContextMenu(e);\r\n        e.preventDefault();\r\n    }} style={\r\n        {\r\n            backgroundColor: status === 'completed' ? '#eefeee' : undefined,\r\n            display: 'flex',\r\n            alignItems: 'start',\r\n            width: '100%',\r\n            justifyContent: 'space-between',\r\n            padding: '1em',\r\n            borderTop: '1px solid #444',\r\n            borderBottom: '1px solid #444',\r\n        }}\r\n        onMouseEnter={() => !active && setActive(true)}\r\n        onMouseLeave={() => active && setActive(false)}\r\n    >\r\n        <div>\r\n            <ul style={{ listStyle: 'none', margin: '0' }}>\r\n                <li><Icon name={iconForRole(role)} /></li>\r\n                {active && <li style={{ cursor: 'pointer' }}><Icon name='edit' onClick={onEdit} /></li>}\r\n            </ul>\r\n        </div>\r\n        <div style={{ flexGrow: 1 }}>\r\n\r\n            {renderer.renderElement(event)}\r\n        </div>\r\n        <div style={{ textAlign: 'right' }}>\r\n            <CommentEditorModal addComment={content => { commentUtils.add(content); onChange(); }} />\r\n            <Icon name='checkmark' color={status === 'completed' ? 'green' : undefined} onClick={onClick} />\r\n            <CommentList comments={commentUtils.list()} deleteComment={comment => { commentUtils.remove(comment); onChange() }} renderer={renderer} />\r\n        </div>\r\n    </div>\r\n}\r\n","import { ContentBlock, ContentState, genKey, Modifier, SelectionState } from \"draft-js\";\r\nimport { DOMElement } from \"./DomUtils\";\r\n\r\nconst lastPos = (state: ContentState): SelectionState => {\r\n    const len = state.getLastBlock().getLength();\r\n    return createSelection(state, len, len);\r\n}\r\n\r\nconst createSelection = (state: ContentState, start: number, end: number) => {\r\n    let selection = SelectionState.createEmpty(state.getLastBlock().getKey());\r\n    return selection.merge({ anchorOffset: start, focusOffset: end });\r\n}\r\n\r\nconst addEntityToSelection = (state: ContentState, type: string, data: any, selection: SelectionState) => {\r\n    console.log('adding entity', type, data, selection);\r\n    let ret = state;\r\n    ret = ret.createEntity(type, 'MUTABLE', data);\r\n    const entityKey = ret.getLastCreatedEntityKey();\r\n    console.log(entityKey);\r\n    ret = Modifier.applyEntity(ret, selection, entityKey);\r\n    return ret;\r\n\r\n}\r\n\r\nconst addEntity = (state: ContentState, type: string, data: any, start: number, end: number): ContentState => {\r\n    return addEntityToSelection(state, type, data, createSelection(state, start, end));\r\n}\r\n\r\nconst addBlock = (state: ContentState): ContentState => {\r\n    console.log('creating new block');\r\n    const block = new ContentBlock({\r\n        key: genKey(),\r\n        type: 'paragraph',\r\n        text: '',\r\n    });\r\n    const blockMap = state.getBlockMap().merge({ [block.getKey()]: block }).toOrderedMap();\r\n    return state.merge({ blockMap }) as ContentState;\r\n}\r\n\r\nconst processElement = (elem: DOMElement, state: ContentState, contentsOnly: boolean, block?: ContentBlock): ContentState => {\r\n    console.log('processing', elem, contentsOnly, block);\r\n    let ret = state;\r\n    if (elem.type === 'text') {\r\n        console.log('adding text', elem.text);\r\n        if (!block) {\r\n            ret = addBlock(ret);\r\n        }\r\n        return Modifier.insertText(ret, lastPos(ret), elem.text as string);\r\n    } else if (elem.elements) {\r\n        if ((elem.name === 'p' || !block) && !contentsOnly) {\r\n            ret = addBlock(ret);\r\n        }\r\n        elem.elements.forEach(e => {\r\n            console.log('adding', e, elem);\r\n            const start = ret.getLastBlock()?.getLength() ?? 0;\r\n            ret = processElement(e, ret, false, ret.getLastBlock());\r\n            const end = ret.getLastBlock().getLength();;\r\n            if (e.name && e.name !== 'p') {\r\n                ret = addEntity(ret, e.name, e.attributes, start, end);\r\n            }\r\n        });\r\n        return ret;\r\n    }\r\n    return ret;\r\n}\r\n\r\nconst blockToElement = ($parent: DOMElement, state: ContentState, block: ContentBlock): DOMElement => {\r\n    const ret: DOMElement = {\r\n        type: 'element',\r\n        name: 'p',\r\n        $parent,\r\n        elements: []\r\n    };\r\n    const text = block.getText();\r\n    block.findEntityRanges(() => true, (start, end) => {\r\n        const entityKey = block.getEntityAt(start);\r\n        const textNode: DOMElement = {\r\n            type: 'text',\r\n            text: text.substring(start, end),\r\n            $parent\r\n        };\r\n        if (entityKey) {\r\n            const entity = state.getEntity(entityKey);\r\n            ret.elements?.push({\r\n                type: 'element',\r\n                name: entity.getType(),\r\n                attributes: entity.getData(),\r\n                elements: [textNode],\r\n                $parent: ret\r\n            });\r\n        } else {\r\n            ret.elements?.push(textNode);\r\n        }\r\n    });\r\n    return ret;\r\n}\r\n\r\nconst toElements = (state: ContentState, $parent: DOMElement): Array<DOMElement> => {\r\n    const ret = state.getBlocksAsArray().map(block => blockToElement($parent, state, block));\r\n    if (ret.length === 1) {\r\n        return ret[0].elements ?? [];\r\n    }\r\n    return ret;\r\n}\r\n\r\nexport const EditorUtils = {\r\n    processElement,\r\n    toElements,\r\n    addEntity,\r\n    addEntityToSelection\r\n}","import { EditorState, Modifier } from 'draft-js';\r\nimport React, { useState } from 'react';\r\nimport { Button, Dropdown, Input, Label, Modal } from 'semantic-ui-react';\r\nimport { DOMElement, DomUtils } from '../../utils/DomUtils';\r\nimport { EditorUtils } from '../../utils/EditorUtils';\r\n\r\nconst { addEntityToSelection } = EditorUtils;\r\n\r\n\r\nexport const EditingButtons: React.FC<{ editorState: EditorState; setEditorState(s: EditorState): unknown, root: DOMElement }> = ({ editorState, setEditorState, root }) => {\r\n\r\n    const [editorPopup, setEditorPopup] = useState<string>();\r\n    const [editedValue, setEditedValue] = useState<Record<string, string>>({});\r\n\r\n    function addTag(name: string, attrs?: Record<string, string>) {\r\n        const selection = editorState.getSelection();\r\n        const newContent = addEntityToSelection(editorState.getCurrentContent(), name, attrs, selection);\r\n        setEditorState(EditorState.push(editorState, newContent, 'apply-entity'));\r\n    }\r\n\r\n    function findTargets(type: string): Array<{ key: string, text: string, value: string }> {\r\n        return DomUtils.findElementsByName(root, type).filter(e => DomUtils.attr(e, 'id')).map(e => ({ key: DomUtils.attr(e, 'id'), value: DomUtils.attr(e, 'id'), text: DomUtils.childText(e, 'name') }));\r\n    }\r\n\r\n    function findScenes(): Array<{ key: string, text: string, value: string }> {\r\n        return DomUtils.findElementsByName(root, 'scene').map(e => ({ key: DomUtils.attr(e, 'id'), value: DomUtils.attr(e, 'id'), text: DomUtils.attr(e, 'title') }));\r\n    }\r\n\r\n    return <>\r\n        <Modal open={editorPopup !== undefined} onClose={() => setEditorPopup(undefined)}>\r\n            <Modal.Content>\r\n                {editorPopup === 'roll' && <>\r\n                    <Input labelPosition='left' value={editedValue.details ?? ''} onChange={e => setEditedValue({ details: e.target.value })}>\r\n                        <Label pointing='right' basic>Dobs</Label>\r\n                        <input />\r\n                    </Input>\r\n                    <Button primary onClick={() => {\r\n                        addTag('roll', editedValue);\r\n                        setEditedValue({});\r\n                        setEditorPopup(undefined)\r\n                    }\r\n                    }>OK</Button>\r\n                </>}\r\n                {(editorPopup === 'character' || editorPopup === 'item') && <>\r\n                    <Dropdown\r\n                        fluid\r\n                        search\r\n                        selection\r\n                        value={editedValue.ref}\r\n                        options={findTargets(editorPopup)}\r\n                        onChange={(e, data) => setEditedValue({ ref: data.value?.toString() ?? '' })} />\r\n                    <Button primary onClick={() => {\r\n                        addTag(editorPopup, editedValue);\r\n                        setEditedValue({});\r\n                        setEditorPopup(undefined)\r\n                    }\r\n                    }>OK</Button>\r\n                </>}\r\n                {(editorPopup === 'jump') && <>\r\n                    <Dropdown\r\n                        fluid\r\n                        search\r\n                        selection\r\n                        value={editedValue.ref}\r\n                        options={findScenes()}\r\n                        onChange={(e, data) => setEditedValue({ scene: data.value?.toString() ?? '' })} />\r\n                    <Button primary onClick={() => {\r\n                        addTag(editorPopup, editedValue);\r\n                        setEditedValue({});\r\n                        setEditorPopup(undefined)\r\n                    }\r\n                    }>OK</Button>\r\n                </>}\r\n                {editorPopup === 'setting' && <>\r\n                    <div>\r\n                        <Input labelPosition='left' value={editedValue.map ?? ''} onChange={e => setEditedValue({ ...editedValue, map: e.target.value })}>\r\n                            <Label pointing='right' basic>Trkp link</Label>\r\n                            <input />\r\n                        </Input>\r\n                    </div>\r\n                    <div>\r\n                        <Input labelPosition='left' value={editedValue.description ?? ''} onChange={e => setEditedValue({ ...editedValue, description: e.target.value })}>\r\n                            <Label pointing='right' basic>Lers link</Label>\r\n                            <input />\r\n                        </Input>\r\n                    </div>\r\n                    <Button primary onClick={() => {\r\n                        addTag('setting', editedValue);\r\n                        setEditedValue({});\r\n                        setEditorPopup(undefined)\r\n                    }\r\n                    }>OK</Button>\r\n                </>}\r\n            </Modal.Content>\r\n        </Modal>\r\n        <Button onClick={() => addTag('reward')} icon='trophy'></Button>\r\n        <Button onClick={() => setEditorPopup('roll')} icon='cube'></Button>\r\n        <Button onClick={() => setEditorPopup('setting')} icon='map marker alternate'></Button>\r\n        <Button onClick={() => setEditorPopup('character')} icon='user outline'></Button>\r\n        <Button onClick={() => setEditorPopup('item')} icon='gift'></Button>\r\n        <Button onClick={() => setEditorPopup('jump')} icon='paper plane outline'></Button>\r\n        <Button floated='right' onClick={() => {\r\n            const newContent = Modifier.applyEntity(editorState.getCurrentContent(), editorState.getSelection(), null);\r\n\r\n            setEditorState(EditorState.push(editorState, newContent, 'apply-entity'));\r\n        }} icon='remove circle'></Button>\r\n\r\n    </>;\r\n}","import React, { useState } from 'react';\r\nimport { Button } from 'semantic-ui-react';\r\nimport { DOMElement, DomUtils } from '../utils/DomUtils';\r\nimport { EventEditor } from './editor/EventEditor';\r\n\r\nexport interface EditableTextProps {\r\n    elem?: DOMElement | null;\r\n    root: DOMElement;\r\n    onChange: (elemt: DOMElement) => unknown;\r\n    create: () => unknown;\r\n    readOnly: boolean;\r\n}\r\n\r\nexport const EditableNode: React.FC<EditableTextProps> = ({ elem, root, onChange, children, create, readOnly }) => {\r\n    const [edited, setEdited] = useState<boolean>(false);\r\n\r\n    if (!readOnly) {\r\n        if (!elem) {\r\n            return <Button size='mini' onClick={() => { create(); setTimeout(() => setEdited(true), 0) }}>Create</Button>\r\n        }\r\n\r\n        if (!edited && !DomUtils.text(elem)) {\r\n            return <Button size='mini' onClick={() => setEdited(true)}>Edit</Button>\r\n        }\r\n        if (edited) {\r\n            return <EventEditor elem={elem} root={root} onFinished={res => { if (res) { onChange(elem); } setEdited(false) }} />\r\n        }\r\n    }\r\n    return <div onClick={() => setEdited(true)}>{children}</div>;\r\n\r\n}","import { DomUtils } from '../DomUtils';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const EventRenderer: RendererComponent = ({ children, elem, switchToScene }) => {\r\n    const role = DomUtils.attr(elem, 'role').toString() || 'normal';\r\n\r\n    if (role === 'background') {\r\n        return <i>{children}</i>;\r\n    } else if (role === 'speech') {\r\n        return <blockquote>{children}</blockquote>;\r\n    } else {\r\n        return <>{children}</>;\r\n    }\r\n}","import { Icon } from 'semantic-ui-react';\r\nimport { DomUtils } from '../DomUtils';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const JumpRenderer: RendererComponent = ({ children, elem, switchToScene }) => <><Icon name='paper plane outline' fitted /> <em style={{ cursor: 'pointer' }} onClick={() => switchToScene(DomUtils.attr(elem, 'scene'))}>{children}</em></>;","import { DomUtils } from '../DomUtils';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const LanguageRenderer: RendererComponent = ({ children, elem }) => {\r\n    const level = DomUtils.attr(elem, 'level');\r\n    return <>{children} { level ? <em>({level})</em> : ''}</>;\r\n}","import { RendererComponent } from '../RenderUtils';\r\n\r\nexport const ParagraphRenderer: RendererComponent = ({ children }) => (<p>{children}</p>);","import React from 'react';\r\nimport { Icon } from 'semantic-ui-react';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const RewardRenderer: RendererComponent = ({ children }) => <><Icon name='trophy' fitted /> <strong>{children}</strong></>;","import React from 'react';\r\nimport { Icon, Popup } from 'semantic-ui-react';\r\nimport { DomUtils } from '../DomUtils';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const RollRenderer: RendererComponent = ({ children, elem }) => {\r\n    const details = DomUtils.attr(elem, 'details');\r\n    if (details) {\r\n        return <Popup hoverable trigger={<span><Icon name='cube' fitted /> <strong>{children}</strong></span>} wide>\r\n            <Popup.Content>\r\n                {details}\r\n            </Popup.Content>\r\n        </Popup>\r\n    } else {\r\n        return <><Icon name='cube' fitted /> <strong>{children}</strong></>;\r\n    }\r\n}","import { Icon } from 'semantic-ui-react';\r\nimport { DomUtils } from '../DomUtils';\r\nimport { RendererComponent } from '../RenderUtils';\r\n\r\nexport const SettingRenderer: RendererComponent = ({ children, elem }) => {\r\n    const map = DomUtils.attr(elem, 'map');\r\n    const description = DomUtils.attr(elem, 'description');\r\n\r\n    return <>\r\n        <Icon title={map ? 'Trkp' : undefined} style={map ? { cursor: 'pointer' } : {}} name='map marker alternate' onClick={() => map && window.open(map as string, '_blank')} />\r\n        <strong title={description ? 'Lers' : undefined} style={description ? { cursor: 'pointer' } : {}} onClick={() => description && window.open(description as string, '_blank')}>{children}</strong>\r\n    </>\r\n}","import React, { ReactNode } from 'react';\r\nimport { Button, Card, CardGroup, Icon, Popup, SemanticICONS, Table } from 'semantic-ui-react';\r\nimport { EditableNode } from '../components/EditableNode';\r\nimport { DOMElement, DomUtils } from './DomUtils';\r\nimport { EventRenderer } from './inlinerenderers/EventRenderer';\r\nimport { JumpRenderer } from './inlinerenderers/JumpRenderer';\r\nimport { LanguageRenderer } from './inlinerenderers/LanguageRenderer';\r\nimport { ParagraphRenderer } from './inlinerenderers/ParagraphRenderer';\r\nimport { RewardRenderer } from './inlinerenderers/RewardRenderer';\r\nimport { RollRenderer } from './inlinerenderers/RollRenderer';\r\nimport { SettingRenderer } from './inlinerenderers/SettingRenderer';\r\n\r\nexport const STORY_TAG_ICONS: Record<string, SemanticICONS> = {\r\n    setting: 'map marker alternate',\r\n    roll: 'cube',\r\n    reward: 'trophy',\r\n    character: 'user outline',\r\n    item: 'gift',\r\n    jump: 'paper plane outline',\r\n    '': 'question'\r\n}\r\n\r\nexport type RendererComponent = React.FC<{ elem: DOMElement; switchToScene: (id: string) => unknown }>;\r\n\r\n\r\n\r\nconst StoryElement: React.FC<{ elem: DOMElement | null, root: DOMElement, switchToScene: (id: string) => unknown }> = ({ elem, root, switchToScene }) => {\r\n    if (!elem) {\r\n        return <></>;\r\n    }\r\n    if (elem.type === 'text') {\r\n        return <>{elem.text}</>;\r\n    }\r\n    const contents = <>\r\n        {elem.elements?.map(e => <StoryElement elem={e} root={root} switchToScene={switchToScene} />)}\r\n    </>;\r\n    switch (elem.name) {\r\n        case 'p': return <ParagraphRenderer switchToScene={switchToScene} elem={elem}>{contents}</ParagraphRenderer>\r\n        case 'setting': return <SettingRenderer switchToScene={switchToScene} elem={elem}>{contents}</SettingRenderer>\r\n        case 'roll': return <RollRenderer switchToScene={switchToScene} elem={elem}>{contents}</RollRenderer>\r\n        case 'reward': return <RewardRenderer switchToScene={switchToScene} elem={elem}>{contents}</RewardRenderer>\r\n        case 'jump': return <JumpRenderer switchToScene={switchToScene} elem={elem}>{contents}</JumpRenderer>\r\n        case 'langauge': return <LanguageRenderer switchToScene={switchToScene} elem={elem}>{contents}</LanguageRenderer>\r\n        case 'event': return <EventRenderer switchToScene={switchToScene} elem={elem}>{contents}</EventRenderer>\r\n        case 'character':\r\n        case 'item':\r\n            {\r\n                const target = DomUtils.attr(elem, 'ref').toString();\r\n                const targetElem = DomUtils.findById(root, elem.name, target);\r\n                if (targetElem) {\r\n                    const targetIcon: SemanticICONS = targetElem.name === 'character' ? 'user outline' : 'gift';\r\n                    return <Popup hoverable trigger={<span><Icon name={targetIcon} fitted /> <strong>{contents}</strong></span>} wide>\r\n                        <Popup.Content>\r\n                            <StoryCard tag={targetElem} root={root} switchToScene={switchToScene} readOnly={true} save={() => { throw new Error('edit not implemented') }} />\r\n                        </Popup.Content>\r\n                    </Popup>\r\n                }\r\n                return contents;\r\n            } case 'language': {\r\n                const level = DomUtils.attr(elem, 'level');\r\n                return <>{contents} { level ? <em>({level})</em> : ''}</>;\r\n            }\r\n        default: {\r\n            return contents;\r\n        }\r\n    }\r\n}\r\n\r\nconst StoryCard: React.FC<{ tag: DOMElement, root: DOMElement, switchToScene: (id: string) => unknown, save: () => unknown, readOnly: boolean }> = ({ tag, root, switchToScene, save, readOnly }) => {\r\n    if (tag.name === 'character') {\r\n        return <CharacterCard save={save} elem={tag} root={root} switchToScene={switchToScene} readOnly={readOnly} />\r\n    }\r\n    if (tag.name === 'item') {\r\n        return <ItemCard save={save} elem={tag} root={root} switchToScene={switchToScene} readOnly={readOnly} />\r\n    }\r\n    return null;\r\n}\r\n\r\nconst TableRow: React.FC<{ label: string, elem: DOMElement | null, root: DOMElement, switchToScene: (id: string) => unknown, save: () => unknown, create: () => unknown, readOnly: boolean }> = ({ label, elem, root, switchToScene, save, create, readOnly }) => {\r\n    return <Table.Row>\r\n        <Table.Cell>{label}</Table.Cell>\r\n        <Table.Cell><EditableNode readOnly={readOnly} elem={elem} root={root} onChange={save} create={create}><StoryElement elem={elem} root={root} switchToScene={switchToScene} /></EditableNode> </Table.Cell>\r\n    </Table.Row>;\r\n}\r\n\r\n\r\n\r\nconst CharacterCard: React.FC<{ elem: DOMElement, root: DOMElement, switchToScene: (id: string) => unknown, save: () => unknown, readOnly: boolean }> = ({ elem, root, switchToScene, save, readOnly }) => {\r\n\r\n    const NestedTableRow: React.FC<{ name: string, parent: DOMElement, label: string }> = ({ name, parent, label }) => {\r\n        const elems = DomUtils.findElementsByName(parent, name);\r\n        const [first, ...rest] = elems;\r\n        return <>\r\n            <Table.Row key={`${name}-first`}>\r\n                <Table.Cell rowSpan={elems.length + 1}>{label}</Table.Cell>\r\n                <Table.Cell>\r\n                    <EditableNode readOnly={readOnly} elem={first} root={root} onChange={save} create={() => { DomUtils.addChild(parent, name); save() }}>\r\n                        <Button size='tiny' basic floated='right' icon='delete' onClick={() => { DomUtils.deleteChild(parent, first); save(); }} />\r\n                        <StoryElement elem={first} root={root} switchToScene={switchToScene} />\r\n                    </EditableNode>\r\n                </Table.Cell>\r\n            </Table.Row>\r\n            {rest.map((r, i) => <Table.Row key={`${name}-${i}`}><Table.Cell>\r\n                <EditableNode readOnly={readOnly} elem={r} root={root} onChange={save} create={() => { throw new Error('not applicable') }}>\r\n                    {!readOnly && <Button size='tiny' basic floated='right' icon='delete' onClick={() => { DomUtils.deleteChild(parent, r); save(); }} />}\r\n                    <StoryElement elem={r} root={root} switchToScene={switchToScene} />\r\n                </EditableNode>\r\n\r\n            </Table.Cell></Table.Row>)}\r\n            {first && !readOnly && <Table.Row key={`${name}-plus`}><Table.Cell><Button basic size='tiny' onClick={() => { DomUtils.addChild(parent, name); save() }} icon='plus' /></Table.Cell></Table.Row>}\r\n        </>;\r\n    }\r\n\r\n    const Row: React.FC<{ label: string, name: string }> = ({ label, name }) => <TableRow\r\n        key={name}\r\n        save={save}\r\n        label={label}\r\n        readOnly={readOnly}\r\n        elem={DomUtils.child(elem, name)}\r\n        create={() => { DomUtils.addChild(elem, name); save() }}\r\n        root={root}\r\n        switchToScene={switchToScene} />\r\n\r\n    return <Table definition striped columns={2} structured>\r\n        <Table.Body>\r\n            <Row label='Nv' name='name' />\r\n            <Row label='Faj' name='race' />\r\n            <Row label='Jellem' name='alignment' />\r\n            <Row label='Kaszt' name='class' />\r\n            <Row label='Szlfld' name='origin' />\r\n            <NestedTableRow parent={elem} name='language' label='Nyelvek' />\r\n            <Row label='Kinzet' name='looks' />\r\n            <Row label='Viselkeds' name='behaviour' />\r\n            <NestedTableRow parent={elem} name='loot' label='Felszerels' />\r\n        </Table.Body>\r\n    </Table>;\r\n}\r\n\r\n\r\nconst ItemCard: React.FC<{ elem: DOMElement, root: DOMElement, switchToScene: (id: string) => unknown, save: () => unknown, readOnly: boolean }> = ({ elem, root, switchToScene, save, readOnly }) => {\r\n\r\n    const Row: React.FC<{ label: string, name: string }> = ({ label, name }) => <TableRow\r\n        key={name}\r\n        save={save}\r\n        label={label}\r\n        readOnly={readOnly}\r\n        elem={DomUtils.child(elem, name)}\r\n        create={() => { DomUtils.addChild(elem, name); save() }}\r\n        root={root}\r\n        switchToScene={switchToScene} />\r\n\r\n\r\n    return <Table definition striped columns={2}>\r\n        <Table.Body>\r\n            <Row label='Nv' name='name' />\r\n            <Row label='rtk' name='value' />\r\n            <Table.Row>\r\n                <Table.Cell colSpan={2}>\r\n                    <EditableNode\r\n                        readOnly={readOnly}\r\n                        elem={DomUtils.child(elem, 'description')}\r\n                        root={root}\r\n                        onChange={save}\r\n                        create={() => { DomUtils.addChild(elem, 'description'); save() }}>\r\n                        <StoryElement elem={DomUtils.child(elem, 'description')} root={root} switchToScene={switchToScene} />\r\n                    </EditableNode>\r\n                </Table.Cell>\r\n            </Table.Row>\r\n        </Table.Body>\r\n    </Table>;\r\n}\r\n\r\nconst StoryCards: React.FC<{ root: DOMElement, name: string, switchToScene: (id: string) => unknown, save: () => unknown }> = ({ root, name, switchToScene, save }) => {\r\n    const cards = DomUtils.findElementsByName(root, name).filter(e => !e.attributes?.ref);\r\n    return <CardGroup itemsPerRow={5}>\r\n        {cards.map(c => <Card raised key={DomUtils.attr(c, 'id')}>\r\n            <Card.Content>\r\n                <Card.Header>{DomUtils.childText(c, 'name')}\r\n                    <Button floated='right' icon='delete' color='red'\r\n                        disabled={DomUtils.findReferences(root, c).length > 0}\r\n                        onClick={() => {\r\n                            DomUtils.deleteChild(c.$parent, c);\r\n                            save();\r\n                        }} />\r\n                </Card.Header>\r\n                <Card.Meta>\r\n                    <StoryCard readOnly={false} save={save} tag={c} root={root} switchToScene={switchToScene} />\r\n                </Card.Meta>\r\n            </Card.Content>\r\n        </Card>\r\n        )}\r\n    </CardGroup>\r\n}\r\n\r\nexport interface Renderer {\r\n    renderElement: (elem: DOMElement) => ReactNode\r\n    renderCards: (name: string, save: () => unknown) => ReactNode\r\n}\r\n\r\nconst createRenderer = (root: DOMElement, switchScene: (id: string) => unknown): Renderer => {\r\n    return {\r\n        renderElement: elem => <StoryElement elem={elem} root={root} switchToScene={switchScene} />,\r\n        renderCards: (name, save) => <StoryCards save={save} root={root} name={name} switchToScene={switchScene} />\r\n    }\r\n}\r\n\r\nexport const RenderUtils = {\r\n    createRenderer\r\n}","import { ContentState } from 'draft-js';\r\nimport React from 'react';\r\nimport { Icon, SemanticICONS } from 'semantic-ui-react';\r\nimport { STORY_TAG_ICONS } from '../../utils/RenderUtils';\r\n\r\nexport type DraftDecoratorComponentProps = {\r\n    contentState: ContentState,\r\n    decoratedText: string,\r\n    end: number,\r\n    // Many folks mistakenly assume that there will always be an 'entityKey'\r\n    // passed to a DecoratorComponent.\r\n    // To find the `entityKey`, Draft calls\r\n    // `contentBlock.getEntityKeyAt(leafNode)` and in many cases the leafNode does\r\n    // not have an entityKey. In those cases the entityKey will be null or\r\n    // undefined. That's why `getEntityKeyAt()` is typed to return `?string`.\r\n    // See https://github.com/facebook/draft-js/blob/2da3dcb1c4c106d1b2a0f07b3d0275b8d724e777/src/model/immutable/BlockNode.js#L51\r\n    entityKey?: string,\r\n    offsetKey: string,\r\n    start: number,\r\n};\r\n\r\n\r\n\r\nexport const IconComponent: React.FC<DraftDecoratorComponentProps> = ({ offsetKey, children, contentState, entityKey }) => {\r\n    const entity = entityKey ? contentState.getEntity(entityKey) : null;\r\n    const icon: SemanticICONS = STORY_TAG_ICONS[entity?.getType() ?? ''];\r\n    return <>\r\n        <span\r\n            style={{ fontWeight: 'bold' }}\r\n            data-offset-key={offsetKey}\r\n        >\r\n            <Icon name={icon} fitted />\r\n            {children}\r\n        </span>\r\n    </>;\r\n};","import React from 'react';\r\nimport { Dropdown, DropdownItemProps, Label } from 'semantic-ui-react';\r\nimport { ROLE_ICONS } from '../StoryEvent';\r\n\r\nconst options: Array<DropdownItemProps> = Object.keys(ROLE_ICONS).map(role => ({\r\n    key: role,\r\n    value: role,\r\n    text: role,\r\n    icon: ROLE_ICONS[role]\r\n}));\r\n\r\nexport const EventRowSelector: React.FC<{ role?: string, onRoleSelected(role?: string): unknown }> = ({ role, onRoleSelected }) => (\r\n    <>\r\n        <Label pointing='right'>\r\n            Event role:\r\n        </Label>\r\n        <Dropdown\r\n            placeholder='Select Role'\r\n            labeled\r\n            selection\r\n            value={role}\r\n            onChange={(e, { value }) => { onRoleSelected(value as string) }}\r\n            options={options}\r\n        >\r\n        </Dropdown>\r\n    </>\r\n)","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { CompositeDecorator, ContentState, Editor, EditorState, getDefaultKeyBinding } from 'draft-js';\r\nimport 'draft-js/dist/Draft.css';\r\nimport { Button, Label, Segment } from 'semantic-ui-react';\r\nimport { EditorUtils } from '../../utils/EditorUtils';\r\nimport { EditingButtons } from './EditingButtons';\r\nimport { IconComponent } from './IconComponent';\r\nimport { DOMElement, DomUtils } from '../../utils/DomUtils';\r\nimport { EventRowSelector } from './EventRoleSelector';\r\nimport { NumberInput } from '../../../components/NumberInput';\r\n\r\nconst { processElement, toElements } = EditorUtils;\r\n\r\n\r\ninterface EventEditorProps { elem: DOMElement, onFinished(save: boolean): unknown, root: DOMElement, eventEdited?: boolean };\r\n\r\nexport const EventEditor: React.FC<EventEditorProps> = ({ elem, onFinished, root, eventEdited }) => {\r\n    const [editorState, setEditorState] = useState(\r\n        () => EditorState.createEmpty(),\r\n    );\r\n    const [eventRole, setEventRole] = useState<string | undefined>(eventEdited ? DomUtils.attr(elem, 'role') : undefined);\r\n    const [eventDate, setEventDate] = useState<string | undefined>(eventEdited ? DomUtils.attr(elem, 'date') : undefined);\r\n\r\n    const onEscape = useCallback(() => {\r\n        onFinished(false);\r\n    }, [onFinished]);\r\n\r\n    useEffect(() => {\r\n        const state = processElement(elem, ContentState.createFromBlockArray([]), true);\r\n        const inlineDecorator = new CompositeDecorator([\r\n            {\r\n                strategy: (block, callback, _state) => {\r\n                    block.findEntityRanges(c => !!c.getEntity(), callback);\r\n                },\r\n                component: IconComponent\r\n            }\r\n        ]);\r\n        setEditorState(EditorState.createWithContent(state, inlineDecorator));\r\n    }, [elem, eventEdited]);\r\n\r\n\r\n    return <>\r\n        {eventEdited && <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n            <span>\r\n                <EventRowSelector role={eventRole} onRoleSelected={setEventRole} />\r\n            </span>\r\n            <span>\r\n                <NumberInput icons={false} min={-100000} max={100000} value={Number(eventDate || 0)} onChange={v => setEventDate(String(v))} />\r\n                <Label pointing='left'>Nap</Label>\r\n            </span>\r\n        </div>\r\n        }\r\n        <EditingButtons editorState={editorState} setEditorState={setEditorState} root={root} />\r\n        <Segment>\r\n            <Editor editorState={editorState} onChange={setEditorState} keyBindingFn={e => {\r\n                if (e.key === 'Escape') {\r\n                    return 'my-escape';\r\n                }\r\n                return getDefaultKeyBinding(e);\r\n            }}\r\n                handleKeyCommand={c => {\r\n                    if (c === 'my-escape') {\r\n                        onEscape();\r\n                        return 'handled';\r\n                    }\r\n                    return 'not-handled';\r\n                }}\r\n\r\n            />\r\n        </Segment>\r\n        <Button floated='left' primary onClick={() => {\r\n            if (eventEdited) {\r\n                DomUtils.attr(elem, 'role', eventRole);\r\n                if (eventDate !== undefined) {\r\n                    DomUtils.attr(elem, 'date', eventDate.toString());\r\n                }\r\n            }\r\n            elem.elements = toElements(editorState.getCurrentContent(), elem);\r\n            console.log('edited', DomUtils.print(elem))\r\n            onFinished(true);\r\n        }\r\n        }>Save</Button>\r\n        <Button floated='right' circular color='red' basic content='Cancel' onClick={() => onFinished(false)} />\r\n    </>;\r\n}\r\n","import React from 'react';\r\nimport { Modal } from 'semantic-ui-react';\r\nimport { DOMElement, DomUtils } from '../utils/DomUtils';\r\nimport { EventEditor } from './editor/EventEditor';\r\nimport { EventEditingState } from './StoryScene';\r\n\r\nexport interface EventEditorModalProps {\r\n    onEditingFinished: (save: boolean) => unknown;\r\n    editedEvent?: EventEditingState;\r\n    root: DOMElement;\r\n}\r\n\r\nexport const EventEditorModal: React.FC<EventEditorModalProps> = ({ editedEvent, onEditingFinished, root }) => {\r\n    return <Modal style={{ padding: '1em' }} open={editedEvent !== undefined} onClose={() => onEditingFinished(false)}>\r\n        <Modal.Content>\r\n            <div>\r\n                {editedEvent && <EventEditor elem={editedEvent.elem} onFinished={save => {\r\n                    if (save && editedEvent.insert) {\r\n                        DomUtils.addChildElement(editedEvent.elem.$parent as DOMElement, editedEvent.elem, editedEvent.anchor as DOMElement, editedEvent.insert);\r\n                    }\r\n                    onEditingFinished(save);\r\n                }\r\n                } root={root} eventEdited />}\r\n            </div>\r\n        </Modal.Content>\r\n    </Modal>;\r\n}","import React from 'react';\r\nimport { Popup } from 'semantic-ui-react';\r\n\r\nexport interface TimelineEvent {\r\n    date: number;\r\n    content: JSX.Element;\r\n}\r\n\r\nexport const Timeline: React.FC<{ events: Array<TimelineEvent>; width: number }> = ({ events, width }) => {\r\n\r\n    if (events.length < 2) {\r\n        return null;\r\n    }\r\n\r\n    const orderedEvents = events.sort((a, b) => a.date - b.date);\r\n\r\n\r\n    const heights = [...Array(orderedEvents.length - 1).fill(0).map((_, i) => orderedEvents[i + 1].date - orderedEvents[i].date), 0];\r\n\r\n    const unitHeight = 100 / heights.reduce((acc, curr) => acc + curr, 0);\r\n\r\n    const TimelineUnit: React.FC<{ height: number, event: TimelineEvent, position: 'left' | 'right' }> = ({ height, event, position }) => {\r\n        const crossbar = () => <div style={{ backgroundColor: 'black', position: 'relative', top: 0, left: '-10px', width: `${20 + width}px`, height: '1px' }}>\r\n            &nbsp;\r\n            </div>\r\n        return <div style={{ flexBasis: `${height}%`, width: `${width}px`, backgroundColor: 'black' }}>\r\n            <Popup style={{ zIndex: 0 }} trigger={crossbar()} open={true} position={position === 'left' ? 'left center' : 'right center'} pinned wide>\r\n                {event.content}\r\n            </Popup>\r\n            <Popup style={{ border: 'none', boxShadow: 'none', zIndex: 0 }} trigger={crossbar()} open={true} position={position === 'left' ? 'right center' : 'left center'} pinned basic>\r\n                {event.date}\r\n            </Popup>\r\n        </div>\r\n    }\r\n\r\n\r\n    return <div style={{ height: '1000px', alignItems: 'center', display: 'flex', flexDirection: 'column', flexWrap: 'nowrap' }}>\r\n        {heights.map((height, i) => <TimelineUnit height={height * unitHeight} event={orderedEvents[i]} position={i % 2 ? 'left' : 'right'} />)}\r\n    </div>\r\n}","import React from 'react';\r\nimport { ContextMenu } from './ContextMenu';\r\nimport { EditedEvent } from './StoryEvent';\r\n\r\nexport interface StoryContextMenuProps {\r\n    setEditedEvent: (editedEvent: EditedEvent) => unknown;\r\n    onClose: () => unknown;\r\n    event: React.MouseEvent;\r\n}\r\n\r\nexport const StoryContextMenu: React.FC<StoryContextMenuProps> = ({ setEditedEvent, children, onClose, event }) => (\r\n\r\n\r\n    <ContextMenu onClose={onClose} event={event} items={[\r\n        { name: 'insertBefore', content: 'j elem', icon: 'up arrow' },\r\n        { name: 'edit', content: 'Szerkeszt', icon: 'edit' },\r\n        { name: 'delete', content: 'Trl', icon: 'delete' },\r\n        { name: 'insertAfter', content: 'j elem', icon: 'down arrow' },\r\n    ]}\r\n        onClicked={item => {\r\n            setEditedEvent({ operation: item.name as any });\r\n        }}>\r\n        {children}\r\n    </ContextMenu>\r\n);","import { v4 } from 'uuid';\r\nimport { DOMElement, DomUtils } from './DomUtils';\r\n\r\nconst { attr, child, addChild, deleteChild, children, addText, findElementsByName } = DomUtils;\r\n\r\nconst ensureComments = (root: DOMElement) => {\r\n    const story = child(root, 'story');\r\n    if (!story) {\r\n        throw new Error('story is missing');\r\n    }\r\n    return child(story, 'comments') || addChild(story, 'comments');\r\n}\r\n\r\nconst addComment = (event: DOMElement, root: DOMElement, contents: string) => {\r\n    const eventId = ensureEventId(event);\r\n    const comments = ensureComments(root);\r\n    const lastComment = children(comments, 'comment').pop();\r\n    const comment = addChild(comments, 'comment', lastComment);\r\n    attr(comment, 'event', eventId);\r\n    addText(comment, contents);\r\n}\r\n\r\nconst deleteComment = (comment: DOMElement, root: DOMElement) => {\r\n    const comments = ensureComments(root);\r\n    deleteChild(comments, comment);\r\n}\r\n\r\n\r\nconst findComments = (event: DOMElement, root: DOMElement): Array<DOMElement> => {\r\n    const eventId = attr(event, 'id');\r\n    const allComments = findElementsByName(root, 'comment');\r\n    return allComments.filter(c => attr(c, 'event') === eventId);\r\n}\r\n\r\n\r\nconst ensureEventId = (event: DOMElement) => {\r\n    let id = attr(event, 'id') || v4();\r\n    attr(event, 'id', id);\r\n    return id;\r\n\r\n}\r\n\r\nexport class CommentUtils {\r\n    constructor(private readonly root: DOMElement, private readonly event: DOMElement) { }\r\n\r\n    public add = (contents: string) => addComment(this.event, this.root, contents);\r\n    public remove = (comment: DOMElement) => deleteComment(comment, this.root);\r\n    public list = (): Array<DOMElement> => findComments(this.event, this.root);\r\n\r\n}","import React, { useState } from 'react';\r\nimport { Button } from 'semantic-ui-react';\r\nimport { DOMElement, DomUtils } from '../utils/DomUtils';\r\nimport { Renderer } from '../utils/RenderUtils';\r\nimport { StoryEvent } from './StoryEvent';\r\nimport { EventEditorModal } from './EventEditorModal';\r\nimport { Timeline } from './timeline/Timeline';\r\nimport { StoryContextMenu } from './StoryContextMenu';\r\nimport { CommentUtils } from '../utils/CommentUtils';\r\n\r\nconst { attr, children } = DomUtils;\r\n\r\nexport interface EventEditingState {\r\n    insert?: 'after' | 'before',\r\n    anchor?: DOMElement,\r\n    elem: DOMElement\r\n}\r\n\r\n\r\n\r\nexport const StoryScene: React.FC<{ scene: DOMElement, renderer: Renderer, onChange: () => unknown, root: DOMElement }> = ({ scene, renderer, onChange, root }) => {\r\n    const events = children(scene, 'events')[0];\r\n    const [editedEvent, setEditedEvent] = useState<EventEditingState>();\r\n    const [contextMenu, setContextMenu] = useState<{ elem: DOMElement, event: React.MouseEvent }>();\r\n    const [displayMode, setDisplayMode] = useState<'list' | 'timeline'>('list');\r\n\r\n    return <>\r\n        {contextMenu && <StoryContextMenu setEditedEvent={event => {\r\n            if (event.operation === 'insertAfter' || event.operation === 'insertBefore') {\r\n                setEditedEvent({\r\n                    insert: event.operation === 'insertAfter' ? 'after' : 'before', elem: {\r\n                        type: 'element',\r\n                        name: 'event',\r\n                        $parent: contextMenu.elem.$parent\r\n                    }, anchor: contextMenu.elem\r\n                });\r\n            } else if (event.operation === 'delete') {\r\n                DomUtils.deleteChild(contextMenu.elem.$parent, contextMenu.elem);\r\n                onChange();\r\n            } else {\r\n                setEditedEvent({ elem: contextMenu.elem });\r\n            }\r\n        }\r\n        }\r\n            onClose={() => setContextMenu(undefined)}\r\n            event={contextMenu.event}\r\n        />}\r\n        <EventEditorModal\r\n            editedEvent={editedEvent}\r\n            onEditingFinished={() => { setEditedEvent(undefined); onChange(); }}\r\n            root={root}\r\n        />\r\n        <div>\r\n            {displayMode === 'list' && events?.elements?.map(e => <StoryEvent\r\n                event={e}\r\n                renderer={renderer}\r\n                onContextMenu={event => setContextMenu({ elem: e, event })}\r\n                onEdit={() => setEditedEvent({ elem: e })}\r\n                onClick={() => {\r\n                    const status = attr(e, 'status');\r\n                    attr(e, 'status', status ? null : 'completed');\r\n                    onChange();\r\n                }}\r\n                commentUtils={new CommentUtils(root, e)}\r\n                onChange={onChange}\r\n            />)}\r\n            {displayMode === 'timeline' && <Timeline width={5} events={events?.elements?.filter(e => attr(e, 'date') !== '').map(e => ({ date: Number(attr(e, 'date')), content: <>{renderer.renderElement(e)}</> })) ?? []} />}\r\n\r\n            <div style={{ backgroundColor: 'gainsboro' }}>\r\n                <Button icon='plus' onClick={() => {\r\n                    setEditedEvent({\r\n                        insert: 'after',\r\n                        elem: {\r\n                            type: 'element',\r\n                            name: 'event',\r\n                            $parent: events\r\n                        }\r\n                    });\r\n\r\n                }} content='j elem' />\r\n                {displayMode === 'list' && <Button icon='calendar' onClick={() => setDisplayMode('timeline')} content='Idvonal' />}\r\n                {displayMode === 'timeline' && <Button icon='list' onClick={() => setDisplayMode('list')} content='Lista' />}\r\n            </div>\r\n        </div>\r\n\r\n    </>\r\n}\r\n\r\n","import fileDownload from 'js-file-download';\r\nimport React, { useState } from 'react';\r\nimport { Button, Header, Icon, Menu, Tab } from 'semantic-ui-react';\r\nimport { v4 } from 'uuid';\r\nimport { EditableText } from '../components/EditableText';\r\nimport { SceneListContextMenu } from '../components/SceneListContextMenu';\r\nimport { StoryScene } from '../components/StoryScene';\r\nimport { DOMElement, DomUtils } from '../utils/DomUtils';\r\nimport { RenderUtils } from '../utils/RenderUtils';\r\n\r\nconst { attr, findElementsByName, parse, print, convertLegacyLinks } = DomUtils;\r\n\r\nexport const StoryPage: React.FC<{ story: string, saveStory: (story: string) => unknown }> = ({ story, saveStory }) => {\r\n    const [activeScene, setActiveScene] = useState<string>();\r\n    const storyOb = parse(story);\r\n    convertLegacyLinks(storyOb);\r\n    const scenes = findElementsByName(storyOb, 'scene');\r\n    const findSceneById = (id?: string) => {\r\n        return scenes.findIndex(s => attr(s, 'id') === id);\r\n    }\r\n\r\n    const save = () => {\r\n        saveStory(print(storyOb))\r\n    }\r\n\r\n    const renderer = RenderUtils.createRenderer(storyOb, id => setActiveScene(id));\r\n    const sceneTabs = scenes.map(s => {\r\n        return {\r\n            menuItem: <Menu.Item key={attr(s, 'id')}><SceneListContextMenu onSelected={item => {\r\n                if (item === 'delete') {\r\n                    DomUtils.deleteChild(s.$parent, s);\r\n                } else {\r\n                    const scene = DomUtils.addChild(s.$parent, 'scene', s, item === 'insertAfter' ? 'after' : 'before');\r\n                    DomUtils.attr(scene, 'id', v4());\r\n                    DomUtils.attr(scene, 'title', 'j jelenet');\r\n                    DomUtils.addChild(scene, 'events');\r\n                    setTimeout(() => setActiveScene(DomUtils.attr(scene, 'id')), 0); //workaround for Tab overwriting activeIndex straight away\r\n                }\r\n                save();\r\n            }}>\r\n                {activeScene === DomUtils.attr(s, 'id') ? <EditableText text={attr(s, 'title')} onChange={title => {\r\n                    DomUtils.attr(s, 'title', title);\r\n                    save();\r\n                }} /> : attr(s, 'title')}\r\n            </SceneListContextMenu></Menu.Item>,\r\n            render: () => <Tab.Pane>\r\n                <StoryScene\r\n                    scene={s}\r\n                    renderer={renderer}\r\n                    onChange={save}\r\n                    root={storyOb} />\r\n            </Tab.Pane>\r\n        }\r\n    });\r\n    sceneTabs.push({\r\n        menuItem: <Menu.Item key='__add'><Icon name='plus' onClick={() => {\r\n            const story: DOMElement = DomUtils.child(storyOb, 'story') as DOMElement;\r\n            const scene = DomUtils.addChild(story, 'scene', undefined, 'after');\r\n            DomUtils.attr(scene, 'id', v4());\r\n            DomUtils.attr(scene, 'title', 'j jelenet');\r\n            DomUtils.addChild(scene, 'events');\r\n            setTimeout(() => setActiveScene(DomUtils.attr(scene, 'id')), 0); //workaround for Tab overwriting activeIndex straight away\r\n            save();\r\n\r\n        }} /></Menu.Item>,\r\n        render: () => {\r\n            return <></>;\r\n        }\r\n    })\r\n\r\n    return <>\r\n        <Button onClick={() => fileDownload(story, 'mese.xml', 'application/xml')} color='green' circular>Export</Button>\r\n        <Button onClick={() => {\r\n            const characters = DomUtils.findElementsByName(storyOb, 'characters')[0];\r\n            const character = DomUtils.addChild(characters, 'character');\r\n            DomUtils.attr(character, 'id', v4());\r\n            DomUtils.addChild(character, 'name');\r\n            DomUtils.addChild(character, 'race');\r\n            DomUtils.addChild(character, 'alignment');\r\n            DomUtils.addChild(character, 'class');\r\n            DomUtils.addChild(character, 'origin');\r\n            DomUtils.addChild(character, 'language');\r\n            DomUtils.addChild(character, 'looks');\r\n            DomUtils.addChild(character, 'behaviour');\r\n            DomUtils.addChild(character, 'loot');\r\n\r\n            save();\r\n\r\n        }} color='green' circular>j szerepl</Button>\r\n        <Button onClick={() => {\r\n            const items = DomUtils.findElementsByName(storyOb, 'items')[0];\r\n            const item = DomUtils.addChild(items, 'item');\r\n            DomUtils.attr(item, 'id', v4());\r\n            DomUtils.addChild(item, 'name');\r\n            DomUtils.addChild(item, 'value');\r\n            DomUtils.addChild(item, 'description');\r\n\r\n            save();\r\n\r\n        }} color='green' circular>j trgy</Button>\r\n        <Tab activeIndex={findSceneById(activeScene)} onTabChange={(e, { activeIndex }) => activeIndex as number < scenes.length && setActiveScene(DomUtils.attr(scenes[activeIndex as number], 'id'))} panes={sceneTabs} />\r\n\r\n        <>\r\n            <Header as='h1'>Szereplk</Header>\r\n            {renderer.renderCards('character', save)}\r\n        </>\r\n        <>\r\n            <Header as='h1'>Trgyak</Header>\r\n            {renderer.renderCards('item', save)}\r\n        </>\r\n    </>;\r\n}","import React, { useCallback, useState } from 'react';\nimport { KarakterAlkotas } from './pages/KarakterAlkotas';\nimport { Karakterlap } from './pages/Karakterlap';\nimport { useDataConnector } from './hooks/dataconnector';\nimport { Karakter, KarakterInfo } from './engine/karakter';\nimport 'semantic-ui-css/semantic.min.css'\nimport { PageHeader } from './components/PageHeader';\nimport { Kombat } from './pages/Kombat';\nimport { StoryPage } from './story/pages/StoryPage';\n\nexport type PageSelection = { page: 'karakteralkoto' | 'home' } | { page: 'karakterlap', karakter: KarakterInfo } | { page: 'kombat', category: string } | { page: 'story' }\n\n\nfunction App() {\n\n  const [page, setPage] = useState<PageSelection>({ page: 'home' });\n  const { save, list, categories, load, remove, listFajok, listFegyverek, saveFegyverek, loadStory, saveStory, listPancelok, savePancelok, clone } = useDataConnector();\n  const [currentCategory, setCurrentCategory] = useState('');\n\n  const saveKarakter = useCallback((karakter: Karakter) => {\n    save(karakter);\n    setPage({ page: 'karakterlap', karakter });\n  }, [save, setPage]);\n\n  const removeKarakter = useCallback((karakter: Karakter) => {\n    if (karakter) {\n      remove(karakter);\n      setPage({ page: 'home' });\n    }\n  }, [setPage, remove]);\n\n  const renderPage = () => {\n    switch (page.page) {\n      case 'home': return <div>vakodj a rotoni lomhatasaktl</div>\n      case 'kombat': return <Kombat karakterek={list(page.category).map(i => load(i))} save={save} />\n      case 'karakteralkoto': return <KarakterAlkotas save={saveKarakter} fajok={listFajok()} />\n      case 'story': return <StoryPage story={loadStory()} saveStory={saveStory} />;\n      case 'karakterlap': return <Karakterlap clone={clone} pancelok={listPancelok()} savePancelok={savePancelok} saveFegyverek={saveFegyverek} fegyverek={listFegyverek()} categories={categories()} karakter={load(page.karakter)} save={saveKarakter} remove={() => removeKarakter(page.karakter as Karakter)} />\n    }\n  };\n\n\n\n  return (\n    <div className=\"App\">\n      <PageHeader\n        categories={categories()}\n        currentCategory={currentCategory}\n        setCurrentCategory={setCurrentCategory}\n        karakter={page.page === 'karakterlap' ? page.karakter : undefined}\n        page={page}\n        setPage={ps => {\n          setPage(ps);\n          if (ps.page === 'kombat') {\n            setCurrentCategory(ps.category);\n          }\n        }}\n        save={saveKarakter}\n        karakterek={list(currentCategory)}\n        saveMese={saveStory}\n      />\n      {renderPage()}\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}